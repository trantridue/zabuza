<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project activeEnvironment="Default" name="ApplicationWatcher-QUALIF" soapui-version="5.2.1" abortOnError="false" runType="SEQUENTIAL" resourceRoot="${projectDir}" id="da507b32-99aa-4320-8378-15f08937d27d" lastOpened="2016-05-19T16:25:45.440+07:00" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" id="7e6e5eed-8312-457d-a044-67c9affd1261" wadlVersion="http://wadl.dev.java.net/2009/02" name="/default/draft" type="rest" basePath="/opale-api-1.2.x" definitionUrl="http://10.100.109.4:8080/opale-api-1.2.x/api-docs" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://10.100.109.4:8080</con:endpoint></con:endpoints><con:resource name="/draft/contrat/{refContrat}" path="/draft/contrat/{refContrat}" id="a0ad963c-41ae-491e-86bb-a428ab8163dc"><con:description>transformerContratEnDraft</con:description><con:settings/><con:parameters/><con:method name="transformerContratEnDraft" id="e2ae92cf-aa72-48e7-9ef4-c31f84f0e24d" method="POST"><con:description>transformerContratEnDraft</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refContrat</con:name><con:style>TEMPLATE</con:style><con:description>refContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="59b92021-b388-4ba8-bce2-4036c1b2b5d5" mediaType="application/json" postQueryString="false"><con:settings/><con:request/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="/draft/creerDraftPourRenouvellement" path="/draft/creerDraftPourRenouvellement" id="d01a55e3-e4e1-43d8-b1f1-853348cb3188"><con:description>creerDraftPourRenouvellement</con:description><con:settings/><con:parameters/><con:method name="creerDraftPourRenouvellement" id="d56872d8-9427-44c3-81ef-c8ba947f3537" method="POST"><con:description>creerDraftPourRenouvellement</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="193788a1-24f4-4771-9c9b-16e4cbf47625" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/draft/draft" path="/draft/draft" id="71034312-3bb0-4d67-9b67-4abe3db270da"><con:description>creerDraft</con:description><con:settings/><con:parameters/><con:method name="creerDraft" id="9faa37cf-2c3a-4512-ae5d-5b74d43129f9" method="POST"><con:description>creerDraft</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>404</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:draf="http://10.100.109.4/opale-api-1.2.x/draft/draft">draf:Fault</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="45763f2b-f4d9-485a-8809-b82a19a841fb" mediaType="application/json" postQueryString="false"><con:settings/><con:request/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="/draft/draft/{referenceDraft}" path="/draft/draft/{referenceDraft}" id="9f98ce8e-a53f-4454-88f4-8fbf70a420c4"><con:description>ajouterReferenceExterne</con:description><con:settings/><con:parameters/><con:method name="ajouterReferenceExterne" id="ab851452-a66d-414c-a1dc-20064baadcfb" method="POST"><con:description>ajouterReferenceExterne</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceDraft</con:name><con:style>TEMPLATE</con:style><con:description>referenceDraft</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="11dea352-5a59-4237-a42e-d3804a3be874" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/draft/{refDraft}/associerAuteur" path="/draft/{refDraft}/associerAuteur" id="baa16b76-f06b-46f2-a6e8-ea0b505f9655"><con:description>associerAuteur</con:description><con:settings/><con:parameters/><con:method name="associerAuteur" id="4e0748da-120d-48df-9b92-2cee441ebb98" method="POST"><con:description>associerAuteur</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refDraft</con:name><con:style>TEMPLATE</con:style><con:description>refDraft</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="57229c84-029d-4ae8-9e2e-50babc0df62a" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/draft/{refDraft}/associerClient" path="/draft/{refDraft}/associerClient" id="08db6c67-5680-47fb-bd33-70f8432a1fec"><con:description>associerClient</con:description><con:settings/><con:parameters/><con:method name="associerClient" id="4d3ef0c9-7213-464d-84a6-cd8715877812" method="POST"><con:description>associerClient</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refDraft</con:name><con:style>TEMPLATE</con:style><con:description>refDraft</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:ass="http://10.100.109.4/opale-api-1.2.x/draft/d87311db-3094-47a2-b00c-b47cdd853ea9/associerClient">ass:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="2294cf00-db69-4db7-a624-2bc878878359" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/draft/{refDraft}/associerCodePartenaire" path="/draft/{refDraft}/associerCodePartenaire" id="060a2cfe-133b-4208-88e6-1c3b47da7f3f"><con:description>associerCodePartenaire</con:description><con:settings/><con:parameters/><con:method name="associerCodePartenaire" id="9a61ce00-c387-45b9-a47e-a7dc0e624fba" method="POST"><con:description>associerCodePartenaire</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refDraft</con:name><con:style>TEMPLATE</con:style><con:description>refDraft</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="462f9af9-c297-4d0d-a3c4-ee149fe6b5a1" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/draft/{refDraft}/associerReduction" path="/draft/{refDraft}/associerReduction" id="1e42de11-c84f-4e17-b603-64957b28d893"><con:description>associerReduction</con:description><con:settings/><con:parameters/><con:method name="associerReduction" id="fae28831-390f-45de-876d-1b52a025f992" method="POST"><con:description>associerReduction</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refDraft</con:name><con:style>TEMPLATE</con:style><con:description>refDraft</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="a15d43e2-92b7-48c6-9b9e-e68e0083c64c" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/draft/{refDraft}/costCalculation" path="/draft/{refDraft}/costCalculation" id="51ff9046-7de1-4d2c-9c09-03f9fea2e055"><con:description>calculerCout</con:description><con:settings/><con:parameters/><con:method name="calculerCout" id="25e5802b-ad6b-4356-9766-182a14789e5b" method="POST"><con:description>calculerCout</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refDraft</con:name><con:style>TEMPLATE</con:style><con:description>refDraft</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="1dde915e-49e9-44e7-ab71-824265a9bf5a" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/draft/{refDraft}/ligne/{refLigne}/associerGeste" path="/draft/{refDraft}/ligne/{refLigne}/associerGeste" id="672765d4-f547-48ba-9d93-e3f1702cdcc3"><con:description>associerGeste</con:description><con:settings/><con:parameters/><con:method name="associerGeste" id="979163b6-4350-4cee-aacc-a83193c1c433" method="POST"><con:description>associerGeste</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refDraft</con:name><con:style>TEMPLATE</con:style><con:description>refDraft</con:description></con:parameter><con:parameter required="true"><con:name>refLigne</con:name><con:style>TEMPLATE</con:style><con:description>refLigne</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="d8ed2528-d379-496d-aab3-6d6bddfa063a" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/draft/{refDraft}/ligne/{refLigne}/associerReduction" path="/draft/{refDraft}/ligne/{refLigne}/associerReduction" id="8c735756-283e-40df-8f8f-292ee45da551"><con:description>associerReductionLigne</con:description><con:settings/><con:parameters/><con:method name="associerReductionLigne" id="b45d15df-fe0f-4b60-a887-a0535f9aa130" method="POST"><con:description>associerReductionLigne</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refDraft</con:name><con:style>TEMPLATE</con:style><con:description>refDraft</con:description></con:parameter><con:parameter required="true"><con:name>refLigne</con:name><con:style>TEMPLATE</con:style><con:description>refLigne</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="3ea26430-5ba4-4619-abcd-7ab79679f676" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/draft/{refDraft}/ligne/{refLigne}/detail/{refProduit}/associerReduction" path="/draft/{refDraft}/ligne/{refLigne}/detail/{refProduit}/associerReduction" id="34f0201b-b168-46b6-8148-c3ef549cb1b9"><con:description>associerReductionDetailLigne</con:description><con:settings/><con:parameters/><con:method name="associerReductionDetailLigne" id="f14b8f3f-06e2-4c91-8ce8-72f2f165a7fe" method="POST"><con:description>associerReductionDetailLigne</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refDraft</con:name><con:style>TEMPLATE</con:style><con:description>refDraft</con:description></con:parameter><con:parameter required="true"><con:name>refLigne</con:name><con:style>TEMPLATE</con:style><con:description>refLigne</con:description></con:parameter><con:parameter required="true"><con:name>refProduit</con:name><con:style>TEMPLATE</con:style><con:description>refProduit</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="f053f64c-7ab9-4ea0-9c9e-95ffeff8c102" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/draft/{refDraft}/ligne/{refLigne}/detail/{refProduit}/frais/{refFrais}/associerReduction" path="/draft/{refDraft}/ligne/{refLigne}/detail/{refProduit}/frais/{refFrais}/associerReduction" id="8bf7fea2-53bb-4c36-9949-9988737beb0e"><con:description>associerReductionFraisLigneDetaille</con:description><con:settings/><con:parameters/><con:method name="associerReductionFraisLigneDetaille" id="24d097a0-9361-4cbb-959e-6f6fcd1d403b" method="POST"><con:description>associerReductionFraisLigneDetaille</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refDraft</con:name><con:style>TEMPLATE</con:style><con:description>refDraft</con:description></con:parameter><con:parameter required="true"><con:name>refLigne</con:name><con:style>TEMPLATE</con:style><con:description>refLigne</con:description></con:parameter><con:parameter required="true"><con:name>refProduit</con:name><con:style>TEMPLATE</con:style><con:description>refProduit</con:description></con:parameter><con:parameter required="true"><con:name>refFrais</con:name><con:style>TEMPLATE</con:style><con:description>refFrais</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="25edea25-1471-4f8b-84ca-8b29a46f170c" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/draft/{refDraft}/ligne/{refLigne}/frais/{refFrais}/associerReduction" path="/draft/{refDraft}/ligne/{refLigne}/frais/{refFrais}/associerReduction" id="51ab5311-2f09-4ddc-8f24-29fca7d1a3c0"><con:description>associerReductionFraisLigne</con:description><con:settings/><con:parameters/><con:method name="associerReductionFraisLigne" id="e5b0ac32-db6e-437d-aa19-9509658520a5" method="POST"><con:description>associerReductionFraisLigne</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refDraft</con:name><con:style>TEMPLATE</con:style><con:description>refDraft</con:description></con:parameter><con:parameter required="true"><con:name>refLigne</con:name><con:style>TEMPLATE</con:style><con:description>refLigne</con:description></con:parameter><con:parameter required="true"><con:name>refFrais</con:name><con:style>TEMPLATE</con:style><con:description>refFrais</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="912abaf7-5402-4b0f-b1ba-4610e7133e39" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/draft/{refDraft}/ligne/{refLigne}/supprimer" path="/draft/{refDraft}/ligne/{refLigne}/supprimer" id="8089a875-af70-480d-a193-e997a6b63939"><con:description>supprimerLigneDraft</con:description><con:settings/><con:parameters/><con:method name="supprimerLigneDraft" id="6258cb18-d46c-4c71-bcab-3859132a9bd9" method="POST"><con:description>supprimerLigneDraft</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refDraft</con:name><con:style>TEMPLATE</con:style><con:description>refDraft</con:description></con:parameter><con:parameter required="true"><con:name>refLigne</con:name><con:style>TEMPLATE</con:style><con:description>refLigne</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="85b50cba-2399-48d1-b907-17c94e95e0d7" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/draft/{refDraft}/ligne/{refLigne}/tarif/{refTarif}/associerReduction" path="/draft/{refDraft}/ligne/{refLigne}/tarif/{refTarif}/associerReduction" id="d021a892-81b2-48a6-bc64-10701207c177"><con:description>associerReductionTarifOffre</con:description><con:settings/><con:parameters/><con:method name="associerReductionTarifOffre" id="6abcf016-6248-4d48-bee7-3a39ec9a3692" method="POST"><con:description>associerReductionTarifOffre</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refDraft</con:name><con:style>TEMPLATE</con:style><con:description>refDraft</con:description></con:parameter><con:parameter required="true"><con:name>refLigne</con:name><con:style>TEMPLATE</con:style><con:description>refLigne</con:description></con:parameter><con:parameter required="true"><con:name>refTarif</con:name><con:style>TEMPLATE</con:style><con:description>refTarif</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="05bece9c-95a0-4045-a87b-6fa5b6c18c7b" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/draft/{refDraft}/reduction/{refReduction}/supprimer" path="/draft/{refDraft}/reduction/{refReduction}/supprimer" id="18a8c440-ab8f-466f-82db-f222580e39e8"><con:description>supprimerReduction</con:description><con:settings/><con:parameters/><con:method name="supprimerReduction" id="24ad3a18-bc8d-4931-a360-922a72efb7c4" method="POST"><con:description>supprimerReduction</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refDraft</con:name><con:style>TEMPLATE</con:style><con:description>refDraft</con:description></con:parameter><con:parameter required="true"><con:name>refReduction</con:name><con:style>TEMPLATE</con:style><con:description>refReduction</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="447aa1bf-5cd7-45eb-a7b9-b7ab19bfce5c" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/draft/{refDraft}/transformerEnCommande" path="/draft/{refDraft}/transformerEnCommande" id="439ed76f-2daf-402e-9654-16480b00d4e1"><con:description>transformerEnCommande</con:description><con:settings/><con:parameters/><con:method name="transformerEnCommande" id="02c2115d-9bbe-4c72-a338-43621e545468" method="POST"><con:description>transformerEnCommande</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refDraft</con:name><con:style>TEMPLATE</con:style><con:description>refDraft</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>400 500</con:status><con:params/><con:element xmlns:tran="http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande">tran:Fault</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>405 404</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="f813749e-e670-4c30-8fd0-d0e445dc9a04" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/draft/{refDraft}/valider" path="/draft/{refDraft}/valider" id="de6beebd-0062-42a6-a2bb-0490ec4d2afb"><con:description>validerDraft</con:description><con:settings/><con:parameters/><con:method name="validerDraft" id="604eca65-217b-4d62-8523-64ee18705802" method="POST"><con:description>validerDraft</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refDraft</con:name><con:style>TEMPLATE</con:style><con:description>refDraft</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="68c8a64d-9154-42be-8284-ea3ed1030d89" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/draft/{referenceDraft}/ligne/{referenceLigne}" path="/draft/{referenceDraft}/ligne/{referenceLigne}" id="f5b10cdc-1b1a-4da5-964d-44996d1a7d9b"><con:description>modifierLigne</con:description><con:settings/><con:parameters/><con:method name="modifierLigne" id="e545764b-9fb2-466c-b4ba-5372581ba103" method="POST"><con:description>modifierLigne</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceDraft</con:name><con:style>TEMPLATE</con:style><con:description>referenceDraft</con:description></con:parameter><con:parameter required="true"><con:name>referenceLigne</con:name><con:style>TEMPLATE</con:style><con:description>referenceLigne</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="12e1d4ce-2587-41c6-9be1-471ef6226647" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/draft/{referenceDraft}/supprimer" path="/draft/{referenceDraft}/supprimer" id="e5780daa-bfb4-4abb-a0fd-fc962dd08364"><con:description>supprimerDraft</con:description><con:settings/><con:parameters/><con:method name="supprimerDraft" id="a5b38661-f984-45bd-92b6-81e239ab5949" method="POST"><con:description>supprimerDraft</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceDraft</con:name><con:style>TEMPLATE</con:style><con:description>referenceDraft</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="ac612377-b40f-449e-92e6-e510d34c7b87" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/draft/{reference}" path="/draft/{reference}" id="2c41f209-d533-421f-b907-15a14312a643"><con:description>getDraftByReference</con:description><con:settings/><con:parameters/><con:method name="getDraftByReference" id="3c6747bd-a81d-497b-9544-e7c7afcd0296" method="GET"><con:description>getDraftByReference</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>reference</con:name><con:style>TEMPLATE</con:style><con:description>reference</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="5d9aa561-a1a6-453d-b69a-2d963bce6826" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/draft/{reference}/ligne" path="/draft/{reference}/ligne" id="76323a7f-f2d1-4e7d-8404-7b6e85fb066e"><con:description>ajouterLignes</con:description><con:settings/><con:parameters/><con:method name="ajouterLignes" id="72af382d-40c7-4f74-994d-051d48e201e6" method="POST"><con:description>ajouterLignes</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>reference</con:name><con:style>TEMPLATE</con:style><con:description>reference</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:lig="http://10.100.109.4/opale-api-1.2.x/draft/3a082c18-7965-4bfe-97a0-ed81c3ff83ac/ligne">lig:Fault</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>405</con:status><con:params/><con:element>html</con:element></con:representation><con:request name="Request 1" id="7a753318-f04e-4af4-8584-6bb76e342b31" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="b9705194-740c-41fc-8945-40b8344d5bf9" wadlVersion="http://wadl.dev.java.net/2009/02" name="/default/finder" type="rest" basePath="/opale-finder-1.2.x" definitionUrl="http://10.100.109.4:8080/opale-finder-1.2.x/api-docs" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://10.100.109.4:8080</con:endpoint></con:endpoints><con:resource name="/Commande/client/{idClient}" path="/Commande/client/{idClient}" id="d0b59fbe-a01f-409e-8380-872598cbcd1a"><con:description>findByIdClient</con:description><con:settings/><con:parameters><con:parameter><con:name>idClient</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/></con:parameter></con:parameters><con:method name="findByIdClient" id="00c8b7e0-394e-4464-8c0d-08276667d9fb" method="GET"><con:description>findByIdClient</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>idClient</con:name><con:style>TEMPLATE</con:style><con:description>idClient</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="e707573e-305f-420c-8ce2-e2b8e85e5bea" mediaType="application/json"><con:settings/><con:request/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="/Commande/commande/{refCommande}" path="/Commande/commande/{refCommande}" id="2381fd0c-0b94-440f-a9cb-29d9ada79835"><con:description>findByReferenceCommande</con:description><con:settings/><con:parameters/><con:method name="findByReferenceCommande" id="819ff1e6-cb11-4906-9512-ed54506529b9" method="GET"><con:description>findByReferenceCommande</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="c6ac2f41-b5d9-4ae6-a6c5-27697f44dad0" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/Commande/mandat/{rum}" path="/Commande/mandat/{rum}" id="ec8cddc5-06ed-426b-9b18-f56c4433fd54"><con:description>findByMandat</con:description><con:settings/><con:parameters/><con:method name="findByMandat" id="25fba3a9-1ca9-4c95-b79b-a8c3bb90cbd1" method="GET"><con:description>findByMandat</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>rum</con:name><con:style>TEMPLATE</con:style><con:description>rum</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="ba8d14cf-2a4f-4c9f-b9d9-101fae0ddb9e" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/Commande/{refCommande}/parametre" path="/Commande/{refCommande}/parametre" id="a14d26b3-4616-445c-8d8f-f8312fcda390"><con:description>findCommandeParameters</con:description><con:settings/><con:parameters/><con:method name="findCommandeParameters" id="1ed27aa8-7732-4a0e-884b-4b79129c72db" method="GET"><con:description>findCommandeParameters</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:par="http://10.100.109.4/opale-finder-1.1.x/Commande/4bb19bef-1753-4842-ba5e-962cb1c48c92/parametre">par:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>404</con:status><con:params/><con:element>html</con:element></con:representation><con:request name="Request 1" id="30be1b4c-ea9f-433b-b8bf-d6a640f86b12" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/Commande/{refCommande}/documentAssociation" path="/Commande/{refCommande}/documentAssociation" id="e9af38fb-b1f1-479f-8264-3dfb2aa48c58"><con:settings/><con:parameters/><con:method name="findCommandeDocumentAssociations" id="fded2e6b-36b8-4d76-83ff-2a159fad458f" method="GET"><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="216480eb-f429-433e-8752-fd248db0ba7f" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="/Commande/application.wadl" path="/Commande/application.wadl" id="de3aec93-b751-4ba4-916f-ab174cacdd8e"><con:settings/><con:parameters/><con:method name="generateWadl" id="5422e674-3138-4aac-bbd3-3f8704ff8403" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="405648dc-a7cd-4831-a8fd-99d104b4a8a5" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="5facd27f-35db-4754-9483-c985f044f016" wadlVersion="http://wadl.dev.java.net/2009/02" name="/default/admin" type="rest" basePath="/contrat-core-1.1.x" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://10.100.109.4:8080</con:endpoint></con:endpoints><con:resource name="/admin/version" path="/admin/version" id="43df1078-92a5-4ce3-a1c6-3efdae9ee3cf"><con:description>getVersion</con:description><con:settings/><con:parameters/><con:method name="getVersion" id="51bc104e-c9d2-447e-9e31-95f6b91eeec1" method="GET"><con:description>getVersion</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="ab76f2a0-7a91-4261-a571-4b7e96dce0eb" mediaType="application/json"><con:settings/><con:request/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="6b3c3a1b-7cdb-4898-b55c-aeda17112504" wadlVersion="http://wadl.dev.java.net/2009/02" name="/default/contrat" type="rest" basePath="/contrat-core-1.2.x" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://10.100.109.4:8080</con:endpoint></con:endpoints><con:resource name="/contrat/contrats/{idClient}/{refAdrFacturation}/{modePaiement}/{rum}" path="/contrat/contrats/{idClient}/{refAdrFacturation}/{modePaiement}/{rum}" id="6a51f6eb-9110-44da-b359-7991c55e022c"><con:description>completerInformationsTousLesContratsCompozDunClient</con:description><con:settings/><con:parameters><con:parameter><con:name>idClient</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/></con:parameter><con:parameter><con:name>refAdrFacturation</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/></con:parameter><con:parameter><con:name>modePaiement</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/></con:parameter><con:parameter><con:name>rum</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/></con:parameter></con:parameters><con:method name="completerInformationsTousLesContratsCompozDunClient" id="80b25121-d5da-4782-9999-a1f85346b45e" method="PUT"><con:description>completerInformationsTousLesContratsCompozDunClient</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>idClient</con:name><con:style>TEMPLATE</con:style><con:description>idClient</con:description></con:parameter><con:parameter required="true"><con:name>refAdrFacturation</con:name><con:style>TEMPLATE</con:style><con:description>refAdrFacturation</con:description></con:parameter><con:parameter required="true"><con:name>modePaiement</con:name><con:style>TEMPLATE</con:style><con:description>modePaiement</con:description></con:parameter><con:parameter required="true"><con:name>rum</con:name><con:style>TEMPLATE</con:style><con:description>rum</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="41434a7e-94ec-4fbd-ab75-2da2338b8c06" mediaType="application/json" postQueryString="false"><con:settings/><con:request/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/preparer" path="/contrat/preparer" id="e30368d2-3f77-499f-88ed-a8eb36ec8657"><con:description>preparerContrat</con:description><con:settings/><con:parameters/><con:method name="preparerContrat" id="838524f9-a586-477d-a97f-63780b79fafa" method="POST"><con:description>preparerContrat</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>400 500</con:status><con:params/><con:element xmlns:prep="http://10.100.109.4/contrat-core-1.1.x/contrat/preparer">prep:Fault</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="1fc69228-ad1d-4e2f-b4b3-a5692dcd640c" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/search/globalValider" path="/contrat/search/globalValider" id="eb3796ed-b44b-48bf-9b90-b89f202642c7"><con:description>findContratGlobalValider</con:description><con:settings/><con:parameters/><con:method name="findContratGlobalValider" id="f001d2da-ea65-4b16-8a38-9b976fafa10f" method="GET"><con:description>findContratGlobalValider</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="a62f9943-daec-448b-89ce-1c4015e512c5" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/search/globalValider/reference" path="/contrat/search/globalValider/reference" id="ff7a02da-72a5-48c2-bd49-e64af3a9f3c1"><con:description>getReferencesContratsGlobalValider</con:description><con:settings/><con:parameters/><con:method name="getReferencesContratsGlobalValider" id="a0e6d7e6-754d-4038-895a-5797399cd87d" method="GET"><con:description>getReferencesContratsGlobalValider</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="4aec11f0-2aa8-42b2-83ea-a1254656b1b8" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{refContrat}/{refAdrFacturation}/{modePaiement}/{rum}" path="/contrat/{refContrat}/{refAdrFacturation}/{modePaiement}/{rum}" id="6aeab121-7814-4039-ac9c-c67076404359"><con:description>completerInformationsContratLight</con:description><con:settings/><con:parameters/><con:method name="completerInformationsContratLight" id="be099220-a1cb-4e08-854a-b7a90049fda8" method="PUT"><con:description>completerInformationsContratLight</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refContrat</con:name><con:style>TEMPLATE</con:style><con:description>refContrat</con:description></con:parameter><con:parameter required="true"><con:name>refAdrFacturation</con:name><con:style>TEMPLATE</con:style><con:description>refAdrFacturation</con:description></con:parameter><con:parameter required="true"><con:name>modePaiement</con:name><con:style>TEMPLATE</con:style><con:description>modePaiement</con:description></con:parameter><con:parameter required="true"><con:name>rum</con:name><con:style>TEMPLATE</con:style><con:description>rum</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="2705f4be-dba1-48b6-98b8-25d9b96bb3f8" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{refOffre}/{idClient}" path="/contrat/{refOffre}/{idClient}" id="1f036427-3cf5-4a91-9b3a-7db6d76a2a7e"><con:description>creerContratLight</con:description><con:settings/><con:parameters/><con:method name="creerContratLight" id="89815453-42c8-4465-bf84-0256530a4286" method="POST"><con:description>creerContratLight</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refOffre</con:name><con:style>TEMPLATE</con:style><con:description>refOffre</con:description></con:parameter><con:parameter required="true"><con:name>idClient</con:name><con:style>TEMPLATE</con:style><con:description>idClient</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="9bd4b5d4-d97d-4c62-91f5-86dcb0248ddb" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}" path="/contrat/{referenceContrat}" id="45359e27-dd9c-4d06-a213-4c44f89c1dd0"><con:description>getContratByReference</con:description><con:settings/><con:parameters><con:parameter><con:name>referenceContrat</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/></con:parameter></con:parameters><con:method name="getContratByReference" id="d2c117ce-89e5-477a-8db9-2b13cc7483e9" method="GET"><con:description>getContratByReference</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>The Id of the product to be viewed</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>404</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="eaf5b1b1-0abc-4297-8b4a-881ce6c43290" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/contrat-core-1.1.x/contrat/54881a48-6d6d-4649-9800-aee05fcafb5e</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="referenceContrat" value="842b9644-416f-48be-b185-d6eb08e2574b" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/adresse/" path="/contrat/{referenceContrat}/adresse/" id="2dab1f82-f05b-435d-a62d-14585777bcbf"><con:description>changerAdresseFacturation</con:description><con:settings/><con:parameters/><con:method name="changerAdresseFacturation" id="d1d4a9a4-0bf2-43ba-8bab-3ef8d3c6014e" method="POST"><con:description>changerAdresseFacturation</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="eb8aeca2-30fe-4668-9e12-32b6143dc205" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/changerDateDebutFacturation" path="/contrat/{referenceContrat}/changerDateDebutFacturation" id="199e5c5e-8dfd-44f9-812e-a1894e7321e9"><con:description>changerDateDebutFacturation</con:description><con:settings/><con:parameters/><con:method name="changerDateDebutFacturation" id="641363d3-2c59-49ca-8bd6-0b4d46edae6b" method="POST"><con:description>changerDateDebutFacturation</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="814a00ba-480d-4d7a-9d8e-f5f6c3c8cebf" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/changerDateDebutGrace" path="/contrat/{referenceContrat}/changerDateDebutGrace" id="d392c77e-96a5-4af9-a07b-be46813bccb3"><con:description>changerDateDebutGrace</con:description><con:settings/><con:parameters/><con:method name="changerDateDebutGrace" id="0eb504a7-cf47-46cf-ba2d-e0f92f40e580" method="POST"><con:description>changerDateDebutGrace</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="e2ae8db2-21c6-4ce7-a171-8a3b655f924a" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/changerDateFinGrace" path="/contrat/{referenceContrat}/changerDateFinGrace" id="c213d96c-6c95-4681-94ac-003cad278ad6"><con:description>changerDateFinGrace</con:description><con:settings/><con:parameters/><con:method name="changerDateFinGrace" id="95a119a5-1dd2-4362-8b39-899b78562f7d" method="POST"><con:description>changerDateFinGrace</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="438edfce-dc75-4bfc-98b7-3137c84020b5" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/changerMoyenDePaiement" path="/contrat/{referenceContrat}/changerMoyenDePaiement" id="dcd946aa-b5ba-4dba-b45f-260061fd8eec"><con:description>changerMoyenDePaiement</con:description><con:settings/><con:parameters/><con:method name="changerMoyenDePaiement" id="468f60dc-742d-4428-82b5-f7c4ba825d19" method="POST"><con:description>changerMoyenDePaiement</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="aa88c6a8-a1fa-4d16-9075-5a5c979ac60e" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/commentaire/" path="/contrat/{referenceContrat}/commentaire/" id="f8d8149c-5063-4d63-b8eb-608f7608061e"><con:description>ajouterCommentaire</con:description><con:settings/><con:parameters/><con:method name="ajouterCommentaire" id="e84d4e4b-ab57-476d-b1d4-fc65e1aa9109" method="POST"><con:description>ajouterCommentaire</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="5dba5975-3921-4813-a266-eef52d2e2e3e" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/getReferenceCommande" path="/contrat/{referenceContrat}/getReferenceCommande" id="57de3de3-dec1-4dec-b299-9c4b2423cf64"><con:description>getReferenceCommande</con:description><con:settings/><con:parameters/><con:method name="getReferenceCommande" id="630447eb-5220-4239-b914-5ca06c1ff3de" method="GET"><con:description>getReferenceCommande</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="7eda364c-a34a-42b3-86a2-dee698f52ea2" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/gracier" path="/contrat/{referenceContrat}/gracier" id="bf6b06f0-32cc-4581-90cb-eb04a7c30a49"><con:description>gracierContrat</con:description><con:settings/><con:parameters/><con:method name="gracierContrat" id="eef6a4f6-247b-4793-98fb-d65478edff05" method="POST"><con:description>gracierContrat</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="061fedf1-877c-4619-be49-a2642beaee96" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/valider" path="/contrat/{referenceContrat}/valider" id="0d5e636f-0319-48d3-837d-8a3923daaca0"><con:description>validerContrat</con:description><con:settings/><con:parameters/><con:method name="validerContrat" id="a61ad4f2-c147-4075-9933-e7b0aaf7daae" method="POST"><con:description>validerContrat</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>400 500</con:status><con:params/><con:element xmlns:val="http://10.100.109.6/contrat-core-1.2.x/contrat/00104134/valider">val:Fault</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:request name="Request 1" id="ae314ff3-9890-4267-9d3b-62473230cfba" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/{numEC}/changerDateDerniereFacture" path="/contrat/{referenceContrat}/{numEC}/changerDateDerniereFacture" id="10cbd03c-ea94-47dc-92d5-0b6b6883f460"><con:description>changerDateDerniereFacture</con:description><con:settings/><con:parameters/><con:method name="changerDateDerniereFacture" id="1c43d657-9491-43c1-9f0b-862750df2654" method="GET"><con:description>changerDateDerniereFacture</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter><con:parameter required="true"><con:name>numEC</con:name><con:style>TEMPLATE</con:style><con:description>numEC</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="f6effce7-28fe-409e-be06-dfade551e978" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/{numEC}/changerDateFactureResiliation" path="/contrat/{referenceContrat}/{numEC}/changerDateFactureResiliation" id="8fe13f08-1169-41be-9df8-1c10d0ae0ef8"><con:description>changerDateFactureResiliation</con:description><con:settings/><con:parameters/><con:method name="changerDateFactureResiliation" id="4bcdaf64-98dd-4dee-b65a-493ac8360ea2" method="GET"><con:description>changerDateFactureResiliation</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter><con:parameter required="true"><con:name>numEC</con:name><con:style>TEMPLATE</con:style><con:description>numEC</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="ceef67e3-54c7-4be4-af2d-b59b30d8e725" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/{numEC}/changerDateFinContrat" path="/contrat/{referenceContrat}/{numEC}/changerDateFinContrat" id="3af01b3a-d4c0-4777-a325-12665f609746"><con:description>changerDateFinContrat</con:description><con:settings/><con:parameters/><con:method name="changerDateFinContrat" id="41b93467-8dfe-4f51-afe7-72e238b87455" method="GET"><con:description>changerDateFinContrat</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter><con:parameter required="true"><con:name>numEC</con:name><con:style>TEMPLATE</con:style><con:description>numEC</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="95c0ac62-2316-4229-ba87-e65c87bc84b4" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="a75bcfc4-a50a-43d5-9eac-f09f7d616258" wadlVersion="http://wadl.dev.java.net/2009/02" name="/default/migration" type="rest" basePath="/contrat-core-1.2.x" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://10.100.109.4:8080</con:endpoint></con:endpoints><con:resource name="/contrat/{referenceContrat}/ceder" path="/contrat/{referenceContrat}/ceder" id="8ab46e00-151c-4f84-bb95-73509a2da90a"><con:description>cederContrat</con:description><con:settings/><con:parameters><con:parameter><con:name>referenceContrat</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/></con:parameter></con:parameters><con:method name="cederContrat" id="fd1f6d2b-053c-4fea-b672-5c3674295ada" method="POST"><con:description>cederContrat</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="686cd9f6-7c54-43b7-9169-a6d1cebd7cf1" mediaType="application/json" postQueryString="false"><con:settings/><con:request/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/ceder/annuler" path="/contrat/{referenceContrat}/ceder/annuler" id="d478d71f-623e-4194-84c1-b5881806df5a"><con:description>annulerCession</con:description><con:settings/><con:parameters/><con:method name="annulerCession" id="932270c0-0781-4979-b19b-9c2c0469dac6" method="POST"><con:description>annulerCession</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="98033f9d-65d6-438c-a8f3-1a146db0edba" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/cession/getInfoAvantCession" path="/contrat/{referenceContrat}/cession/getInfoAvantCession" id="cb635bf9-ab8b-420a-825e-0907178254b6"><con:description>getInfoAvantCession</con:description><con:settings/><con:parameters/><con:method name="getInfoAvantCession" id="101e3217-b992-443e-b72e-ed9cf1afa350" method="GET"><con:description>getInfoAvantCession</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="8473561c-324b-4cce-bbe8-d11b390ac65a" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/isRenouvelable" path="/contrat/{referenceContrat}/isRenouvelable" id="b733dee5-2ace-436a-947f-f5caa008cf76"><con:description>isContratRenouvelable</con:description><con:settings/><con:parameters/><con:method name="isContratRenouvelable" id="5a97604a-6dbf-4f1e-b5a5-fd05f315e345" method="POST"><con:description>isContratRenouvelable</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="09ce953b-12e7-4cc7-9358-7ab8a7e1604f" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/migrer" path="/contrat/{referenceContrat}/migrer" id="f17dc922-34c6-4860-ad97-d2ef99ac2277"><con:description>migrerContrat</con:description><con:settings/><con:parameters/><con:method name="migrerContrat" id="85271c67-0592-446d-9134-f8d881f02878" method="POST"><con:description>migrerContrat</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="c88bce86-2c31-48f2-8c05-27aeb66206d0" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/migrer/annuler" path="/contrat/{referenceContrat}/migrer/annuler" id="baf6c928-25b5-4cc6-ae89-9e0eb4f712d4"><con:description>annulerMigration</con:description><con:settings/><con:parameters/><con:method name="annulerMigration" id="6b92b489-6835-4b2c-ab06-10cbcefbff78" method="POST"><con:description>annulerMigration</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="51dc740e-eb2e-49dd-928b-256e3e84dde7" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/renouveler" path="/contrat/{referenceContrat}/renouveler" id="a4c86f23-0d5c-4e6c-a065-120be574742c"><con:description>renouvelerContrat</con:description><con:settings/><con:parameters/><con:method name="renouvelerContrat" id="fe822c7b-a1e6-43ac-b586-8490c718630c" method="POST"><con:description>renouvelerContrat</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>400 500</con:status><con:params/><con:element xmlns:ren="http://10.100.109.4/contrat.core.ws-1.2.x/contrat/312296d0-24be-4a03-81eb-4dc6f86e7f73/renouveler">ren:Fault</con:element></con:representation><con:request name="Request 1" id="10d98fa7-62ed-4f72-8458-347447f05ca6" mediaType="application/json" postQueryString="false"><con:settings/><con:request/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/renouveller/annuler" path="/contrat/{referenceContrat}/renouveller/annuler" id="d21509d5-9628-493f-9211-3d125c77e910"><con:description>annulerRenouvellement</con:description><con:settings/><con:parameters/><con:method name="annulerRenouvellement" id="3bdb3cb3-17e4-41b4-bd0e-0b7eacdedd17" method="POST"><con:description>annulerRenouvellement</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="076cd9d0-e5a8-4da6-839f-e5016eec7688" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/simuler/migration/info" path="/contrat/{referenceContrat}/simuler/migration/info" id="a5045837-b006-4056-8d3b-f634eb8fdd1b"><con:description>getContratInfoPourSimulationMigration</con:description><con:settings/><con:parameters/><con:method name="getContratInfoPourSimulationMigration" id="8dfcd1a6-84ac-4cb0-83e4-a782cc44f04f" method="GET"><con:description>getContratInfoPourSimulationMigration</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="dfb602b1-d9b2-49e5-8777-8e764ea882fb" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="030c1960-4b89-4bb1-a59f-5e9c67ef6e2e" wadlVersion="http://wadl.dev.java.net/2009/02" name="/default/reduction-controller" type="rest" basePath="/contrat-core-1.2.x" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://10.100.109.4:8080</con:endpoint></con:endpoints><con:resource name="/contrat/{referenceContrat}/reduction/ajouter" path="/contrat/{referenceContrat}/reduction/ajouter" id="5dced071-8ee7-4441-ad8d-bc8613df2885"><con:description>ajouterReductionContrat</con:description><con:settings/><con:parameters><con:parameter><con:name>referenceContrat</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/></con:parameter></con:parameters><con:method name="ajouterReductionContrat" id="6963c2d0-983d-4a60-8d0d-2577d60e2d10" method="POST"><con:description>ajouterReductionContrat</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="3a291c98-aef3-463c-b9c2-3f80c36f4c39" mediaType="application/json" postQueryString="false"><con:settings/><con:request/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/reduction/{referenceReduction}/supprimer" path="/contrat/{referenceContrat}/reduction/{referenceReduction}/supprimer" id="0083eb08-7b53-403a-baa5-89c44708106f"><con:description>annulerReductionContrat</con:description><con:settings/><con:parameters/><con:method name="annulerReductionContrat" id="e7d200f3-e556-4e37-a562-9b0a5d1ad319" method="POST"><con:description>annulerReductionContrat</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter><con:parameter required="true"><con:name>referenceReduction</con:name><con:style>TEMPLATE</con:style><con:description>referenceReduction</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="66ad729b-0d7d-42ec-a5dc-7fc47f5fc8ac" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/reductions" path="/contrat/{referenceContrat}/reductions" id="15ad3bce-6e73-4408-8f02-73c7dbb2c715"><con:description>getReductionsValide</con:description><con:settings/><con:parameters/><con:method name="getReductionsValide" id="eab65445-9067-48d0-917b-166c84b8b692" method="GET"><con:description>getReductionsValide</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="65422209-1162-4ac5-9f27-9e735deb5555" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/{numEC}/reduction" path="/contrat/{referenceContrat}/{numEC}/reduction" id="836e6b4e-21f5-4e65-bac6-5544ba197b51"><con:description>getReductionAssocie</con:description><con:settings/><con:parameters/><con:method name="getReductionAssocie" id="34ed0712-6f2b-45f5-9fc0-2d0b31fb4b55" method="GET"><con:description>getReductionAssocie</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter><con:parameter required="true"><con:name>numEC</con:name><con:style>TEMPLATE</con:style><con:description>numEC</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="4abfcfce-6165-428d-b884-c941611c9c54" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/{numEC}/reduction/ajouter" path="/contrat/{referenceContrat}/{numEC}/reduction/ajouter" id="dfe41cbc-af0e-47f3-8fec-fe8e63f19322"><con:description>ajouterReductionElementContractuelle</con:description><con:settings/><con:parameters/><con:method name="ajouterReductionElementContractuelle" id="d420c13f-50da-47b4-8a12-c9315fa32588" method="POST"><con:description>ajouterReductionElementContractuelle</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter><con:parameter required="true"><con:name>numEC</con:name><con:style>TEMPLATE</con:style><con:description>numEC</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="6c0eb9c7-406a-4933-a319-b4636bc80e09" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/{numEC}/reduction/utiliser" path="/contrat/{referenceContrat}/{numEC}/reduction/utiliser" id="7566b3de-e697-476e-ba43-3b909c1c47a0"><con:description>utiliserReduction</con:description><con:settings/><con:parameters/><con:method name="utiliserReduction" id="788963ef-0523-4adf-9916-b90dcfddc25f" method="POST"><con:description>utiliserReduction</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter><con:parameter required="true"><con:name>numEC</con:name><con:style>TEMPLATE</con:style><con:description>numEC</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="1a76fd9c-9cd5-460c-ae44-8fc15cf2da77" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/{numEC}/reduction/{referenceReduction}/supprimer" path="/contrat/{referenceContrat}/{numEC}/reduction/{referenceReduction}/supprimer" id="cffdffb3-43c3-4499-aa8e-03c9c8b95cdb"><con:description>annulerReductionElementContractuelle</con:description><con:settings/><con:parameters/><con:method name="annulerReductionElementContractuelle" id="5277c2d8-b33f-4f6c-b8b8-477de39e08cc" method="POST"><con:description>annulerReductionElementContractuelle</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter><con:parameter required="true"><con:name>numEC</con:name><con:style>TEMPLATE</con:style><con:description>numEC</con:description></con:parameter><con:parameter required="true"><con:name>referenceReduction</con:name><con:style>TEMPLATE</con:style><con:description>referenceReduction</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="6075d9ef-2d41-4a15-aeb2-b431d14195cf" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/{numEC}/{version}/reduction" path="/contrat/{referenceContrat}/{numEC}/{version}/reduction" id="ffa5526e-30a7-4ec8-9c87-0fa0abee00e3"><con:description>getReductionAssocie</con:description><con:settings/><con:parameters/><con:method name="getReductionAssocie" id="1b94db55-7e41-4b89-95f3-86929966f4f8" method="GET"><con:description>getReductionAssocie</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter><con:parameter required="true"><con:name>numEC</con:name><con:style>TEMPLATE</con:style><con:description>numEC</con:description></con:parameter><con:parameter required="true"><con:name>version</con:name><con:style>TEMPLATE</con:style><con:description>version</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="9a692a4e-fc55-4237-a002-4b2ab349a2f9" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="synchroniserReductionEligible" path="/contrat/{refContrat}/synchroniserReductionEligible" id="e3a3cb15-67ef-4b0a-89b9-8fee649edf2a"><con:settings/><con:parameters><con:parameter><con:name>refContrat</con:name><con:value>refContrat</con:value><con:style>TEMPLATE</con:style><con:default>refContrat</con:default></con:parameter></con:parameters><con:method name="Method 1" id="477151d7-bab2-4f05-bf44-9650696c8e45" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:status>500</con:status><con:params/><con:element xmlns:syn="http://10.100.109.4/contrat-core-1.2.x/contrat/refContrat/synchroniserReductionEligible">syn:Fault</con:element></con:representation><con:request name="Request 1" id="fe29b010-3ff8-48e1-8192-49827e3fce02" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/contrat-core-1.2.x/contrat/refContrat/synchroniserReductionEligible</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="8567b37f-bd65-4ae2-8f95-85556afb344e" wadlVersion="http://wadl.dev.java.net/2009/02" name="/default/resiliation" type="rest" basePath="/contrat-core-1.2.x" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://10.100.109.4:8080</con:endpoint></con:endpoints><con:resource name="/contrat/resilier" path="/contrat/resilier" id="bab5fed0-8b6b-4396-a46c-5118607ead50"><con:description>resilierContrats</con:description><con:settings/><con:parameters/><con:method name="resilierContrats" id="e0972135-40ce-4fe2-bc4b-edaf3fd2f73a" method="POST"><con:description>resilierContrats</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="ca2fda21-2f25-459f-8a4c-6c1649d18331" mediaType="application/json" postQueryString="false"><con:settings/><con:request/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/resilier" path="/contrat/{referenceContrat}/resilier" id="d31397b9-7d2f-49fd-9b5c-126e89fb51f0"><con:description>resilierContrat</con:description><con:settings/><con:parameters/><con:method name="resilierContrat" id="eda37c91-66e1-4707-a5e6-12de6043313e" method="POST"><con:description>resilierContrat</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="34380f59-68e5-4788-b5bd-6c8e50f29223" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/resilier/annuler" path="/contrat/{referenceContrat}/resilier/annuler" id="820b64f1-ef02-49e8-9e04-71db22f02f10"><con:description>annulerResiliation</con:description><con:settings/><con:parameters/><con:method name="annulerResiliation" id="ba4b20ac-0d91-4854-8d10-b3e49fa70195" method="POST"><con:description>annulerResiliation</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="28c32ac4-d1ae-4120-88fa-73e4433a4700" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/{numEC}/resilier" path="/contrat/{referenceContrat}/{numEC}/resilier" id="8ae7ca92-ff71-4f1e-9734-1473f9db8fcf"><con:description>resilierPartielContrat</con:description><con:settings/><con:parameters/><con:method name="resilierPartielContrat" id="bd8482c5-9167-4878-affe-506b0035c879" method="POST"><con:description>resilierPartielContrat</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter><con:parameter required="true"><con:name>numEC</con:name><con:style>TEMPLATE</con:style><con:description>numEC</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="34f8713b-73cf-442c-98a3-166bdf2a3b4a" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/{numEC}/resilier/annuler" path="/contrat/{referenceContrat}/{numEC}/resilier/annuler" id="07213618-3ff1-4d61-98b2-8ca7a1b5dd86"><con:description>annulerResiliationPartiel</con:description><con:settings/><con:parameters/><con:method name="annulerResiliationPartiel" id="d9bf6480-e680-4521-a718-cd28bbefec0e" method="POST"><con:description>annulerResiliationPartiel</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter><con:parameter required="true"><con:name>numEC</con:name><con:style>TEMPLATE</con:style><con:description>numEC</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="d2b6d281-2475-4bc5-be99-920f67a96a5d" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="6bb2bfa7-eda5-4546-9b0d-76ad330ab361" wadlVersion="http://wadl.dev.java.net/2009/02" name="/default/utils" type="rest" basePath="/contrat-core-1.2.x" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://10.100.109.4:8080</con:endpoint></con:endpoints><con:resource name="/contrat/referencesContratLivrer" path="/contrat/referencesContratLivrer" id="2d9cecdc-f385-4e77-9c89-63d1ac0f869a"><con:description>getReferencesContratLivrer</con:description><con:settings/><con:parameters/><con:method name="getReferencesContratLivrer" id="0238aaea-9bb7-4d5e-9011-23f352270476" method="GET"><con:description>getReferencesContratLivrer</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="1a321bf7-7448-4034-9c39-c5b2e4972554" mediaType="application/json"><con:settings/><con:request/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{refContrat}/{numEC}/parentInfo" path="/contrat/{refContrat}/{numEC}/parentInfo" id="58a172a4-0075-444a-8068-ee38bd0c198b"><con:description>getParentInfo</con:description><con:settings/><con:parameters/><con:method name="getParentInfo" id="628e55c1-79d9-403d-b321-a1a0cc219ee0" method="GET"><con:description>getParentInfo</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refContrat</con:name><con:style>TEMPLATE</con:style><con:description>refContrat</con:description></con:parameter><con:parameter required="true"><con:name>numEC</con:name><con:style>TEMPLATE</con:style><con:description>numEC</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="aaefd9d9-9283-4d1a-b831-c1cdc0f2d7ef" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/avenantInfo" path="/contrat/{referenceContrat}/avenantInfo" id="1b414183-e7b7-4200-aa6c-908fc827c50e"><con:description>getContratAvenantInfo</con:description><con:settings/><con:parameters/><con:method name="getContratAvenantInfo" id="0158934a-4d3d-4ec0-a70a-825581b113ba" method="GET"><con:description>getContratAvenantInfo</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="317c06f7-aa00-477e-9c86-24d8be278624" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/billingInformationHistorise" path="/contrat/{referenceContrat}/billingInformationHistorise" id="a563df75-7194-47f8-adf2-fe1fe921407e"><con:description>getContratBillingInformationHistorise</con:description><con:settings/><con:parameters/><con:method name="getContratBillingInformationHistorise" id="e00e30eb-fd28-4ea1-bd28-f958dbc8ebe4" method="GET"><con:description>getContratBillingInformationHistorise</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="f9f8290b-3295-4153-b31c-3b15b3bfb8b5" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/bonPreparation" path="/contrat/{referenceContrat}/bonPreparation" id="51d6623a-f2de-4da1-8f45-ba2865e19c05"><con:description>getContratBP</con:description><con:settings/><con:parameters/><con:method name="getContratBP" id="e5b89071-b514-49a1-a65f-b48f6b783da9" method="GET"><con:description>getContratBP</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="6a0f65cf-4443-4a0a-9f7a-1e3cc0fdbfa7" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/checkIsPackagerCreationPossible" path="/contrat/{referenceContrat}/checkIsPackagerCreationPossible" id="2b24a5fc-c0c7-409e-bc00-e724078a7936"><con:description>checkIsPackagerCreationPossible</con:description><con:settings/><con:parameters/><con:method name="checkIsPackagerCreationPossible" id="a2f15f01-cd3d-4a57-84f3-4caa91c8b531" method="GET"><con:description>checkIsPackagerCreationPossible</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="bc982de0-fab3-4d8e-bc3c-661c202427c9" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/historique/bonPreparation" path="/contrat/{referenceContrat}/historique/bonPreparation" id="338a82c4-3801-4bf0-a6c2-3e37b4166ba8"><con:description>getContratBPHistorique</con:description><con:settings/><con:parameters/><con:method name="getContratBPHistorique" id="7c9faeb2-41b4-425a-bddb-09c3705beae4" method="GET"><con:description>getContratBPHistorique</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="2d8d264d-49cc-4e1b-a6f4-89142e851fc7" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/migrationAdministrative/billingInformation" path="/contrat/{referenceContrat}/migrationAdministrative/billingInformation" id="f1837fd3-3fd2-44a4-967b-5f8fc4fea9bb"><con:description>getContratMigrationAdministrativeBillingInfo</con:description><con:settings/><con:parameters/><con:method name="getContratMigrationAdministrativeBillingInfo" id="b74fc356-068b-44af-aaad-8e8d0b2a3c1f" method="GET"><con:description>getContratMigrationAdministrativeBillingInfo</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="9a407a40-1314-409f-8bd8-15a97c854bb4" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/partiel/{numEC}/resiliationBillingInformation" path="/contrat/{referenceContrat}/partiel/{numEC}/resiliationBillingInformation" id="57732f98-1a0a-4c15-9a55-88bfa7e4efa5"><con:description>getResiliationBillingIformation</con:description><con:settings/><con:parameters/><con:method name="getResiliationBillingIformation" id="58602e07-d20f-4cc7-99dc-21b7babe19fe" method="GET"><con:description>getResiliationBillingIformation</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter><con:parameter required="true"><con:name>numEC</con:name><con:style>TEMPLATE</con:style><con:description>numEC</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="a842bc0a-21b8-4a32-8b8d-2c899b08901b" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/resiliationBillingInformation" path="/contrat/{referenceContrat}/resiliationBillingInformation" id="24861fc9-87b5-442f-8343-b94cb401e1ef"><con:description>getResiliationBillingIformation</con:description><con:settings/><con:parameters/><con:method name="getResiliationBillingIformation" id="293135a1-a624-4b28-99c0-361f99ac1e31" method="GET"><con:description>getResiliationBillingIformation</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="d71f019f-d3aa-42ab-a495-0d856acbc547" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/{numEC}/billingInformation" path="/contrat/{referenceContrat}/{numEC}/billingInformation" id="95728e29-ce0a-47d8-9938-a08c01fed9e8"><con:description>getContratBillingInformation</con:description><con:settings/><con:parameters/><con:method name="getContratBillingInformation" id="5c98bdae-06d1-4f17-a446-52ea18f12148" method="GET"><con:description>getContratBillingInformation</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter><con:parameter required="true"><con:name>numEC</con:name><con:style>TEMPLATE</con:style><con:description>numEC</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="3ae6094d-6b7e-4bea-9a8e-e22bf2587f87" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/{numEC}/enfantsService" path="/contrat/{referenceContrat}/{numEC}/enfantsService" id="314b1fdf-d4d4-4409-bfde-a932b9a95e21"><con:description>getFils</con:description><con:settings/><con:parameters/><con:method name="getFils" id="1bf7b785-77e0-4ca4-8f84-202731bbbf64" method="GET"><con:description>getFils</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter><con:parameter required="true"><con:name>numEC</con:name><con:style>TEMPLATE</con:style><con:description>numEC</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="2eac3a8f-6bc7-4f79-8c29-8fe6f0af373a" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/contrat/{referenceContrat}/{numEC}/isElementContractuelResilier" path="/contrat/{referenceContrat}/{numEC}/isElementContractuelResilier" id="58829c7b-f2c7-4e25-b6f8-9db0b9efce84"><con:description>isElementContractuelResilier</con:description><con:settings/><con:parameters/><con:method name="isElementContractuelResilier" id="d81e09f3-58a0-4a55-9119-1f725d63e805" method="GET"><con:description>isElementContractuelResilier</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter><con:parameter required="true"><con:name>numEC</con:name><con:style>TEMPLATE</con:style><con:description>numEC</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="7e4a1b8e-38ec-4611-b88b-aedce866028f" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="d2382786-f9a3-406c-b861-23a2d9674adb" wadlVersion="http://wadl.dev.java.net/2009/02" name="/default/commande" type="rest" basePath="/opale-api-1.2.x" definitionUrl="http://10.100.109.4:8080/opale-api-1.2.x/api-docs/default/commande" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="/default/commande.wadl"><con:part><con:url>/default/commande.wadl</con:url><con:content><![CDATA[<application xmlns="http://wadl.dev.java.net/2009/02">
  <doc xml:lang="en" title="/default/commande"/>
  <resources base="http://10.100.109.4:8080/opale-api-1.2.x">
    <resource path="commande/" id="/commande/">
      <doc xml:lang="en" title="/commande/">chercherCommande</doc>
      <method name="POST" id="chercherCommande">
        <doc xml:lang="en" title="chercherCommande">chercherCommande</doc>
        <request/>
        <response status="200">
          <representation mediaType="application/json"/>
        </response>
        <response status="201">
          <representation mediaType="application/json"/>
        </response>
        <response status="401">
          <representation mediaType="application/json"/>
        </response>
        <response status="403">
          <representation mediaType="application/json"/>
        </response>
        <response status="404">
          <representation mediaType="application/json"/>
        </response>
      </method>
    </resource>
    <resource path="commande/creer" id="/commande/creer">
      <doc xml:lang="en" title="/commande/creer">creerCommande</doc>
      <method name="POST" id="creerCommande">
        <doc xml:lang="en" title="creerCommande">creerCommande</doc>
        <request>
          <representation mediaType="application/json"/>
        </request>
        <response status="200">
          <representation mediaType="application/json"/>
        </response>
        <response status="201">
          <representation mediaType="application/json"/>
        </response>
        <response status="401">
          <representation mediaType="application/json"/>
        </response>
        <response status="403">
          <representation mediaType="application/json"/>
        </response>
        <response status="404">
          <representation mediaType="application/json"/>
        </response>
        <response status="">
          <representation mediaType="application/json"/>
        </response>
        <response status="400 500">
          <representation mediaType="application/json" element="cre:Fault" xmlns:cre="http://10.100.109.4/opale-api-1.2.x/commande/creer"/>
        </response>
      </method>
    </resource>
    <resource path="commande/details/{refCommande}" id="/commande/details/{refCommande}">
      <doc xml:lang="en" title="/commande/details/{refCommande}">getCommandeDetailee</doc>
      <method name="GET" id="getCommandeDetailee">
        <doc xml:lang="en" title="getCommandeDetailee">getCommandeDetailee</doc>
        <request>
          <param name="refCommande" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="refCommande Parameter">refCommande</doc>
          </param>
        </request>
        <response status="200">
          <representation mediaType="application/json"/>
        </response>
        <response status="401">
          <representation mediaType="application/json"/>
        </response>
        <response status="403">
          <representation mediaType="application/json"/>
        </response>
        <response status="404">
          <representation mediaType="application/json"/>
        </response>
      </method>
    </resource>
    <resource path="commande/{refCommande}" id="/commande/{refCommande}">
      <doc xml:lang="en" title="/commande/{refCommande}">getCommande</doc>
      <method name="GET" id="getCommande">
        <doc xml:lang="en" title="getCommande">getCommande</doc>
        <request>
          <param name="refCommande" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="refCommande Parameter">refCommande</doc>
          </param>
        </request>
        <response status="200">
          <representation mediaType="application/json"/>
        </response>
        <response status="401">
          <representation mediaType="application/json"/>
        </response>
        <response status="403">
          <representation mediaType="application/json"/>
        </response>
        <response status="404">
          <representation mediaType="application/json"/>
        </response>
      </method>
    </resource>
    <resource path="commande/{refCommande}/annuler" id="/commande/{refCommande}/annuler">
      <doc xml:lang="en" title="/commande/{refCommande}/annuler">annulerCommande</doc>
      <method name="POST" id="annulerCommande">
        <doc xml:lang="en" title="annulerCommande">annulerCommande</doc>
        <request>
          <param name="refCommande" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="refCommande Parameter">refCommande</doc>
          </param>
        </request>
        <response status="200">
          <representation mediaType="application/json"/>
        </response>
        <response status="201">
          <representation mediaType="application/json"/>
        </response>
        <response status="401">
          <representation mediaType="application/json"/>
        </response>
        <response status="403">
          <representation mediaType="application/json"/>
        </response>
        <response status="404">
          <representation mediaType="application/json"/>
        </response>
      </method>
    </resource>
    <resource path="commande/{refCommande}/beforePaymentCost" id="/commande/{refCommande}/beforePaymentCost">
      <doc xml:lang="en" title="/commande/{refCommande}/beforePaymentCost">calculerCoutAvantPaiement</doc>
      <method name="POST" id="calculerCoutAvantPaiement">
        <doc xml:lang="en" title="calculerCoutAvantPaiement">calculerCoutAvantPaiement</doc>
        <request>
          <param name="refCommande" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="refCommande Parameter">refCommande</doc>
          </param>
        </request>
        <response status="200">
          <representation mediaType="application/json"/>
        </response>
        <response status="201">
          <representation mediaType="application/json"/>
        </response>
        <response status="401">
          <representation mediaType="application/json"/>
        </response>
        <response status="403">
          <representation mediaType="application/json"/>
        </response>
        <response status="404">
          <representation mediaType="application/json"/>
        </response>
      </method>
    </resource>
    <resource path="commande/{refCommande}/costCalculation" id="/commande/{refCommande}/costCalculation">
      <doc xml:lang="en" title="/commande/{refCommande}/costCalculation">calculerCout</doc>
      <method name="POST" id="calculerCout">
        <doc xml:lang="en" title="calculerCout">calculerCout</doc>
        <request>
          <param name="refCommande" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="refCommande Parameter">refCommande</doc>
          </param>
        </request>
        <response status="200">
          <representation mediaType="application/json"/>
        </response>
        <response status="201">
          <representation mediaType="application/json"/>
        </response>
        <response status="401">
          <representation mediaType="application/json"/>
        </response>
        <response status="403">
          <representation mediaType="application/json"/>
        </response>
        <response status="404">
          <representation mediaType="application/json"/>
        </response>
      </method>
    </resource>
    <resource path="commande/{refCommande}/getInfosBonCommande" id="/commande/{refCommande}/getInfosBonCommande">
      <doc xml:lang="en" title="/commande/{refCommande}/getInfosBonCommande">getInfosBonCommande</doc>
      <method name="GET" id="getInfosBonCommande">
        <doc xml:lang="en" title="getInfosBonCommande">getInfosBonCommande</doc>
        <request>
          <param name="refCommande" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="refCommande Parameter">refCommande</doc>
          </param>
        </request>
        <response status="200">
          <representation mediaType="application/json"/>
        </response>
        <response status="401">
          <representation mediaType="application/json"/>
        </response>
        <response status="403">
          <representation mediaType="application/json"/>
        </response>
        <response status="404">
          <representation mediaType="application/json"/>
        </response>
      </method>
    </resource>
    <resource path="commande/{refCommande}/paiement" id="/commande/{refCommande}/paiement">
      <doc xml:lang="en" title="/commande/{refCommande}/paiement">creerIntentionPaiement</doc>
      <method name="POST" id="creerIntentionPaiement">
        <doc xml:lang="en" title="creerIntentionPaiement">creerIntentionPaiement</doc>
        <request>
          <param name="refCommande" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="refCommande Parameter">refCommande</doc>
          </param>
          <representation mediaType="application/json"/>
        </request>
        <response status="200">
          <representation mediaType="application/json"/>
        </response>
        <response status="201">
          <representation mediaType="application/json"/>
        </response>
        <response status="401">
          <representation mediaType="application/json"/>
        </response>
        <response status="403">
          <representation mediaType="application/json"/>
        </response>
        <response status="404">
          <representation mediaType="application/json"/>
        </response>
        <response status="">
          <representation mediaType="application/json"/>
        </response>
      </method>
    </resource>
    <resource path="commande/{refCommande}/paiement/annule/{isAnnule}" id="/commande/{refCommande}/paiement/annule/{isAnnule}">
      <doc xml:lang="en" title="/commande/{refCommande}/paiement/annule/{isAnnule}">getListeDePaiement</doc>
      <method name="GET" id="getListeDePaiement">
        <doc xml:lang="en" title="getListeDePaiement">getListeDePaiement</doc>
        <request>
          <param name="refCommande" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="refCommande Parameter">refCommande</doc>
          </param>
          <param name="isAnnule" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="isAnnule Parameter">isAnnule</doc>
          </param>
        </request>
        <response status="200">
          <representation mediaType="application/json"/>
        </response>
        <response status="401">
          <representation mediaType="application/json"/>
        </response>
        <response status="403">
          <representation mediaType="application/json"/>
        </response>
        <response status="404">
          <representation mediaType="application/json"/>
        </response>
      </method>
    </resource>
    <resource path="commande/{refCommande}/paiement/comptant" id="/commande/{refCommande}/paiement/comptant">
      <doc xml:lang="en" title="/commande/{refCommande}/paiement/comptant">paiementDirect</doc>
      <method name="POST" id="paiementDirect">
        <doc xml:lang="en" title="paiementDirect">paiementDirect</doc>
        <request>
          <param name="refCommande" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="refCommande Parameter">refCommande</doc>
          </param>
          <representation mediaType="application/json"/>
        </request>
        <response status="200">
          <representation mediaType="application/json"/>
        </response>
        <response status="201">
          <representation mediaType="application/json"/>
        </response>
        <response status="401">
          <representation mediaType="application/json"/>
        </response>
        <response status="403">
          <representation mediaType="application/json"/>
        </response>
        <response status="404">
          <representation mediaType="application/json"/>
        </response>
        <response status="">
          <representation mediaType="application/json"/>
        </response>
      </method>
    </resource>
    <resource path="commande/{refCommande}/paiement/comptant/annule/{isAnnule}" id="/commande/{refCommande}/paiement/comptant/annule/{isAnnule}">
      <doc xml:lang="en" title="/commande/{refCommande}/paiement/comptant/annule/{isAnnule}">getListePaiementComptant</doc>
      <method name="GET" id="getListePaiementComptant">
        <doc xml:lang="en" title="getListePaiementComptant">getListePaiementComptant</doc>
        <request>
          <param name="refCommande" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="refCommande Parameter">refCommande</doc>
          </param>
          <param name="isAnnule" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="isAnnule Parameter">isAnnule</doc>
          </param>
        </request>
        <response status="200">
          <representation mediaType="application/json"/>
        </response>
        <response status="401">
          <representation mediaType="application/json"/>
        </response>
        <response status="403">
          <representation mediaType="application/json"/>
        </response>
        <response status="404">
          <representation mediaType="application/json"/>
        </response>
      </method>
    </resource>
    <resource path="commande/{refCommande}/paiement/recurrent" id="/commande/{refCommande}/paiement/recurrent">
      <doc xml:lang="en" title="/commande/{refCommande}/paiement/recurrent">paiementRecurrent</doc>
      <method name="POST" id="paiementRecurrent">
        <doc xml:lang="en" title="paiementRecurrent">paiementRecurrent</doc>
        <request>
          <param name="refCommande" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="refCommande Parameter">refCommande</doc>
          </param>
          <representation mediaType="application/json"/>
        </request>
        <response status="200">
          <representation mediaType="application/json"/>
        </response>
        <response status="201">
          <representation mediaType="application/json"/>
        </response>
        <response status="401">
          <representation mediaType="application/json"/>
        </response>
        <response status="403">
          <representation mediaType="application/json"/>
        </response>
        <response status="404">
          <representation mediaType="application/json"/>
          <representation mediaType="text/html;charset=utf-8" element="html"/>
        </response>
        <response status="">
          <representation mediaType="application/json"/>
        </response>
        <response status="400">
          <representation mediaType="application/json" element="rec:Fault" xmlns:rec="http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent"/>
        </response>
        <response status="0">
          <representation mediaType="" element="data"/>
          <representation mediaType="" element="data"/>
        </response>
      </method>
    </resource>
    <resource path="commande/{refCommande}/paiement/recurrent/annule/{isAnnule}" id="/commande/{refCommande}/paiement/recurrent/annule/{isAnnule}">
      <doc xml:lang="en" title="/commande/{refCommande}/paiement/recurrent/annule/{isAnnule}">getListePaiementRecurrent</doc>
      <method name="GET" id="getListePaiementRecurrent">
        <doc xml:lang="en" title="getListePaiementRecurrent">getListePaiementRecurrent</doc>
        <request>
          <param name="refCommande" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="refCommande Parameter">refCommande</doc>
          </param>
          <param name="isAnnule" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="isAnnule Parameter">isAnnule</doc>
          </param>
        </request>
        <response status="200">
          <representation mediaType="application/json"/>
        </response>
        <response status="401">
          <representation mediaType="application/json"/>
        </response>
        <response status="403">
          <representation mediaType="application/json"/>
        </response>
        <response status="404">
          <representation mediaType="application/json"/>
        </response>
      </method>
    </resource>
    <resource path="commande/{refCommande}/paiement/{refPaiement}/payer" id="/commande/{refCommande}/paiement/{refPaiement}/payer">
      <doc xml:lang="en" title="/commande/{refCommande}/paiement/{refPaiement}/payer">payerIntentionPaiement</doc>
      <method name="POST" id="payerIntentionPaiement">
        <doc xml:lang="en" title="payerIntentionPaiement">payerIntentionPaiement</doc>
        <request>
          <param name="refCommande" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="refCommande Parameter">refCommande</doc>
          </param>
          <param name="refPaiement" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="refPaiement Parameter">refPaiement</doc>
          </param>
        </request>
        <response status="200">
          <representation mediaType="application/json"/>
        </response>
        <response status="201">
          <representation mediaType="application/json"/>
        </response>
        <response status="401">
          <representation mediaType="application/json"/>
        </response>
        <response status="403">
          <representation mediaType="application/json"/>
        </response>
        <response status="404">
          <representation mediaType="application/json"/>
        </response>
      </method>
    </resource>
    <resource path="commande/{refCommande}/paiement/{refPaiement}/supprimer" id="/commande/{refCommande}/paiement/{refPaiement}/supprimer">
      <doc xml:lang="en" title="/commande/{refCommande}/paiement/{refPaiement}/supprimer">supprimerPaiement</doc>
      <method name="POST" id="supprimerPaiement">
        <doc xml:lang="en" title="supprimerPaiement">supprimerPaiement</doc>
        <request>
          <param name="refCommande" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="refCommande Parameter">refCommande</doc>
          </param>
          <param name="refPaiement" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="refPaiement Parameter">refPaiement</doc>
          </param>
        </request>
        <response status="200">
          <representation mediaType="application/json"/>
        </response>
        <response status="201">
          <representation mediaType="application/json"/>
        </response>
        <response status="401">
          <representation mediaType="application/json"/>
        </response>
        <response status="403">
          <representation mediaType="application/json"/>
        </response>
        <response status="404">
          <representation mediaType="application/json"/>
        </response>
      </method>
    </resource>
    <resource path="commande/{refCommande}/signature" id="/commande/{refCommande}/signature">
      <doc xml:lang="en" title="/commande/{refCommande}/signature">creerIntentionDeSignature</doc>
      <method name="POST" id="creerIntentionDeSignature">
        <doc xml:lang="en" title="creerIntentionDeSignature">creerIntentionDeSignature</doc>
        <request>
          <param name="refCommande" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="refCommande Parameter">refCommande</doc>
          </param>
          <representation mediaType="application/json"/>
        </request>
        <response status="200">
          <representation mediaType="application/json"/>
        </response>
        <response status="201">
          <representation mediaType="application/json"/>
        </response>
        <response status="401">
          <representation mediaType="application/json"/>
        </response>
        <response status="403">
          <representation mediaType="application/json"/>
        </response>
        <response status="404">
          <representation mediaType="application/json"/>
        </response>
        <response status="">
          <representation mediaType="application/json"/>
        </response>
        <response status="400">
          <representation mediaType="application/json" element="sig:Fault" xmlns:sig="http://10.100.109.4/opale-api-1.2.x/commande/1e307ec5-9b75-4898-832f-9591d3bf0192/signature"/>
        </response>
        <response status="405">
          <representation mediaType="text/html;charset=utf-8" element="html"/>
        </response>
      </method>
    </resource>
    <resource path="commande/{refCommande}/signature/Direct" id="/commande/{refCommande}/signature/Direct">
      <doc xml:lang="en" title="/commande/{refCommande}/signature/Direct">signerCommandeDirect</doc>
      <method name="POST" id="signerCommandeDirect">
        <doc xml:lang="en" title="signerCommandeDirect">signerCommandeDirect</doc>
        <request>
          <param name="refCommande" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="refCommande Parameter">refCommande</doc>
          </param>
          <representation mediaType="application/json"/>
        </request>
        <response status="200">
          <representation mediaType="application/json"/>
        </response>
        <response status="201">
          <representation mediaType="application/json"/>
        </response>
        <response status="401">
          <representation mediaType="application/json"/>
        </response>
        <response status="403">
          <representation mediaType="application/json"/>
        </response>
        <response status="404">
          <representation mediaType="application/json"/>
        </response>
        <response status="">
          <representation mediaType="application/json"/>
        </response>
        <response status="400 500">
          <representation mediaType="application/json" element="dir:Fault" xmlns:dir="http://10.100.109.4/opale-api-1.2.x/commande/1e307ec5-9b75-4898-832f-9591d3bf0192/signature/Direct"/>
        </response>
      </method>
    </resource>
    <resource path="commande/{refCommande}/signature/{afficheAnnule}" id="/commande/{refCommande}/signature/{afficheAnnule}">
      <doc xml:lang="en" title="/commande/{refCommande}/signature/{afficheAnnule}">getSignature</doc>
      <method name="GET" id="getSignature">
        <doc xml:lang="en" title="getSignature">getSignature</doc>
        <request>
          <param name="refCommande" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="refCommande Parameter">refCommande</doc>
          </param>
          <param name="afficheAnnule" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="afficheAnnule Parameter">afficheAnnule</doc>
          </param>
        </request>
        <response status="200">
          <representation mediaType="application/json"/>
        </response>
        <response status="401">
          <representation mediaType="application/json"/>
        </response>
        <response status="403">
          <representation mediaType="application/json"/>
        </response>
        <response status="404">
          <representation mediaType="application/json"/>
        </response>
      </method>
    </resource>
    <resource path="commande/{refCommande}/signature/{refSignature}" id="/commande/{refCommande}/signature/{refSignature}">
      <doc xml:lang="en" title="/commande/{refCommande}/signature/{refSignature}">signerCommande</doc>
      <method name="POST" id="signerCommande">
        <doc xml:lang="en" title="signerCommande">signerCommande</doc>
        <request>
          <param name="refCommande" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="refCommande Parameter">refCommande</doc>
          </param>
          <param name="refSignature" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="refSignature Parameter">refSignature</doc>
          </param>
          <representation mediaType="application/json"/>
        </request>
        <response status="200">
          <representation mediaType="application/json"/>
          <representation mediaType="" element="data"/>
          <representation mediaType="" element="data"/>
          <representation mediaType="" element="data"/>
        </response>
        <response status="201">
          <representation mediaType="application/json"/>
        </response>
        <response status="401">
          <representation mediaType="application/json"/>
        </response>
        <response status="403">
          <representation mediaType="application/json"/>
        </response>
        <response status="404">
          <representation mediaType="application/json"/>
        </response>
        <response status="">
          <representation mediaType="application/json"/>
        </response>
        <response status="400">
          <representation mediaType="application/json" element="e4b:Fault" xmlns:e4b="http://10.100.109.4/opale-api-1.2.x/commande/1e307ec5-9b75-4898-832f-9591d3bf0192/signature/e4b92d7f-4d6a-4fa1-b786-8895d56ef7f5"/>
        </response>
      </method>
    </resource>
    <resource path="commande/{refCommande}/signature/{refSignature}/supprimer" id="/commande/{refCommande}/signature/{refSignature}/supprimer">
      <doc xml:lang="en" title="/commande/{refCommande}/signature/{refSignature}/supprimer">supprimerSignature</doc>
      <method name="POST" id="supprimerSignature">
        <doc xml:lang="en" title="supprimerSignature">supprimerSignature</doc>
        <request>
          <param name="refCommande" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="refCommande Parameter">refCommande</doc>
          </param>
          <param name="refSignature" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="refSignature Parameter">refSignature</doc>
          </param>
        </request>
        <response status="200">
          <representation mediaType="application/json"/>
        </response>
        <response status="201">
          <representation mediaType="application/json"/>
        </response>
        <response status="401">
          <representation mediaType="application/json"/>
        </response>
        <response status="403">
          <representation mediaType="application/json"/>
        </response>
        <response status="404">
          <representation mediaType="application/json"/>
        </response>
      </method>
    </resource>
    <resource path="commande/{refCommande}/transformerEnContrat" id="/commande/{refCommande}/transformerEnContrat">
      <doc xml:lang="en" title="/commande/{refCommande}/transformerEnContrat">transformeEnContrat</doc>
      <method name="POST" id="transformeEnContrat">
        <doc xml:lang="en" title="transformeEnContrat">transformeEnContrat</doc>
        <request>
          <param name="refCommande" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="refCommande Parameter">refCommande</doc>
          </param>
          <representation mediaType="application/json"/>
        </request>
        <response status="200">
          <representation mediaType="application/json"/>
        </response>
        <response status="201">
          <representation mediaType="application/json"/>
        </response>
        <response status="401">
          <representation mediaType="application/json"/>
        </response>
        <response status="403">
          <representation mediaType="application/json"/>
        </response>
        <response status="404">
          <representation mediaType="application/json"/>
        </response>
        <response status="405">
          <representation mediaType="text/html;charset=utf-8" element="html"/>
        </response>
        <response status="">
          <representation mediaType="application/json"/>
        </response>
        <response status="400">
          <representation mediaType="application/json"/>
        </response>
        <response status="0">
          <representation mediaType="" element="data"/>
          <representation mediaType="" element="data"/>
          <representation mediaType="" element="data"/>
          <representation mediaType="" element="data"/>
        </response>
      </method>
    </resource>
    <resource path="commande/{refCommande}/transformerEnDraft" id="/commande/{refCommande}/transformerEnDraft">
      <doc xml:lang="en" title="/commande/{refCommande}/transformerEnDraft">transformerEnDraft</doc>
      <method name="POST" id="transformerEnDraft">
        <doc xml:lang="en" title="transformerEnDraft">transformerEnDraft</doc>
        <request>
          <param name="refCommande" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="refCommande Parameter">refCommande</doc>
          </param>
        </request>
        <response status="200">
          <representation mediaType="application/json"/>
        </response>
        <response status="201">
          <representation mediaType="application/json"/>
        </response>
        <response status="401">
          <representation mediaType="application/json"/>
        </response>
        <response status="403">
          <representation mediaType="application/json"/>
        </response>
        <response status="404">
          <representation mediaType="application/json"/>
        </response>
      </method>
    </resource>
    <resource path="commande/{refCommande}/valider" id="/commande/{refCommande}/valider">
      <doc xml:lang="en" title="/commande/{refCommande}/valider">validerCommande</doc>
      <method name="GET" id="validerCommande">
        <doc xml:lang="en" title="validerCommande">validerCommande</doc>
        <request>
          <param name="refCommande" type="xs:string" required="true" style="template" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <doc xml:lang="en" title="refCommande Parameter">referenceCommande</doc>
          </param>
        </request>
        <response status="200">
          <representation mediaType="application/json"/>
        </response>
        <response status="401">
          <representation mediaType="application/json"/>
        </response>
        <response status="403">
          <representation mediaType="application/json"/>
        </response>
        <response status="404">
          <representation mediaType="application/json"/>
        </response>
        <response status="0">
          <representation mediaType="" element="data"/>
        </response>
      </method>
    </resource>
  </resources>
</application>]]></con:content><con:type>http://wadl.dev.java.net/2009/02</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://10.100.109.4:8080</con:endpoint></con:endpoints><con:resource name="/commande/" path="/commande/" id="5ac0c1fb-4d5b-4089-8141-1d85288ced05"><con:description>chercherCommande</con:description><con:settings/><con:parameters/><con:method name="chercherCommande" id="d5483155-1612-44c2-9507-67459491ae4d" method="POST"><con:description>chercherCommande</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="43becf63-0a06-4519-a3f0-188f5a31e92f" mediaType="application/json" postQueryString="false"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/creer" path="/commande/creer" id="6ce007c2-522e-429e-9e5c-709c487d284c"><con:description>creerCommande</con:description><con:settings/><con:parameters/><con:method name="creerCommande" id="03dcdd73-d296-439e-b32e-b9f1da1cd3fd" method="POST"><con:description>creerCommande</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>500 400</con:status><con:params/><con:element xmlns:cre="http://10.100.109.4/opale-api-1.2.x/commande/creer">cre:Fault</con:element></con:representation><con:request name="Request 1" id="cbefa18f-91b7-484d-b05b-80de3b4cd914" mediaType="application/json" postQueryString="false"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/details/{refCommande}" path="/commande/details/{refCommande}" id="bd40069a-f628-4ffe-b2a3-1a0cfe2ef7e2"><con:description>getCommandeDetailee</con:description><con:settings/><con:parameters/><con:method name="getCommandeDetailee" id="09310d58-3d43-459e-ba0e-067c6945293d" method="GET"><con:description>getCommandeDetailee</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="3ce4c65a-c2b4-4b14-b750-0032082c171a" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters><entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}" path="/commande/{refCommande}" id="78fc4cdc-242b-48f7-9d5c-af37fe8f9004"><con:description>getCommande</con:description><con:settings/><con:parameters/><con:method name="getCommande" id="3b8c33ca-73e5-4004-bac3-3f95ced090eb" method="GET"><con:description>getCommande</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="465e8873-1acc-40e5-811a-d59b5f648a5d" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters><entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/annuler" path="/commande/{refCommande}/annuler" id="db37ccc4-7bdd-4b6f-88ae-091863ae7abc"><con:description>annulerCommande</con:description><con:settings/><con:parameters/><con:method name="annulerCommande" id="ff50ae4e-9ec8-49a5-9c09-e905cdce7ddb" method="POST"><con:description>annulerCommande</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="6ee7e6a8-2491-451f-99d4-6883a16afbb6" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters><entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/beforePaymentCost" path="/commande/{refCommande}/beforePaymentCost" id="d5366e08-3715-4c8b-b6c2-863d27889c88"><con:description>calculerCoutAvantPaiement</con:description><con:settings/><con:parameters/><con:method name="calculerCoutAvantPaiement" id="beae59db-0d1c-47b0-b762-11c26e965604" method="POST"><con:description>calculerCoutAvantPaiement</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="aa6a8048-7c88-4ef1-89f9-7bea6af43f65" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters><entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/costCalculation" path="/commande/{refCommande}/costCalculation" id="1f5ffd0f-782c-4798-92c5-a8a5ccd6f69f"><con:description>calculerCout</con:description><con:settings/><con:parameters/><con:method name="calculerCout" id="f3f12adf-7ce0-4b44-a121-5bfb6bcfb7fe" method="POST"><con:description>calculerCout</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="3fab0599-c965-4ad8-80b4-281baa0426e8" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters><entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/getInfosBonCommande" path="/commande/{refCommande}/getInfosBonCommande" id="e338b257-16d5-4fd2-b434-9309b4856484"><con:description>getInfosBonCommande</con:description><con:settings/><con:parameters/><con:method name="getInfosBonCommande" id="53295588-7677-4580-8a56-f333955f4514" method="GET"><con:description>getInfosBonCommande</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="da0a0e74-02cb-495e-8eba-4888c52652d7" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters><entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/paiement" path="/commande/{refCommande}/paiement" id="ae465c94-b174-4d84-a61e-01313cb95ed2"><con:description>creerIntentionPaiement</con:description><con:settings/><con:parameters/><con:method name="creerIntentionPaiement" id="6ac3c95f-3c0a-42fd-813c-e1dbaf31b3e6" method="POST"><con:description>creerIntentionPaiement</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:request name="Request 1" id="7decd827-dcb3-4acc-9f47-c0463ff21367" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters><entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/paiement/annule/{isAnnule}" path="/commande/{refCommande}/paiement/annule/{isAnnule}" id="532b5590-eb5c-4b7e-a7b0-5b73490559da"><con:description>getListeDePaiement</con:description><con:settings/><con:parameters/><con:method name="getListeDePaiement" id="97fc8e03-c9d8-4263-a6a4-e340af43f89f" method="GET"><con:description>getListeDePaiement</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>refCommande</con:description></con:parameter><con:parameter required="true"><con:name>isAnnule</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>isAnnule</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="656a52e0-5f48-430f-9874-62a53805574b" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters>
  <con:entry key="isAnnule" value=""/>
  <con:entry key="refCommande" value=""/>
</con:parameters></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/paiement/comptant" path="/commande/{refCommande}/paiement/comptant" id="c4895e08-84ac-4834-b615-0a61297a063f"><con:description>paiementDirect</con:description><con:settings/><con:parameters/><con:method name="paiementDirect" id="70fb7cd7-19fd-49a3-ba5c-b79970677a3c" method="POST"><con:description>paiementDirect</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:request name="Request 1" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters><entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/paiement/comptant/annule/{isAnnule}" path="/commande/{refCommande}/paiement/comptant/annule/{isAnnule}" id="f2299f95-e347-48eb-896f-cff952f96b19"><con:description>getListePaiementComptant</con:description><con:settings/><con:parameters/><con:method name="getListePaiementComptant" id="f2811111-c620-410c-9e39-a46c5557af81" method="GET"><con:description>getListePaiementComptant</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>refCommande</con:description></con:parameter><con:parameter required="true"><con:name>isAnnule</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>isAnnule</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="cfe12e60-fe0a-4f62-a7cc-0b32c01a914b" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters>
  <con:entry key="isAnnule" value=""/>
  <con:entry key="refCommande" value=""/>
</con:parameters></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/paiement/recurrent" path="/commande/{refCommande}/paiement/recurrent" id="28c321c1-4a55-4d7c-bd55-97ce803a0270"><con:description>paiementRecurrent</con:description><con:settings/><con:parameters/><con:method name="paiementRecurrent" id="714417f7-393b-462a-bdac-2eb68b1f68d1" method="POST"><con:description>paiementRecurrent</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:rec="http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent">rec:Fault</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>404</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters><entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/paiement/recurrent/annule/{isAnnule}" path="/commande/{refCommande}/paiement/recurrent/annule/{isAnnule}" id="2f2d63c5-b877-43c9-b4a4-c92dfd9a5f4a"><con:description>getListePaiementRecurrent</con:description><con:settings/><con:parameters/><con:method name="getListePaiementRecurrent" id="01901980-fe02-4157-8da1-9602397eebeb" method="GET"><con:description>getListePaiementRecurrent</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>refCommande</con:description></con:parameter><con:parameter required="true"><con:name>isAnnule</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>isAnnule</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="9f70c11f-1f7f-4b26-87dc-ce2c0b77a484" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters>
  <con:entry key="isAnnule" value=""/>
  <con:entry key="refCommande" value=""/>
</con:parameters></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/paiement/{refPaiement}/payer" path="/commande/{refCommande}/paiement/{refPaiement}/payer" id="4201db2a-7e4a-4013-84f2-717dd2383b4c"><con:description>payerIntentionPaiement</con:description><con:settings/><con:parameters/><con:method name="payerIntentionPaiement" id="ca528361-9153-4806-ad0b-3d275936f99c" method="POST"><con:description>payerIntentionPaiement</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>refCommande</con:description></con:parameter><con:parameter required="true"><con:name>refPaiement</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>refPaiement</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="294c47fe-d592-4d9b-92b0-0cc50d19e2d1" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters>
  <con:entry key="refPaiement" value=""/>
  <con:entry key="refCommande" value=""/>
</con:parameters></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/paiement/{refPaiement}/supprimer" path="/commande/{refCommande}/paiement/{refPaiement}/supprimer" id="efd46096-0ab0-4d87-9980-61183957677e"><con:description>supprimerPaiement</con:description><con:settings/><con:parameters/><con:method name="supprimerPaiement" id="a610b164-06eb-458e-8c18-4eb81a53fdbd" method="POST"><con:description>supprimerPaiement</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>refCommande</con:description></con:parameter><con:parameter required="true"><con:name>refPaiement</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>refPaiement</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="54f7b783-068c-4cea-9ba2-21968b9ca619" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters>
  <con:entry key="refPaiement" value=""/>
  <con:entry key="refCommande" value=""/>
</con:parameters></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/signature" path="/commande/{refCommande}/signature" id="73e6cee0-1e8a-47c2-87e7-a3e4706c5cff"><con:description>creerIntentionDeSignature</con:description><con:settings/><con:parameters/><con:method name="creerIntentionDeSignature" id="061304b3-c798-4ce9-ab33-1d40e69aeea3" method="POST"><con:description>creerIntentionDeSignature</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:sig="http://10.100.109.4/opale-api-1.2.x/commande/1e307ec5-9b75-4898-832f-9591d3bf0192/signature">sig:Fault</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>405</con:status><con:params/><con:element>html</con:element></con:representation><con:request name="Request 1" id="b913336b-ac3f-4b7b-a86b-a78af0407e25" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters><entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/signature/Direct" path="/commande/{refCommande}/signature/Direct" id="140c38ba-d228-4892-8edf-96808f32a6d2"><con:description>signerCommandeDirect</con:description><con:settings/><con:parameters/><con:method name="signerCommandeDirect" id="22eda2dc-e85d-444b-9ca1-bf9af19b7a70" method="POST"><con:description>signerCommandeDirect</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>500 400</con:status><con:params/><con:element xmlns:dir="http://10.100.109.4/opale-api-1.2.x/commande/1e307ec5-9b75-4898-832f-9591d3bf0192/signature/Direct">dir:Fault</con:element></con:representation><con:request name="Request 1" id="3aa3dc48-74f5-4f66-ae28-e71ddc36d0c4" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters><entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/signature/{afficheAnnule}" path="/commande/{refCommande}/signature/{afficheAnnule}" id="f33a7163-d046-42df-80a1-7619c5b62013"><con:description>getSignature</con:description><con:settings/><con:parameters/><con:method name="getSignature" id="27cbaf6d-3ede-4a10-8b77-4e912e558eb1" method="GET"><con:description>getSignature</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>refCommande</con:description></con:parameter><con:parameter required="true"><con:name>afficheAnnule</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>afficheAnnule</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="73a36f87-a210-49ee-b7f5-5b7d7420f5e5" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters>
  <con:entry key="refCommande" value=""/>
  <con:entry key="afficheAnnule" value=""/>
</con:parameters></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/signature/{refSignature}" path="/commande/{refCommande}/signature/{refSignature}" id="611b4d1d-4b93-4f99-aacb-9f4bd5a778b9"><con:description>signerCommande</con:description><con:settings/><con:parameters/><con:method name="signerCommande" id="5c7a94b2-a7c7-4145-ad1e-2ef71c4a4797" method="POST"><con:description>signerCommande</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>refCommande</con:description></con:parameter><con:parameter required="true"><con:name>refSignature</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>refSignature</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:e4b="http://10.100.109.4/opale-api-1.2.x/commande/1e307ec5-9b75-4898-832f-9591d3bf0192/signature/e4b92d7f-4d6a-4fa1-b786-8895d56ef7f5">e4b:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="e1653548-0e90-49c5-ac55-4ce91baad150" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters>
  <con:entry key="refCommande" value=""/>
  <con:entry key="refSignature" value=""/>
</con:parameters></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/signature/{refSignature}/supprimer" path="/commande/{refCommande}/signature/{refSignature}/supprimer" id="a5c39b1c-0ac1-421f-9910-a29cf4dce87f"><con:description>supprimerSignature</con:description><con:settings/><con:parameters/><con:method name="supprimerSignature" id="6d5ab42c-54c5-4140-8da1-118cedf3ce10" method="POST"><con:description>supprimerSignature</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter><con:parameter required="true"><con:name>refSignature</con:name><con:style>TEMPLATE</con:style><con:description>refSignature</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="55735f87-3919-482b-992d-746fc7bec318" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/transformerEnContrat" path="/commande/{refCommande}/transformerEnContrat" id="c88c26a0-8653-48c1-b700-fef53e32d1a4"><con:description>transformeEnContrat</con:description><con:settings/><con:parameters/><con:method name="transformeEnContrat" id="a1636b2a-12cc-4e89-b256-bf4a52addd9a" method="POST"><con:description>transformeEnContrat</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>405</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>400</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="38cfe906-f82c-4482-b7cd-eb621557d7f2" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters><entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/transformerEnDraft" path="/commande/{refCommande}/transformerEnDraft" id="9d77521c-4c37-42c7-90b2-7572a39e01bc"><con:description>transformerEnDraft</con:description><con:settings/><con:parameters/><con:method name="transformerEnDraft" id="1ddeb994-6e54-43ce-93a7-76bcb3d3a779" method="POST"><con:description>transformerEnDraft</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="5436c580-f7d7-439b-addb-37d91ea5225c" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters><entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/valider" path="/commande/{refCommande}/valider" id="2cbf265b-1b12-4b3b-a290-7b690de86416"><con:description>validerCommande</con:description><con:settings/><con:parameters/><con:method name="validerCommande" id="ecdd101f-05b5-4456-906b-c71360190949" method="GET"><con:description>validerCommande</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/><con:description>referenceCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters><entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/initDocument" path="/commande/{refCommande}/initDocument" id="3c201d4f-5279-4342-be21-83c3d9c01cd6"><con:settings/><con:parameters/><con:method name="initCommandeDocument" id="0b607825-bbbd-4580-ac18-af1ce1402c14" method="POST"><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default/><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="f6d6415f-322a-47c4-a83c-f7c04e6266d1" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters><entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/synchronizeDocument" path="/commande/{refCommande}/synchronizeDocument" id="e6a24b97-d26c-4ac4-8daa-f553e1c4a06c"><con:settings/><con:parameters/><con:method name="synchronizerCommandeDocument" id="0c2ef742-304f-41b1-9c5a-b13e3c53acb2" method="POST"><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default/><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="e141dcab-7f31-49fb-a4cc-9ef3729638c9" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters><entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/initSignature" path="/commande/{refCommande}/initSignature" id="06e5e92a-bc4c-4a93-bd1b-4375e025b983"><con:settings/><con:parameters/><con:method name="initCommandeSignature" id="2a34e86b-d057-4960-9e88-a8c595fcbaab" method="POST"><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default/><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters><entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/signer" path="/commande/{refCommande}/signer" id="55397475-7a7a-437b-a616-f9bcd25277d5"><con:settings/><con:parameters/><con:method name="signer" id="d89ebd48-1f1b-4ea6-84f7-a60823645371" method="POST"><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default/><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters><entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/enhancedCostCalculation" path="/commande/{refCommande}/enhancedCostCalculation" id="95562844-f9e1-448e-8f4e-ebfb459dee37"><con:settings/><con:parameters/><con:method name="enhancedCalculerCout" id="fb9f2cad-2539-4496-b562-07ef191db703" method="POST"><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default/><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="7e95406e-677d-4399-a713-cfe7f94c4aab" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters><entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/reduction/{codeCatalogueReduction}" path="/commande/{refCommande}/reduction/{codeCatalogueReduction}" id="a13bd39f-3744-4775-b934-5427de9e4232"><con:settings/><con:parameters/><con:method name="forceEligible" id="85d26d30-391d-4f9c-b1b4-a2a0499c1038" method="POST"><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default/><con:description>refCommande</con:description></con:parameter><con:parameter required="true"><con:name>codeCatalogueReduction</con:name><con:value/><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default/><con:description>codeCatalogueReduction</con:description></con:parameter></con:parameters><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="6a191a80-0c15-4b05-8092-2ce72cd9ffe6" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters>
  <con:entry key="refCommande" value=""/>
  <con:entry key="codeCatalogueReduction" value=""/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>codeCatalogueReduction</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/countOrderLine/discount/{discountCode}" path="/commande/{refCommande}/countOrderLine/discount/{discountCode}" id="15594665-fa77-4f52-88dd-a8cf738e8b8f"><con:settings/><con:parameters/><con:method name="countOrderLineDiscount" id="50ae79ea-c008-4e58-91c8-b16e3148cded" method="GET"><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:description>refCommande</con:description></con:parameter><con:parameter required="true"><con:name>discountCode</con:name><con:value/><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:description>discountCode</con:description></con:parameter></con:parameters><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="e41fd839-6012-4328-aae2-9b9b8be6e379" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>discountCode</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/getCommandeBusiness" path="/commande/{refCommande}/getCommandeBusiness" id="f46e1c7f-3734-4ace-b3bf-def03f99e5d1"><con:settings/><con:parameters/><con:method name="getCommandeBusiness" id="1cf20832-23bb-4db9-b50b-c72d336cd9f7" method="GET"><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default/><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="dba4c7ea-387b-43fe-b7c7-3da26b17cf84" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters><entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/communication/{typeCommunication}/envoyerEmail" path="/commande/{refCommande}/communication/{typeCommunication}/envoyerEmail" id="b32d0b74-a61a-422f-bcd5-97905b99eec5"><con:settings/><con:parameters/><con:method name="envoyerConfirmationCommande" id="1e75d935-2cce-4a41-a9ee-a9f7ff0b2fcb" method="POST"><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default/><con:description>refCommande</con:description></con:parameter><con:parameter required="true"><con:name>typeCommunication</con:name><con:value/><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default/><con:description>typeCommunication</con:description></con:parameter></con:parameters><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="cfe43d61-000c-4702-b274-80bdd62467be" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters>
  <con:entry key="refCommande" value=""/>
  <con:entry key="typeCommunication" value=""/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>typeCommunication</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/synchroniserReductionEligible" path="/commande/{refCommande}/synchroniserReductionEligible" id="c58e7e32-04bd-4f7f-abc8-6c682ee3c186"><con:settings/><con:parameters/><con:method name="synchronizerReductionEligible" id="f06d51a8-292b-4c1b-9535-4912816c76c4" method="GET"><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:type xmlns:xs="http://www.w3.org/2001/XMLSchema">xs:string</con:type><con:default/><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status/><con:params/><con:description xsi:nil="true"/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="fca7486b-8232-4d1a-beb1-d754e1d63142" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters><entry key="refCommande" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="/commande/application.wadl" path="/commande/application.wadl" id="e8b6fc92-091d-4c64-a949-72562cdcb68c"><con:settings/><con:parameters/><con:method name="generateWadl" id="7039cb3a-01df-4124-a528-84dcab93d289" method="GET"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/xml</con:mediaType><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>application/xml</con:mediaType><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>application/xml</con:mediaType><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>application/xml</con:mediaType><con:params/></con:representation><con:request name="Request 1" id="5aff82bf-5e70-4c81-bac0-35e848c6644a" mediaType="application/xml"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{idClient}/countOrderLine/discount/{discountCode}" path="/commande/{idClient}/countOrderLine/discount/{discountCode}" id="d5f7f930-6681-4c3b-87f0-a64fe37ec979"><con:settings/><con:parameters/><con:method name="countOrderLineDiscount" id="d01edc7e-4f18-4e8f-a413-3c3634c69a1c" method="GET"><con:settings/><con:parameters><con:parameter><con:name>idClient</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/></con:parameter><con:parameter><con:name>discountCode</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/></con:parameter></con:parameters><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:request name="Request 1" id="1d09e867-812c-49cb-a2b9-e6e912ff6125" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="589a13d0-702e-41d9-be40-379405fd0975" wadlVersion="http://wadl.dev.java.net/2009/02" name="CatalogBs" type="rest" definitionUrl="http://10.100.119.11:8080/catalog-ocbs-ws-1.0.x/services/CatalogBs?_wadl" basePath="/catalog-ocbs-ws-1.0.x/services/CatalogBs" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="http://10.100.119.11:8080/catalog-ocbs-ws-1.0.x/services/CatalogBs?_wadl"><con:part><con:url>http://10.100.119.11:8080/catalog-ocbs-ws-1.0.x/services/CatalogBs?_wadl</con:url><con:content><![CDATA[<application xmlns="http://wadl.dev.java.net/2009/02" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <grammars/>
  <resources base="http://10.100.119.11:8080/catalog-ocbs-ws-1.0.x/services/CatalogBs">
    <resource path="/">
      <resource path="getBien/{bienItemCode}">
        <param name="bienItemCode" style="template" type="xs:string"/>
        <method name="GET">
          <request/>
          <response>
            <representation mediaType="application/json;charset=UTF-8"/>
          </response>
        </method>
      </resource>
      <resource path="getBienAutocompletion">
        <method name="GET">
          <request>
            <param name="CodeOrLabel" style="query" type="xs:string"/>
          </request>
          <response>
            <representation mediaType="application/json;charset=UTF-8"/>
          </response>
        </method>
      </resource>
      <resource path="getGrilleTarifaire/{serviceItemCode}">
        <param name="serviceItemCode" style="template" type="xs:string"/>
        <method name="GET">
          <request/>
          <response>
            <representation mediaType="application/json;charset=UTF-8"/>
          </response>
        </method>
      </resource>
      <resource path="getProvisioningMode/{bienItemCode}">
        <param name="bienItemCode" style="template" type="xs:string"/>
        <method name="GET">
          <request/>
          <response>
            <representation mediaType="application/json;charset=UTF-8"/>
          </response>
        </method>
      </resource>
      <resource path="getService/{serviceItemCode}">
        <param name="serviceItemCode" style="template" type="xs:string"/>
        <method name="GET">
          <request/>
          <response>
            <representation mediaType="application/json;charset=UTF-8"/>
          </response>
        </method>
      </resource>
      <resource path="getServiceAutocompletion">
        <method name="GET">
          <request>
            <param name="CodeOrLabel" style="query" type="xs:string"/>
          </request>
          <response>
            <representation mediaType="application/json;charset=UTF-8"/>
          </response>
        </method>
      </resource>
      <resource path="getTransporter">
        <method name="GET">
          <response>
            <representation mediaType="application/json;charset=UTF-8"/>
          </response>
        </method>
      </resource>
      <resource path="getWarehouse">
        <method name="GET">
          <response>
            <representation mediaType="application/json;charset=UTF-8"/>
          </response>
        </method>
      </resource>
      <resource path="getWarehouseType">
        <method name="GET">
          <response>
            <representation mediaType="application/json;charset=UTF-8"/>
          </response>
        </method>
      </resource>
    </resource>
  </resources>
</application>]]></con:content><con:type>http://wadl.dev.java.net/2009/02</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://10.100.119.11:8080</con:endpoint></con:endpoints><con:resource name="" path="/" id="0458b6a1-aa4a-48ae-9abe-6076820c61be"><con:settings/><con:parameters/><con:resource name="" path="getBien/{bienItemCode}" id="cdd1b7d4-2e32-466d-80ed-20c4aeef2016"><con:settings/><con:parameters><con:parameter><con:name>bienItemCode</con:name><con:value xsi:nil="true"/><con:style>TEMPLATE</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:method name="" id="54e5be61-2652-4313-9b44-d674c303d34f" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="a0819b76-3dc3-4472-abc2-db4b12bd8d75" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/catalog-ocbs-ws-1.0.x/services/CatalogBs/getBien/PACK-MVNO-POSTPAID-MOBILE</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="bienItemCode" value="PACK-MVNO-POSTPAID" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="" path="getBienAutocompletion" id="31fa48f8-984d-446b-b220-51ac10c0ccc3"><con:settings/><con:parameters/><con:method name="" id="4a2baefa-d59f-4216-bfb6-c8df47f3e539" method="GET"><con:settings/><con:parameters><con:parameter><con:name>CodeOrLabel</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:representation type="RESPONSE" id=""><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="8c48749e-bf57-491d-a62e-57e579afacaf" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="getGrilleTarifaire/{serviceItemCode}" id="2d3d5e4a-240c-4b68-9366-428bc27aec35"><con:settings/><con:parameters><con:parameter><con:name>serviceItemCode</con:name><con:value xsi:nil="true"/><con:style>TEMPLATE</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:method name="" id="3bd0c738-4572-4fca-b33a-cc22a6d590ba" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="c3ff20f6-5e3c-4e7f-b4a3-e82ceca3c924" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="getProvisioningMode/{bienItemCode}" id="1e6bffb0-3d66-4939-90c6-176e199845f9"><con:settings/><con:parameters><con:parameter><con:name>bienItemCode</con:name><con:value xsi:nil="true"/><con:style>TEMPLATE</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:method name="" id="f5e0c3fe-c337-4a10-8631-a63f04d63e8f" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="209f8013-de7d-48f3-aeee-be7b2ebdd321" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="getService/{serviceItemCode}" id="5fd1d056-c0ab-4790-91b9-f30c197fc2ed"><con:settings/><con:parameters><con:parameter><con:name>serviceItemCode</con:name><con:value xsi:nil="true"/><con:style>TEMPLATE</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:method name="" id="73225f79-662f-4277-907a-5f98af6e85df" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="ef615962-c320-475f-a0f0-4cbb128062e1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/catalog-ocbs-ws-1.0.x/services/CatalogBs/getService/</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="getServiceAutocompletion" id="ce23adf5-3a04-4773-b1ef-e07e691e0de3"><con:settings/><con:parameters/><con:method name="" id="713a923b-d1b2-48af-b0fd-fb62a5256e9c" method="GET"><con:settings/><con:parameters><con:parameter><con:name>CodeOrLabel</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:representation type="RESPONSE" id=""><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="9bd9b602-067d-47dd-a510-b8dd0db8df51" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="getTransporter" id="0d0e8daa-5e63-4ea7-ab35-f40c0110e78b"><con:settings/><con:parameters/><con:method name="" id="9a9b972d-85d0-4a74-90d5-1d81f6f8d83f" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="4c5252c6-cd80-4935-9ae8-fa6b82171c57" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="getWarehouse" id="b0771369-c834-4bc2-9a87-a0b6680fbeda"><con:settings/><con:parameters/><con:method name="" id="7fd68158-7b5d-4f43-89fc-3d6954aaabb9" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="f3102506-182d-44d8-a8c2-209c94e94105" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="getWarehouseType" id="611b6234-6d46-4fb9-b565-4adba67f689a"><con:settings/><con:parameters/><con:method name="" id="35e99baf-43d8-4c0c-b162-8889dfaa4c2f" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="9e4d2528-c747-4cf8-8948-b86786914a1e" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource></con:resource></con:interface><con:interface xsi:type="con:RestService" id="15012e1b-c6e6-4f6c-a0e3-12f451cb4d70" wadlVersion="http://wadl.dev.java.net/2009/02" name="BaseClient" type="rest" definitionUrl="http://10.100.119.11:8080/base-client-ws-1.0.x/services/BaseClientWS?_wadl" basePath="/base-client-ws-1.0.x/services/BaseClientWS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="http://10.100.119.11:8080/base-client-ws-1.0.x/services/BaseClientWS?_wadl"><con:part><con:url>http://10.100.119.11:8080/base-client-ws-1.0.x/services/BaseClientWS?_wadl</con:url><con:content><![CDATA[<application xmlns="http://wadl.dev.java.net/2009/02" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <grammars/>
  <resources base="http://10.100.119.11:8080/base-client-ws-1.0.x/services/BaseClientWS">
    <resource path="/">
      <resource path="addComment">
        <method name="POST">
          <request>
            <param name="addCommentRequest" style="query" type="xs:string"/>
            <param name="userInfos" style="query" type="xs:string"/>
          </request>
          <response status="204"/>
        </method>
      </resource>
      <resource path="authenticate/{login}/{password}">
        <param name="login" style="template" type="xs:string"/>
        <param name="password" style="template" type="xs:string"/>
        <method name="GET">
          <request/>
          <response>
            <representation mediaType="application/json"/>
          </response>
        </method>
      </resource>
      <resource path="changeHandle">
        <method name="POST">
          <request>
            <representation mediaType="application/json"/>
            <param name="user" style="query" type="xs:string"/>
          </request>
          <response>
            <representation mediaType="application/json"/>
          </response>
        </method>
      </resource>
      <resource path="checkPassword/{login}/{password}">
        <param name="login" style="template" type="xs:string"/>
        <param name="password" style="template" type="xs:string"/>
        <method name="GET">
          <request/>
          <response>
            <representation mediaType="application/json">
              <param name="result" style="plain" type="xs:boolean"/>
            </representation>
          </response>
        </method>
      </resource>
      <resource path="createCustomer">
        <method name="POST">
          <request>
            <representation mediaType="application/json"/>
            <representation mediaType="multipart/form-data"/>
            <param name="userInfos" style="query" type="xs:string"/>
          </request>
          <response>
            <representation mediaType="application/json"/>
          </response>
        </method>
      </resource>
      <resource path="createCustomerByLogin">
        <method name="POST">
          <request>
            <representation mediaType="application/json"/>
            <param name="user" style="query" type="xs:string"/>
          </request>
          <response>
            <representation mediaType="application/json"/>
          </response>
        </method>
      </resource>
      <resource path="createCustomerNewFormat">
        <method name="POST">
          <request>
            <representation mediaType="application/json"/>
            <param name="user" style="query" type="xs:string"/>
          </request>
          <response>
            <representation mediaType="application/json"/>
          </response>
        </method>
      </resource>
      <resource path="createCustomerRapprochement">
        <method name="POST">
          <request>
            <param name="customerKeyPere" style="query" type="xs:string"/>
            <param name="customerKeyFils" style="query" type="xs:string"/>
          </request>
          <response>
            <representation mediaType="application/json">
              <param name="result" style="plain" type="xs:string"/>
            </representation>
          </response>
        </method>
      </resource>
      <resource path="createHandle">
        <method name="POST">
          <request>
            <representation mediaType="application/json"/>
            <param name="user" style="query" type="xs:string"/>
          </request>
          <response>
            <representation mediaType="application/json"/>
          </response>
        </method>
      </resource>
      <resource path="createHandleNewFormat">
        <method name="POST">
          <request>
            <representation mediaType="application/json"/>
            <param name="user" style="query" type="xs:string"/>
          </request>
          <response>
            <representation mediaType="application/json"/>
          </response>
        </method>
      </resource>
      <resource path="createPartner">
        <method name="POST">
          <request>
            <param name="createPartnerRequest" style="query" type="xs:string"/>
          </request>
          <response>
            <representation mediaType="application/json"/>
          </response>
        </method>
      </resource>
      <resource path="disableHandle">
        <method name="POST">
          <request>
            <param name="handleKey" style="query" type="xs:string"/>
          </request>
          <response status="204"/>
        </method>
      </resource>
      <resource path="getByLogin/{login}">
        <param name="login" style="template" type="xs:string"/>
        <method name="GET">
          <request/>
          <response>
            <representation mediaType="application/json;charset=UTF-8"/>
          </response>
        </method>
      </resource>
      <resource path="getCountryByCode/{countryCode}">
        <param name="countryCode" style="template" type="xs:string"/>
        <method name="GET">
          <request/>
          <response>
            <representation mediaType="application/json;charset=UTF-8"/>
          </response>
        </method>
      </resource>
      <resource path="getCustomerByKey/{customerKey}">
        <param name="customerKey" style="template" type="xs:string"/>
        <method name="GET">
          <request/>
          <response>
            <representation mediaType="application/json;charset=UTF-8"/>
          </response>
        </method>
      </resource>
      <resource path="getHandleByKey/{handleKey}">
        <param name="handleKey" style="template" type="xs:string"/>
        <method name="GET">
          <request/>
          <response>
            <representation mediaType="application/json;charset=UTF-8"/>
          </response>
        </method>
      </resource>
      <resource path="getIdentifiers/{customerKey}">
        <param name="customerKey" style="template" type="xs:string"/>
        <method name="GET">
          <request/>
          <response>
            <representation mediaType="application/json;charset=UTF-8"/>
          </response>
        </method>
      </resource>
      <resource path="getLENInformation/{LenCustomerkey}">
        <param name="LenCustomerkey" style="template" type="xs:string"/>
        <method name="GET">
          <request/>
          <response>
            <representation mediaType="application/json;charset=UTF-8"/>
          </response>
        </method>
      </resource>
      <resource path="getPartnerByCode/{partnerCode}">
        <param name="partnerCode" style="template" type="xs:string"/>
        <method name="GET">
          <request/>
          <response>
            <representation mediaType="application/json;charset=UTF-8"/>
          </response>
        </method>
      </resource>
      <resource path="getPartnerByKey/{partnerKey}">
        <param name="partnerKey" style="template" type="xs:string"/>
        <method name="GET">
          <request/>
          <response>
            <representation mediaType="application/json;charset=UTF-8"/>
          </response>
        </method>
      </resource>
      <resource path="isLoginAlreadyExist/{login}">
        <param name="login" style="template" type="xs:string"/>
        <method name="GET">
          <request/>
          <response>
            <representation mediaType="application/json;charset=UTF-8">
              <param name="result" style="plain" type="xs:boolean"/>
            </representation>
          </response>
        </method>
      </resource>
      <resource path="listHandles/{listHandlesRequest}">
        <param name="listHandlesRequest" style="template" type="xs:string"/>
        <method name="GET">
          <request/>
          <response>
            <representation mediaType="application/json"/>
          </response>
        </method>
      </resource>
      <resource path="listLogs/{listLogsRequest}">
        <param name="listLogsRequest" style="template" type="xs:string"/>
        <method name="GET">
          <request/>
          <response>
            <representation mediaType="application/json"/>
          </response>
        </method>
      </resource>
      <resource path="npaiEmailRecovery">
        <method name="POST">
          <response>
            <representation mediaType="application/json">
              <param name="result" style="plain" type="xs:string"/>
            </representation>
          </response>
        </method>
      </resource>
      <resource path="recoverIdentifiers">
        <method name="POST">
          <request>
            <param name="identifierCustomer" style="query" type="xs:string"/>
            <param name="tUserInfos" style="query" type="xs:string"/>
          </request>
          <response status="204"/>
        </method>
      </resource>
      <resource path="search">
        <method name="POST">
          <request>
            <param name="search" style="query" type="xs:string"/>
          </request>
          <response>
            <representation mediaType="application/json"/>
          </response>
        </method>
      </resource>
      <resource path="sendActivationKeyByMail">
        <method name="POST">
          <request>
            <param name="customerKey" style="query" type="xs:string"/>
            <param name="userInfos" style="query" type="xs:string"/>
          </request>
          <response status="204"/>
        </method>
      </resource>
      <resource path="separateCustomerRapprochement">
        <method name="POST">
          <request>
            <param name="customerKeyPere" style="query" type="xs:string"/>
            <param name="customerKeyFils" style="query" type="xs:string"/>
          </request>
          <response>
            <representation mediaType="application/json">
              <param name="result" style="plain" type="xs:string"/>
            </representation>
          </response>
        </method>
      </resource>
      <resource path="setLENInformation">
        <method name="POST">
          <request>
            <param name="lENInformationRequest" style="query" type="xs:string"/>
            <param name="user" style="query" type="xs:string"/>
          </request>
          <response status="204"/>
        </method>
      </resource>
      <resource path="setLastLoginDate/{customerKey}">
        <param name="customerKey" style="template" type="xs:string"/>
        <method name="GET">
          <request/>
          <response>
            <representation mediaType="application/json">
              <param name="result" style="plain" type="xs:boolean"/>
            </representation>
          </response>
        </method>
      </resource>
      <resource path="updateHandle">
        <method name="POST">
          <request>
            <representation mediaType="application/json"/>
            <param name="user" style="query" type="xs:string"/>
          </request>
          <response status="204"/>
        </method>
      </resource>
      <resource path="updateHandleNewFormat">
        <method name="POST">
          <request>
            <representation mediaType="application/json"/>
            <param name="user" style="query" type="xs:string"/>
          </request>
          <response status="204"/>
        </method>
      </resource>
      <resource path="updateLoginAndPassword">
        <method name="POST">
          <request>
            <param name="updateLoginPassdRequest" style="query" type="xs:string"/>
            <param name="tUserInfos" style="query" type="xs:string"/>
          </request>
          <response status="204"/>
        </method>
      </resource>
      <resource path="updatePreference">
        <method name="POST">
          <request>
            <param name="updatePreferenceRequest" style="query" type="xs:string"/>
          </request>
          <response>
            <representation mediaType="application/json"/>
          </response>
        </method>
      </resource>
      <resource path="updateRateBand">
        <method name="POST">
          <request>
            <param name="updateRateBandRequest" style="query" type="xs:string"/>
            <param name="user" style="query" type="xs:string"/>
          </request>
          <response status="204"/>
        </method>
      </resource>
      <resource path="updateReceptionDoc">
        <method name="POST">
          <request>
            <param name="updateReceptionDocRequest" style="query" type="xs:string"/>
          </request>
          <response>
            <representation mediaType="application/json"/>
          </response>
        </method>
      </resource>
      <resource path="updateSAARICode">
        <method name="POST">
          <request>
            <param name="updateSAARICodeRequest" style="query" type="xs:string"/>
            <param name="tUserInfos" style="query" type="xs:string"/>
          </request>
          <response status="204"/>
        </method>
      </resource>
      <resource path="updateSegmentTva">
        <method name="POST">
          <request>
            <param name="updateSegmentTvaRequest" style="query" type="xs:string"/>
          </request>
          <response status="204"/>
        </method>
      </resource>
      <resource path="validateMailWithActivationKey">
        <method name="POST">
          <request>
            <param name="activationKey" style="query" type="xs:string"/>
            <param name="userInfos" style="query" type="xs:string"/>
          </request>
          <response status="204"/>
        </method>
      </resource>
      <resource path="validateSMSbyActivationKey">
        <method name="POST">
          <request>
            <param name="validateSMSRequest" style="query" type="xs:string"/>
            <param name="user" style="query" type="xs:string"/>
          </request>
          <response status="204"/>
        </method>
      </resource>
    </resource>
  </resources>
</application>]]></con:content><con:type>http://wadl.dev.java.net/2009/02</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://10.100.119.11:8080</con:endpoint></con:endpoints><con:resource name="" path="/" id="f7084e73-8073-4dd6-8ee7-57ed2963dbbe"><con:settings/><con:parameters/><con:resource name="" path="addComment" id="ab5a33c0-9778-4776-af3e-573265e4a9ce"><con:settings/><con:parameters/><con:method name="" id="e407436b-5c33-468a-b622-07fc7acbf2f9" method="POST"><con:settings/><con:parameters><con:parameter><con:name>addCommentRequest</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter><con:parameter><con:name>userInfos</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:request name="Request 1" id="99546e62-683e-450e-81f0-4818c4b4e0d0" mediaType="application/json" postQueryString="false"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="authenticate/{login}/{password}" id="0b795f44-fbf0-47ae-817b-5d6b7d7628da"><con:settings/><con:parameters><con:parameter><con:name>login</con:name><con:value xsi:nil="true"/><con:style>TEMPLATE</con:style><con:default xsi:nil="true"/></con:parameter><con:parameter><con:name>password</con:name><con:value xsi:nil="true"/><con:style>TEMPLATE</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:method name="" id="d03a08c4-1965-47e5-b2d9-63decac049ea" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="f3346f10-eb01-44d6-8524-bf3f0a2c5bcf" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="changeHandle" id="8219d142-3c37-4a81-9249-5f6561670cdb"><con:settings/><con:parameters/><con:method name="" id="44734204-29be-4f54-95ad-fcf5c6691089" method="POST"><con:settings/><con:parameters><con:parameter><con:name>user</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:representation type="REQUEST" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="8c7ae55e-4b5b-4444-be2b-7891293cfb08" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="checkPassword/{login}/{password}" id="7a9b0682-4c5f-4f3a-a208-fdf85c5ab481"><con:settings/><con:parameters><con:parameter><con:name>login</con:name><con:value xsi:nil="true"/><con:style>TEMPLATE</con:style><con:default xsi:nil="true"/></con:parameter><con:parameter><con:name>password</con:name><con:value xsi:nil="true"/><con:style>TEMPLATE</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:method name="" id="adeb35b8-eacf-4fa3-b91e-7e72e1c7448b" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="b982c8b2-058f-4611-97e8-f069058d5e47" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="createCustomer" id="8535aafe-4cb3-492c-89b8-a2d460df1d45"><con:settings/><con:parameters/><con:method name="" id="7fdc876c-12f0-4943-a1dd-294f2f4a5eb5" method="POST"><con:settings/><con:parameters><con:parameter><con:name>userInfos</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:representation type="REQUEST" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="REQUEST" id=""><con:mediaType>multipart/form-data</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="34688ba9-2905-4c9a-a9c2-68e74547924c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request>{
 "customerKey": "hientran04",
 "customerType": "NORMAL",
 "login": "hientran04",
 "password": "hientran123456",
 "blocageMail": "false",
 "orangeCode": "orange123",
 "createdBy": "admin",
 "activationKey": "act123",
 "segmentTVA":"01",
 "isAccountValidated": "false",
 "defaultHandle": {
  "address1": "Duy Tan",
  "address2": "Ha Noi",
  "city": "hn",
  "civility": "M",
  "company": "Pentalog",
  "country": "VN",
  "email": "htranthithu@pentalog.fr",
  "firstName": "Tran",
  "name": "Hien",
  "phone": "+84.904438498",
  "gsm": "+84.904438498",
  "profileType": "PAR",
  "type": "DEFAULT",
  "zipCode": "90006",
  "creationDate": "2016-03-14T10:15:00",
  "customLabel": "lab",
  "modifiable": "true"
 }
}</con:request><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/createCustomer</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="userInfos" value="{&quot;ip&quot;:&quot;10.190.29.140&quot;,&quot;userName&quot;:&quot;penta_vietnam&quot;,&quot;httpUserAgent&quot;:&quot;fa49891b783d3fc022009da14f74bd64&quot;}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="" path="createCustomerByLogin" id="14ed37b9-6dae-4a18-a525-8bde745a7dec"><con:settings/><con:parameters/><con:method name="" id="d54cac98-cff0-4cb8-926e-0483cd03cbd6" method="POST"><con:settings/><con:parameters><con:parameter><con:name>user</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:representation type="REQUEST" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="6a3ce9d1-8d6d-4f91-9aa2-a93ce1ce2481" mediaType="application/json" postQueryString="false"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="createCustomerNewFormat" id="a1128d0f-bbcd-4caf-a7b1-38b0f04a757f"><con:settings/><con:parameters/><con:method name="" id="d48e3684-764d-4305-a843-13894ca00108" method="POST"><con:settings/><con:parameters><con:parameter><con:name>user</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:representation type="REQUEST" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="19b1a09a-429a-4ff2-b413-989b82315856" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="createCustomerRapprochement" id="755f604e-bd1e-4c78-9a62-4a9cb9f0b89e"><con:settings/><con:parameters/><con:method name="" id="1cce23fe-6dc7-4051-bb35-e9728fe2683e" method="POST"><con:settings/><con:parameters><con:parameter><con:name>customerKeyPere</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter><con:parameter><con:name>customerKeyFils</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="a2979ad6-4dbe-4773-bcbf-ad2e937ff22e" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="createHandle" id="7062cc3a-aa6d-47a4-8e9f-b39d0bde99a5"><con:settings/><con:parameters/><con:method name="" id="159462a0-948d-4bd4-853f-84a0fe4875fb" method="POST"><con:settings/><con:parameters><con:parameter><con:name>user</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:representation type="REQUEST" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="dad81892-9b63-498e-b9fc-72d40a3c340f" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request> {"customerKey": "197626",
   "handle":    {
      "address1": "9 allee du chateau blanc",
      "address2": null,
      "city": "wasquehal",
      "civility": "M",
      "company": "NORDNET",
      "country": "FR",
      "email": "sylvain.joly@nordnet.com",
      "fax": null,
      "firstName": "Sylvain",
      "gsm": null,
           "intraTVA": null,
      "enabled": true,
      "name": "JOLY",
      "phone": "+33.784259091",
      "profileType": "PAR",
      "siren": null,
      "type": "DEFAULT",
      "zipCode": "59290",
           "customLabel": "test MVNO",
      "modifiable": true,
      "dateValidationEmail": null,
      "dateValidationGSM": null,
           "emailState": "CREATED",
      "pnd": false,
      "gsmState": null,
      "idBaseAdresse": "BA00004034",
      "profession": null,
      "voie": "allee du chateau blanc",
      "numVoie": "9",
      "birthDate": null,
      "siret": null,
      "codeApe": null,
      "flagPresenceAnnuaireMVNO": false,
      "flagOnlyNomMVNO": false,
      "flagAdresseCompleteMVNO": false,
      "flagAntiprospectionMVNO": false,
      "flagPresenceAdresseEmail": false,
      "flagPresenceProfession": false,
      "flagReceptionCNI": true,
      "flagReceptionJD": true,
      "indicateurConservationNum": null,
      "flagAntiannuaireInverseMVNO": false,
      "flagReceptionFormulairePorta": false
   }
 }</con:request><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/createHandle</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="user" value=" {&quot;ip&quot;:&quot;10.190.29.140&quot;,&quot;userName&quot;:&quot;hientran&quot;,&quot;httpUserAgent&quot;:&quot;httpUserAgent&quot;}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="" path="createHandleNewFormat" id="1f10e49c-2846-4fd7-8c03-55b5833d0324"><con:settings/><con:parameters/><con:method name="" id="60cd277c-d921-4aa2-9ab1-6d4f9a034225" method="POST"><con:settings/><con:parameters><con:parameter><con:name>user</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:representation type="REQUEST" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="42335a6c-5eb8-41da-b0a6-d931517efa79" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="createPartner" id="9b3208d4-cd55-44b9-bec2-bd3b67d67781"><con:settings/><con:parameters/><con:method name="" id="2b63be05-2e59-4ecc-b52a-502d7de6e8d9" method="POST"><con:settings/><con:parameters><con:parameter><con:name>createPartnerRequest</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="e1c34c02-e48b-4a55-a36e-4cbbc85142b0" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="disableHandle" id="11e8b751-74b4-4bcf-b02f-6ea4613c5a72"><con:settings/><con:parameters/><con:method name="" id="50a4fe2d-66eb-4d96-abe3-9c870b818dad" method="POST"><con:settings/><con:parameters><con:parameter><con:name>handleKey</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:request name="Request 1" id="a0d05c30-c9db-4635-99bc-679b6433c4b7" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="getByLogin/{login}" id="60d49fc0-29e7-461e-8215-9d5b8e760a3c"><con:settings/><con:parameters><con:parameter><con:name>login</con:name><con:value xsi:nil="true"/><con:style>TEMPLATE</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:method name="" id="a5c7519a-a1ec-4f0a-828a-f9c88a506a12" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="9d4a23e1-1146-4669-8a1e-963738063555" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="getCountryByCode/{countryCode}" id="1968bb66-3c7c-4845-b7ec-863a74f28435"><con:settings/><con:parameters><con:parameter><con:name>countryCode</con:name><con:value xsi:nil="true"/><con:style>TEMPLATE</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:method name="" id="16bdb192-03ce-456b-bd3d-a10830221a68" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="98aa20a4-1063-40f9-b59f-3bb2e1e205df" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="getCustomerByKey/{customerKey}" id="0bc1486c-9114-4d5a-abbb-792898e92c47"><con:settings/><con:parameters><con:parameter><con:name>customerKey</con:name><con:value xsi:nil="true"/><con:style>TEMPLATE</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:method name="" id="f1da3ea4-3346-45be-8dd8-df2de91f512a" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="b7adbd6e-695d-48ec-b677-d8f4ab36fd97" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/getCustomerByKey/hientran_test01</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="customerKey" value="197626" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="" path="getHandleByKey/{handleKey}" id="4f1ff919-fbe4-4bd7-858a-445767c7789f"><con:settings/><con:parameters><con:parameter><con:name>handleKey</con:name><con:value xsi:nil="true"/><con:style>TEMPLATE</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:method name="" id="35abcaee-cf51-4e14-a54a-cf7090ceab21" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="cc374695-eba6-47d0-a890-aa3e83a36846" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/getHandleByKey/004301819</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="handleKey" value="211708010" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="" path="getIdentifiers/{customerKey}" id="40984314-065e-439d-839c-2ca68ad64e70"><con:settings/><con:parameters><con:parameter><con:name>customerKey</con:name><con:value xsi:nil="true"/><con:style>TEMPLATE</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:method name="" id="1da4649d-056e-4b1e-bf7e-b378c85b78b2" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="c71b7a4c-6b78-4f97-8e2b-cc53a527f4d2" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="getLENInformation/{LenCustomerkey}" id="34edfa9b-edf7-4b75-ae58-4ebf93f2fc8c"><con:settings/><con:parameters><con:parameter><con:name>LenCustomerkey</con:name><con:value xsi:nil="true"/><con:style>TEMPLATE</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:method name="" id="9521f6ca-ead1-4179-99fe-e0ef9530b140" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="9ac9c4d1-b168-4fc0-aaa8-fed673a0b20e" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="getPartnerByCode/{partnerCode}" id="57c19b6a-264b-4a83-97e2-142778febc34"><con:settings/><con:parameters><con:parameter><con:name>partnerCode</con:name><con:value xsi:nil="true"/><con:style>TEMPLATE</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:method name="" id="9215d138-86a2-494d-acbc-c2462d67a209" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="0539d064-2136-4e6b-8424-01b68e2f9eb6" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="getPartnerByKey/{partnerKey}" id="920c81ae-dc1b-4b64-ac0c-e0bebfea861a"><con:settings/><con:parameters><con:parameter><con:name>partnerKey</con:name><con:value xsi:nil="true"/><con:style>TEMPLATE</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:method name="" id="35b95491-aa06-40c5-a815-8e98aa84640e" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="7b4cf8f0-cd0f-432c-adad-ce14be09e498" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="isLoginAlreadyExist/{login}" id="bd8c6409-68af-4dad-b5d2-8895f13652f7"><con:settings/><con:parameters><con:parameter><con:name>login</con:name><con:value xsi:nil="true"/><con:style>TEMPLATE</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:method name="" id="9821e3b4-a749-4bad-9fc2-372a5402fc3a" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="f94e9473-4532-4c06-b368-8a597e8ff30c" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="listHandles/{listHandlesRequest}" id="cb2d5013-fbb3-45ea-ad5b-1677efa63087"><con:settings/><con:parameters><con:parameter><con:name>listHandlesRequest</con:name><con:value xsi:nil="true"/><con:style>TEMPLATE</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:method name="" id="d5306d21-ac3b-4054-9c1d-d363edce9550" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="23208860-5fb3-4545-9bd6-6774ef9501d0" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/listHandles/</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="listHandlesRequest" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="" path="listLogs/{listLogsRequest}" id="5e4046ad-332f-43e7-b82a-bacbf558fe70"><con:settings/><con:parameters><con:parameter><con:name>listLogsRequest</con:name><con:value xsi:nil="true"/><con:style>TEMPLATE</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:method name="" id="8882c45a-9629-4171-a4a4-f22ee3258434" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="6cd77070-4c5c-4af9-9a19-1a09801008b9" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="npaiEmailRecovery" id="e1e6f01f-e96d-433e-a683-f237bce706c8"><con:settings/><con:parameters/><con:method name="" id="44b0942b-b61e-467b-85e9-fadd47f3e35d" method="POST"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="27778354-48a3-46bb-b513-490f53fbff64" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="recoverIdentifiers" id="78ae1496-f89d-4112-bd61-0da4dfac5d8c"><con:settings/><con:parameters/><con:method name="" id="53350367-1bee-4567-be83-a7ef52a3c3b0" method="POST"><con:settings/><con:parameters><con:parameter><con:name>identifierCustomer</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter><con:parameter><con:name>tUserInfos</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:request name="Request 1" id="a68e01e8-7d2b-46b3-9410-beeba60e0c28" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="search" id="817d0ff2-33e7-488b-afd0-92e08b99b326"><con:settings/><con:parameters/><con:method name="" id="10602717-ace1-4aeb-a526-410364993eb9" method="POST"><con:settings/><con:parameters><con:parameter><con:name>search</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="1dfe9449-7884-46aa-a532-5822941aa409" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/search</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="search" value="{&quot;identifierCriteriaCustomer&quot;:{&quot;type&quot;:&quot;LOGIN&quot;, &quot;value&quot;:&quot;hientran&quot;}, &quot;cursor&quot;:{&quot;resultsPerPage&quot;:1, &quot;pageNumber&quot;:1}}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="" path="sendActivationKeyByMail" id="3f95d105-a318-422b-bfe4-a7a8c59ebc31"><con:settings/><con:parameters/><con:method name="" id="640c07bc-1c91-4a87-9c85-15044eb7171e" method="POST"><con:settings/><con:parameters><con:parameter><con:name>customerKey</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter><con:parameter><con:name>userInfos</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:request name="Request 1" id="008c2e40-f6cf-426d-b312-98226c206596" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="separateCustomerRapprochement" id="fe7d641e-b5de-480e-8633-f69d2e9b33fe"><con:settings/><con:parameters/><con:method name="" id="292d7220-f77f-4606-bfde-366bbe6e157f" method="POST"><con:settings/><con:parameters><con:parameter><con:name>customerKeyPere</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter><con:parameter><con:name>customerKeyFils</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="b76725e3-085a-4426-b5bb-8901906235ec" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="setLENInformation" id="2c7a7fcc-dcc8-4bec-be3f-2b8a3f44f000"><con:settings/><con:parameters/><con:method name="" id="8f4059e5-9061-486a-bb4a-d1a68eaac015" method="POST"><con:settings/><con:parameters><con:parameter><con:name>lENInformationRequest</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter><con:parameter><con:name>user</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:request name="Request 1" id="cf7d3416-020b-4a80-9aed-8f4d83ddf59d" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="setLastLoginDate/{customerKey}" id="3e9429a1-87c9-4b33-974f-7563d78d0355"><con:settings/><con:parameters><con:parameter><con:name>customerKey</con:name><con:value xsi:nil="true"/><con:style>TEMPLATE</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:method name="" id="2f7bc70c-56ab-4ad8-86c0-dcada8cfc8a7" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="f36f9a2a-32c0-467b-ac4f-07c42583ae24" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="updateHandle" id="a5017950-eb51-4b97-b8e8-50a7d835e6fc"><con:settings/><con:parameters/><con:method name="" id="2befd4c0-4bec-449f-9093-5cbe6b1e61ef" method="POST"><con:settings/><con:parameters><con:parameter><con:name>user</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:representation type="REQUEST" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="6e0e3649-dd29-46fc-a206-e57a5fc98957" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request>{
   "address1": "79 rue jacques brel",
   "address2": "Cau Giay",
   "city": "hanoi",
   "civility": "M",
   "company": "Pentalog",
   "country": "FR",
   "email": "pbuianh@pentalog.fr",
   "fax": null,
   "firstName": "Prenom",
   "gsm": null,
   "handleKey": "211708010",
   "intraTVA": null,
   "enabled": true,
   "name": "NOM",
   "phone": null,
   "profileType": "PAR",
   "siren": null,
   "type": "USER_MVNO",
   "zipCode": "30730",

   "customLabel": "UTILISATEUR",
   "modifiable": true,
   "dateValidationEmail": null,
   "dateValidationGSM": null,
 
   "emailState": "CREATED",
   "pnd": false,
   "gsmState": null,
   "idBaseAdresse": "BA00080877",
   "profession": null,
   "voie": "rue jacques brel",
   "numVoie": "79",
   "birthDate": "1112-11-11",
   "siret": null,
   "codeApe": null,
   "flagPresenceAnnuaireMVNO": false,
   "flagOnlyNomMVNO": false,
   "flagAdresseCompleteMVNO": false,
   "flagAntiprospectionMVNO": false,
   "flagPresenceAdresseEmail": false,
   "flagPresenceProfession": false,
   "flagReceptionCNI": null,
   "flagReceptionJD": null,
   "indicateurConservationNum": null,
   "flagAntiannuaireInverseMVNO": false,
   "flagReceptionFormulairePorta": null
}</con:request><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/updateHandle</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="user" value="{&quot;ip&quot;:&quot;127.0.0.1&quot;,&quot;userName&quot;:&quot;penta_vietnam&quot;,&quot;httpUserAgent&quot;:&quot;fa49891b783d3fc022009da14f74bd64&quot;}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="" path="updateLoginAndPassword" id="cecfe982-2adf-4ba4-802d-592e94ef794d"><con:settings/><con:parameters/><con:method name="" id="a4668177-0d3f-4a99-9691-4c179c998e20" method="POST"><con:settings/><con:parameters><con:parameter><con:name>updateLoginPassdRequest</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter><con:parameter><con:name>tUserInfos</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:request name="Request 1" id="cdd2d1b0-bc44-45ab-8002-3703d3e27be7" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="updateHandleNewFormat" id="e0e55539-2d3a-49c9-89ed-214231d6593d"><con:settings/><con:parameters/><con:method name="" id="5f001f0e-6387-46cd-b9b0-539c629b5803" method="POST"><con:settings/><con:parameters><con:parameter><con:name>user</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:representation type="REQUEST" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="80606cdb-2cc0-47db-8ca4-d8f9658e2327" mediaType="application/json" postQueryString="false"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="updatePreference" id="bfcde825-78d5-462e-b19e-e1df4b40270b"><con:settings/><con:parameters/><con:method name="" id="cce07d92-567e-44ea-b9dd-2cdd682bf1fd" method="POST"><con:settings/><con:parameters><con:parameter><con:name>updatePreferenceRequest</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="49636212-cf5f-4d68-8d84-0c826d3648e8" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="updateRateBand" id="e8dedd7c-096e-4864-a178-09367329af72"><con:settings/><con:parameters/><con:method name="" id="20b57329-38d6-4032-8397-35997c433a4d" method="POST"><con:settings/><con:parameters><con:parameter><con:name>updateRateBandRequest</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter><con:parameter><con:name>user</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:request name="Request 1" id="852ad343-bce7-4f0a-950f-9317de8dd7b5" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="updateReceptionDoc" id="2e006647-582b-4fc1-adb9-46abcfdea5a7"><con:settings/><con:parameters/><con:method name="" id="b7d23044-5efe-4273-888b-6a70119d5ee5" method="POST"><con:settings/><con:parameters><con:parameter><con:name>updateReceptionDocRequest</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="ab52b71c-646d-4c0b-8a2e-5cb09269b6b9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="updateReceptionDocRequest" value="{&quot;handleKey&quot;:&quot;LRIC-8RGCK51128&quot;, &quot;flagReceptionCNI&quot;:&quot;&quot;, &quot;flagReceptionJD&quot;:&quot;&quot;,&quot;flagReceptionFormulairePorta&quot;:true}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="" path="updateSAARICode" id="1acd5bf8-b718-403a-9162-8bce765a40c9"><con:settings/><con:parameters/><con:method name="" id="ac6eedb8-f468-444e-86c1-a432c806154e" method="POST"><con:settings/><con:parameters><con:parameter><con:name>updateSAARICodeRequest</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter><con:parameter><con:name>tUserInfos</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:request name="Request 1" id="8c421684-1d10-453d-b3cd-6cea46c96caf" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="updateSegmentTva" id="fc861355-8cdf-42ae-b6ba-f3b4ef36276d"><con:settings/><con:parameters/><con:method name="" id="1a2ebe3c-f9c4-431a-a2e3-c8a4d95ba6ee" method="POST"><con:settings/><con:parameters><con:parameter><con:name>updateSegmentTvaRequest</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:request name="Request 1" id="5021a24e-e323-4278-acdd-da8fab754f1c" mediaType="application/json" postQueryString="false"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="updateSegmentTvaRequest" value="" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="" path="validateMailWithActivationKey" id="308f5b15-5df3-4354-b721-db462f4e35fb"><con:settings/><con:parameters/><con:method name="" id="be4f6710-ea02-45c5-9559-ec8816c6e132" method="POST"><con:settings/><con:parameters><con:parameter><con:name>activationKey</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter><con:parameter><con:name>userInfos</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:request name="Request 1" id="c3a6602c-7a07-430f-9c4a-e4b9a9e6d1b4" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="validateSMSbyActivationKey" id="991440eb-9adf-49cc-b93a-d79e975eef3f"><con:settings/><con:parameters/><con:method name="" id="44144b33-f3e8-4f40-b75a-9a86ff793cf2" method="POST"><con:settings/><con:parameters><con:parameter><con:name>validateSMSRequest</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter><con:parameter><con:name>user</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:request name="Request 1" id="f7b8edf2-dd8e-4d8e-af64-f5f0e67fe003" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource></con:resource></con:interface><con:interface xsi:type="con:WsdlInterface" id="28321874-d3eb-4818-aa67-59eda2eefc86" wsaVersion="NONE" name="MandateLibraryWSImplServiceSoapBinding" type="wsdl" bindingName="{http://impl.ws.mandatelibrary.nordnet.com/}MandateLibraryWSImplServiceSoapBinding" soapVersion="1_1" anonymous="optional" definition="http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS?wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS?wsdl"><con:part><con:url>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS?wsdl</con:url><con:content><![CDATA[<wsdl:definitions name="MandateLibraryWSImplService" targetNamespace="http://impl.ws.mandatelibrary.nordnet.com/" xmlns:ns1="http://ws.mandatelibrary.nordnet.com/" xmlns:ns2="http://schemas.xmlsoap.org/soap/http" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://impl.ws.mandatelibrary.nordnet.com/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <wsdl:import location="http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS?wsdl=MandateLibraryWS.wsdl" namespace="http://ws.mandatelibrary.nordnet.com/"/>
  <wsdl:binding name="MandateLibraryWSImplServiceSoapBinding" type="ns1:MandateLibraryWS">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="getMandate">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="getMandate">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getMandateResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="MandateException">
        <soap:fault name="MandateException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getMandatePdf">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="getMandatePdf">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getMandatePdfResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="MandateException">
        <soap:fault name="MandateException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="updateIBAN">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="updateIBAN">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="updateIBANResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="MandateException">
        <soap:fault name="MandateException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="updatePayment">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="updatePayment">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="updatePaymentResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="MandateException">
        <soap:fault name="MandateException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="createNNBPayers">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="createNNBPayers">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="createNNBPayersResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="MandateException">
        <soap:fault name="MandateException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="existsCustomerForAccount">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="existsCustomerForAccount">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="existsCustomerForAccountResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="MandateException">
        <soap:fault name="MandateException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="listMandatesForCustomerKey">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="listMandatesForCustomerKey">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="listMandatesForCustomerKeyResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="MandateException">
        <soap:fault name="MandateException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="setEnabled">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="setEnabled">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="setEnabledResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="MandateException">
        <soap:fault name="MandateException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="updateNNBPayers">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="updateNNBPayers">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="updateNNBPayersResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="MandateException">
        <soap:fault name="MandateException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="addCustomer">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="addCustomer">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="addCustomerResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="MandateException">
        <soap:fault name="MandateException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="updateAccount">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="updateAccount">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="updateAccountResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="MandateException">
        <soap:fault name="MandateException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="createForOldCustomer">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="createForOldCustomer">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="createForOldCustomerResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="MandateException">
        <soap:fault name="MandateException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="setFolioCode">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="setFolioCode">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="setFolioCodeResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="MandateException">
        <soap:fault name="MandateException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="removeCustomerForAccount">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="removeCustomerForAccount">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="removeCustomerForAccountResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="MandateException">
        <soap:fault name="MandateException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="processAddDebitRequests">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="processAddDebitRequests">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="processAddDebitRequestsResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="MandateException">
        <soap:fault name="MandateException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="checkIban">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="checkIban">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="checkIbanResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="MandateException">
        <soap:fault name="MandateException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="listMandatesForIBAN">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="listMandatesForIBAN">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="listMandatesForIBANResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="MandateException">
        <soap:fault name="MandateException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="create">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="create">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="createResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="MandateException">
        <soap:fault name="MandateException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getMandateforAccount">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="getMandateforAccount">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getMandateforAccountResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="MandateException">
        <soap:fault name="MandateException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="processGetFolioCodeRequests">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="processGetFolioCodeRequests">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="processGetFolioCodeRequestsResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="MandateException">
        <soap:fault name="MandateException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="MandateLibraryWSImplService">
    <wsdl:port binding="tns:MandateLibraryWSImplServiceSoapBinding" name="MandateLibraryWSImplPort">
      <soap:address location="http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part><con:part><con:url>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS?wsdl=MandateLibraryWS.wsdl</con:url><con:content><![CDATA[<wsdl:definitions name="MandateLibraryWS" targetNamespace="http://ws.mandatelibrary.nordnet.com/" xmlns:ns1="http://ws.mandatelibrary.nordnet.com/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <wsdl:types>
    <xsd:schema attributeFormDefault="qualified" elementFormDefault="qualified" targetNamespace="http://types.ws.common.nordnet.com" xmlns:tns="http://types.ws.common.nordnet.com">
      <xsd:complexType name="userInfos">
        <xsd:sequence>
          <xsd:element minOccurs="0" name="httpUserAgent" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="ip" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="userName" nillable="true" type="xsd:string"/>
        </xsd:sequence>
      </xsd:complexType>
    </xsd:schema>
    <xsd:schema attributeFormDefault="qualified" elementFormDefault="qualified" targetNamespace="http://model.mandatelibrary.nordnet.com" xmlns:tns="http://model.mandatelibrary.nordnet.com">
      <xsd:simpleType name="SepaType">
        <xsd:restriction base="xsd:string">
          <xsd:enumeration value="FIRST"/>
          <xsd:enumeration value="NEXT"/>
        </xsd:restriction>
      </xsd:simpleType>
    </xsd:schema>
    <xsd:schema attributeFormDefault="qualified" elementFormDefault="qualified" targetNamespace="http://utils.java/" xmlns:tns="http://utils.java/">
      <xsd:complexType name="rumCodes">
        <xsd:sequence>
          <xsd:element maxOccurs="unbounded" minOccurs="0" name="string" nillable="true" type="xsd:string"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:complexType name="invoiceKeys">
        <xsd:sequence>
          <xsd:element maxOccurs="unbounded" minOccurs="0" name="string" nillable="true" type="xsd:string"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:complexType name="RUM">
        <xsd:sequence>
          <xsd:element maxOccurs="unbounded" minOccurs="0" name="string" nillable="true" type="xsd:string"/>
        </xsd:sequence>
      </xsd:complexType>
    </xsd:schema>
    <xsd:schema attributeFormDefault="qualified" elementFormDefault="qualified" targetNamespace="http://types.ws.mandatelibrary.nordnet.com" xmlns:ns0="http://model.mandatelibrary.nordnet.com" xmlns:tns="http://types.ws.mandatelibrary.nordnet.com">
      <xsd:import namespace="http://model.mandatelibrary.nordnet.com"/>
      <xsd:complexType name="Customer">
        <xsd:sequence>
          <xsd:element minOccurs="0" name="customerKey" nillable="true" type="xsd:string"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:complexType name="ArrayOfCustomer">
        <xsd:sequence>
          <xsd:element maxOccurs="unbounded" minOccurs="0" name="Customer" nillable="true" type="tns:Customer"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:complexType name="Facture">
        <xsd:sequence>
          <xsd:element minOccurs="0" name="creationDate" nillable="true" type="xsd:dateTime"/>
          <xsd:element minOccurs="0" name="label" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="reference" nillable="true" type="xsd:string"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:complexType name="ArrayOfMandate">
        <xsd:sequence>
          <xsd:element maxOccurs="unbounded" minOccurs="0" name="Mandate" nillable="true" type="tns:Mandate"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:complexType name="Account">
        <xsd:sequence>
          <xsd:element minOccurs="0" name="accountKey" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="address1" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="address2" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="city" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="company" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="country" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="creditCard" nillable="true" type="tns:CreditCard"/>
          <xsd:element minOccurs="0" name="customers" nillable="true" type="tns:ArrayOfCustomer"/>
          <xsd:element minOccurs="0" name="email" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="facture" nillable="true" type="tns:Facture"/>
          <xsd:element minOccurs="0" name="firstName" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="holder" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="iban" nillable="true" type="tns:Iban"/>
          <xsd:element minOccurs="0" name="lastName" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="origin" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="paypal" nillable="true" type="tns:Paypal"/>
          <xsd:element minOccurs="0" name="zipCode" nillable="true" type="xsd:string"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:complexType name="CreditCard">
        <xsd:sequence>
          <xsd:element minOccurs="0" name="creationDate" nillable="true" type="xsd:dateTime"/>
          <xsd:element minOccurs="0" name="label" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="transId" nillable="true" type="xsd:string"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:complexType name="Paypal">
        <xsd:sequence>
          <xsd:element minOccurs="0" name="creationDate" nillable="true" type="xsd:dateTime"/>
          <xsd:element minOccurs="0" name="label" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="reference" nillable="true" type="xsd:string"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:complexType name="Iban">
        <xsd:sequence>
          <xsd:element minOccurs="0" name="bic" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="creationDate" nillable="true" type="xsd:dateTime"/>
          <xsd:element minOccurs="0" name="label" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="number" nillable="true" type="xsd:string"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:complexType name="Mandate">
        <xsd:sequence>
          <xsd:element minOccurs="0" name="account" nillable="true" type="tns:Account"/>
          <xsd:element minOccurs="0" name="enabled" type="xsd:boolean"/>
          <xsd:element minOccurs="0" name="folioCode" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="mandateDate" nillable="true" type="xsd:dateTime"/>
          <xsd:element minOccurs="0" name="rum" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="sepaType" nillable="true" type="ns0:SepaType"/>
        </xsd:sequence>
      </xsd:complexType>
    </xsd:schema>
    <xsd:schema attributeFormDefault="qualified" elementFormDefault="qualified" targetNamespace="http://input.types.ws.mandatelibrary.nordnet.com" xmlns:tns="http://input.types.ws.mandatelibrary.nordnet.com">
      <xsd:complexType name="account">
        <xsd:sequence>
          <xsd:element minOccurs="0" name="accountKey" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="address1" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="address2" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="city" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="company" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="country" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="email" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="firstName" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="holder" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="lastName" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="origin" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="zipCode" nillable="true" type="xsd:string"/>
        </xsd:sequence>
      </xsd:complexType>
    </xsd:schema>
    <xsd:schema attributeFormDefault="qualified" elementFormDefault="qualified" targetNamespace="http://exception.types.ws.mandatelibrary.nordnet.com" xmlns:ns0="http://responses.types.ws.common.nordnet.com" xmlns:tns="http://exception.types.ws.mandatelibrary.nordnet.com">
      <xsd:import namespace="http://responses.types.ws.common.nordnet.com"/>
      <xsd:complexType name="MandateException">
        <xsd:sequence>
          <xsd:element minOccurs="0" name="error" nillable="true" type="ns0:Error"/>
        </xsd:sequence>
      </xsd:complexType>
    </xsd:schema>
    <xsd:schema attributeFormDefault="qualified" elementFormDefault="qualified" targetNamespace="http://responses.types.ws.common.nordnet.com" xmlns:tns="http://responses.types.ws.common.nordnet.com">
      <xsd:complexType name="Error">
        <xsd:sequence>
          <xsd:element minOccurs="0" name="code" nillable="true" type="xsd:string"/>
          <xsd:element minOccurs="0" name="description" nillable="true" type="xsd:string"/>
        </xsd:sequence>
      </xsd:complexType>
    </xsd:schema>
    <xsd:schema attributeFormDefault="unqualified" elementFormDefault="unqualified" targetNamespace="http://ws.mandatelibrary.nordnet.com/" xmlns="http://ws.mandatelibrary.nordnet.com/" xmlns:ns0="http://types.ws.mandatelibrary.nordnet.com" xmlns:ns1="http://types.ws.common.nordnet.com" xmlns:ns2="http://utils.java/" xmlns:ns3="http://input.types.ws.mandatelibrary.nordnet.com" xmlns:ns4="http://exception.types.ws.mandatelibrary.nordnet.com" xmlns:tns="http://impl.ws.mandatelibrary.nordnet.com/">
      <xsd:import namespace="http://types.ws.mandatelibrary.nordnet.com"/>
      <xsd:import namespace="http://types.ws.common.nordnet.com"/>
      <xsd:import namespace="http://utils.java/"/>
      <xsd:import namespace="http://input.types.ws.mandatelibrary.nordnet.com"/>
      <xsd:element name="getMandate" type="getMandate"/>
      <xsd:complexType name="getMandate">
        <xsd:sequence>
          <xsd:element form="qualified" minOccurs="0" name="rum" nillable="true" type="xsd:string"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="getMandateResponse" type="getMandateResponse"/>
      <xsd:complexType name="getMandateResponse">
        <xsd:sequence>
          <xsd:element minOccurs="0" name="return" type="ns0:Mandate"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="getMandatePdf" type="getMandatePdf"/>
      <xsd:complexType name="getMandatePdf">
        <xsd:sequence>
          <xsd:element form="qualified" minOccurs="0" name="rum" nillable="true" type="xsd:string"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="getMandatePdfResponse" type="getMandatePdfResponse"/>
      <xsd:complexType name="getMandatePdfResponse">
        <xsd:sequence>
          <xsd:element name="return" nillable="true" type="xsd:base64Binary"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="updatePayment" type="updatePayment"/>
      <xsd:complexType name="updatePayment">
        <xsd:sequence>
          <xsd:element form="qualified" minOccurs="0" name="rum" nillable="true" type="xsd:string"/>
          <xsd:element form="qualified" minOccurs="0" name="iban" type="ns0:Iban"/>
          <xsd:element form="qualified" minOccurs="0" name="creditCard" type="ns0:CreditCard"/>
          <xsd:element form="qualified" minOccurs="0" name="facture" type="ns0:Facture"/>
          <xsd:element form="qualified" minOccurs="0" name="paypal" type="ns0:Paypal"/>
          <xsd:element form="qualified" minOccurs="0" name="userInfos" type="ns1:userInfos"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="updatePaymentResponse" type="updatePaymentResponse"/>
      <xsd:complexType name="updatePaymentResponse">
        <xsd:sequence/>
      </xsd:complexType>
      <xsd:element name="updateIBAN" type="updateIBAN"/>
      <xsd:complexType name="updateIBAN">
        <xsd:sequence>
          <xsd:element form="qualified" minOccurs="0" name="rum" nillable="true" type="xsd:string"/>
          <xsd:element form="qualified" minOccurs="0" name="iban" type="ns0:Iban"/>
          <xsd:element form="qualified" minOccurs="0" name="userInfos" type="ns1:userInfos"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="updateIBANResponse" type="updateIBANResponse"/>
      <xsd:complexType name="updateIBANResponse">
        <xsd:sequence/>
      </xsd:complexType>
      <xsd:element name="existsCustomerForAccount" type="existsCustomerForAccount"/>
      <xsd:complexType name="existsCustomerForAccount">
        <xsd:sequence>
          <xsd:element form="qualified" minOccurs="0" name="customerKey" nillable="true" type="xsd:string"/>
          <xsd:element form="qualified" minOccurs="0" name="accountKey" nillable="true" type="xsd:string"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="existsCustomerForAccountResponse" type="existsCustomerForAccountResponse"/>
      <xsd:complexType name="existsCustomerForAccountResponse">
        <xsd:sequence>
          <xsd:element name="return" type="xsd:boolean"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="createNNBPayers" type="createNNBPayers"/>
      <xsd:complexType name="createNNBPayers">
        <xsd:sequence>
          <xsd:element form="qualified" minOccurs="0" name="rumCodes" type="ns2:rumCodes"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="createNNBPayersResponse" type="createNNBPayersResponse"/>
      <xsd:complexType name="createNNBPayersResponse">
        <xsd:sequence/>
      </xsd:complexType>
      <xsd:element name="setEnabled" type="setEnabled"/>
      <xsd:complexType name="setEnabled">
        <xsd:sequence>
          <xsd:element form="qualified" minOccurs="0" name="rum" nillable="true" type="xsd:string"/>
          <xsd:element form="qualified" name="enabled" type="xsd:boolean"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="setEnabledResponse" type="setEnabledResponse"/>
      <xsd:complexType name="setEnabledResponse">
        <xsd:sequence/>
      </xsd:complexType>
      <xsd:element name="listMandatesForCustomerKey" type="listMandatesForCustomerKey"/>
      <xsd:complexType name="listMandatesForCustomerKey">
        <xsd:sequence>
          <xsd:element form="qualified" minOccurs="0" name="customerKey" nillable="true" type="xsd:string"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="listMandatesForCustomerKeyResponse" type="listMandatesForCustomerKeyResponse"/>
      <xsd:complexType name="listMandatesForCustomerKeyResponse">
        <xsd:sequence>
          <xsd:element minOccurs="0" name="return" type="ns0:ArrayOfMandate"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="updateNNBPayers" type="updateNNBPayers"/>
      <xsd:complexType name="updateNNBPayers">
        <xsd:sequence>
          <xsd:element form="qualified" minOccurs="0" name="rumCodes" type="ns2:rumCodes"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="updateNNBPayersResponse" type="updateNNBPayersResponse"/>
      <xsd:complexType name="updateNNBPayersResponse">
        <xsd:sequence/>
      </xsd:complexType>
      <xsd:element name="addCustomer" type="addCustomer"/>
      <xsd:complexType name="addCustomer">
        <xsd:sequence>
          <xsd:element form="qualified" minOccurs="0" name="rum" nillable="true" type="xsd:string"/>
          <xsd:element form="qualified" minOccurs="0" name="customerKey" nillable="true" type="xsd:string"/>
          <xsd:element form="qualified" minOccurs="0" name="userInfos" type="ns1:userInfos"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="addCustomerResponse" type="addCustomerResponse"/>
      <xsd:complexType name="addCustomerResponse">
        <xsd:sequence/>
      </xsd:complexType>
      <xsd:element name="updateAccount" type="updateAccount"/>
      <xsd:complexType name="updateAccount">
        <xsd:sequence>
          <xsd:element form="qualified" minOccurs="0" name="rum" nillable="true" type="xsd:string"/>
          <xsd:element form="qualified" minOccurs="0" name="account" type="ns3:account"/>
          <xsd:element form="qualified" minOccurs="0" name="userInfos" type="ns1:userInfos"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="updateAccountResponse" type="updateAccountResponse"/>
      <xsd:complexType name="updateAccountResponse">
        <xsd:sequence/>
      </xsd:complexType>
      <xsd:element name="setFolioCode" type="setFolioCode"/>
      <xsd:complexType name="setFolioCode">
        <xsd:sequence>
          <xsd:element form="qualified" minOccurs="0" name="rum" nillable="true" type="xsd:string"/>
          <xsd:element form="qualified" minOccurs="0" name="folioCode" nillable="true" type="xsd:string"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="setFolioCodeResponse" type="setFolioCodeResponse"/>
      <xsd:complexType name="setFolioCodeResponse">
        <xsd:sequence/>
      </xsd:complexType>
      <xsd:element name="createForOldCustomer" type="createForOldCustomer"/>
      <xsd:complexType name="createForOldCustomer">
        <xsd:sequence>
          <xsd:element form="qualified" minOccurs="0" name="customerKey" nillable="true" type="xsd:string"/>
          <xsd:element form="qualified" minOccurs="0" name="ics" nillable="true" type="xsd:string"/>
          <xsd:element form="qualified" minOccurs="0" name="account" type="ns3:account"/>
          <xsd:element form="qualified" minOccurs="0" name="iban" type="ns0:Iban"/>
          <xsd:element form="qualified" minOccurs="0" name="creditCard" type="ns0:CreditCard"/>
          <xsd:element form="qualified" minOccurs="0" name="facture" type="ns0:Facture"/>
          <xsd:element form="qualified" minOccurs="0" name="paypal" type="ns0:Paypal"/>
          <xsd:element form="qualified" minOccurs="0" name="userInfos" type="ns1:userInfos"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="createForOldCustomerResponse" type="createForOldCustomerResponse"/>
      <xsd:complexType name="createForOldCustomerResponse">
        <xsd:sequence>
          <xsd:element minOccurs="0" name="return" type="ns0:Mandate"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="removeCustomerForAccount" type="removeCustomerForAccount"/>
      <xsd:complexType name="removeCustomerForAccount">
        <xsd:sequence>
          <xsd:element form="qualified" minOccurs="0" name="customerKey" nillable="true" type="xsd:string"/>
          <xsd:element form="qualified" minOccurs="0" name="accountKey" nillable="true" type="xsd:string"/>
          <xsd:element form="qualified" minOccurs="0" name="userInfos" type="ns1:userInfos"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="removeCustomerForAccountResponse" type="removeCustomerForAccountResponse"/>
      <xsd:complexType name="removeCustomerForAccountResponse">
        <xsd:sequence/>
      </xsd:complexType>
      <xsd:element name="processAddDebitRequests" type="processAddDebitRequests"/>
      <xsd:complexType name="processAddDebitRequests">
        <xsd:sequence>
          <xsd:element form="qualified" minOccurs="0" name="invoiceKeys" type="ns2:invoiceKeys"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="processAddDebitRequestsResponse" type="processAddDebitRequestsResponse"/>
      <xsd:complexType name="processAddDebitRequestsResponse">
        <xsd:sequence/>
      </xsd:complexType>
      <xsd:element name="checkIban" type="checkIban"/>
      <xsd:complexType name="checkIban">
        <xsd:sequence>
          <xsd:element form="qualified" minOccurs="0" name="iban" type="ns0:Iban"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="checkIbanResponse" type="checkIbanResponse"/>
      <xsd:complexType name="checkIbanResponse">
        <xsd:sequence>
          <xsd:element name="return" type="xsd:boolean"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="listMandatesForIBAN" type="listMandatesForIBAN"/>
      <xsd:complexType name="listMandatesForIBAN">
        <xsd:sequence>
          <xsd:element form="qualified" minOccurs="0" name="number" nillable="true" type="xsd:string"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="listMandatesForIBANResponse" type="listMandatesForIBANResponse"/>
      <xsd:complexType name="listMandatesForIBANResponse">
        <xsd:sequence>
          <xsd:element minOccurs="0" name="return" type="ns0:ArrayOfMandate"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="create" type="create"/>
      <xsd:complexType name="create">
        <xsd:sequence>
          <xsd:element form="qualified" minOccurs="0" name="customerKey" nillable="true" type="xsd:string"/>
          <xsd:element form="qualified" minOccurs="0" name="ics" nillable="true" type="xsd:string"/>
          <xsd:element form="qualified" minOccurs="0" name="account" type="ns3:account"/>
          <xsd:element form="qualified" minOccurs="0" name="iban" type="ns0:Iban"/>
          <xsd:element form="qualified" minOccurs="0" name="creditCard" type="ns0:CreditCard"/>
          <xsd:element form="qualified" minOccurs="0" name="facture" type="ns0:Facture"/>
          <xsd:element form="qualified" minOccurs="0" name="paypal" type="ns0:Paypal"/>
          <xsd:element form="qualified" minOccurs="0" name="userInfos" type="ns1:userInfos"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="createResponse" type="createResponse"/>
      <xsd:complexType name="createResponse">
        <xsd:sequence>
          <xsd:element minOccurs="0" name="return" type="ns0:Mandate"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="getMandateforAccount" type="getMandateforAccount"/>
      <xsd:complexType name="getMandateforAccount">
        <xsd:sequence>
          <xsd:element form="qualified" minOccurs="0" name="accountKey" nillable="true" type="xsd:string"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="getMandateforAccountResponse" type="getMandateforAccountResponse"/>
      <xsd:complexType name="getMandateforAccountResponse">
        <xsd:sequence>
          <xsd:element minOccurs="0" name="return" type="ns0:Mandate"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="processGetFolioCodeRequests" type="processGetFolioCodeRequests"/>
      <xsd:complexType name="processGetFolioCodeRequests">
        <xsd:sequence>
          <xsd:element form="qualified" minOccurs="0" name="RUM" type="ns2:RUM"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="processGetFolioCodeRequestsResponse" type="processGetFolioCodeRequestsResponse"/>
      <xsd:complexType name="processGetFolioCodeRequestsResponse">
        <xsd:sequence/>
      </xsd:complexType>
      <xsd:element name="MandateException" nillable="true" type="ns4:MandateException"/>
    </xsd:schema>
  </wsdl:types>
  <wsdl:message name="createNNBPayers">
    <wsdl:part element="ns1:createNNBPayers" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="existsCustomerForAccount">
    <wsdl:part element="ns1:existsCustomerForAccount" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="create">
    <wsdl:part element="ns1:create" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="getMandateforAccountResponse">
    <wsdl:part element="ns1:getMandateforAccountResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="createForOldCustomerResponse">
    <wsdl:part element="ns1:createForOldCustomerResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="updatePayment">
    <wsdl:part element="ns1:updatePayment" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="addCustomerResponse">
    <wsdl:part element="ns1:addCustomerResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="addCustomer">
    <wsdl:part element="ns1:addCustomer" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="removeCustomerForAccountResponse">
    <wsdl:part element="ns1:removeCustomerForAccountResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="updatePaymentResponse">
    <wsdl:part element="ns1:updatePaymentResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="updateNNBPayers">
    <wsdl:part element="ns1:updateNNBPayers" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="processGetFolioCodeRequests">
    <wsdl:part element="ns1:processGetFolioCodeRequests" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="listMandatesForIBANResponse">
    <wsdl:part element="ns1:listMandatesForIBANResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="listMandatesForIBAN">
    <wsdl:part element="ns1:listMandatesForIBAN" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="setFolioCode">
    <wsdl:part element="ns1:setFolioCode" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="createForOldCustomer">
    <wsdl:part element="ns1:createForOldCustomer" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="MandateException">
    <wsdl:part element="ns1:MandateException" name="MandateException"/>
  </wsdl:message>
  <wsdl:message name="getMandatePdfResponse">
    <wsdl:part element="ns1:getMandatePdfResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="removeCustomerForAccount">
    <wsdl:part element="ns1:removeCustomerForAccount" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="listMandatesForCustomerKeyResponse">
    <wsdl:part element="ns1:listMandatesForCustomerKeyResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="updateIBANResponse">
    <wsdl:part element="ns1:updateIBANResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="setEnabled">
    <wsdl:part element="ns1:setEnabled" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="getMandateResponse">
    <wsdl:part element="ns1:getMandateResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="updateAccountResponse">
    <wsdl:part element="ns1:updateAccountResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="existsCustomerForAccountResponse">
    <wsdl:part element="ns1:existsCustomerForAccountResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="setFolioCodeResponse">
    <wsdl:part element="ns1:setFolioCodeResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="updateNNBPayersResponse">
    <wsdl:part element="ns1:updateNNBPayersResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="createResponse">
    <wsdl:part element="ns1:createResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="createNNBPayersResponse">
    <wsdl:part element="ns1:createNNBPayersResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="updateAccount">
    <wsdl:part element="ns1:updateAccount" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="checkIban">
    <wsdl:part element="ns1:checkIban" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="getMandate">
    <wsdl:part element="ns1:getMandate" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="processGetFolioCodeRequestsResponse">
    <wsdl:part element="ns1:processGetFolioCodeRequestsResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="listMandatesForCustomerKey">
    <wsdl:part element="ns1:listMandatesForCustomerKey" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="processAddDebitRequestsResponse">
    <wsdl:part element="ns1:processAddDebitRequestsResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="updateIBAN">
    <wsdl:part element="ns1:updateIBAN" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="getMandateforAccount">
    <wsdl:part element="ns1:getMandateforAccount" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="checkIbanResponse">
    <wsdl:part element="ns1:checkIbanResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="getMandatePdf">
    <wsdl:part element="ns1:getMandatePdf" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="setEnabledResponse">
    <wsdl:part element="ns1:setEnabledResponse" name="parameters"/>
  </wsdl:message>
  <wsdl:message name="processAddDebitRequests">
    <wsdl:part element="ns1:processAddDebitRequests" name="parameters"/>
  </wsdl:message>
  <wsdl:portType name="MandateLibraryWS">
    <wsdl:operation name="getMandate">
      <wsdl:input message="ns1:getMandate" name="getMandate"/>
      <wsdl:output message="ns1:getMandateResponse" name="getMandateResponse"/>
      <wsdl:fault message="ns1:MandateException" name="MandateException"/>
    </wsdl:operation>
    <wsdl:operation name="getMandatePdf">
      <wsdl:input message="ns1:getMandatePdf" name="getMandatePdf"/>
      <wsdl:output message="ns1:getMandatePdfResponse" name="getMandatePdfResponse"/>
      <wsdl:fault message="ns1:MandateException" name="MandateException"/>
    </wsdl:operation>
    <wsdl:operation name="updatePayment">
      <wsdl:input message="ns1:updatePayment" name="updatePayment"/>
      <wsdl:output message="ns1:updatePaymentResponse" name="updatePaymentResponse"/>
      <wsdl:fault message="ns1:MandateException" name="MandateException"/>
    </wsdl:operation>
    <wsdl:operation name="updateIBAN">
      <wsdl:input message="ns1:updateIBAN" name="updateIBAN"/>
      <wsdl:output message="ns1:updateIBANResponse" name="updateIBANResponse"/>
      <wsdl:fault message="ns1:MandateException" name="MandateException"/>
    </wsdl:operation>
    <wsdl:operation name="existsCustomerForAccount">
      <wsdl:input message="ns1:existsCustomerForAccount" name="existsCustomerForAccount"/>
      <wsdl:output message="ns1:existsCustomerForAccountResponse" name="existsCustomerForAccountResponse"/>
      <wsdl:fault message="ns1:MandateException" name="MandateException"/>
    </wsdl:operation>
    <wsdl:operation name="createNNBPayers">
      <wsdl:input message="ns1:createNNBPayers" name="createNNBPayers"/>
      <wsdl:output message="ns1:createNNBPayersResponse" name="createNNBPayersResponse"/>
      <wsdl:fault message="ns1:MandateException" name="MandateException"/>
    </wsdl:operation>
    <wsdl:operation name="setEnabled">
      <wsdl:input message="ns1:setEnabled" name="setEnabled"/>
      <wsdl:output message="ns1:setEnabledResponse" name="setEnabledResponse"/>
      <wsdl:fault message="ns1:MandateException" name="MandateException"/>
    </wsdl:operation>
    <wsdl:operation name="listMandatesForCustomerKey">
      <wsdl:input message="ns1:listMandatesForCustomerKey" name="listMandatesForCustomerKey"/>
      <wsdl:output message="ns1:listMandatesForCustomerKeyResponse" name="listMandatesForCustomerKeyResponse"/>
      <wsdl:fault message="ns1:MandateException" name="MandateException"/>
    </wsdl:operation>
    <wsdl:operation name="updateNNBPayers">
      <wsdl:input message="ns1:updateNNBPayers" name="updateNNBPayers"/>
      <wsdl:output message="ns1:updateNNBPayersResponse" name="updateNNBPayersResponse"/>
      <wsdl:fault message="ns1:MandateException" name="MandateException"/>
    </wsdl:operation>
    <wsdl:operation name="addCustomer">
      <wsdl:input message="ns1:addCustomer" name="addCustomer"/>
      <wsdl:output message="ns1:addCustomerResponse" name="addCustomerResponse"/>
      <wsdl:fault message="ns1:MandateException" name="MandateException"/>
    </wsdl:operation>
    <wsdl:operation name="updateAccount">
      <wsdl:input message="ns1:updateAccount" name="updateAccount"/>
      <wsdl:output message="ns1:updateAccountResponse" name="updateAccountResponse"/>
      <wsdl:fault message="ns1:MandateException" name="MandateException"/>
    </wsdl:operation>
    <wsdl:operation name="setFolioCode">
      <wsdl:input message="ns1:setFolioCode" name="setFolioCode"/>
      <wsdl:output message="ns1:setFolioCodeResponse" name="setFolioCodeResponse"/>
      <wsdl:fault message="ns1:MandateException" name="MandateException"/>
    </wsdl:operation>
    <wsdl:operation name="createForOldCustomer">
      <wsdl:input message="ns1:createForOldCustomer" name="createForOldCustomer"/>
      <wsdl:output message="ns1:createForOldCustomerResponse" name="createForOldCustomerResponse"/>
      <wsdl:fault message="ns1:MandateException" name="MandateException"/>
    </wsdl:operation>
    <wsdl:operation name="removeCustomerForAccount">
      <wsdl:input message="ns1:removeCustomerForAccount" name="removeCustomerForAccount"/>
      <wsdl:output message="ns1:removeCustomerForAccountResponse" name="removeCustomerForAccountResponse"/>
      <wsdl:fault message="ns1:MandateException" name="MandateException"/>
    </wsdl:operation>
    <wsdl:operation name="processAddDebitRequests">
      <wsdl:input message="ns1:processAddDebitRequests" name="processAddDebitRequests"/>
      <wsdl:output message="ns1:processAddDebitRequestsResponse" name="processAddDebitRequestsResponse"/>
      <wsdl:fault message="ns1:MandateException" name="MandateException"/>
    </wsdl:operation>
    <wsdl:operation name="checkIban">
      <wsdl:input message="ns1:checkIban" name="checkIban"/>
      <wsdl:output message="ns1:checkIbanResponse" name="checkIbanResponse"/>
      <wsdl:fault message="ns1:MandateException" name="MandateException"/>
    </wsdl:operation>
    <wsdl:operation name="listMandatesForIBAN">
      <wsdl:input message="ns1:listMandatesForIBAN" name="listMandatesForIBAN"/>
      <wsdl:output message="ns1:listMandatesForIBANResponse" name="listMandatesForIBANResponse"/>
      <wsdl:fault message="ns1:MandateException" name="MandateException"/>
    </wsdl:operation>
    <wsdl:operation name="create">
      <wsdl:input message="ns1:create" name="create"/>
      <wsdl:output message="ns1:createResponse" name="createResponse"/>
      <wsdl:fault message="ns1:MandateException" name="MandateException"/>
    </wsdl:operation>
    <wsdl:operation name="getMandateforAccount">
      <wsdl:input message="ns1:getMandateforAccount" name="getMandateforAccount"/>
      <wsdl:output message="ns1:getMandateforAccountResponse" name="getMandateforAccountResponse"/>
      <wsdl:fault message="ns1:MandateException" name="MandateException"/>
    </wsdl:operation>
    <wsdl:operation name="processGetFolioCodeRequests">
      <wsdl:input message="ns1:processGetFolioCodeRequests" name="processGetFolioCodeRequests"/>
      <wsdl:output message="ns1:processGetFolioCodeRequestsResponse" name="processGetFolioCodeRequestsResponse"/>
      <wsdl:fault message="ns1:MandateException" name="MandateException"/>
    </wsdl:operation>
  </wsdl:portType>
</wsdl:definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint></con:endpoints><con:operation id="83510ef0-ed5f-4192-a144-b6a01e2bfba0" isOneWay="false" action="" name="addCustomer" bindingOperationName="addCustomer" type="Request-Response" outputName="addCustomerResponse" inputName="addCustomer" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="fbf5ef29-c78f-42f5-ac35-7b77317598a2" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/" xmlns:typ="http://types.ws.common.nordnet.com">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:addCustomer>\r
         <!--Optional:-->\r
         <ws:rum>?</ws:rum>\r
         <!--Optional:-->\r
         <ws:customerKey>?</ws:customerKey>\r
         <!--Optional:-->\r
         <ws:userInfos>\r
            <!--Optional:-->\r
            <typ:httpUserAgent>?</typ:httpUserAgent>\r
            <!--Optional:-->\r
            <typ:ip>?</typ:ip>\r
            <!--Optional:-->\r
            <typ:userName>?</typ:userName>\r
         </ws:userInfos>\r
      </ws:addCustomer>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/addCustomer"/></con:call><con:call id="bb7e160a-a34c-4d89-adfe-f16ea35cd1ff" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/" xmlns:typ="http://types.ws.common.nordnet.com">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:addCustomer>\r
         <!--Optional:-->\r
         <ws:rum>?</ws:rum>\r
         <!--Optional:-->\r
         <ws:customerKey>?</ws:customerKey>\r
         <!--Optional:-->\r
         <ws:userInfos>\r
            <!--Optional:-->\r
            <typ:httpUserAgent>?</typ:httpUserAgent>\r
            <!--Optional:-->\r
            <typ:ip>?</typ:ip>\r
            <!--Optional:-->\r
            <typ:userName>?</typ:userName>\r
         </ws:userInfos>\r
      </ws:addCustomer>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/addCustomer"/></con:call></con:operation><con:operation id="40460a33-0886-4cf9-985d-75a06d53ee41" isOneWay="false" action="" name="checkIban" bindingOperationName="checkIban" type="Request-Response" outputName="checkIbanResponse" inputName="checkIban" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="a1d33dbe-bd7c-4330-9753-ac19a745bd3c" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/" xmlns:typ="http://types.ws.mandatelibrary.nordnet.com">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:checkIban>\r
         <!--Optional:-->\r
         <ws:iban>\r
            <!--Optional:-->\r
            <typ:bic>?</typ:bic>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:number>?</typ:number>\r
         </ws:iban>\r
      </ws:checkIban>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/checkIban"/></con:call><con:call id="63d675fc-9a75-4271-b18c-e6c99bc94991" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/" xmlns:typ="http://types.ws.mandatelibrary.nordnet.com">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:checkIban>\r
         <!--Optional:-->\r
         <ws:iban>\r
            <!--Optional:-->\r
            <typ:bic>?</typ:bic>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:number>?</typ:number>\r
         </ws:iban>\r
      </ws:checkIban>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/checkIban"/></con:call></con:operation><con:operation id="3c74d632-a797-427e-9898-e66a9c6e5f3a" isOneWay="false" action="" name="create" bindingOperationName="create" type="Request-Response" outputName="createResponse" inputName="create" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="6a62f03f-8dc1-431f-9bef-01afc4cfef92" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/" xmlns:inp="http://input.types.ws.mandatelibrary.nordnet.com" xmlns:typ="http://types.ws.mandatelibrary.nordnet.com" xmlns:typ1="http://types.ws.common.nordnet.com">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:create>\r
         <!--Optional:-->\r
         <ws:customerKey>?</ws:customerKey>\r
         <!--Optional:-->\r
         <ws:ics>?</ws:ics>\r
         <!--Optional:-->\r
         <ws:account>\r
            <!--Optional:-->\r
            <inp:accountKey>?</inp:accountKey>\r
            <!--Optional:-->\r
            <inp:address1>?</inp:address1>\r
            <!--Optional:-->\r
            <inp:address2>?</inp:address2>\r
            <!--Optional:-->\r
            <inp:city>?</inp:city>\r
            <!--Optional:-->\r
            <inp:company>?</inp:company>\r
            <!--Optional:-->\r
            <inp:country>?</inp:country>\r
            <!--Optional:-->\r
            <inp:email>?</inp:email>\r
            <!--Optional:-->\r
            <inp:firstName>?</inp:firstName>\r
            <!--Optional:-->\r
            <inp:holder>?</inp:holder>\r
            <!--Optional:-->\r
            <inp:lastName>?</inp:lastName>\r
            <!--Optional:-->\r
            <inp:origin>?</inp:origin>\r
            <!--Optional:-->\r
            <inp:zipCode>?</inp:zipCode>\r
         </ws:account>\r
         <!--Optional:-->\r
         <ws:iban>\r
            <!--Optional:-->\r
            <typ:bic>?</typ:bic>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:number>?</typ:number>\r
         </ws:iban>\r
         <!--Optional:-->\r
         <ws:creditCard>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:transId>?</typ:transId>\r
         </ws:creditCard>\r
         <!--Optional:-->\r
         <ws:facture>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:reference>?</typ:reference>\r
         </ws:facture>\r
         <!--Optional:-->\r
         <ws:paypal>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:reference>?</typ:reference>\r
         </ws:paypal>\r
         <!--Optional:-->\r
         <ws:userInfos>\r
            <!--Optional:-->\r
            <typ1:httpUserAgent>?</typ1:httpUserAgent>\r
            <!--Optional:-->\r
            <typ1:ip>?</typ1:ip>\r
            <!--Optional:-->\r
            <typ1:userName>?</typ1:userName>\r
         </ws:userInfos>\r
      </ws:create>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/create"/></con:call><con:call id="23d5e86b-26d3-4be6-80bc-0c436b407526" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/" xmlns:inp="http://input.types.ws.mandatelibrary.nordnet.com" xmlns:typ="http://types.ws.mandatelibrary.nordnet.com" xmlns:typ1="http://types.ws.common.nordnet.com">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:create>\r
         <!--Optional:-->\r
         <ws:customerKey>?</ws:customerKey>\r
         <!--Optional:-->\r
         <ws:ics>?</ws:ics>\r
         <!--Optional:-->\r
         <ws:account>\r
            <!--Optional:-->\r
            <inp:accountKey>?</inp:accountKey>\r
            <!--Optional:-->\r
            <inp:address1>?</inp:address1>\r
            <!--Optional:-->\r
            <inp:address2>?</inp:address2>\r
            <!--Optional:-->\r
            <inp:city>?</inp:city>\r
            <!--Optional:-->\r
            <inp:company>?</inp:company>\r
            <!--Optional:-->\r
            <inp:country>?</inp:country>\r
            <!--Optional:-->\r
            <inp:email>?</inp:email>\r
            <!--Optional:-->\r
            <inp:firstName>?</inp:firstName>\r
            <!--Optional:-->\r
            <inp:holder>?</inp:holder>\r
            <!--Optional:-->\r
            <inp:lastName>?</inp:lastName>\r
            <!--Optional:-->\r
            <inp:origin>?</inp:origin>\r
            <!--Optional:-->\r
            <inp:zipCode>?</inp:zipCode>\r
         </ws:account>\r
         <!--Optional:-->\r
         <ws:iban>\r
            <!--Optional:-->\r
            <typ:bic>?</typ:bic>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:number>?</typ:number>\r
         </ws:iban>\r
         <!--Optional:-->\r
         <ws:creditCard>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:transId>?</typ:transId>\r
         </ws:creditCard>\r
         <!--Optional:-->\r
         <ws:facture>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:reference>?</typ:reference>\r
         </ws:facture>\r
         <!--Optional:-->\r
         <ws:paypal>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:reference>?</typ:reference>\r
         </ws:paypal>\r
         <!--Optional:-->\r
         <ws:userInfos>\r
            <!--Optional:-->\r
            <typ1:httpUserAgent>?</typ1:httpUserAgent>\r
            <!--Optional:-->\r
            <typ1:ip>?</typ1:ip>\r
            <!--Optional:-->\r
            <typ1:userName>?</typ1:userName>\r
         </ws:userInfos>\r
      </ws:create>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/create"/></con:call></con:operation><con:operation id="e278acdb-e544-49ba-9462-a2f7559488b8" isOneWay="false" action="" name="createForOldCustomer" bindingOperationName="createForOldCustomer" type="Request-Response" outputName="createForOldCustomerResponse" inputName="createForOldCustomer" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="153cfea4-ae16-4065-8cb0-3823dca9805d" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/" xmlns:inp="http://input.types.ws.mandatelibrary.nordnet.com" xmlns:typ="http://types.ws.mandatelibrary.nordnet.com" xmlns:typ1="http://types.ws.common.nordnet.com">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:createForOldCustomer>\r
         <!--Optional:-->\r
         <ws:customerKey>?</ws:customerKey>\r
         <!--Optional:-->\r
         <ws:ics>?</ws:ics>\r
         <!--Optional:-->\r
         <ws:account>\r
            <!--Optional:-->\r
            <inp:accountKey>?</inp:accountKey>\r
            <!--Optional:-->\r
            <inp:address1>?</inp:address1>\r
            <!--Optional:-->\r
            <inp:address2>?</inp:address2>\r
            <!--Optional:-->\r
            <inp:city>?</inp:city>\r
            <!--Optional:-->\r
            <inp:company>?</inp:company>\r
            <!--Optional:-->\r
            <inp:country>?</inp:country>\r
            <!--Optional:-->\r
            <inp:email>?</inp:email>\r
            <!--Optional:-->\r
            <inp:firstName>?</inp:firstName>\r
            <!--Optional:-->\r
            <inp:holder>?</inp:holder>\r
            <!--Optional:-->\r
            <inp:lastName>?</inp:lastName>\r
            <!--Optional:-->\r
            <inp:origin>?</inp:origin>\r
            <!--Optional:-->\r
            <inp:zipCode>?</inp:zipCode>\r
         </ws:account>\r
         <!--Optional:-->\r
         <ws:iban>\r
            <!--Optional:-->\r
            <typ:bic>?</typ:bic>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:number>?</typ:number>\r
         </ws:iban>\r
         <!--Optional:-->\r
         <ws:creditCard>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:transId>?</typ:transId>\r
         </ws:creditCard>\r
         <!--Optional:-->\r
         <ws:facture>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:reference>?</typ:reference>\r
         </ws:facture>\r
         <!--Optional:-->\r
         <ws:paypal>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:reference>?</typ:reference>\r
         </ws:paypal>\r
         <!--Optional:-->\r
         <ws:userInfos>\r
            <!--Optional:-->\r
            <typ1:httpUserAgent>?</typ1:httpUserAgent>\r
            <!--Optional:-->\r
            <typ1:ip>?</typ1:ip>\r
            <!--Optional:-->\r
            <typ1:userName>?</typ1:userName>\r
         </ws:userInfos>\r
      </ws:createForOldCustomer>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/createForOldCustomer"/></con:call><con:call id="1985cfe2-f45d-491c-824c-7e2cdedb6728" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/" xmlns:inp="http://input.types.ws.mandatelibrary.nordnet.com" xmlns:typ="http://types.ws.mandatelibrary.nordnet.com" xmlns:typ1="http://types.ws.common.nordnet.com">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:createForOldCustomer>\r
         <!--Optional:-->\r
         <ws:customerKey>?</ws:customerKey>\r
         <!--Optional:-->\r
         <ws:ics>?</ws:ics>\r
         <!--Optional:-->\r
         <ws:account>\r
            <!--Optional:-->\r
            <inp:accountKey>?</inp:accountKey>\r
            <!--Optional:-->\r
            <inp:address1>?</inp:address1>\r
            <!--Optional:-->\r
            <inp:address2>?</inp:address2>\r
            <!--Optional:-->\r
            <inp:city>?</inp:city>\r
            <!--Optional:-->\r
            <inp:company>?</inp:company>\r
            <!--Optional:-->\r
            <inp:country>?</inp:country>\r
            <!--Optional:-->\r
            <inp:email>?</inp:email>\r
            <!--Optional:-->\r
            <inp:firstName>?</inp:firstName>\r
            <!--Optional:-->\r
            <inp:holder>?</inp:holder>\r
            <!--Optional:-->\r
            <inp:lastName>?</inp:lastName>\r
            <!--Optional:-->\r
            <inp:origin>?</inp:origin>\r
            <!--Optional:-->\r
            <inp:zipCode>?</inp:zipCode>\r
         </ws:account>\r
         <!--Optional:-->\r
         <ws:iban>\r
            <!--Optional:-->\r
            <typ:bic>?</typ:bic>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:number>?</typ:number>\r
         </ws:iban>\r
         <!--Optional:-->\r
         <ws:creditCard>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:transId>?</typ:transId>\r
         </ws:creditCard>\r
         <!--Optional:-->\r
         <ws:facture>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:reference>?</typ:reference>\r
         </ws:facture>\r
         <!--Optional:-->\r
         <ws:paypal>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:reference>?</typ:reference>\r
         </ws:paypal>\r
         <!--Optional:-->\r
         <ws:userInfos>\r
            <!--Optional:-->\r
            <typ1:httpUserAgent>?</typ1:httpUserAgent>\r
            <!--Optional:-->\r
            <typ1:ip>?</typ1:ip>\r
            <!--Optional:-->\r
            <typ1:userName>?</typ1:userName>\r
         </ws:userInfos>\r
      </ws:createForOldCustomer>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/createForOldCustomer"/></con:call></con:operation><con:operation id="f8a951bd-b65b-4e0c-a868-4f4586bf9ab1" isOneWay="false" action="" name="createNNBPayers" bindingOperationName="createNNBPayers" type="Request-Response" outputName="createNNBPayersResponse" inputName="createNNBPayers" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="dfc43b75-39d3-4b8a-9031-bb1d8b857646" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/" xmlns:util="http://utils.java/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:createNNBPayers>\r
         <!--Optional:-->\r
         <ws:rumCodes>\r
            <!--Zero or more repetitions:-->\r
            <util:string>?</util:string>\r
         </ws:rumCodes>\r
      </ws:createNNBPayers>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/createNNBPayers"/></con:call><con:call id="1fcf9ccb-6a56-492e-8795-457ab4aa73c1" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/" xmlns:util="http://utils.java/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:createNNBPayers>\r
         <!--Optional:-->\r
         <ws:rumCodes>\r
            <!--Zero or more repetitions:-->\r
            <util:string>?</util:string>\r
         </ws:rumCodes>\r
      </ws:createNNBPayers>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/createNNBPayers"/></con:call></con:operation><con:operation id="eb28dfa4-4e64-4e9f-a6b1-5571bb43551a" isOneWay="false" action="" name="existsCustomerForAccount" bindingOperationName="existsCustomerForAccount" type="Request-Response" outputName="existsCustomerForAccountResponse" inputName="existsCustomerForAccount" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="f72f8344-5249-42d1-9356-5141433f589b" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:existsCustomerForAccount>\r
         <!--Optional:-->\r
         <ws:customerKey>?</ws:customerKey>\r
         <!--Optional:-->\r
         <ws:accountKey>?</ws:accountKey>\r
      </ws:existsCustomerForAccount>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/existsCustomerForAccount"/></con:call><con:call id="3983e68d-d1cf-497e-bfbc-c0b56e6540f5" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:existsCustomerForAccount>\r
         <!--Optional:-->\r
         <ws:customerKey>?</ws:customerKey>\r
         <!--Optional:-->\r
         <ws:accountKey>?</ws:accountKey>\r
      </ws:existsCustomerForAccount>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/existsCustomerForAccount"/></con:call></con:operation><con:operation id="e1c723f0-0ffc-4392-a85a-cf236ac0dea6" isOneWay="false" action="" name="getMandate" bindingOperationName="getMandate" type="Request-Response" outputName="getMandateResponse" inputName="getMandate" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="d6458050-bba0-4ef4-b57b-d11ac6cc2700" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/">
   <soapenv:Header/>
   <soapenv:Body>
      <ws:getMandate>
         <!--Optional:-->
         <ws:rum>RRE4F5CB</ws:rum>
      </ws:getMandate>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/getMandate"/><con:wsrmConfig version="1.2"/></con:call><con:call id="e118df8a-20cc-4bd3-9d66-3af08d9e4762" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:getMandate>\r
         <!--Optional:-->\r
         <ws:rum>?</ws:rum>\r
      </ws:getMandate>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/getMandate"/></con:call></con:operation><con:operation id="d0f64c26-227c-47e8-b61b-5455c5cda7b8" isOneWay="false" action="" name="getMandateforAccount" bindingOperationName="getMandateforAccount" type="Request-Response" outputName="getMandateforAccountResponse" inputName="getMandateforAccount" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="a0e3a7f7-5852-4931-9569-07f8a69c3163" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:getMandateforAccount>\r
         <!--Optional:-->\r
         <ws:accountKey>?</ws:accountKey>\r
      </ws:getMandateforAccount>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/getMandateforAccount"/></con:call><con:call id="c2e2a5b1-5cbe-4844-8fa7-26bd48398351" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:getMandateforAccount>\r
         <!--Optional:-->\r
         <ws:accountKey>?</ws:accountKey>\r
      </ws:getMandateforAccount>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/getMandateforAccount"/></con:call></con:operation><con:operation id="d194aace-3b27-44f6-a478-8fcabe3f3fb5" isOneWay="false" action="" name="getMandatePdf" bindingOperationName="getMandatePdf" type="Request-Response" outputName="getMandatePdfResponse" inputName="getMandatePdf" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="0ea7084f-4a71-4df1-8753-29416e9cc855" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:getMandatePdf>\r
         <!--Optional:-->\r
         <ws:rum>?</ws:rum>\r
      </ws:getMandatePdf>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/getMandatePdf"/></con:call><con:call id="d7e9d9b3-0b33-4c74-b7e9-29aa00b79b23" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:getMandatePdf>\r
         <!--Optional:-->\r
         <ws:rum>?</ws:rum>\r
      </ws:getMandatePdf>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/getMandatePdf"/></con:call></con:operation><con:operation id="05d3c1bb-c4eb-4630-8768-c42175240609" isOneWay="false" action="" name="listMandatesForCustomerKey" bindingOperationName="listMandatesForCustomerKey" type="Request-Response" outputName="listMandatesForCustomerKeyResponse" inputName="listMandatesForCustomerKey" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="1a01c281-c73f-44d4-af9d-d6ae1a275522" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1" wssPasswordType="PasswordText"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@bind_address"/></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/">
   <soapenv:Header/>
   <soapenv:Body>
      <ws:listMandatesForCustomerKey>
         <!--Optional:-->
         <ws:customerKey>6002367491</ws:customerKey>
      </ws:listMandatesForCustomerKey>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:username>pentalog_vietnam</con:username><con:password>fa49891b783d3fc022009da14f74bd64</con:password><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/listMandatesForCustomerKey"/><con:wsrmConfig version="1.2"/></con:call><con:call id="a600bc92-0f0e-45ed-b0cf-7fe6d45205f2" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:listMandatesForCustomerKey>\r
         <!--Optional:-->\r
         <ws:customerKey>?</ws:customerKey>\r
      </ws:listMandatesForCustomerKey>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/listMandatesForCustomerKey"/></con:call></con:operation><con:operation id="fd0e7e0b-b4c9-495d-a767-ad9b9dc9fac9" isOneWay="false" action="" name="listMandatesForIBAN" bindingOperationName="listMandatesForIBAN" type="Request-Response" outputName="listMandatesForIBANResponse" inputName="listMandatesForIBAN" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="b6e6c2ef-d567-4a67-8a26-5102776a2c2f" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:listMandatesForIBAN>\r
         <!--Optional:-->\r
         <ws:number>?</ws:number>\r
      </ws:listMandatesForIBAN>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/listMandatesForIBAN"/></con:call><con:call id="c0d7b12c-b404-4e58-a93d-acac04d8fa89" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:listMandatesForIBAN>\r
         <!--Optional:-->\r
         <ws:number>?</ws:number>\r
      </ws:listMandatesForIBAN>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/listMandatesForIBAN"/></con:call></con:operation><con:operation id="7792df69-daec-407e-b7b3-88af42204b8e" isOneWay="false" action="" name="processAddDebitRequests" bindingOperationName="processAddDebitRequests" type="Request-Response" outputName="processAddDebitRequestsResponse" inputName="processAddDebitRequests" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="9a8c4b23-db48-4fac-a123-6a9d199c8561" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/" xmlns:util="http://utils.java/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:processAddDebitRequests>\r
         <!--Optional:-->\r
         <ws:invoiceKeys>\r
            <!--Zero or more repetitions:-->\r
            <util:string>?</util:string>\r
         </ws:invoiceKeys>\r
      </ws:processAddDebitRequests>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/processAddDebitRequests"/></con:call><con:call id="d2d90e29-488b-4a21-958f-3ddb9491fe2f" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/" xmlns:util="http://utils.java/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:processAddDebitRequests>\r
         <!--Optional:-->\r
         <ws:invoiceKeys>\r
            <!--Zero or more repetitions:-->\r
            <util:string>?</util:string>\r
         </ws:invoiceKeys>\r
      </ws:processAddDebitRequests>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/processAddDebitRequests"/></con:call></con:operation><con:operation id="7b119a71-7386-4ac7-a5ab-83f6cb21db90" isOneWay="false" action="" name="processGetFolioCodeRequests" bindingOperationName="processGetFolioCodeRequests" type="Request-Response" outputName="processGetFolioCodeRequestsResponse" inputName="processGetFolioCodeRequests" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="3b7f7bd1-3d72-4fc5-b39b-e79aa87be2d8" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/" xmlns:util="http://utils.java/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:processGetFolioCodeRequests>\r
         <!--Optional:-->\r
         <ws:RUM>\r
            <!--Zero or more repetitions:-->\r
            <util:string>?</util:string>\r
         </ws:RUM>\r
      </ws:processGetFolioCodeRequests>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/processGetFolioCodeRequests"/></con:call><con:call id="342da3af-4e47-4dcf-97a5-7d98244c386e" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/" xmlns:util="http://utils.java/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:processGetFolioCodeRequests>\r
         <!--Optional:-->\r
         <ws:RUM>\r
            <!--Zero or more repetitions:-->\r
            <util:string>?</util:string>\r
         </ws:RUM>\r
      </ws:processGetFolioCodeRequests>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/processGetFolioCodeRequests"/></con:call></con:operation><con:operation id="15855677-b256-44f2-a243-6ffee31d32a8" isOneWay="false" action="" name="removeCustomerForAccount" bindingOperationName="removeCustomerForAccount" type="Request-Response" outputName="removeCustomerForAccountResponse" inputName="removeCustomerForAccount" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="cd720a25-8b1e-47e1-84d4-5f57599a7b84" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/" xmlns:typ="http://types.ws.common.nordnet.com">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:removeCustomerForAccount>\r
         <!--Optional:-->\r
         <ws:customerKey>?</ws:customerKey>\r
         <!--Optional:-->\r
         <ws:accountKey>?</ws:accountKey>\r
         <!--Optional:-->\r
         <ws:userInfos>\r
            <!--Optional:-->\r
            <typ:httpUserAgent>?</typ:httpUserAgent>\r
            <!--Optional:-->\r
            <typ:ip>?</typ:ip>\r
            <!--Optional:-->\r
            <typ:userName>?</typ:userName>\r
         </ws:userInfos>\r
      </ws:removeCustomerForAccount>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/removeCustomerForAccount"/></con:call><con:call id="0e37e4bc-f90c-4fdd-b9ea-604ab3edc8da" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/" xmlns:typ="http://types.ws.common.nordnet.com">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:removeCustomerForAccount>\r
         <!--Optional:-->\r
         <ws:customerKey>?</ws:customerKey>\r
         <!--Optional:-->\r
         <ws:accountKey>?</ws:accountKey>\r
         <!--Optional:-->\r
         <ws:userInfos>\r
            <!--Optional:-->\r
            <typ:httpUserAgent>?</typ:httpUserAgent>\r
            <!--Optional:-->\r
            <typ:ip>?</typ:ip>\r
            <!--Optional:-->\r
            <typ:userName>?</typ:userName>\r
         </ws:userInfos>\r
      </ws:removeCustomerForAccount>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/removeCustomerForAccount"/></con:call></con:operation><con:operation id="dc7abeae-80e7-46fc-932e-cdc487e395df" isOneWay="false" action="" name="setEnabled" bindingOperationName="setEnabled" type="Request-Response" outputName="setEnabledResponse" inputName="setEnabled" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="40e8ef17-4c89-4e07-822b-3a305a45b627" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:setEnabled>\r
         <!--Optional:-->\r
         <ws:rum>?</ws:rum>\r
         <ws:enabled>?</ws:enabled>\r
      </ws:setEnabled>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/setEnabled"/></con:call><con:call id="170be434-fc66-42ab-a248-7ff57ee1fb1b" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:setEnabled>\r
         <!--Optional:-->\r
         <ws:rum>?</ws:rum>\r
         <ws:enabled>?</ws:enabled>\r
      </ws:setEnabled>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/setEnabled"/></con:call></con:operation><con:operation id="2ff68d5c-4c0a-44ae-9476-e5ae2cc39719" isOneWay="false" action="" name="setFolioCode" bindingOperationName="setFolioCode" type="Request-Response" outputName="setFolioCodeResponse" inputName="setFolioCode" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="f1e13826-e8d3-49be-924d-0e522c66716e" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:setFolioCode>\r
         <!--Optional:-->\r
         <ws:rum>?</ws:rum>\r
         <!--Optional:-->\r
         <ws:folioCode>?</ws:folioCode>\r
      </ws:setFolioCode>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/setFolioCode"/></con:call><con:call id="588835d9-fabf-4ffd-a764-02c1b79092e7" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:setFolioCode>\r
         <!--Optional:-->\r
         <ws:rum>?</ws:rum>\r
         <!--Optional:-->\r
         <ws:folioCode>?</ws:folioCode>\r
      </ws:setFolioCode>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/setFolioCode"/></con:call></con:operation><con:operation id="bc08cb9e-b6ac-4ccb-a60d-7ca5984e4db9" isOneWay="false" action="" name="updateAccount" bindingOperationName="updateAccount" type="Request-Response" outputName="updateAccountResponse" inputName="updateAccount" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="9c04ada5-de7b-48db-9e38-8dbaf8b17e76" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/" xmlns:inp="http://input.types.ws.mandatelibrary.nordnet.com" xmlns:typ="http://types.ws.common.nordnet.com">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:updateAccount>\r
         <!--Optional:-->\r
         <ws:rum>?</ws:rum>\r
         <!--Optional:-->\r
         <ws:account>\r
            <!--Optional:-->\r
            <inp:accountKey>?</inp:accountKey>\r
            <!--Optional:-->\r
            <inp:address1>?</inp:address1>\r
            <!--Optional:-->\r
            <inp:address2>?</inp:address2>\r
            <!--Optional:-->\r
            <inp:city>?</inp:city>\r
            <!--Optional:-->\r
            <inp:company>?</inp:company>\r
            <!--Optional:-->\r
            <inp:country>?</inp:country>\r
            <!--Optional:-->\r
            <inp:email>?</inp:email>\r
            <!--Optional:-->\r
            <inp:firstName>?</inp:firstName>\r
            <!--Optional:-->\r
            <inp:holder>?</inp:holder>\r
            <!--Optional:-->\r
            <inp:lastName>?</inp:lastName>\r
            <!--Optional:-->\r
            <inp:origin>?</inp:origin>\r
            <!--Optional:-->\r
            <inp:zipCode>?</inp:zipCode>\r
         </ws:account>\r
         <!--Optional:-->\r
         <ws:userInfos>\r
            <!--Optional:-->\r
            <typ:httpUserAgent>?</typ:httpUserAgent>\r
            <!--Optional:-->\r
            <typ:ip>?</typ:ip>\r
            <!--Optional:-->\r
            <typ:userName>?</typ:userName>\r
         </ws:userInfos>\r
      </ws:updateAccount>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/updateAccount"/></con:call><con:call id="429cbf91-ea9e-4409-bb0d-855447d527e9" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/" xmlns:inp="http://input.types.ws.mandatelibrary.nordnet.com" xmlns:typ="http://types.ws.common.nordnet.com">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:updateAccount>\r
         <!--Optional:-->\r
         <ws:rum>?</ws:rum>\r
         <!--Optional:-->\r
         <ws:account>\r
            <!--Optional:-->\r
            <inp:accountKey>?</inp:accountKey>\r
            <!--Optional:-->\r
            <inp:address1>?</inp:address1>\r
            <!--Optional:-->\r
            <inp:address2>?</inp:address2>\r
            <!--Optional:-->\r
            <inp:city>?</inp:city>\r
            <!--Optional:-->\r
            <inp:company>?</inp:company>\r
            <!--Optional:-->\r
            <inp:country>?</inp:country>\r
            <!--Optional:-->\r
            <inp:email>?</inp:email>\r
            <!--Optional:-->\r
            <inp:firstName>?</inp:firstName>\r
            <!--Optional:-->\r
            <inp:holder>?</inp:holder>\r
            <!--Optional:-->\r
            <inp:lastName>?</inp:lastName>\r
            <!--Optional:-->\r
            <inp:origin>?</inp:origin>\r
            <!--Optional:-->\r
            <inp:zipCode>?</inp:zipCode>\r
         </ws:account>\r
         <!--Optional:-->\r
         <ws:userInfos>\r
            <!--Optional:-->\r
            <typ:httpUserAgent>?</typ:httpUserAgent>\r
            <!--Optional:-->\r
            <typ:ip>?</typ:ip>\r
            <!--Optional:-->\r
            <typ:userName>?</typ:userName>\r
         </ws:userInfos>\r
      </ws:updateAccount>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/updateAccount"/></con:call></con:operation><con:operation id="d160d4ca-8f2d-4638-959b-4db3e0daa7fb" isOneWay="false" action="" name="updateIBAN" bindingOperationName="updateIBAN" type="Request-Response" outputName="updateIBANResponse" inputName="updateIBAN" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="71afbfc3-74ed-46d0-b479-11f2e90578ac" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/" xmlns:typ="http://types.ws.mandatelibrary.nordnet.com" xmlns:typ1="http://types.ws.common.nordnet.com">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:updateIBAN>\r
         <!--Optional:-->\r
         <ws:rum>?</ws:rum>\r
         <!--Optional:-->\r
         <ws:iban>\r
            <!--Optional:-->\r
            <typ:bic>?</typ:bic>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:number>?</typ:number>\r
         </ws:iban>\r
         <!--Optional:-->\r
         <ws:userInfos>\r
            <!--Optional:-->\r
            <typ1:httpUserAgent>?</typ1:httpUserAgent>\r
            <!--Optional:-->\r
            <typ1:ip>?</typ1:ip>\r
            <!--Optional:-->\r
            <typ1:userName>?</typ1:userName>\r
         </ws:userInfos>\r
      </ws:updateIBAN>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/updateIBAN"/></con:call><con:call id="18560826-120e-4d7a-975f-a3ca358f822f" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/" xmlns:typ="http://types.ws.mandatelibrary.nordnet.com" xmlns:typ1="http://types.ws.common.nordnet.com">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:updateIBAN>\r
         <!--Optional:-->\r
         <ws:rum>?</ws:rum>\r
         <!--Optional:-->\r
         <ws:iban>\r
            <!--Optional:-->\r
            <typ:bic>?</typ:bic>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:number>?</typ:number>\r
         </ws:iban>\r
         <!--Optional:-->\r
         <ws:userInfos>\r
            <!--Optional:-->\r
            <typ1:httpUserAgent>?</typ1:httpUserAgent>\r
            <!--Optional:-->\r
            <typ1:ip>?</typ1:ip>\r
            <!--Optional:-->\r
            <typ1:userName>?</typ1:userName>\r
         </ws:userInfos>\r
      </ws:updateIBAN>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/updateIBAN"/></con:call></con:operation><con:operation id="23c13959-e9d1-470d-8450-76486601abda" isOneWay="false" action="" name="updateNNBPayers" bindingOperationName="updateNNBPayers" type="Request-Response" outputName="updateNNBPayersResponse" inputName="updateNNBPayers" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="61317869-fd71-4502-86ac-646820ae9bee" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/" xmlns:util="http://utils.java/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:updateNNBPayers>\r
         <!--Optional:-->\r
         <ws:rumCodes>\r
            <!--Zero or more repetitions:-->\r
            <util:string>?</util:string>\r
         </ws:rumCodes>\r
      </ws:updateNNBPayers>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/updateNNBPayers"/></con:call><con:call id="12172ed2-3ec4-4c00-9e47-3206917e5c2d" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/" xmlns:util="http://utils.java/">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:updateNNBPayers>\r
         <!--Optional:-->\r
         <ws:rumCodes>\r
            <!--Zero or more repetitions:-->\r
            <util:string>?</util:string>\r
         </ws:rumCodes>\r
      </ws:updateNNBPayers>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/updateNNBPayers"/></con:call></con:operation><con:operation id="fb81c20f-fa24-4bd1-a234-b449b99be2c1" isOneWay="false" action="" name="updatePayment" bindingOperationName="updatePayment" type="Request-Response" outputName="updatePaymentResponse" inputName="updatePayment" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="299bdeef-5bd1-4559-947f-8169ad1758f2" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/" xmlns:typ="http://types.ws.mandatelibrary.nordnet.com" xmlns:typ1="http://types.ws.common.nordnet.com">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:updatePayment>\r
         <!--Optional:-->\r
         <ws:rum>?</ws:rum>\r
         <!--Optional:-->\r
         <ws:iban>\r
            <!--Optional:-->\r
            <typ:bic>?</typ:bic>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:number>?</typ:number>\r
         </ws:iban>\r
         <!--Optional:-->\r
         <ws:creditCard>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:transId>?</typ:transId>\r
         </ws:creditCard>\r
         <!--Optional:-->\r
         <ws:facture>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:reference>?</typ:reference>\r
         </ws:facture>\r
         <!--Optional:-->\r
         <ws:paypal>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:reference>?</typ:reference>\r
         </ws:paypal>\r
         <!--Optional:-->\r
         <ws:userInfos>\r
            <!--Optional:-->\r
            <typ1:httpUserAgent>?</typ1:httpUserAgent>\r
            <!--Optional:-->\r
            <typ1:ip>?</typ1:ip>\r
            <!--Optional:-->\r
            <typ1:userName>?</typ1:userName>\r
         </ws:userInfos>\r
      </ws:updatePayment>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/updatePayment"/></con:call><con:call id="a72bcf73-d7c9-42f7-95e4-d0fd64e27a25" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/" xmlns:typ="http://types.ws.mandatelibrary.nordnet.com" xmlns:typ1="http://types.ws.common.nordnet.com">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <ws:updatePayment>\r
         <!--Optional:-->\r
         <ws:rum>?</ws:rum>\r
         <!--Optional:-->\r
         <ws:iban>\r
            <!--Optional:-->\r
            <typ:bic>?</typ:bic>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:number>?</typ:number>\r
         </ws:iban>\r
         <!--Optional:-->\r
         <ws:creditCard>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:transId>?</typ:transId>\r
         </ws:creditCard>\r
         <!--Optional:-->\r
         <ws:facture>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:reference>?</typ:reference>\r
         </ws:facture>\r
         <!--Optional:-->\r
         <ws:paypal>\r
            <!--Optional:-->\r
            <typ:creationDate>?</typ:creationDate>\r
            <!--Optional:-->\r
            <typ:label>?</typ:label>\r
            <!--Optional:-->\r
            <typ:reference>?</typ:reference>\r
         </ws:paypal>\r
         <!--Optional:-->\r
         <ws:userInfos>\r
            <!--Optional:-->\r
            <typ1:httpUserAgent>?</typ1:httpUserAgent>\r
            <!--Optional:-->\r
            <typ1:ip>?</typ1:ip>\r
            <!--Optional:-->\r
            <typ1:userName>?</typ1:userName>\r
         </ws:userInfos>\r
      </ws:updatePayment>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://impl.ws.mandatelibrary.nordnet.com/MandateLibraryWS/updatePayment"/></con:call></con:operation></con:interface><con:interface xsi:type="con:RestService" id="41509513-86fa-43d1-bb2b-c3a137ac32b4" wadlVersion="http://wadl.dev.java.net/2009/02" name="CatalogOC" type="rest" definitionUrl="http://10.100.119.11:8080/catalog-ocbs-ws-1.0.x/services/CatalogOc?_wadl" basePath="/catalog-ocbs-ws-1.0.x/services/CatalogOc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="http://10.100.119.11:8080/catalog-ocbs-ws-1.0.x/services/CatalogOc?_wadl"><con:part><con:url>http://10.100.119.11:8080/catalog-ocbs-ws-1.0.x/services/CatalogOc?_wadl</con:url><con:content><![CDATA[<application xmlns="http://wadl.dev.java.net/2009/02" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <grammars/>
  <resources base="http://10.100.119.11:8080/catalog-ocbs-ws-1.0.x/services/CatalogOc">
    <resource path="/">
      <resource path="getBienByOfferCode/{code}">
        <param name="code" style="template" type="xs:string"/>
        <method name="GET">
          <request/>
          <response>
            <representation mediaType="application/json;charset=UTF-8"/>
          </response>
        </method>
      </resource>
      <resource path="getMedia/{codeMedia}">
        <param name="codeMedia" style="template" type="xs:string"/>
        <method name="GET">
          <request/>
          <response>
            <representation mediaType="application/json;charset=UTF-8"/>
          </response>
        </method>
      </resource>
      <resource path="getOffer">
        <method name="GET">
          <response>
            <representation mediaType="application/json;charset=UTF-8"/>
          </response>
        </method>
      </resource>
      <resource path="getOffer/{offerCode}">
        <param name="offerCode" style="template" type="xs:string"/>
        <method name="GET">
          <request/>
          <response>
            <representation mediaType="application/json;charset=UTF-8"/>
          </response>
        </method>
      </resource>
      <resource path="getOfferAutocompletion">
        <method name="GET">
          <request>
            <param name="CodeOrLabel" style="query" type="xs:string"/>
          </request>
          <response>
            <representation mediaType="application/json;charset=UTF-8"/>
          </response>
        </method>
      </resource>
      <resource path="getOfferWithBien">
        <method name="GET">
          <response>
            <representation mediaType="application/json;charset=UTF-8"/>
          </response>
        </method>
      </resource>
      <resource path="listCodeSaphir/{codeSaphir}">
        <param name="codeSaphir" style="template" type="xs:string"/>
        <method name="GET">
          <request/>
          <response>
            <representation mediaType="application/json;charset=UTF-8"/>
          </response>
        </method>
      </resource>
    </resource>
  </resources>
</application>]]></con:content><con:type>http://wadl.dev.java.net/2009/02</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://10.100.119.11:8080</con:endpoint></con:endpoints><con:resource name="" path="/" id="b3db4cab-0270-4e2e-9005-5c11ae5f52ad"><con:settings/><con:parameters/><con:resource name="" path="getBienByOfferCode/{code}" id="8b068503-5b87-4c40-928c-983f2a0d9d28"><con:settings/><con:parameters><con:parameter><con:name>code</con:name><con:value xsi:nil="true"/><con:style>TEMPLATE</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:method name="" id="4cbbb8fe-32c2-4e4c-9d21-d092fa2dc839" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="8bec2ca7-a387-41d9-888d-2364b61f31de" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="getMedia/{codeMedia}" id="64db0e50-5867-4bb5-bbda-bf42c46b44ee"><con:settings/><con:parameters><con:parameter><con:name>codeMedia</con:name><con:value xsi:nil="true"/><con:style>TEMPLATE</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:method name="" id="67bb5f12-e1f0-44ff-b8b3-64ff35f5e755" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="24af2998-5b9a-4146-9e1f-e60d808bdd67" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="getOffer" id="33fac135-3bcf-44fb-9497-74ccfa07565d"><con:settings/><con:parameters/><con:method name="" id="bcc03184-f9d8-4a56-9354-beb551cfebbb" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="62d7a4a9-3d01-42e5-91a1-e00740081c0c" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/catalog-ocbs-ws-1.0.x/services/CatalogOc/getOffer</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="getOffer/{offerCode}" id="44f29e12-a2af-4cf0-9ea5-89555895048a"><con:settings/><con:parameters><con:parameter><con:name>offerCode</con:name><con:value xsi:nil="true"/><con:style>TEMPLATE</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:method name="" id="5b6ee1ae-b006-490a-9c57-b8b92e03ae77" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="0ce948c0-e7c8-48b0-b56b-0b78cb7ce104" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/catalog-ocbs-ws-1.0.x/services/CatalogOc/getOffer/</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="offerCode" value="avfw.essentiel" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="" path="getOfferAutocompletion" id="bf2c8e65-ad5c-411a-b160-34dfb2bf5ec2"><con:settings/><con:parameters/><con:method name="" id="ded68713-32fb-4c90-8e5b-510b28a792e8" method="GET"><con:settings/><con:parameters><con:parameter><con:name>CodeOrLabel</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:representation type="RESPONSE" id=""><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="31fec05b-f4ed-4cd9-b69a-db0c88c27c43" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="getOfferWithBien" id="855a56e7-2da0-4e1a-874d-5717567393b8"><con:settings/><con:parameters/><con:method name="" id="fe4d9d3e-88e3-48a9-b2da-c25e641dbbcf" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="900676f0-c9c3-4666-9af2-ab8b6a445b9e" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="" path="listCodeSaphir/{codeSaphir}" id="9cba0043-1c5b-43dd-923a-304fa7aaec90"><con:settings/><con:parameters><con:parameter><con:name>codeSaphir</con:name><con:value xsi:nil="true"/><con:style>TEMPLATE</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:method name="" id="3c70cacb-3b6d-4322-9213-ef71128c7608" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json;charset=UTF-8</con:mediaType><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="c098a014-a04b-495b-81af-374f73bd9ccf" mediaType="application/json"><con:settings/><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource></con:resource></con:interface><con:interface xsi:type="con:WsdlInterface" id="94ea4766-7f39-43bd-be52-9b34c5da484a" wsaVersion="NONE" name="PromoWSImplServiceSoapBinding" type="wsdl" bindingName="{http://www.nordnet.com/promo/schemas}PromoWSImplServiceSoapBinding" soapVersion="1_1" anonymous="optional" definition="http://10.100.119.11:8080/promos-management-ws-1.0.x/services/promo?wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="http://10.100.119.11:8080/promos-management-ws-1.0.x/services/promo?wsdl"><con:part><con:url>http://10.100.119.11:8080/promos-management-ws-1.0.x/services/promo?wsdl</con:url><con:content><![CDATA[<wsdl:definitions name="PromoWSImplService" targetNamespace="http://www.nordnet.com/promo/schemas" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http://www.nordnet.com/promo/schemas" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:ns1="http://schemas.xmlsoap.org/soap/http">
  <wsdl:types>
    <xs:schema targetNamespace="http://www.nordnet.com/promo/types" version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://www.nordnet.com/promo/types">
      <xs:complexType name="getByOfferAndPriceRequest">
        <xs:sequence>
          <xs:element name="offerCode" type="xs:string"/>
          <xs:element minOccurs="0" name="priceCode" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="promo">
        <xs:complexContent>
          <xs:extension base="tns:simple_promo">
            <xs:sequence>
              <xs:element maxOccurs="unbounded" minOccurs="0" name="offer" nillable="true" type="tns:offer"/>
            </xs:sequence>
          </xs:extension>
        </xs:complexContent>
      </xs:complexType>
      <xs:complexType name="simple_promo">
        <xs:sequence>
          <xs:element name="id" type="xs:long"/>
          <xs:element name="code" type="xs:string"/>
          <xs:element name="label" type="xs:string"/>
          <xs:element name="type" type="xs:string"/>
          <xs:element name="maxUseTimes" type="xs:integer"/>
          <xs:element name="value" type="xs:double"/>
          <xs:element name="beginDate" type="xs:date"/>
          <xs:element minOccurs="0" name="endDate" type="xs:date"/>
          <xs:element name="orderType" type="xs:string"/>
          <xs:element name="orderMinValue" type="xs:float"/>
          <xs:element name="active" type="xs:boolean"/>
          <xs:element name="automatic" type="xs:boolean"/>
          <xs:element minOccurs="0" name="customerKey" type="xs:string"/>
          <xs:element minOccurs="0" name="mailTemplate" type="xs:string"/>
          <xs:element minOccurs="0" name="member" type="xs:string"/>
          <xs:element minOccurs="0" name="clientActif" type="xs:boolean"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="offer">
        <xs:sequence>
          <xs:element name="id" type="xs:long"/>
          <xs:element name="codeOffer" type="xs:string"/>
          <xs:element minOccurs="0" name="codePrice" type="xs:string"/>
          <xs:element minOccurs="0" name="predicate" type="xs:string"/>
          <xs:element minOccurs="0" name="nextOffer" type="xs:long"/>
          <xs:element name="isMain" type="xs:boolean"/>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="offerItem" nillable="true" type="tns:offerItem"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="offerItem">
        <xs:sequence>
          <xs:element name="id" type="xs:long"/>
          <xs:element name="codeItem" type="xs:string"/>
          <xs:element minOccurs="0" name="codePrice" type="xs:string"/>
          <xs:element minOccurs="0" name="predicate" type="xs:string"/>
          <xs:element minOccurs="0" name="nextItem" type="xs:long"/>
          <xs:element name="isMain" type="xs:boolean"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="getVoucherByClientRequest">
        <xs:sequence>
          <xs:element name="clientId" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="getVoucherByClientResponse">
        <xs:sequence>
          <xs:element minOccurs="0" name="listVoucher" type="tns:listVoucher"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="listVoucher">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" name="voucherCode" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="useVoucherRequest">
        <xs:sequence>
          <xs:element name="voucherCode" type="xs:string"/>
          <xs:element name="clientId" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="getVoucherRequest">
        <xs:sequence>
          <xs:element name="voucherCode" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="getVoucherResponse">
        <xs:sequence>
          <xs:element name="voucher" type="tns:tvoucher"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="tvoucher">
        <xs:sequence>
          <xs:element name="clientId" type="xs:string"/>
          <xs:element name="codeVoucher" type="xs:string"/>
          <xs:element name="promoCode" type="xs:string"/>
          <xs:element name="dateDebValidite" type="xs:dateTime"/>
          <xs:element minOccurs="0" name="dateUtilisation" type="xs:dateTime"/>
          <xs:element name="dateFinValidite" type="xs:dateTime"/>
          <xs:element name="dateCreation" type="xs:dateTime"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="sponsoring">
        <xs:sequence>
          <xs:element name="beginDate" type="xs:date"/>
          <xs:element minOccurs="0" name="endDate" type="xs:date"/>
          <xs:element name="code" type="xs:string"/>
          <xs:element maxOccurs="unbounded" name="promo" type="tns:simple_promo"/>
          <xs:element maxOccurs="unbounded" name="offer" type="tns:offer"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="createVoucherRequest">
        <xs:sequence>
          <xs:element name="promoCode" type="xs:string"/>
          <xs:element name="dateDebValidite" type="xs:date"/>
          <xs:element name="datefinValidite" type="xs:date"/>
          <xs:element name="clientIdList" type="tns:clientIdList"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="clientIdList">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" name="clientId" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="createVoucherResponse">
        <xs:sequence>
          <xs:element name="voucherCreateList" type="tns:voucherCreateList"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="voucherCreateList">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" name="createdVoucher" type="tns:createdVoucher"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="createdVoucher">
        <xs:sequence>
          <xs:element name="clientId" type="xs:string"/>
          <xs:element name="voucherCode" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType final="#all" name="promoArray">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="item" nillable="true" type="tns:promo"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType final="#all" name="sponsoringArray">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="item" nillable="true" type="tns:sponsoring"/>
        </xs:sequence>
      </xs:complexType>
    </xs:schema>
    <xs:schema targetNamespace="http://responses.types.ws.common.nordnet.com" version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">
      <xs:complexType name="Error">
        <xs:sequence>
          <xs:element minOccurs="0" name="code" type="xs:string"/>
          <xs:element minOccurs="0" name="description" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
    </xs:schema>
    <xsd:schema attributeFormDefault="unqualified" elementFormDefault="unqualified" targetNamespace="http://www.nordnet.com/promo/schemas" xmlns:ns1="http://www.nordnet.com/promo/types" xmlns:ns0="http://responses.types.ws.common.nordnet.com">
      <xsd:import namespace="http://responses.types.ws.common.nordnet.com"/>
      <xsd:import namespace="http://www.nordnet.com/promo/types"/>
      <xsd:element name="PromoException" type="tns:PromoException"/>
      <xsd:complexType name="PromoException">
        <xsd:sequence>
          <xsd:element name="error" nillable="true" type="ns0:Error"/>
          <xsd:element minOccurs="0" name="message" type="xsd:string"/>
        </xsd:sequence>
      </xsd:complexType>
      <xsd:element name="getPromoByCodeAndPriceRequest" nillable="true" type="ns1:getByOfferAndPriceRequest"/>
      <xsd:element name="ListPromo" nillable="true" type="ns1:promoArray"/>
      <xsd:element name="getVoucherByClient" nillable="true" type="ns1:getVoucherByClientRequest"/>
      <xsd:element name="getVoucherByClientResponse" nillable="true" type="ns1:getVoucherByClientResponse"/>
      <xsd:element name="useVoucher" nillable="true" type="ns1:useVoucherRequest"/>
      <xsd:element name="getVoucher" nillable="true" type="ns1:getVoucherRequest"/>
      <xsd:element name="getVoucherResponse" nillable="true" type="ns1:getVoucherResponse"/>
      <xsd:element name="getSponsoringByCodeAndPriceRequest" nillable="true" type="ns1:getByOfferAndPriceRequest"/>
      <xsd:element name="ListSponsorings" nillable="true" type="ns1:sponsoringArray"/>
      <xsd:element name="sPromoCode" nillable="true" type="xsd:string"/>
      <xsd:element name="createVoucher" nillable="true" type="ns1:createVoucherRequest"/>
      <xsd:element name="createVoucherResponse" nillable="true" type="ns1:createVoucherResponse"/>
      <xsd:element name="promoCode" nillable="true" type="xsd:string"/>
      <xsd:element name="promo" nillable="true" type="ns1:promoArray"/>
    </xsd:schema>
  </wsdl:types>
  <wsdl:message name="createVoucherResponse">
    <wsdl:part element="tns:createVoucherResponse" name="createVoucherResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="useVoucher">
    <wsdl:part element="tns:useVoucher" name="useVoucher"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getPromoByPromoCodeResponse">
    <wsdl:part element="tns:promo" name="promo"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getVoucherByClientResponse">
    <wsdl:part element="tns:getVoucherByClientResponse" name="getVoucherByClientResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="createVoucher">
    <wsdl:part element="tns:createVoucher" name="createVoucher"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getPromoByPromoCode">
    <wsdl:part element="tns:promoCode" name="promoCode"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getVoucherByClient">
    <wsdl:part element="tns:getVoucherByClient" name="getVoucherByClient"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getSponsoringByOfferAndPrice">
    <wsdl:part element="tns:getSponsoringByCodeAndPriceRequest" name="getSponsoringByCodeAndPriceRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="PromoException">
    <wsdl:part element="tns:PromoException" name="PromoException"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getPromoByOfferCodeAndPriceCodeResponse">
    <wsdl:part element="tns:ListPromo" name="ListPromo"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getSponsoringByOfferAndPriceResponse">
    <wsdl:part element="tns:ListSponsorings" name="ListSponsorings"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getSponsoringByPromoCode">
    <wsdl:part element="tns:sPromoCode" name="sPromoCode"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getSponsoringByPromoCodeResponse">
    <wsdl:part element="tns:ListSponsorings" name="ListSponsorings"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getPromoByOfferCodeAndPriceCode">
    <wsdl:part element="tns:getPromoByCodeAndPriceRequest" name="getPromoByCodeAndPriceRequest"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="useVoucherResponse"></wsdl:message>
  <wsdl:message name="getVoucherResponse">
    <wsdl:part element="tns:getVoucherResponse" name="getVoucherResponse"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getVoucher">
    <wsdl:part element="tns:getVoucher" name="getVoucher"></wsdl:part>
  </wsdl:message>
  <wsdl:portType name="promo">
    <wsdl:operation name="getPromoByOfferCodeAndPriceCode">
      <wsdl:input message="tns:getPromoByOfferCodeAndPriceCode" name="getPromoByOfferCodeAndPriceCode"></wsdl:input>
      <wsdl:output message="tns:getPromoByOfferCodeAndPriceCodeResponse" name="getPromoByOfferCodeAndPriceCodeResponse"></wsdl:output>
      <wsdl:fault message="tns:PromoException" name="PromoException"></wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getVoucherByClient">
      <wsdl:input message="tns:getVoucherByClient" name="getVoucherByClient"></wsdl:input>
      <wsdl:output message="tns:getVoucherByClientResponse" name="getVoucherByClientResponse"></wsdl:output>
      <wsdl:fault message="tns:PromoException" name="PromoException"></wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="useVoucher">
      <wsdl:input message="tns:useVoucher" name="useVoucher"></wsdl:input>
      <wsdl:output message="tns:useVoucherResponse" name="useVoucherResponse"></wsdl:output>
      <wsdl:fault message="tns:PromoException" name="PromoException"></wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getVoucher">
      <wsdl:input message="tns:getVoucher" name="getVoucher"></wsdl:input>
      <wsdl:output message="tns:getVoucherResponse" name="getVoucherResponse"></wsdl:output>
      <wsdl:fault message="tns:PromoException" name="PromoException"></wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getSponsoringByOfferAndPrice">
      <wsdl:input message="tns:getSponsoringByOfferAndPrice" name="getSponsoringByOfferAndPrice"></wsdl:input>
      <wsdl:output message="tns:getSponsoringByOfferAndPriceResponse" name="getSponsoringByOfferAndPriceResponse"></wsdl:output>
      <wsdl:fault message="tns:PromoException" name="PromoException"></wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getSponsoringByPromoCode">
      <wsdl:input message="tns:getSponsoringByPromoCode" name="getSponsoringByPromoCode"></wsdl:input>
      <wsdl:output message="tns:getSponsoringByPromoCodeResponse" name="getSponsoringByPromoCodeResponse"></wsdl:output>
      <wsdl:fault message="tns:PromoException" name="PromoException"></wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="createVoucher">
      <wsdl:input message="tns:createVoucher" name="createVoucher"></wsdl:input>
      <wsdl:output message="tns:createVoucherResponse" name="createVoucherResponse"></wsdl:output>
      <wsdl:fault message="tns:PromoException" name="PromoException"></wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getPromoByPromoCode">
      <wsdl:input message="tns:getPromoByPromoCode" name="getPromoByPromoCode"></wsdl:input>
      <wsdl:output message="tns:getPromoByPromoCodeResponse" name="getPromoByPromoCodeResponse"></wsdl:output>
      <wsdl:fault message="tns:PromoException" name="PromoException"></wsdl:fault>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="PromoWSImplServiceSoapBinding" type="tns:promo">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="getPromoByOfferCodeAndPriceCode">
      <soap:operation soapAction="getPromoByOfferCodeAndPriceCode" style="document"/>
      <wsdl:input name="getPromoByOfferCodeAndPriceCode">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getPromoByOfferCodeAndPriceCodeResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="PromoException">
        <soap:fault name="PromoException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getVoucherByClient">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="getVoucherByClient">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getVoucherByClientResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="PromoException">
        <soap:fault name="PromoException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getVoucher">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="getVoucher">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getVoucherResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="PromoException">
        <soap:fault name="PromoException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="useVoucher">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="useVoucher">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="useVoucherResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="PromoException">
        <soap:fault name="PromoException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getSponsoringByOfferAndPrice">
      <soap:operation soapAction="getSponsoringByOfferCodeAndPriceCode" style="document"/>
      <wsdl:input name="getSponsoringByOfferAndPrice">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getSponsoringByOfferAndPriceResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="PromoException">
        <soap:fault name="PromoException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="createVoucher">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="createVoucher">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="createVoucherResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="PromoException">
        <soap:fault name="PromoException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getSponsoringByPromoCode">
      <soap:operation soapAction="getSponsoringByPromoCode" style="document"/>
      <wsdl:input name="getSponsoringByPromoCode">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getSponsoringByPromoCodeResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="PromoException">
        <soap:fault name="PromoException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getPromoByPromoCode">
      <soap:operation soapAction="getPromoByPromoCode" style="document"/>
      <wsdl:input name="getPromoByPromoCode">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getPromoByPromoCodeResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="PromoException">
        <soap:fault name="PromoException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="PromoWSImplService">
    <wsdl:port binding="tns:PromoWSImplServiceSoapBinding" name="promoPort">
      <soap:address location="http://10.100.119.11:8080/promos-management-ws-1.0.x/services/promo"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://10.100.119.11:8080/promos-management-ws-1.0.x/services/promo</con:endpoint></con:endpoints><con:operation id="bfe439e7-dfc9-4898-8cd9-38c53e9c228e" isOneWay="false" action="" name="createVoucher" bindingOperationName="createVoucher" type="Request-Response" outputName="createVoucherResponse" inputName="createVoucher" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="30bfe394-56b0-43b2-82ff-8fea571360f5" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.119.11:8080/promos-management-ws-1.0.x/services/promo</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://www.nordnet.com/promo/schemas">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <sch:createVoucher>\r
         <promoCode>?</promoCode>\r
         <dateDebValidite>?</dateDebValidite>\r
         <datefinValidite>?</datefinValidite>\r
         <clientIdList>\r
            <!--1 or more repetitions:-->\r
            <clientId>?</clientId>\r
         </clientIdList>\r
      </sch:createVoucher>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://www.nordnet.com/promo/schemas/promo/createVoucher"/></con:call></con:operation><con:operation id="9295d14c-2737-4655-9509-002f3e163e7c" isOneWay="false" action="getPromoByOfferCodeAndPriceCode" name="getPromoByOfferCodeAndPriceCode" bindingOperationName="getPromoByOfferCodeAndPriceCode" type="Request-Response" outputName="getPromoByOfferCodeAndPriceCodeResponse" inputName="getPromoByOfferCodeAndPriceCode" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="82c412c3-eb87-4337-943d-a9604f08ab09" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.119.11:8080/promos-management-ws-1.0.x/services/promo</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://www.nordnet.com/promo/schemas">
   <soapenv:Header/>
   <soapenv:Body>
      <sch:getPromoByCodeAndPriceRequest>
         <offerCode>MVNO</offerCode>
         <!--Optional:-->
         
      </sch:getPromoByCodeAndPriceRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="getPromoByOfferCodeAndPriceCode"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation id="14c71767-c98d-432d-8d54-7cfd79b27149" isOneWay="false" action="getPromoByPromoCode" name="getPromoByPromoCode" bindingOperationName="getPromoByPromoCode" type="Request-Response" outputName="getPromoByPromoCodeResponse" inputName="getPromoByPromoCode" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="3c1b839d-0709-421a-9283-d7d468ed72fb" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.119.11:8080/promos-management-ws-1.0.x/services/promo</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://www.nordnet.com/promo/schemas">
   <soapenv:Header/>
   <soapenv:Body>
      <sch:promoCode>INTYSOOESS2M2013</sch:promoCode>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="getPromoByPromoCode"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation id="e509fd87-38d0-4bc2-ae55-622512dc3f45" isOneWay="false" action="getSponsoringByOfferCodeAndPriceCode" name="getSponsoringByOfferAndPrice" bindingOperationName="getSponsoringByOfferAndPrice" type="Request-Response" outputName="getSponsoringByOfferAndPriceResponse" inputName="getSponsoringByOfferAndPrice" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="00f39b41-85f3-44f6-99c0-2f9978837bc1" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.119.11:8080/promos-management-ws-1.0.x/services/promo</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://www.nordnet.com/promo/schemas">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <sch:getSponsoringByCodeAndPriceRequest>\r
         <offerCode>?</offerCode>\r
         <!--Optional:-->\r
         <priceCode>?</priceCode>\r
      </sch:getSponsoringByCodeAndPriceRequest>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="getSponsoringByOfferCodeAndPriceCode"/></con:call></con:operation><con:operation id="4ae860bf-099f-4b1d-989f-06fcf265c30f" isOneWay="false" action="getSponsoringByPromoCode" name="getSponsoringByPromoCode" bindingOperationName="getSponsoringByPromoCode" type="Request-Response" outputName="getSponsoringByPromoCodeResponse" inputName="getSponsoringByPromoCode" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="e19311d6-d13d-4b56-819f-f5bed866fb56" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.119.11:8080/promos-management-ws-1.0.x/services/promo</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://www.nordnet.com/promo/schemas">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <sch:sPromoCode>?</sch:sPromoCode>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="getSponsoringByPromoCode"/></con:call></con:operation><con:operation id="c1687c9e-465d-4da5-a0d7-0e24fda21cfd" isOneWay="false" action="" name="getVoucher" bindingOperationName="getVoucher" type="Request-Response" outputName="getVoucherResponse" inputName="getVoucher" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="4b840231-3418-4ad6-8a05-de1607f4e797" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.119.11:8080/promos-management-ws-1.0.x/services/promo</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://www.nordnet.com/promo/schemas">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <sch:getVoucher>\r
         <voucherCode>?</voucherCode>\r
      </sch:getVoucher>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://www.nordnet.com/promo/schemas/promo/getVoucher"/></con:call></con:operation><con:operation id="785396f8-5f7d-490a-a4dd-e46e614a02f0" isOneWay="false" action="" name="getVoucherByClient" bindingOperationName="getVoucherByClient" type="Request-Response" outputName="getVoucherByClientResponse" inputName="getVoucherByClient" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="35c863aa-ac1a-43f1-9caa-b0632337bc8f" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.119.11:8080/promos-management-ws-1.0.x/services/promo</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://www.nordnet.com/promo/schemas">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <sch:getVoucherByClient>\r
         <clientId>?</clientId>\r
      </sch:getVoucherByClient>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://www.nordnet.com/promo/schemas/promo/getVoucherByClient"/></con:call></con:operation><con:operation id="81618edf-351a-4091-916b-881321b0296e" isOneWay="false" action="" name="useVoucher" bindingOperationName="useVoucher" type="Request-Response" outputName="useVoucherResponse" inputName="useVoucher" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="10bebed8-1161-4f9d-9833-5e4250c68ba0" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.119.11:8080/promos-management-ws-1.0.x/services/promo</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://www.nordnet.com/promo/schemas">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <sch:useVoucher>\r
         <voucherCode>?</voucherCode>\r
         <clientId>?</clientId>\r
      </sch:useVoucher>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="http://www.nordnet.com/promo/schemas/promo/useVoucher"/></con:call></con:operation></con:interface><con:interface xsi:type="con:RestService" id="7dc9f8f8-fb2f-4e75-8b61-6c1246d0abaf" wadlVersion="http://wadl.dev.java.net/2009/02" name="/default/batches" type="rest" basePath="/discount.qualifier.ws-1.0.x" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://10.100.109.6:8080</con:endpoint></con:endpoints><con:resource name="/batches/application.wadl" path="/batches/application.wadl" id="30e78522-a658-4657-b747-07fbe3dccdd1"><con:description>generateWadl</con:description><con:settings/><con:parameters/><con:method name="generateWadl" id="a3634581-8b3d-46b7-81d0-507ab9666ca9" method="GET"><con:description>generateWadl</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="e3e98c40-8ec2-427b-8eb4-84402f95366f" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="5fa40b60-505e-4cff-8787-88019a22f959" wadlVersion="http://wadl.dev.java.net/2009/02" name="/default/promo" type="rest" basePath="/discount.qualifier.ws-1.0.x" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://10.100.109.6:8080</con:endpoint></con:endpoints><con:resource name="/promo/application.wadl" path="/promo/application.wadl" id="058e1d6e-0fa2-4985-a9db-51c74b140603"><con:description>generateWadl</con:description><con:settings/><con:parameters/><con:method name="generateWadl" id="3121c8a6-af15-4aac-a694-93fd09f35da3" method="GET"><con:description>generateWadl</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="f2226624-5074-46d9-8f63-41704d093610" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/promo/offer/{offerCode}/price/{priceCode}" path="/promo/offer/{offerCode}/price/{priceCode}" id="b48dea19-f751-4c4d-b4d2-affe99f94346"><con:description>getPromoByOfferCodeAndPrice</con:description><con:settings/><con:parameters/><con:method name="getPromoByOfferCodeAndPrice" id="0fb6318d-cee1-4ee1-a6a2-cc27caa93404" method="GET"><con:description>getPromoByOfferCodeAndPrice</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>offerCode</con:name><con:style>TEMPLATE</con:style><con:description>offerCode</con:description></con:parameter><con:parameter required="true"><con:name>priceCode</con:name><con:style>TEMPLATE</con:style><con:description>priceCode</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>404</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>0</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="25bf5c2e-533d-452b-85d5-5747b5a22479" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/promo/{codePromo}" path="/promo/{codePromo}" id="8e765898-ec56-483d-ae29-9470c55dd34b"><con:description>getPromoByCodePromo</con:description><con:settings/><con:parameters/><con:method name="getPromoByCodePromo" id="d9278cf2-a74e-476d-b6a1-ef662404fe4d" method="GET"><con:description>getPromoByCodePromo</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>codePromo</con:name><con:style>TEMPLATE</con:style><con:description>codePromo</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="1658eb85-2928-4442-b7cb-10c5beaa6f7e" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="3c527523-c893-4e28-a3fb-0761af62c4ef" wadlVersion="http://wadl.dev.java.net/2009/02" name="/default/qualifier" type="rest" basePath="/discount.qualifier.ws-1.0.x" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://10.100.109.6:8080</con:endpoint></con:endpoints><con:resource name="/discount/application.wadl" path="/discount/application.wadl" id="adb37625-64ef-496a-a618-5665838b6ef3"><con:description>generateWadl</con:description><con:settings/><con:parameters/><con:method name="generateWadl" id="6077c3bc-f64b-4ab9-9ef8-e62a6eeb941c" method="GET"><con:description>generateWadl</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="37724799-1945-4516-b62e-6285af62858b" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/discount/{codeReduction}/isValid/commande{referenceCommande}" path="/discount/{codeReduction}/isValid/commande/{referenceCommande}" id="300b5a48-3a62-4f78-8fa1-1b42f6d48666"><con:description>validateForOrder</con:description><con:settings/><con:parameters><con:parameter><con:name>codeReduction</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/></con:parameter><con:parameter><con:name>referenceCommande</con:name><con:value/><con:style>TEMPLATE</con:style><con:default/></con:parameter></con:parameters><con:method name="validateForOrder" id="6c131fe8-7692-48b3-853e-73c9bb8a01b7" method="GET"><con:description>validateForOrder</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>codeReduction</con:name><con:style>TEMPLATE</con:style><con:description>codeReduction</con:description></con:parameter><con:parameter required="true"><con:name>referenceCommande</con:name><con:style>TEMPLATE</con:style><con:description>referenceCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:representation type="FAULT"><con:mediaType xsi:nil="true"/><con:status>404</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html;charset=utf-8</con:mediaType><con:status>404</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>500</con:status><con:params/><con:element xmlns:com="http://10.100.109.4/discount.qualifier.ws-1.0.x/discount/REM_MVNO_ISP/isValid/commande098006101">com:Fault</con:element></con:representation><con:request name="Request 1" id="b39454ff-2919-4389-93bc-45260f810e7c" mediaType="application/json"><con:settings/><con:request/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:request></con:method></con:resource><con:resource name="/discount/{codeReduction}/isValid/contrat/{referenceContrat}" path="/discount/{codeReduction}/isValid/contrat/{referenceContrat}" id="2202248c-b32e-4b8f-8115-7b871a860395"><con:description>validateForContrat</con:description><con:settings/><con:parameters/><con:method name="validateForContrat" id="e6d9c8e4-c46e-4469-802f-bc6c15c65ca5" method="GET"><con:description>validateForContrat</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>codeReduction</con:name><con:style>TEMPLATE</con:style><con:description>codeReduction</con:description></con:parameter><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="3429b494-7d6c-4227-944c-db05c760e04b" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="cd403469-ee50-4908-93c8-07eb43e37c30" wadlVersion="http://wadl.dev.java.net/2009/02" name="/default/technical" type="rest" basePath="/discount.qualifier.ws-1.0.x" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://10.100.109.6:8080</con:endpoint></con:endpoints><con:resource name="/tecnhical/application.wadl" path="/tecnhical/application.wadl" id="051165f1-d911-4a7b-bf4f-53d0c75cdf29"><con:description>generateWadl</con:description><con:settings/><con:parameters/><con:method name="generateWadl" id="cd519a34-869f-4248-a105-6be662ea82b0" method="GET"><con:description>generateWadl</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="65af31c4-5eb5-4636-be38-c991b135e8e3" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="1775bf1f-c859-4384-8549-4024ea13a723" wadlVersion="http://wadl.dev.java.net/2009/02" name="/default/voucher" type="rest" basePath="/discount.qualifier.ws-1.0.x" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://10.100.109.6:8080</con:endpoint></con:endpoints><con:resource name="/voucher/application.wadl" path="/voucher/application.wadl" id="23bbc9c8-ac8a-4583-b4ab-6a81f54eadf1"><con:description>generateWadl</con:description><con:settings/><con:parameters/><con:method name="generateWadl" id="c1efbe73-3715-49c9-93bb-3c26da614661" method="GET"><con:description>generateWadl</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="444f39d1-0e4c-453e-8375-87b335731077" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource><con:resource name="/voucher/{codeVoucher}" path="/voucher/{codeVoucher}" id="65816af6-36bb-406f-a3c9-8b5fcfd3cddd"><con:description>getVoucher</con:description><con:settings/><con:parameters/><con:method name="getVoucher" id="01db9ad5-3dee-4ba7-a39e-c90dadbcd439" method="GET"><con:description>getVoucher</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>codeVoucher</con:name><con:style>TEMPLATE</con:style><con:description>codeVoucher</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="e214a61e-bea1-4b8c-8ee8-99f5ce668787" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/discount.qualifier.ws-1.0.x/voucher/REM_MVNO_ISP</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="codeVoucher" value="0A4lkGQb" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="/voucher/{codeVoucher}/useVoucher/client/{clientId}" path="/voucher/{codeVoucher}/useVoucher/client/{clientId}" id="e358cc0d-b41f-4112-a024-2fe8c65381f9"><con:description>useVoucher</con:description><con:settings/><con:parameters/><con:method name="useVoucher" id="85b3ee56-51f9-4a71-9e79-a6d20042c628" method="PUT"><con:description>useVoucher</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>codeVoucher</con:name><con:style>TEMPLATE</con:style><con:description>codeVoucher</con:description></con:parameter><con:parameter required="true"><con:name>clientId</con:name><con:style>TEMPLATE</con:style><con:description>clientId</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="6c470d4e-58f9-4465-95ba-fe069e0daa3e" mediaType="application/json"><con:settings/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:WsdlInterface" id="29c22df4-0ee6-4335-91db-1b6558a5c79d" wsaVersion="NONE" name="NetCommMailWSImplServiceSoapBinding" type="wsdl" bindingName="{http://www.nordnet.com/netcommmail/schemas}NetCommMailWSImplServiceSoapBinding" soapVersion="1_1" anonymous="optional" definition="http://10.100.119.11:8080/net-comm-ws-1.0.x/services/netCommMail?wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="http://10.100.119.11:8080/net-comm-ws-1.0.x/services/netCommMail?wsdl"><con:part><con:url>http://10.100.119.11:8080/net-comm-ws-1.0.x/services/netCommMail?wsdl</con:url><con:content><![CDATA[<wsdl:definitions name="NetCommMailWSImplService" targetNamespace="http://www.nordnet.com/netcommmail/schemas" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http://www.nordnet.com/netcommmail/schemas" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:ns1="http://schemas.xmlsoap.org/soap/http">
  <wsdl:types>
    <xs:schema attributeFormDefault="unqualified" elementFormDefault="unqualified" targetNamespace="http://www.nordnet.com/netcommmail/schemas" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:ns0="http://responses.types.ws.common.nordnet.com">
      <xs:import namespace="http://responses.types.ws.common.nordnet.com"/>
      <xs:element name="getCommunication" type="tns:getCommunication"/>
      <xs:element name="getCommunicationResponse" type="tns:getCommunicationResponse"/>
      <xs:element name="getLastSentMail" type="tns:getLastSentMail"/>
      <xs:element name="getLastSentMailResponse" type="tns:getLastSentMailResponse"/>
      <xs:element name="listNPAIs" type="tns:listNPAIs"/>
      <xs:element name="listNPAIsResponse" type="tns:listNPAIsResponse"/>
      <xs:element name="listSentMails" type="tns:listSentMails"/>
      <xs:element name="listSentMailsResponse" type="tns:listSentMailsResponse"/>
      <xs:element name="prepareLetterForNetPrint" type="tns:prepareLetterForNetPrint"/>
      <xs:element name="prepareLetterForNetPrintResponse" type="tns:prepareLetterForNetPrintResponse"/>
      <xs:element name="resendMail" type="tns:resendMail"/>
      <xs:element name="resendMailResponse" type="tns:resendMailResponse"/>
      <xs:element name="sendMail" type="tns:sendMail"/>
      <xs:element name="sendMailResponse" type="tns:sendMailResponse"/>
      <xs:complexType name="listSentMails">
        <xs:sequence>
          <xs:element minOccurs="0" name="reference" type="xs:string"/>
          <xs:element minOccurs="0" name="referenceType" type="tns:referenceType"/>
          <xs:element minOccurs="0" name="earliestDate" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="listSentMailsResponse">
        <xs:sequence>
          <xs:element minOccurs="0" name="return" type="tns:MailsResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="MailsResponse">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="Mail" type="tns:Mail"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="Mail">
        <xs:sequence>
          <xs:element name="id" type="xs:long"/>
          <xs:element name="templateName" type="xs:string"/>
          <xs:element minOccurs="0" name="sentDate" type="xs:string"/>
          <xs:element name="sender" type="xs:string"/>
          <xs:element name="senderName" type="xs:string"/>
          <xs:element name="recipient" type="xs:string"/>
          <xs:element minOccurs="0" name="cc" type="xs:string"/>
          <xs:element minOccurs="0" name="bcc" type="xs:string"/>
          <xs:element name="subject" type="xs:string"/>
          <xs:element minOccurs="0" name="txtContent" type="xs:string"/>
          <xs:element minOccurs="0" name="htmlContent" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="listNPAIs">
        <xs:sequence/>
      </xs:complexType>
      <xs:complexType name="listNPAIsResponse">
        <xs:sequence>
          <xs:element minOccurs="0" name="return" type="tns:npais"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="npais">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" name="NAPI" type="tns:NPAI"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="NPAI">
        <xs:sequence>
          <xs:element minOccurs="0" name="email" type="xs:string"/>
          <xs:element minOccurs="0" name="npaiCode" type="xs:string"/>
          <xs:element minOccurs="0" name="npaiDate" type="xs:dateTime"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="resendMail">
        <xs:sequence>
          <xs:element name="mailId" type="xs:long"/>
          <xs:element minOccurs="0" name="recipient" type="xs:string"/>
          <xs:element minOccurs="0" name="userInfos" type="tns:userInfos"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="userInfos">
        <xs:sequence>
          <xs:element name="userName" type="xs:string"/>
          <xs:element name="httpUserAgent" type="xs:string"/>
          <xs:element name="ip" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="resendMailResponse">
        <xs:sequence>
          <xs:element minOccurs="0" name="return" type="tns:MailResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="MailResponse">
        <xs:sequence>
          <xs:element name="response" type="tns:Mail"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="sendMail">
        <xs:sequence>
          <xs:element minOccurs="0" name="templateName" type="xs:string"/>
          <xs:element minOccurs="0" name="idRecipient" type="xs:string"/>
          <xs:element minOccurs="0" name="typeRecipient" type="tns:recipientType"/>
          <xs:element minOccurs="0" name="dynamicFields" type="tns:dynamicFields"/>
          <xs:element minOccurs="0" name="attachedFiles" type="tns:attachedFiles"/>
          <xs:element minOccurs="0" name="attachedFilesURL" type="tns:attachedFilesURL"/>
          <xs:element minOccurs="0" name="userInfos" type="tns:userInfos"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="dynamicFields">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" name="Field" type="tns:Field"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="Field">
        <xs:sequence>
          <xs:element name="name" type="xs:string"/>
          <xs:element name="value" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="attachedFiles">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" name="File" type="tns:File"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="File">
        <xs:sequence>
          <xs:element name="name" type="xs:string"/>
          <xs:element minOccurs="0" name="mimeType" type="xs:string"/>
          <xs:element minOccurs="0" name="mimeSubType" type="xs:string"/>
          <xs:element name="content" type="xs:base64Binary"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="attachedFilesURL">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" name="FileUrl" type="tns:FileUrl"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="FileUrl">
        <xs:sequence>
          <xs:element name="name" type="xs:string"/>
          <xs:element minOccurs="0" name="mimeType" type="xs:string"/>
          <xs:element minOccurs="0" name="mimeSubType" type="xs:string"/>
          <xs:element name="urlFile" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="sendMailResponse">
        <xs:sequence>
          <xs:element minOccurs="0" name="return" type="tns:MailResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="getLastSentMail">
        <xs:sequence>
          <xs:element minOccurs="0" name="templateName" type="xs:string"/>
          <xs:element minOccurs="0" name="reference" type="xs:string"/>
          <xs:element minOccurs="0" name="referenceType" type="tns:referenceType"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="getLastSentMailResponse">
        <xs:sequence>
          <xs:element minOccurs="0" name="return" type="tns:MailResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="prepareLetterForNetPrint">
        <xs:sequence>
          <xs:element maxOccurs="unbounded" minOccurs="0" name="pdfFiles" type="tns:TFile"/>
          <xs:element minOccurs="0" name="offerKey" type="xs:string"/>
          <xs:element minOccurs="0" name="adress" type="tns:Address"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="TFile">
        <xs:sequence>
          <xs:element name="name" type="xs:string"/>
          <xs:element name="content" type="xs:base64Binary"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="Address">
        <xs:sequence>
          <xs:element name="id" type="xs:long"/>
          <xs:element name="lastName" type="xs:string"/>
          <xs:element name="firstName" type="xs:string"/>
          <xs:element minOccurs="0" name="compagny" type="xs:string"/>
          <xs:element minOccurs="0" name="email" type="xs:string"/>
          <xs:element minOccurs="0" name="phoneNumber" type="xs:string"/>
          <xs:element name="adress1" type="xs:string"/>
          <xs:element minOccurs="0" name="adress2" type="xs:string"/>
          <xs:element name="zipCode" type="xs:string"/>
          <xs:element name="city" type="xs:string"/>
          <xs:element name="country" type="xs:string"/>
          <xs:element name="civility" type="tns:civilityType"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="prepareLetterForNetPrintResponse">
        <xs:sequence/>
      </xs:complexType>
      <xs:complexType name="getCommunication">
        <xs:sequence>
          <xs:element minOccurs="0" name="idRecipient" type="xs:string"/>
          <xs:element minOccurs="0" name="typeRecipient" type="tns:recipientType"/>
          <xs:element minOccurs="0" name="startDate" type="xs:string"/>
          <xs:element minOccurs="0" name="endDate" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
      <xs:complexType name="getCommunicationResponse">
        <xs:sequence>
          <xs:element minOccurs="0" name="return" type="tns:MailsResponse"/>
        </xs:sequence>
      </xs:complexType>
      <xs:simpleType name="referenceType">
        <xs:restriction base="xs:string">
          <xs:enumeration value="CUSTOMER_REF"/>
          <xs:enumeration value="SUBSCRIPTION_REF"/>
          <xs:enumeration value="ORDER_REF"/>
          <xs:enumeration value="BUSINESS_REF"/>
        </xs:restriction>
      </xs:simpleType>
      <xs:simpleType name="recipientType">
        <xs:restriction base="xs:string">
          <xs:enumeration value="CUSTOMER"/>
          <xs:enumeration value="PROSPECT"/>
          <xs:enumeration value="PROVIDER"/>
        </xs:restriction>
      </xs:simpleType>
      <xs:simpleType name="civilityType">
        <xs:restriction base="xs:string">
          <xs:enumeration value="M"/>
          <xs:enumeration value="MME"/>
          <xs:enumeration value="MLLE"/>
        </xs:restriction>
      </xs:simpleType>
      <xs:element name="NetComException" type="tns:NetComException"/>
      <xs:complexType name="NetComException">
        <xs:sequence>
          <xs:element name="error" nillable="true" type="ns0:Error"/>
          <xs:element minOccurs="0" name="message" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
    </xs:schema>
    <xs:schema targetNamespace="http://responses.types.ws.common.nordnet.com" version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">
      <xs:complexType name="Error">
        <xs:sequence>
          <xs:element minOccurs="0" name="code" type="xs:string"/>
          <xs:element minOccurs="0" name="description" type="xs:string"/>
        </xs:sequence>
      </xs:complexType>
    </xs:schema>
  </wsdl:types>
  <wsdl:message name="listNPAIsResponse">
    <wsdl:part element="tns:listNPAIsResponse" name="parameters"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="listSentMailsResponse">
    <wsdl:part element="tns:listSentMailsResponse" name="parameters"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="sendMail">
    <wsdl:part element="tns:sendMail" name="parameters"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="prepareLetterForNetPrint">
    <wsdl:part element="tns:prepareLetterForNetPrint" name="parameters"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getCommunication">
    <wsdl:part element="tns:getCommunication" name="parameters"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="resendMail">
    <wsdl:part element="tns:resendMail" name="parameters"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="sendMailResponse">
    <wsdl:part element="tns:sendMailResponse" name="parameters"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getLastSentMailResponse">
    <wsdl:part element="tns:getLastSentMailResponse" name="parameters"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getLastSentMail">
    <wsdl:part element="tns:getLastSentMail" name="parameters"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="resendMailResponse">
    <wsdl:part element="tns:resendMailResponse" name="parameters"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="listSentMails">
    <wsdl:part element="tns:listSentMails" name="parameters"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="getCommunicationResponse">
    <wsdl:part element="tns:getCommunicationResponse" name="parameters"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="prepareLetterForNetPrintResponse">
    <wsdl:part element="tns:prepareLetterForNetPrintResponse" name="parameters"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="NetComException">
    <wsdl:part element="tns:NetComException" name="NetComException"></wsdl:part>
  </wsdl:message>
  <wsdl:message name="listNPAIs">
    <wsdl:part element="tns:listNPAIs" name="parameters"></wsdl:part>
  </wsdl:message>
  <wsdl:portType name="netCommMail">
    <wsdl:operation name="listSentMails">
      <wsdl:input message="tns:listSentMails" name="listSentMails"></wsdl:input>
      <wsdl:output message="tns:listSentMailsResponse" name="listSentMailsResponse"></wsdl:output>
      <wsdl:fault message="tns:NetComException" name="NetComException"></wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="listNPAIs">
      <wsdl:input message="tns:listNPAIs" name="listNPAIs"></wsdl:input>
      <wsdl:output message="tns:listNPAIsResponse" name="listNPAIsResponse"></wsdl:output>
      <wsdl:fault message="tns:NetComException" name="NetComException"></wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="resendMail">
      <wsdl:input message="tns:resendMail" name="resendMail"></wsdl:input>
      <wsdl:output message="tns:resendMailResponse" name="resendMailResponse"></wsdl:output>
      <wsdl:fault message="tns:NetComException" name="NetComException"></wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="sendMail">
      <wsdl:input message="tns:sendMail" name="sendMail"></wsdl:input>
      <wsdl:output message="tns:sendMailResponse" name="sendMailResponse"></wsdl:output>
      <wsdl:fault message="tns:NetComException" name="NetComException"></wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getLastSentMail">
      <wsdl:input message="tns:getLastSentMail" name="getLastSentMail"></wsdl:input>
      <wsdl:output message="tns:getLastSentMailResponse" name="getLastSentMailResponse"></wsdl:output>
      <wsdl:fault message="tns:NetComException" name="NetComException"></wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="prepareLetterForNetPrint">
      <wsdl:input message="tns:prepareLetterForNetPrint" name="prepareLetterForNetPrint"></wsdl:input>
      <wsdl:output message="tns:prepareLetterForNetPrintResponse" name="prepareLetterForNetPrintResponse"></wsdl:output>
      <wsdl:fault message="tns:NetComException" name="NetComException"></wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getCommunication">
      <wsdl:input message="tns:getCommunication" name="getCommunication"></wsdl:input>
      <wsdl:output message="tns:getCommunicationResponse" name="getCommunicationResponse"></wsdl:output>
      <wsdl:fault message="tns:NetComException" name="NetComException"></wsdl:fault>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="NetCommMailWSImplServiceSoapBinding" type="tns:netCommMail">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="listSentMails">
      <soap:operation soapAction="listSentMail" style="document"/>
      <wsdl:input name="listSentMails">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="listSentMailsResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="NetComException">
        <soap:fault name="NetComException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="listNPAIs">
      <soap:operation soapAction="listNPAIs" style="document"/>
      <wsdl:input name="listNPAIs">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="listNPAIsResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="NetComException">
        <soap:fault name="NetComException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="resendMail">
      <soap:operation soapAction="resendMail" style="document"/>
      <wsdl:input name="resendMail">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="resendMailResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="NetComException">
        <soap:fault name="NetComException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="sendMail">
      <soap:operation soapAction="sendMail" style="document"/>
      <wsdl:input name="sendMail">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="sendMailResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="NetComException">
        <soap:fault name="NetComException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getLastSentMail">
      <soap:operation soapAction="getLastSentMail" style="document"/>
      <wsdl:input name="getLastSentMail">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getLastSentMailResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="NetComException">
        <soap:fault name="NetComException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="prepareLetterForNetPrint">
      <soap:operation soapAction="prepareLetterForNetPrint" style="document"/>
      <wsdl:input name="prepareLetterForNetPrint">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="prepareLetterForNetPrintResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="NetComException">
        <soap:fault name="NetComException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
    <wsdl:operation name="getCommunication">
      <soap:operation soapAction="getCommunication" style="document"/>
      <wsdl:input name="getCommunication">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="getCommunicationResponse">
        <soap:body use="literal"/>
      </wsdl:output>
      <wsdl:fault name="NetComException">
        <soap:fault name="NetComException" use="literal"/>
      </wsdl:fault>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="NetCommMailWSImplService">
    <wsdl:port binding="tns:NetCommMailWSImplServiceSoapBinding" name="netCommMailPort">
      <soap:address location="http://10.100.119.11:8080/net-comm-ws-1.0.x/services/netCommMail"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://10.100.119.11:8080/net-comm-ws-1.0.x/services/netCommMail</con:endpoint></con:endpoints><con:operation id="e456ec4a-03ef-4f4b-a7aa-82384abe9c58" isOneWay="false" action="getCommunication" name="getCommunication" bindingOperationName="getCommunication" type="Request-Response" outputName="getCommunicationResponse" inputName="getCommunication" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="a2ac1dbc-44ae-41ff-807c-c9bb6acb5afd" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.119.11:8080/net-comm-ws-1.0.x/services/netCommMail</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://www.nordnet.com/netcommmail/schemas">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <sch:getCommunication>\r
         <!--Optional:-->\r
         <idRecipient>?</idRecipient>\r
         <!--Optional:-->\r
         <typeRecipient>?</typeRecipient>\r
         <!--Optional:-->\r
         <startDate>?</startDate>\r
         <!--Optional:-->\r
         <endDate>?</endDate>\r
      </sch:getCommunication>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="getCommunication"/><con:wsrmConfig version="1.2"/></con:call></con:operation><con:operation id="82f60f58-d034-4848-9f8f-17d59d5167f5" isOneWay="false" action="getLastSentMail" name="getLastSentMail" bindingOperationName="getLastSentMail" type="Request-Response" outputName="getLastSentMailResponse" inputName="getLastSentMail" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="d2ddf3c6-e611-4785-a6c1-24e78d098f39" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.119.11:8080/net-comm-ws-1.0.x/services/netCommMail</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://www.nordnet.com/netcommmail/schemas">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <sch:getLastSentMail>\r
         <!--Optional:-->\r
         <templateName>?</templateName>\r
         <!--Optional:-->\r
         <reference>?</reference>\r
         <!--Optional:-->\r
         <referenceType>?</referenceType>\r
      </sch:getLastSentMail>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="getLastSentMail"/></con:call></con:operation><con:operation id="96a4ddaf-638c-4484-9657-6a79817f5426" isOneWay="false" action="listNPAIs" name="listNPAIs" bindingOperationName="listNPAIs" type="Request-Response" outputName="listNPAIsResponse" inputName="listNPAIs" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="4e7739e2-a022-4757-958f-2e2962bc0e5c" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.119.11:8080/net-comm-ws-1.0.x/services/netCommMail</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://www.nordnet.com/netcommmail/schemas">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <sch:listNPAIs/>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="listNPAIs"/></con:call></con:operation><con:operation id="af2c7800-0e05-40eb-9db7-f6997663f553" isOneWay="false" action="listSentMail" name="listSentMails" bindingOperationName="listSentMails" type="Request-Response" outputName="listSentMailsResponse" inputName="listSentMails" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="2f291832-8d58-496d-8573-895be74ebfae" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.119.11:8080/net-comm-ws-1.0.x/services/netCommMail</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://www.nordnet.com/netcommmail/schemas">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <sch:listSentMails>\r
         <!--Optional:-->\r
         <reference>?</reference>\r
         <!--Optional:-->\r
         <referenceType>?</referenceType>\r
         <!--Optional:-->\r
         <earliestDate>?</earliestDate>\r
      </sch:listSentMails>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="listSentMail"/></con:call></con:operation><con:operation id="43d8b4bb-02e7-4166-8d53-9f4f5bec8c9e" isOneWay="false" action="prepareLetterForNetPrint" name="prepareLetterForNetPrint" bindingOperationName="prepareLetterForNetPrint" type="Request-Response" outputName="prepareLetterForNetPrintResponse" inputName="prepareLetterForNetPrint" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="4e63c81b-a948-4bde-ac61-27cda161f1e6" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.119.11:8080/net-comm-ws-1.0.x/services/netCommMail</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://www.nordnet.com/netcommmail/schemas">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <sch:prepareLetterForNetPrint>\r
         <!--Zero or more repetitions:-->\r
         <pdfFiles>\r
            <name>?</name>\r
            <content>cid:700995946954</content>\r
         </pdfFiles>\r
         <!--Optional:-->\r
         <offerKey>?</offerKey>\r
         <!--Optional:-->\r
         <adress>\r
            <id>?</id>\r
            <lastName>?</lastName>\r
            <firstName>?</firstName>\r
            <!--Optional:-->\r
            <compagny>?</compagny>\r
            <!--Optional:-->\r
            <email>?</email>\r
            <!--Optional:-->\r
            <phoneNumber>?</phoneNumber>\r
            <adress1>?</adress1>\r
            <!--Optional:-->\r
            <adress2>?</adress2>\r
            <zipCode>?</zipCode>\r
            <city>?</city>\r
            <country>?</country>\r
            <civility>?</civility>\r
         </adress>\r
      </sch:prepareLetterForNetPrint>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="prepareLetterForNetPrint"/></con:call></con:operation><con:operation id="a7e2aab9-9afa-4119-8829-bca14facb172" isOneWay="false" action="resendMail" name="resendMail" bindingOperationName="resendMail" type="Request-Response" outputName="resendMailResponse" inputName="resendMail" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="81aea108-869a-4e30-8c5c-4b296f2b7d0e" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.119.11:8080/net-comm-ws-1.0.x/services/netCommMail</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://www.nordnet.com/netcommmail/schemas">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <sch:resendMail>\r
         <mailId>?</mailId>\r
         <!--Optional:-->\r
         <recipient>?</recipient>\r
         <!--Optional:-->\r
         <userInfos>\r
            <userName>?</userName>\r
            <httpUserAgent>?</httpUserAgent>\r
            <ip>?</ip>\r
         </userInfos>\r
      </sch:resendMail>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:wsaConfig mustUnderstand="NONE" version="200508" action="resendMail"/></con:call></con:operation><con:operation id="14acf608-dbeb-4a14-bbf2-d24fed3a2b8f" isOneWay="false" action="sendMail" name="sendMail" bindingOperationName="sendMail" type="Request-Response" outputName="sendMailResponse" inputName="sendMail" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="3467d7f3-638d-4163-9704-3c587ff7a8fb" defaultOutgoingWss="" defaultIncomingWss="" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.119.11:8080/net-comm-ws-1.0.x/services/netCommMail</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://www.nordnet.com/netcommmail/schemas">\r
   <soapenv:Header/>\r
   <soapenv:Body>\r
      <sch:sendMail>\r
         <!--Optional:-->\r
         <templateName>?</templateName>\r
         <!--Optional:-->\r
         <idRecipient>?</idRecipient>\r
         <!--Optional:-->\r
         <typeRecipient>?</typeRecipient>\r
         <!--Optional:-->\r
         <dynamicFields>\r
            <!--1 or more repetitions:-->\r
            <Field>\r
               <name>?</name>\r
               <value>?</value>\r
            </Field>\r
         </dynamicFields>\r
         <!--Optional:-->\r
         <attachedFiles>\r
            <!--1 or more repetitions:-->\r
            <File>\r
               <name>?</name>\r
               <!--Optional:-->\r
               <mimeType>?</mimeType>\r
               <!--Optional:-->\r
               <mimeSubType>?</mimeSubType>\r
               <content>cid:689054163239</content>\r
            </File>\r
         </attachedFiles>\r
         <!--Optional:-->\r
         <attachedFilesURL>\r
            <!--1 or more repetitions:-->\r
            <FileUrl>\r
               <name>?</name>\r
               <!--Optional:-->\r
               <mimeType>?</mimeType>\r
               <!--Optional:-->\r
               <mimeSubType>?</mimeSubType>\r
               <urlFile>?</urlFile>\r
            </FileUrl>\r
         </attachedFilesURL>\r
         <!--Optional:-->\r
         <userInfos>\r
            <userName>?</userName>\r
            <httpUserAgent>?</httpUserAgent>\r
            <ip>?</ip>\r
         </userInfos>\r
      </sch:sendMail>\r
   </soapenv:Body>\r
</soapenv:Envelope>]]></con:request><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508" action="sendMail"/><con:wsrmConfig version="1.2"/></con:call></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" id="39d90808-3efd-4f42-9b7f-5821f7ff2492" wadlVersion="http://wadl.dev.java.net/2009/02" name="/opale-api-1.2.x" basePath="/opale-api-1.2.x" wsaVersion="NONE" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT"/><con:endpoints><con:endpoint>http://10.100.109.4:8080</con:endpoint></con:endpoints><con:resource name="/commande/" path="/commande/" id="95d20bc1-9ef4-4cd0-be1b-05a08341e674"><con:description>chercherCommande</con:description><con:settings/><con:parameters/><con:method name="chercherCommande" id="7f2becde-c936-4fc9-8c57-eb7c3db9e670" method="POST"><con:description>chercherCommande</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="0fb142cd-3834-4d5a-b797-6326fe542fdf" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/application.wadl" path="/commande/application.wadl" id="618eb9fc-fc7a-4bae-979f-ca8698f257de"><con:description>generateWadl</con:description><con:settings/><con:parameters/><con:method name="generateWadl" id="fe3b4ab1-76d4-4a14-b236-da7d482ec652" method="GET"><con:description>generateWadl</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="2e10db85-3125-4c32-935c-908e2223ec1d" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/creer" path="/commande/creer" id="88c89e2d-6f52-4820-b2c2-5b4a408996b7"><con:description>creerCommande</con:description><con:settings/><con:parameters/><con:method name="creerCommande" id="26edd3fd-89e2-487a-8247-60b947d3ff5f" method="POST"><con:description>creerCommande</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="3f551b9c-3148-498e-92dd-1fc689b56d55" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/details/{refCommande}" path="/commande/details/{refCommande}" id="b5715cf7-0573-4f3c-b0fb-784ddea764fd"><con:description>getCommandeDetailee</con:description><con:settings/><con:parameters/><con:method name="getCommandeDetailee" id="e9fdfa9a-54f3-4e3e-a6e3-baa59838d703" method="GET"><con:description>getCommandeDetailee</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="fd6359d5-649f-4cec-a0ad-d6ca93b35e02" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{idClient}/countOrderLine/discount/{discountCode}" path="/commande/{idClient}/countOrderLine/discount/{discountCode}" id="a56f4e97-6c91-4a2c-9f26-aad751178dd2"><con:description>countOrderLineDiscount</con:description><con:settings/><con:parameters/><con:method name="countOrderLineDiscount" id="bd3fd920-dc82-49c4-88e8-b6f44c97783a" method="GET"><con:description>countOrderLineDiscount</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>idClient</con:name><con:style>TEMPLATE</con:style><con:description>idClient</con:description></con:parameter><con:parameter required="true"><con:name>discountCode</con:name><con:style>TEMPLATE</con:style><con:description>discountCode</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="67b9f04a-fa9a-4250-8573-56d58918dce1" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}" path="/commande/{refCommande}" id="42ab994c-338e-42a1-9642-ecd067a8de1a"><con:description>getCommande</con:description><con:settings/><con:parameters/><con:method name="getCommande" id="927b21cd-34a7-4e98-ad60-8e73645c025c" method="GET"><con:description>getCommande</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="8f82617a-bbbb-4e41-b21a-fb33a837243a" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/annuler" path="/commande/{refCommande}/annuler" id="080abcdd-0e58-4202-bee4-a200a03c51cf"><con:description>annulerCommande</con:description><con:settings/><con:parameters/><con:method name="annulerCommande" id="4295ff2d-ca4c-4bca-86bc-7dd246e6d369" method="POST"><con:description>annulerCommande</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="93040d02-4a09-4567-b82e-57628a3e9814" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/beforePaymentCost" path="/commande/{refCommande}/beforePaymentCost" id="f79aa39d-98b5-480f-acd2-e4838c6713b6"><con:description>calculerCoutAvantPaiement</con:description><con:settings/><con:parameters/><con:method name="calculerCoutAvantPaiement" id="b88eec88-eb43-4042-98ad-ccabe8d26693" method="POST"><con:description>calculerCoutAvantPaiement</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="009ffead-b450-4a78-9a73-64cabe78b495" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/communication/{typeCommunication}/envoyerEmail" path="/commande/{refCommande}/communication/{typeCommunication}/envoyerEmail" id="4d3e4297-d971-4d50-9a0d-10c7d51a2cad"><con:description>envoyerConfirmationCommande</con:description><con:settings/><con:parameters/><con:method name="envoyerConfirmationCommande" id="b47f2895-b193-4f6e-a62d-0a38fa0a1edf" method="POST"><con:description>envoyerConfirmationCommande</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter><con:parameter required="true"><con:name>typeCommunication</con:name><con:style>TEMPLATE</con:style><con:description>typeCommunication</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="04e80c8a-ddaa-4792-a93a-24aa4f312a51" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/costCalculation" path="/commande/{refCommande}/costCalculation" id="383c3d50-eee6-477c-bf4b-9f464c040809"><con:description>calculerCout</con:description><con:settings/><con:parameters/><con:method name="calculerCout" id="2d02f43e-0ede-40af-bc51-55825fac4f4d" method="POST"><con:description>calculerCout</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="f1ae59dc-e416-464b-b5d9-446cb0263f19" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/enhancedCostCalculation" path="/commande/{refCommande}/enhancedCostCalculation" id="2c8929e5-c5cb-41b3-a29f-f290f38845c1"><con:description>enhancedCalculerCout</con:description><con:settings/><con:parameters/><con:method name="enhancedCalculerCout" id="465904aa-6690-4d58-b698-50d5e454e266" method="POST"><con:description>enhancedCalculerCout</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="d3f0e384-0ac1-4056-a00a-36aa29b6af49" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/getCommandeBusiness" path="/commande/{refCommande}/getCommandeBusiness" id="dbd35f33-1bbe-4481-8a12-be0c8a564a70"><con:description>getCommandeBusiness</con:description><con:settings/><con:parameters/><con:method name="getCommandeBusiness" id="84a52c4f-f192-4b55-b8b5-7a5dc68039b6" method="GET"><con:description>getCommandeBusiness</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="7e74e138-0c00-434f-ac03-502fef6dcf04" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/getInfosBonCommande" path="/commande/{refCommande}/getInfosBonCommande" id="0d25777a-f77e-4adc-a149-05837b84f57c"><con:description>getInfosBonCommande</con:description><con:settings/><con:parameters/><con:method name="getInfosBonCommande" id="0fb74b51-070d-4156-95c7-f79a1d5caff6" method="GET"><con:description>getInfosBonCommande</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="b6a96576-90e1-4601-b418-1482f2cbc65b" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/initDocument" path="/commande/{refCommande}/initDocument" id="234f35f3-921f-436d-9a0e-97ce6b10988a"><con:description>initCommandeDocument</con:description><con:settings/><con:parameters/><con:method name="initCommandeDocument" id="425d9fdc-6e21-484e-8db9-6066a80b418d" method="POST"><con:description>initCommandeDocument</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="d5889dfe-e821-423d-b871-90fab917289a" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/initSignature" path="/commande/{refCommande}/initSignature" id="5436fe97-ead1-413e-b3c9-a99c1979dffe"><con:description>initCommandeSignature</con:description><con:settings/><con:parameters/><con:method name="initCommandeSignature" id="ac275e87-35d4-4579-a8b8-33ab37614c44" method="POST"><con:description>initCommandeSignature</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="85ac554e-1aee-4bee-9636-a6e9dcf06dfd" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/paiement" path="/commande/{refCommande}/paiement" id="290125dc-34e6-40a8-a3aa-b86973b8fbb5"><con:description>creerIntentionPaiement</con:description><con:settings/><con:parameters/><con:method name="creerIntentionPaiement" id="569844fe-fc03-4c9d-b982-3310846af764" method="POST"><con:description>creerIntentionPaiement</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="97d63de9-130d-4122-bae0-f699b282ec40" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/paiement/annule/{isAnnule}" path="/commande/{refCommande}/paiement/annule/{isAnnule}" id="917d8fc4-2381-42cd-8f3f-d3771497a4f0"><con:description>getListeDePaiement</con:description><con:settings/><con:parameters/><con:method name="getListeDePaiement" id="2dd7cba5-60af-45c7-8292-30e3ef9b11ee" method="GET"><con:description>getListeDePaiement</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter><con:parameter required="true"><con:name>isAnnule</con:name><con:style>TEMPLATE</con:style><con:description>isAnnule</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="5f027cc2-56c1-4beb-9a42-2e213a708610" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/paiement/comptant" path="/commande/{refCommande}/paiement/comptant" id="1fd6e22e-5906-49db-ab02-5d3c35c891cb"><con:description>paiementDirect</con:description><con:settings/><con:parameters/><con:method name="paiementDirect" id="ceec2f89-8da3-4d47-b633-7112bb80aaac" method="POST"><con:description>paiementDirect</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="ceb3a511-8343-4c3f-bd98-a28cbccb8b13" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/paiement/comptant/annule/{isAnnule}" path="/commande/{refCommande}/paiement/comptant/annule/{isAnnule}" id="38b42041-b50f-4b37-acbb-f6a5f6d05005"><con:description>getListePaiementComptant</con:description><con:settings/><con:parameters/><con:method name="getListePaiementComptant" id="edd090cd-dad8-41b8-ae36-7cfa740a3c38" method="GET"><con:description>getListePaiementComptant</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter><con:parameter required="true"><con:name>isAnnule</con:name><con:style>TEMPLATE</con:style><con:description>isAnnule</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="2d3bbe55-1c4d-4978-abea-226a4d378c83" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/paiement/recurrent" path="/commande/{refCommande}/paiement/recurrent" id="381ca6ed-b2f6-402b-aaf0-e04c8b1ec9aa"><con:description>paiementRecurrent</con:description><con:settings/><con:parameters/><con:method name="paiementRecurrent" id="66591f35-9e87-4a8d-b8ef-9548649b0c17" method="POST"><con:description>paiementRecurrent</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="51064328-7776-46f5-9cd2-a4a12e1286b3" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/paiement/recurrent/annule/{isAnnule}" path="/commande/{refCommande}/paiement/recurrent/annule/{isAnnule}" id="b0cf4444-548e-428a-ba8a-16d7794f17f9"><con:description>getListePaiementRecurrent</con:description><con:settings/><con:parameters/><con:method name="getListePaiementRecurrent" id="145e8e2b-9a68-4741-9f8f-8ac159b3cf80" method="GET"><con:description>getListePaiementRecurrent</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter><con:parameter required="true"><con:name>isAnnule</con:name><con:style>TEMPLATE</con:style><con:description>isAnnule</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="ace985c3-cac8-425d-a137-29cd525ef0f0" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/paiement/{refPaiement}/payer" path="/commande/{refCommande}/paiement/{refPaiement}/payer" id="af2bf637-f803-4fc4-abdb-3d2c2fa5092b"><con:description>payerIntentionPaiement</con:description><con:settings/><con:parameters/><con:method name="payerIntentionPaiement" id="8bb3b2e4-f7c5-45e1-b7d9-fbcd160be92f" method="POST"><con:description>payerIntentionPaiement</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter><con:parameter required="true"><con:name>refPaiement</con:name><con:style>TEMPLATE</con:style><con:description>refPaiement</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="47e7f023-03e3-473b-ac56-bb2e26d38316" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/paiement/{refPaiement}/supprimer" path="/commande/{refCommande}/paiement/{refPaiement}/supprimer" id="40f7f6ba-09a3-42e5-a36e-a2824443721f"><con:description>supprimerPaiement</con:description><con:settings/><con:parameters/><con:method name="supprimerPaiement" id="7a2bb605-a314-48d4-a205-7f8fbedac38f" method="POST"><con:description>supprimerPaiement</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter><con:parameter required="true"><con:name>refPaiement</con:name><con:style>TEMPLATE</con:style><con:description>refPaiement</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="ce01cf95-9816-4c4d-b3fd-18186759d856" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/reduction/{codeCatalogueReduction}" path="/commande/{refCommande}/reduction/{codeCatalogueReduction}" id="9c8bbba7-1878-4f4d-92aa-2905710dbffc"><con:description>forceEligible</con:description><con:settings/><con:parameters/><con:method name="forceEligible" id="1f355272-3642-4323-a33b-d216321505c3" method="POST"><con:description>forceEligible</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter><con:parameter required="true"><con:name>codeCatalogueReduction</con:name><con:style>TEMPLATE</con:style><con:description>codeCatalogueReduction</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="55eec65e-0857-4ff0-b81b-a3a0f38cb49e" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/signature" path="/commande/{refCommande}/signature" id="92ce40c8-748e-4b89-ad8d-d7b148626d60"><con:description>creerIntentionDeSignature</con:description><con:settings/><con:parameters/><con:method name="creerIntentionDeSignature" id="b74d0373-6a28-4bd9-8dc2-f572fa2341da" method="POST"><con:description>creerIntentionDeSignature</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="585c16b0-b072-46f3-a212-340c3e2db9b5" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/signature/Direct" path="/commande/{refCommande}/signature/Direct" id="98935463-e9b4-4e5e-8a14-f9170b4584fb"><con:description>signerCommandeDirect</con:description><con:settings/><con:parameters/><con:method name="signerCommandeDirect" id="72d40833-7f81-40eb-89c3-7cbc871f7f37" method="POST"><con:description>signerCommandeDirect</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="074379bb-28db-4323-a5e2-50c5f324a92f" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/signature/{afficheAnnule}" path="/commande/{refCommande}/signature/{afficheAnnule}" id="536d687a-ca61-45d2-b9fe-353d633423ab"><con:description>getSignature</con:description><con:settings/><con:parameters/><con:method name="getSignature" id="952e68a5-c2fc-437a-aecd-d7be74ee78c6" method="GET"><con:description>getSignature</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter><con:parameter required="true"><con:name>afficheAnnule</con:name><con:style>TEMPLATE</con:style><con:description>afficheAnnule</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="79d46ea4-5b51-4019-80ed-637be9fa5347" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/signature/{refSignature}" path="/commande/{refCommande}/signature/{refSignature}" id="47989b6d-e194-45ec-b3e5-e8271cd3c35d"><con:description>signerCommande</con:description><con:settings/><con:parameters/><con:method name="signerCommande" id="7f79301e-178e-4ecb-96e0-bb69fc4dcfbb" method="POST"><con:description>signerCommande</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter><con:parameter required="true"><con:name>refSignature</con:name><con:style>TEMPLATE</con:style><con:description>refSignature</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="ee2f506c-ce44-46b1-b2ac-3df7497759f3" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/signer" path="/commande/{refCommande}/signer" id="32bda0bf-2b87-45b3-95bf-334fef58a551"><con:description>signer</con:description><con:settings/><con:parameters/><con:method name="signer" id="b7af8a55-2448-41da-9e28-098b0b9632de" method="POST"><con:description>signer</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="cc48091c-31dc-49a9-8b60-3229eb888d89" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/synchroniserReductionEligible" path="/commande/{refCommande}/synchroniserReductionEligible" id="9e7eff88-b627-4cb1-97ff-eaeaec366402"><con:description>synchronizerReductionEligible</con:description><con:settings/><con:parameters/><con:method name="synchronizerReductionEligible" id="8377b72b-64a6-45ec-a559-687407efb6fa" method="GET"><con:description>synchronizerReductionEligible</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="5fdeb627-8534-435b-909e-e7573a7a9140" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/synchronizeDocument" path="/commande/{refCommande}/synchronizeDocument" id="362ce295-bec6-46a6-bdbc-a8b13e4073f6"><con:description>synchronizerCommandeDocument</con:description><con:settings/><con:parameters/><con:method name="synchronizerCommandeDocument" id="53a8f709-885f-4ddc-aa23-625d7a0251e5" method="POST"><con:description>synchronizerCommandeDocument</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="d53e6ee1-1a03-4143-8a44-e0d28f25c552" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/transformerEnContrat" path="/commande/{refCommande}/transformerEnContrat" id="55c93471-58de-4ea3-9909-16f062a81ae1"><con:description>transformeEnContrat</con:description><con:settings/><con:parameters/><con:method name="transformeEnContrat" id="30c9d044-4b29-4bb2-baef-22ffb8ee3cca" method="POST"><con:description>transformeEnContrat</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="0bf11671-f311-46d6-b70e-689779eacfda" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/transformerEnDraft" path="/commande/{refCommande}/transformerEnDraft" id="55493403-5287-4e8d-87c8-3244da4e9164"><con:description>transformerEnDraft</con:description><con:settings/><con:parameters/><con:method name="transformerEnDraft" id="25b5f3d2-5629-4a0c-af58-404633829198" method="POST"><con:description>transformerEnDraft</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>refCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="4aad5993-bca0-4229-80c8-2b145ae0ec41" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/commande/{refCommande}/valider" path="/commande/{refCommande}/valider" id="a60c5209-c857-4b16-b1a9-ea243f95e0d1"><con:description>validerCommande</con:description><con:settings/><con:parameters/><con:method name="validerCommande" id="733e5691-4a30-4eb0-8cb5-f43545f9d2b6" method="GET"><con:description>validerCommande</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refCommande</con:name><con:style>TEMPLATE</con:style><con:description>referenceCommande</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="6d754bdd-769e-4f68-90c0-dfd58954af1d" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="202f64a9-72b0-4219-aae3-ba1a1a9054eb" wadlVersion="http://wadl.dev.java.net/2009/02" name="/default/livraison" type="rest" basePath="/livraison-core-1.1.x" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://10.100.109.6:8080</con:endpoint></con:endpoints><con:resource name="/livraison/application.wadl" path="/livraison/application.wadl" id="fcb71d18-d50c-43ac-be36-23d9d17e4f69"><con:description>generateWadl</con:description><con:settings/><con:parameters/><con:method name="generateWadl" id="b0fccb63-4e57-4ea2-9d7c-596b69005dec" method="GET"><con:description>generateWadl</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="504a499b-976a-47a9-b34b-c337d10c46c5" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/livraison/biensEnCoursLivraison" path="/livraison/biensEnCoursLivraison" id="ba40194f-02ee-43de-83d0-5d288ba25d3b"><con:description>getBiensEnCoursLivraison</con:description><con:settings/><con:parameters/><con:method name="getBiensEnCoursLivraison" id="e6c343a5-a1ad-46d9-82cf-0996ac533738" method="GET"><con:description>getBiensEnCoursLivraison</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="f9025d84-80b0-4b41-b3cb-69175ec51632" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/livraison/initier" path="/livraison/initier" id="3c189167-ab3a-4aee-9127-acf8060b15f5"><con:description>initierBP</con:description><con:settings/><con:parameters/><con:method name="initierBP" id="95ab3379-568f-4d21-9536-eac8b178e5e7" method="POST"><con:description>initierBP</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="70a8f67c-ea82-4040-b608-9d06c2fbdd83" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/livraison/marquerBienPreparer" path="/livraison/marquerBienPreparer" id="7163e7c1-7f59-490c-a4f1-e09b3c71cc0c"><con:description>marquerBienPreparer</con:description><con:settings/><con:parameters/><con:method name="marquerBienPreparer" id="989dc59b-0d39-424f-930c-a7c78fc2da12" method="POST"><con:description>marquerBienPreparer</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="deb6ed56-41ca-4d13-9d1c-b74020cbd075" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/livraison/marquerLivre" path="/livraison/marquerLivre" id="212db7af-9548-4bf6-ac34-badbfd908635"><con:description>marquerLivre</con:description><con:settings/><con:parameters/><con:method name="marquerLivre" id="e611b208-6257-46d8-a781-6ebfbc71ea3b" method="POST"><con:description>marquerLivre</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="03d888c7-266e-422f-be2e-4d3c39dc869a" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/livraison/marquerServicePreparer" path="/livraison/marquerServicePreparer" id="ca9a331a-9f5a-4f30-8535-22dab8ff721a"><con:description>marquerServicePreparer</con:description><con:settings/><con:parameters/><con:method name="marquerServicePreparer" id="7311bf0b-a38f-4222-a4e3-31fe1ae88766" method="POST"><con:description>marquerServicePreparer</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="7a2bb367-5291-45c5-ae0e-052ff59b9af7" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/livraison/search/{referenceBP}" path="/livraison/search/{referenceBP}" id="65489235-ba2e-4418-a97e-0ffc639d31b5"><con:description>getBonPreparation</con:description><con:settings/><con:parameters/><con:method name="getBonPreparation" id="3e604087-dfcc-47ea-8f46-21ff868b8cb7" method="GET"><con:description>getBonPreparation</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceBP</con:name><con:style>TEMPLATE</con:style><con:description>referenceBP</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="12c9425b-f36e-4d41-a43a-85d59255ac89" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/livraison/search/{referenceEL}/{referenceProduit}/elementLivraison" path="/livraison/search/{referenceEL}/{referenceProduit}/elementLivraison" id="92d9edc6-96ef-4fbb-8c0f-51f5e49cc416"><con:description>getElementLivraison</con:description><con:settings/><con:parameters/><con:method name="getElementLivraison" id="d48e01d6-d4a2-46ed-bbdc-07f5c8553a63" method="GET"><con:description>getElementLivraison</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceEL</con:name><con:style>TEMPLATE</con:style><con:description>referenceEL</con:description></con:parameter><con:parameter required="true"><con:name>referenceProduit</con:name><con:style>TEMPLATE</con:style><con:description>referenceProduit</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="5470d77c-3320-4f69-b0a3-c06665fd2767" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/livraison/search/{referenceEL}/{referenceProduit}/{isRetour}/referenceBonPreparationParent" path="/livraison/search/{referenceEL}/{referenceProduit}/{isRetour}/referenceBonPreparationParent" id="e2198861-1ff4-45b5-bcf9-11f009a3f09b"><con:description>getBonPreparationParent</con:description><con:settings/><con:parameters/><con:method name="getBonPreparationParent" id="2564fc5c-f9cc-41e4-b8a4-b59af13df06a" method="GET"><con:description>getBonPreparationParent</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceEL</con:name><con:style>TEMPLATE</con:style><con:description>referenceEL</con:description></con:parameter><con:parameter required="true"><con:name>referenceProduit</con:name><con:style>TEMPLATE</con:style><con:description>referenceProduit</con:description></con:parameter><con:parameter required="true"><con:name>isRetour</con:name><con:style>TEMPLATE</con:style><con:description>isRetour</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="225b96e7-c4d2-4dd0-a188-d3b7f20674e0" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/livraison/servicesEnCoursActivation" path="/livraison/servicesEnCoursActivation" id="b378e62d-5d4c-4777-9c65-262637be3cf3"><con:description>getServicesEnCoursActivation</con:description><con:settings/><con:parameters/><con:method name="getServicesEnCoursActivation" id="230ebe87-6905-4654-848b-847af937a2cd" method="GET"><con:description>getServicesEnCoursActivation</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="3883e2b3-da62-47b9-8965-56c3a6e4466c" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/livraison/{idEL}/{referenceElementLivraision}/marquerELGracie" path="/livraison/{idEL}/{referenceElementLivraision}/marquerELGracie" id="a1a92002-5ec6-4e88-9167-c5cbbcb7de69"><con:description>marquerELGracie</con:description><con:settings/><con:parameters/><con:method name="marquerELGracie" id="d1839565-c2f6-4081-9f6f-14eacefa8099" method="GET"><con:description>marquerELGracie</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>idEL</con:name><con:style>TEMPLATE</con:style><con:description>idEL</con:description></con:parameter><con:parameter required="true"><con:name>referenceElementLivraision</con:name><con:style>TEMPLATE</con:style><con:description>referenceElementLivraision</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="a40be4da-9eb3-466e-b87e-4e008c0e1970" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/livraison/{refBonLivraison}/reinitialiserCauseNonLivraison" path="/livraison/{refBonLivraison}/reinitialiserCauseNonLivraison" id="e9a4dcb2-98dc-4f00-b1be-0824e56c039f"><con:description>initCauseNonLicraison</con:description><con:settings/><con:parameters/><con:method name="initCauseNonLicraison" id="67b12dfa-61fa-41b9-ac4f-5d13016bda95" method="POST"><con:description>initCauseNonLicraison</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>refBonLivraison</con:name><con:style>TEMPLATE</con:style><con:description>refBonLivraison</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="556ca9fd-2deb-44ed-9c25-4b4ae5febfae" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/livraison/{referenceBPGlobal}/annuler" path="/livraison/{referenceBPGlobal}/annuler" id="c751b37a-4de4-42c4-9a1b-3565f8f56b44"><con:description>annulerBonPreparation</con:description><con:settings/><con:parameters/><con:method name="annulerBonPreparation" id="e42c125f-ea1c-4557-aec1-26b4e0b77de1" method="POST"><con:description>annulerBonPreparation</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceBPGlobal</con:name><con:style>TEMPLATE</con:style><con:description>referenceBPGlobal</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="4fb9517b-c749-404c-a130-def3b8ede6a9" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/livraison/{referenceBPGlobal}/marquerLivre" path="/livraison/{referenceBPGlobal}/marquerLivre" id="573f39fc-e489-46bb-8ccd-f7825b899259"><con:description>marquerLivre</con:description><con:settings/><con:parameters/><con:method name="marquerLivre" id="8f3fc2a6-e61e-4c83-b7d3-2e3ae22f4d61" method="POST"><con:description>marquerLivre</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceBPGlobal</con:name><con:style>TEMPLATE</con:style><con:description>referenceBPGlobal</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>200</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="8b36ed31-096d-4cf1-9332-879f6a3a4956" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/livraison/{referenceBPGlobal}/marquerPrepare" path="/livraison/{referenceBPGlobal}/marquerPrepare" id="c6a80738-e4df-4698-a5a5-2104a551190b"><con:description>marquerBPGlobalPrepare</con:description><con:settings/><con:parameters/><con:method name="marquerBPGlobalPrepare" id="6f4d4114-30d9-4c48-a776-834f5f6f4cc1" method="POST"><con:description>marquerBPGlobalPrepare</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceBPGlobal</con:name><con:style>TEMPLATE</con:style><con:description>referenceBPGlobal</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="41d36b8c-4d93-426e-a165-694d656dbf86" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/livraison/{referenceBPGlobal}/preparer" path="/livraison/{referenceBPGlobal}/preparer" id="0aa9d100-6b92-4368-8f92-8c0858f6b104"><con:description>preparerBP</con:description><con:settings/><con:parameters/><con:method name="preparerBP" id="0c232744-cdf9-4439-88a0-4569aac9dfdb" method="POST"><con:description>preparerBP</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceBPGlobal</con:name><con:style>TEMPLATE</con:style><con:description>referenceBPGlobal</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="c8f6cf7c-7681-4fbe-8a22-ce80b244e6eb" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/livraison/{referenceSousBP}/marquerNonLivre" path="/livraison/{referenceSousBP}/marquerNonLivre" id="20777aa8-a8c0-47a2-aad6-d1820ebbc92a"><con:description>marquerNonLivre</con:description><con:settings/><con:parameters/><con:method name="marquerNonLivre" id="9efdcadd-04a1-4a64-b9f6-c1054657c2a6" method="POST"><con:description>marquerNonLivre</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceSousBP</con:name><con:style>TEMPLATE</con:style><con:description>referenceSousBP</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="d7175e18-7a0c-483c-9eec-5e8c2c4c167a" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/livraison/{referenceSousBP}/marquerNonLivre/{causeNonLivraison}" path="/livraison/{referenceSousBP}/marquerNonLivre/{causeNonLivraison}" id="4b6c3cf6-e707-4454-9f90-53903942fcfd"><con:description>marquerNonLivre</con:description><con:settings/><con:parameters/><con:method name="marquerNonLivre" id="ee917c84-6a73-4a41-a1fb-46555ac2d02f" method="POST"><con:description>marquerNonLivre</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceSousBP</con:name><con:style>TEMPLATE</con:style><con:description>referenceSousBP</con:description></con:parameter><con:parameter required="true"><con:name>causeNonLivraison</con:name><con:style>TEMPLATE</con:style><con:description>causeNonLivraison</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="face1bcb-924c-49d2-a52c-0480889a6ddc" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="b548f29a-db5a-43ac-9d98-902144b1a5c8" wadlVersion="http://wadl.dev.java.net/2009/02" name="/default/migration" type="rest" basePath="/livraison-core-1.1.x" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://10.100.109.6:8080</con:endpoint></con:endpoints><con:resource name="/migration/application.wadl" path="/migration/application.wadl" id="e4474d55-bb9d-4cd6-9f94-39e47772897a"><con:description>generateWadl</con:description><con:settings/><con:parameters/><con:method name="generateWadl" id="0c07a1a7-964e-41d4-899b-72907097e88c" method="GET"><con:description>generateWadl</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="071c57f5-ef1a-4aea-9ee9-e318f0f4d94b" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/migration/biensEnCoursMigration" path="/migration/biensEnCoursMigration" id="6306dd0d-9e4e-4224-aa7f-6871c4468bdd"><con:description>getBiensEnCoursMigration</con:description><con:settings/><con:parameters/><con:method name="getBiensEnCoursMigration" id="c8ef3ddb-0767-4c62-8ec0-a7cc49ddf9e3" method="GET"><con:description>getBiensEnCoursMigration</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="b9fd6174-3182-4379-afb3-2735eb838e5c" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/migration/biensEnCoursRetour" path="/migration/biensEnCoursRetour" id="be3488b2-32f7-41c8-ab42-65da27eff4f1"><con:description>getBiensEnCoursRetour</con:description><con:settings/><con:parameters/><con:method name="getBiensEnCoursRetour" id="c78442ad-8057-4aa4-a959-a037916046bb" method="GET"><con:description>getBiensEnCoursRetour</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="fcf3a114-67ed-4df8-a362-ebd6c5b01005" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/migration/getElementsCodeColis" path="/migration/getElementsCodeColis" id="60a36ea4-50a0-49e0-ac7f-7a47521d56cb"><con:description>getElementsCodeColis</con:description><con:settings/><con:parameters/><con:method name="getElementsCodeColis" id="62506e53-b1f9-4bf4-95ab-c40b5679b1c1" method="POST"><con:description>getElementsCodeColis</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="32cb67e0-65d1-48fb-bb8f-0c26cc81d141" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/migration/getElementsCodeProduit" path="/migration/getElementsCodeProduit" id="e642550b-7612-46ec-9a26-a9feb7abfe4a"><con:description>getElementsCodeProduit</con:description><con:settings/><con:parameters/><con:method name="getElementsCodeProduit" id="b20ee335-0306-4128-82aa-78131d29a892" method="POST"><con:description>getElementsCodeProduit</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="67ea0d10-43e9-4ec6-8944-341df18f97f8" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/migration/initier" path="/migration/initier" id="79b1e671-dde3-492b-8179-fe3ca3c07efe"><con:description>initierBM</con:description><con:settings/><con:parameters/><con:method name="initierBM" id="630e5213-3aaf-45e4-bfa3-3a361427d371" method="POST"><con:description>initierBM</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="e77578b3-5ed8-413c-ba09-9910729b15da" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/migration/initierBC" path="/migration/initierBC" id="5d459cf9-e8b0-4213-8a97-d419f7eec05d"><con:description>initierBC</con:description><con:settings/><con:parameters/><con:method name="initierBC" id="4c0498e7-712d-4be0-972c-cf7b7e55d21c" method="POST"><con:description>initierBC</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="643028cd-2109-4c48-8e86-7d172a7acd6d" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/migration/initierBRE" path="/migration/initierBRE" id="48339116-a52a-450b-8739-806f2d5f0a60"><con:description>initierBRE</con:description><con:settings/><con:parameters/><con:method name="initierBRE" id="63d7085d-7296-4cb8-a45e-be241f9e87a4" method="POST"><con:description>initierBRE</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>*/*</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="71132d38-ac59-44bf-96f2-4a1872b39fde" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/migration/marquerBienMigrationPreparer" path="/migration/marquerBienMigrationPreparer" id="2941a5e5-58be-4514-a0f0-662352dc17a7"><con:description>marquerBienMigrationPreparer</con:description><con:settings/><con:parameters/><con:method name="marquerBienMigrationPreparer" id="25e5738e-5674-4e0b-8579-2dc7bd13c044" method="POST"><con:description>marquerBienMigrationPreparer</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="0b5b2e3c-d771-467b-a7b3-759995e69dce" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/migration/marquerEMLivre" path="/migration/marquerEMLivre" id="d648216e-1722-48cc-aa0e-84daa8d0d1ad"><con:description>marquerEMLivre</con:description><con:settings/><con:parameters/><con:method name="marquerEMLivre" id="b64ea654-483a-488d-9e5a-fb752a6e5b39" method="POST"><con:description>marquerEMLivre</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="2c1c51b5-a1f4-4b07-8f6a-d331e533ac2f" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/migration/marquerEMRetourne" path="/migration/marquerEMRetourne" id="f0a40549-dc8a-4380-a91a-75fd68dfa75c"><con:description>marquerEMRetourne</con:description><con:settings/><con:parameters/><con:method name="marquerEMRetourne" id="26ae4461-6848-4f97-9a55-7e6d47e38771" method="POST"><con:description>marquerEMRetourne</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="faeb695d-3a3a-4d75-b3b1-a578d7bf123f" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/migration/search/{referenceBC}/cession" path="/migration/search/{referenceBC}/cession" id="7433dc0a-e76f-4c52-b998-60c5efe55602"><con:description>getBonCession</con:description><con:settings/><con:parameters/><con:method name="getBonCession" id="f79dbaaf-d93f-4564-b411-12b1e9ab3476" method="GET"><con:description>getBonCession</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceBC</con:name><con:style>TEMPLATE</con:style><con:description>referenceBC</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="b0a11468-9734-4808-885e-5728d6ab5e9d" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/migration/search/{referenceBC}/renouvellement" path="/migration/search/{referenceBC}/renouvellement" id="44971b81-fb75-493d-979b-30a72498168c"><con:description>getBonRenouvellement</con:description><con:settings/><con:parameters/><con:method name="getBonRenouvellement" id="974f61b5-56fa-4437-880c-476b922d85ed" method="GET"><con:description>getBonRenouvellement</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceBC</con:name><con:style>TEMPLATE</con:style><con:description>referenceBC</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="33f501e4-4249-40f1-a440-fb23e598465a" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/migration/search/{referenceBM}" path="/migration/search/{referenceBM}" id="0786abd2-9209-4fba-8432-59c1869a4886"><con:description>getBonMigration</con:description><con:settings/><con:parameters/><con:method name="getBonMigration" id="0d6cab91-1022-42cd-8daa-a19915783e68" method="GET"><con:description>getBonMigration</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceBM</con:name><con:style>TEMPLATE</con:style><con:description>referenceBM</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="c2e97023-26f0-4b6a-88c2-2578120f830b" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/migration/{referenceBMGlobal}/marquerPrepare" path="/migration/{referenceBMGlobal}/marquerPrepare" id="578c129c-b9ee-4fdd-ab7f-17d8f15117f0"><con:description>marquerBMGlobalPrepare</con:description><con:settings/><con:parameters/><con:method name="marquerBMGlobalPrepare" id="437d2472-83f6-4bc9-91cb-460c03bbe149" method="POST"><con:description>marquerBMGlobalPrepare</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceBMGlobal</con:name><con:style>TEMPLATE</con:style><con:description>referenceBMGlobal</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="fa4b22a7-d708-4e0d-988f-e56c41393650" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/migration/{referenceBM}/marquerBMLivre" path="/migration/{referenceBM}/marquerBMLivre" id="109436a5-6895-4088-8790-9b2f3543f3d1"><con:description>marquerBMLivre</con:description><con:settings/><con:parameters/><con:method name="marquerBMLivre" id="32580273-dbc2-44df-b12f-d869ffd1545f" method="POST"><con:description>marquerBMLivre</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceBM</con:name><con:style>TEMPLATE</con:style><con:description>referenceBM</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="ff00e811-d53c-4b37-a2fa-6c4849ad6b7a" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/migration/{referenceBM}/marquerBMRetourne" path="/migration/{referenceBM}/marquerBMRetourne" id="e970c2b6-1449-42f0-8fc7-1c4f29f4fdb6"><con:description>marquerBMRetourne</con:description><con:settings/><con:parameters/><con:method name="marquerBMRetourne" id="c1c0b0c8-ae60-4647-a056-cbd2e8d496bf" method="POST"><con:description>marquerBMRetourne</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceBM</con:name><con:style>TEMPLATE</con:style><con:description>referenceBM</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="8a7cc0c7-9b50-479b-ac3f-5ac0d955b5ec" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/migration/{referenceBM}/preparer" path="/migration/{referenceBM}/preparer" id="f9c3dd66-bfc3-4e50-8146-cba47fb93766"><con:description>preparerBM</con:description><con:settings/><con:parameters/><con:method name="preparerBM" id="0eed34c6-0094-4ca5-a25d-1b29efb1eaf7" method="POST"><con:description>preparerBM</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceBM</con:name><con:style>TEMPLATE</con:style><con:description>referenceBM</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="f1b4d90e-4523-4429-b932-c08641887e9a" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/migration/{referenceBonCession}/marquerBCCede" path="/migration/{referenceBonCession}/marquerBCCede" id="264996e1-e568-4fe1-8b10-0248594afea0"><con:description>marquerBCCede</con:description><con:settings/><con:parameters/><con:method name="marquerBCCede" id="1e0f0ee0-4263-4767-a20b-cb1fbec98655" method="GET"><con:description>marquerBCCede</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceBonCession</con:name><con:style>TEMPLATE</con:style><con:description>referenceBonCession</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="5ab87203-a165-4a27-adf7-a3af0771f22f" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/migration/{referenceBonRenouvellement}/marquerBRERenouvele" path="/migration/{referenceBonRenouvellement}/marquerBRERenouvele" id="5612e0bd-4d28-435a-8522-c49deda6d9b3"><con:description>marquerBPGlobalRenouvele</con:description><con:settings/><con:parameters/><con:method name="marquerBPGlobalRenouvele" id="9d6736af-986c-47db-8eef-dd7df656740b" method="GET"><con:description>marquerBPGlobalRenouvele</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceBonRenouvellement</con:name><con:style>TEMPLATE</con:style><con:description>referenceBonRenouvellement</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="3b19b66f-c2e4-415a-8561-13b5a3fc5552" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/migration/{referenceElementCession}/marquerECCede" path="/migration/{referenceElementCession}/marquerECCede" id="fd246209-1e34-4764-a95b-5502f8eef3a1"><con:description>marquerECCede</con:description><con:settings/><con:parameters/><con:method name="marquerECCede" id="4a26bc6d-31a0-414b-a462-b6a31b506828" method="GET"><con:description>marquerECCede</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceElementCession</con:name><con:style>TEMPLATE</con:style><con:description>referenceElementCession</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="456daa77-5696-40ea-8d43-cc8b2ce73f75" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/migration/{referenceElementRenouvellement}/marquerERRenouvele" path="/migration/{referenceElementRenouvellement}/marquerERRenouvele" id="4fb92356-e6ab-4195-8107-59ede3fca28a"><con:description>marquerERRenouvele</con:description><con:settings/><con:parameters/><con:method name="marquerERRenouvele" id="1ee4315e-d357-48ad-b1af-8f2fd3a0a65d" method="GET"><con:description>marquerERRenouvele</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceElementRenouvellement</con:name><con:style>TEMPLATE</con:style><con:description>referenceElementRenouvellement</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="f045038f-82a5-4510-a264-4a909acd7c5a" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/migration/{reference}/marquerNonMigre/{causeNonLivraison}" path="/migration/{reference}/marquerNonMigre/{causeNonLivraison}" id="298e7ecc-43f2-4f39-8184-9aacfa776426"><con:description>marquerNonLivre</con:description><con:settings/><con:parameters/><con:method name="marquerNonLivre" id="9dab1cd4-4dbf-416a-b12c-23621d804df3" method="POST"><con:description>marquerNonLivre</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>reference</con:name><con:style>TEMPLATE</con:style><con:description>reference</con:description></con:parameter><con:parameter required="true"><con:name>causeNonLivraison</con:name><con:style>TEMPLATE</con:style><con:description>causeNonLivraison</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="8a2217d8-240d-48c8-894d-97a8199eea6e" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="b19362be-56fb-41d8-af9c-67fa26897dbc" wadlVersion="http://wadl.dev.java.net/2009/02" name="/default/recuperation" type="rest" basePath="/livraison-core-1.1.x" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>http://10.100.109.6:8080</con:endpoint></con:endpoints><con:resource name="/recuperation/application.wadl" path="/recuperation/application.wadl" id="be28d618-cfd9-4c9a-884e-942579e9c78e"><con:description>generateWadl</con:description><con:settings/><con:parameters/><con:method name="generateWadl" id="5d31f25b-bfa4-43c2-8050-9290475e05ad" method="GET"><con:description>generateWadl</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/xml</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="ef4b3ba8-c2ae-4cb3-8b8a-7e11ce7c9620" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/recuperation/biensEnCoursRecuperation" path="/recuperation/biensEnCoursRecuperation" id="097a6664-527c-4736-be4d-bb2e78d7fd02"><con:description>getBiensEnCoursRecuperation</con:description><con:settings/><con:parameters/><con:method name="getBiensEnCoursRecuperation" id="801b6119-3d03-4dac-930a-3641a60a025a" method="GET"><con:description>getBiensEnCoursRecuperation</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="7b86741c-49ef-49f9-a855-c990efff5e9b" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/recuperation/contrat/{referenceContrat}/initierBR" path="/recuperation/contrat/{referenceContrat}/initierBR" id="ec29a10e-d0c2-461f-a9ea-ac10eaf20c8a"><con:description>initierBR</con:description><con:settings/><con:parameters/><con:method name="initierBR" id="8941211c-3093-43c1-96d8-c4d1b488afe5" method="GET"><con:description>initierBR</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceContrat</con:name><con:style>TEMPLATE</con:style><con:description>referenceContrat</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="6a1e3c66-419f-483e-88ce-c2283cc5af1c" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/recuperation/contrat/{referenceElementContractuel}/initierER" path="/recuperation/contrat/{referenceElementContractuel}/initierER" id="36be74d4-c43c-4f9a-be67-d8c99ffed53e"><con:description>initierER</con:description><con:settings/><con:parameters/><con:method name="initierER" id="1c69bbcd-ba6a-4152-808f-8c73d43faa34" method="GET"><con:description>initierER</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceElementContractuel</con:name><con:style>TEMPLATE</con:style><con:description>referenceElementContractuel</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="798b0703-c818-4276-bd52-52b7806871e7" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/recuperation/encoursRecuperation" path="/recuperation/encoursRecuperation" id="5450c01b-becd-476c-aa8c-9e8b8ecf51b6"><con:description>getBRGlobalEncoursRecuperation</con:description><con:settings/><con:parameters/><con:method name="getBRGlobalEncoursRecuperation" id="11b4ade2-46c6-4930-ac18-a149458f8c07" method="GET"><con:description>getBRGlobalEncoursRecuperation</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="35e0c745-5859-4514-800c-5462ad4f05e6" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/recuperation/preparer" path="/recuperation/preparer" id="8a3e7180-96e1-413d-809a-06f068de5ee7"><con:description>preparerBR</con:description><con:settings/><con:parameters/><con:method name="preparerBR" id="c310851c-d4b4-4a7b-b038-c4873093158f" method="POST"><con:description>preparerBR</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="ae986aac-7d9e-4481-accb-22c20b4a6924" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/recuperation/preparerER" path="/recuperation/preparerER" id="5a1a6d83-468a-4102-b480-eca97a1cbbc0"><con:description>preparerER</con:description><con:settings/><con:parameters/><con:method name="preparerER" id="53683c42-347c-4ad7-90b5-8bf32a16f18d" method="POST"><con:description>preparerER</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="09f81bf8-d801-42a9-b442-cb4336751707" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/recuperation/search/element/{referenceER}" path="/recuperation/search/element/{referenceER}" id="23a01e38-22b5-4484-bdf9-c1402b3b6d06"><con:description>getElementRecuperation</con:description><con:settings/><con:parameters/><con:method name="getElementRecuperation" id="e24619c0-1e34-4f18-903d-58fc4486930e" method="GET"><con:description>getElementRecuperation</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceER</con:name><con:style>TEMPLATE</con:style><con:description>referenceER</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="f63babb6-4057-4ad7-8851-83ff75fc2764" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/recuperation/search/{referenceBP}" path="/recuperation/search/{referenceBP}" id="1342e768-088f-44c1-824d-3e59ab095858"><con:description>getBonRecuperation</con:description><con:settings/><con:parameters/><con:method name="getBonRecuperation" id="e3a234c8-80f6-43cc-a76f-d3d72a4edfe6" method="GET"><con:description>getBonRecuperation</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceBP</con:name><con:style>TEMPLATE</con:style><con:description>referenceBP</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="3bef3f43-7e63-4fa7-9985-49a7f75f7f40" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/recuperation/servicesEnCoursSuspension" path="/recuperation/servicesEnCoursSuspension" id="2d26fed8-b0d8-42d4-963d-570d5edc9d58"><con:description>getServicesEnCoursSuspension</con:description><con:settings/><con:parameters/><con:method name="getServicesEnCoursSuspension" id="a3ce769c-2e7c-4b65-912b-5e43be63bd11" method="GET"><con:description>getServicesEnCoursSuspension</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="10aa64a3-e0ac-4ab1-ba25-dd1b2bd4daa7" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/recuperation/servicesSuspendu" path="/recuperation/servicesSuspendu" id="a1cae878-9bd0-48b6-b9e3-42d8976dc5e2"><con:description>getServicesSuspendu</con:description><con:settings/><con:parameters/><con:method name="getServicesSuspendu" id="99843cd6-4df2-412c-a214-34c6ee75ad79" method="GET"><con:description>getServicesSuspendu</con:description><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent>OK</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="b9f3a040-dc3d-477a-bcf6-3ca2025a0640" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/recuperation/{referenceBR}/marquerRecupere" path="/recuperation/{referenceBR}/marquerRecupere" id="8fd5f813-101d-41d2-a0c3-0815c2ea7cb2"><con:description>marquerRecupere</con:description><con:settings/><con:parameters/><con:method name="marquerRecupere" id="0693b477-051f-4476-9317-c3a038b0dc12" method="POST"><con:description>marquerRecupere</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceBR</con:name><con:style>TEMPLATE</con:style><con:description>referenceBR</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="296b2403-d39e-42e0-82ed-c9714c6033b5" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/recuperation/{referenceEL}/marquerRetourner" path="/recuperation/{referenceEL}/marquerRetourner" id="cecb68c1-3843-42a8-8220-611ce973d4a4"><con:description>marquerRetourner</con:description><con:settings/><con:parameters/><con:method name="marquerRetourner" id="a98e6f94-308b-41bf-ba87-4fc725c858d9" method="POST"><con:description>marquerRetourner</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceEL</con:name><con:style>TEMPLATE</con:style><con:description>referenceEL</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="58b2b4f9-ff51-492d-bb1b-624ecf3ee460" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource><con:resource name="/recuperation/{referenceEL}/marquerSuspendu" path="/recuperation/{referenceEL}/marquerSuspendu" id="bac39a9d-150f-412e-97ed-42d5addaa89d"><con:description>marquerSuspendu</con:description><con:settings/><con:parameters/><con:method name="marquerSuspendu" id="a56c40b5-5a89-4f1a-b223-37cef41a16a0" method="POST"><con:description>marquerSuspendu</con:description><con:settings/><con:parameters><con:parameter required="true"><con:name>referenceEL</con:name><con:style>TEMPLATE</con:style><con:description>referenceEL</con:description></con:parameter></con:parameters><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:sampleContent xsi:nil="true"/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>201</con:status><con:params/><con:sampleContent>Created</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>401</con:status><con:params/><con:sampleContent>Unauthorized</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:sampleContent>Forbidden</con:sampleContent></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json</con:mediaType><con:status>404</con:status><con:params/><con:sampleContent>Not Found</con:sampleContent></con:representation><con:request name="Request 1" id="1c78aa9e-92ec-4ea4-81c9-f230654d398a" mediaType="application/json"><con:settings/><con:parameters/></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="aebff7f5-7fe1-438c-9038-f50a4621eb02" wadlVersion="http://wadl.dev.java.net/2009/02" name="Application watcher" type="rest" basePath="/appwatch-ws-1.0.x" definitionUrl="http://10.100.105.41:8080/appwatch-ws-1.0.x/process/application.wadl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="http://10.100.105.41:8080/appwatch-ws-1.0.x/process/application.wadl"><con:part><con:url>http://10.100.105.41:8080/appwatch-ws-1.0.x/process/application.wadl</con:url><con:content><![CDATA[<application xmlns="http://wadl.dev.java.net/2009/02">
  <doc title="REST Service WADL"/>
  <resources base="http://10.100.105.41:8080/appwatch-ws-1.0.x/process/application.wadl">
    <resource type="" queryType="application/x-www-form-urlencoded" path="/api-docs/{swaggerGroup}/{apiDeclaration}">
      <method id="getApiListing" name="GET">
        <doc title="com.mangofactory.swagger.controllers.DefaultSwaggerController.getApiListing"/>
        <request>
          <param name="" style="template" type="xs:string" required="true" repeating="false" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
          <param name="" style="template" type="xs:string" required="true" repeating="false" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
        </request>
        <response status="204"/>
      </method>
    </resource>
    <resource type="" queryType="application/x-www-form-urlencoded" path="/api-docs">
      <method id="getResourceListing" name="GET">
        <doc title="com.mangofactory.swagger.controllers.DefaultSwaggerController.getResourceListing"/>
        <request>
          <param name="group" style="query" type="xs:string" required="false" repeating="false" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
        </request>
        <response status="204"/>
      </method>
    </resource>
    <resource type="" queryType="application/x-www-form-urlencoded" path="/process/application.wadl">
      <method id="generateWadl" name="GET">
        <doc title="com.nordnet.common.wadl.WadlController.generateWadl"/>
        <response status="200">
          <representation mediaType="application/xml" profile=""/>
        </response>
      </method>
    </resource>
    <resource type="" queryType="application/x-www-form-urlencoded" path="/process/watchRule/{ruleCode}">
      <method id="executeRuleByCode" name="POST">
        <doc title="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode"/>
        <request>
          <param name="" style="template" type="xs:string" required="true" repeating="false" xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
        </request>
        <response status="200">
          <representation mediaType="application/json" profile=""/>
        </response>
      </method>
    </resource>
  </resources>
</application>]]></con:content><con:type>http://wadl.dev.java.net/2009/02</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>http://10.100.105.41:8080</con:endpoint></con:endpoints><con:resource name="/api-docs/{swaggerGroup}/{apiDeclaration}" path="/api-docs/{swaggerGroup}/{apiDeclaration}" id="ac2cd3d7-ceaf-475f-a263-02d267efc8b2"><con:settings/><con:parameters/><con:method name="com.mangofactory.swagger.controllers.DefaultSwaggerController.getApiListing - getApiListing" id="4db1f58c-f0ff-41c8-9a2d-257ce29f6e9a" method="GET"><con:settings/><con:parameters/><con:request name="Request 1" id="e871fd9b-db85-4443-a7a6-bd85d93a5b22" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="/api-docs" path="/api-docs" id="a50fd6e9-a365-408a-9083-5728d3c0e26c"><con:settings/><con:parameters/><con:method name="com.mangofactory.swagger.controllers.DefaultSwaggerController.getResourceListing - getResourceListing" id="3006c0fc-278b-4918-ad14-04de2239d3c3" method="GET"><con:settings/><con:parameters><con:parameter><con:name>group</con:name><con:value xsi:nil="true"/><con:style>QUERY</con:style><con:default xsi:nil="true"/></con:parameter></con:parameters><con:request name="Request 1" id="7487070e-d8df-401b-80fc-38d594ff76ef" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="/process/application.wadl" path="/process/application.wadl" id="4b216d9f-d4f0-4c49-a338-ff39efe07f91"><con:settings/><con:parameters/><con:method name="com.nordnet.common.wadl.WadlController.generateWadl - generateWadl" id="4e93c578-0731-45f5-b19e-b248955b616a" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/xml</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="a1bf50d2-8c95-415f-889f-bdd16773aaa3" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="/process/watchRule/{ruleCode}" path="/process/watchRule/{ruleCode}" id="27e67425-0f54-4b5b-8391-f5848ea00137"><con:settings/><con:parameters><con:parameter><con:name>ruleCode</con:name><con:value>test</con:value><con:style>TEMPLATE</con:style><con:default>test</con:default></con:parameter></con:parameters><con:method name="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" id="791c7905-20e0-4432-af59-c689d2db5b94" method="POST"><con:settings/><con:parameters/><con:representation type="RESPONSE" id=""><con:mediaType>application/json</con:mediaType><con:status>200</con:status><con:params/><con:element xsi:nil="true"/><con:description xsi:nil="true"/></con:representation><con:request name="Request 1" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_commande_paye" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:testSuite id="b07dad63-92bc-40ec-a339-53d6d7c237b8" name="Run this testsuite firstly" disabled="true"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="57cf1b78-34db-4507-a62c-026e4df0d916" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="Setting environment" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Setting endpoint and sql connection" id="0644227c-395d-457d-9f32-91e4a8e80e1d"><con:settings/><con:config><script>	com.eviware.soapui.SoapUI.globalProperties.setPropertyValue( "jbossServiceOpale", 'http://10.100.109.4:8080')
	com.eviware.soapui.SoapUI.globalProperties.setPropertyValue( "jbossServiceTopaze", 'http://10.100.109.4:8080')
	com.eviware.soapui.SoapUI.globalProperties.setPropertyValue( "sqlOpal", 'jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test')
	com.eviware.soapui.SoapUI.globalProperties.setPropertyValue( "sqlTopaze",'jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test')</script></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="e20f327d-10fd-4877-9605-e86ae66c3711" name="associerReduction"><con:settings><con:setting id="IncludeOverview">true</con:setting><con:setting id="IncludeResults">true</con:setting><con:setting id="FlowLayout">false</con:setting><con:setting id="ErrorDetails">true</con:setting><con:setting id="IncludeCoverage">true</con:setting></con:settings><con:runType>SEQUENTIAL</con:runType><con:testCase id="98ed5239-fb07-4f44-9498-d6707da2cd13" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="00. Associer successfully_Reduction for draft_Antivirus" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="draftInfo" id="f269f174-b14b-4108-a4a3-e9e794b940d2"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003177</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00003197</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="96795341-ed3b-49ae-9b9b-a84ab01eccaf"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey1",'6002367491')
testRunner.testCase.setPropertyValue( "handleKey1",'00001006956')
testRunner.testCase.setPropertyValue( "refDraftGlobal",null)
testRunner.testCase.setPropertyValue( "refDraftLigneGlobal",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("1. Create a draft with antivirus").setPropertyValue("refDraftGlobal",null)
testRunner.testCase.getTestStepByName("1. Create a draft with antivirus").setPropertyValue("refDraftLigneGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with antivirus" id="daed8b14-c8cb-49e6-a520-8dc7303fcccf"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>c5c7140a-49c8-4c3e-8b68-8cfdd2c3eda3</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003177</con:value></con:property><con:property><con:name>customerKey1</con:name><con:value>6002367491</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>00001006956</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003197</con:value></con:property><con:property><con:name>refLigneGlobal</con:name></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry><con:entry>customerKey1</con:entry><con:entry>handleKey1</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to draftInfo" id="e8d3db9c-76ed-46d4-884f-21d51b3a6fa3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with antivirus</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>refDraft</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>refDraftLigneGlobal</con:sourceType><con:sourceStep>1. Create a draft with antivirus</con:sourceStep><con:sourcePath/><con:targetType>refDraftLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>refDraftLigne</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Associate a reduction for draft" id="557eb8fe-1d38-4106-b3bc-bcdd6a3a99ec"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/associerReduction" methodName="associerReduction" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Associate a reduction for draft" id="a15d43e2-92b7-48c6-9b9e-e68e0083c64c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0012345",
"nbUtilisationMax": "1",
"label": "reduction draft",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/6e17cc68-7a21-475c-b59e-568b7bb37e61/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e7290574-2afb-4971-9c5f-02e44a8b01d4" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Select reduction to check_Eligible must be TRUE" id="56350c45-41dd-41a3-9271-68ba3a57d573"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${draftInfo#refDraft}";</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - One reduction is found"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="feabb239-c7a6-4bed-ad42-4271dcddb6a0" name="code catalog reduction must be"><con:configuration><token>&lt;REDUCTION.CODECATALOGUEREDUCTION>0012345&lt;/REDUCTION.CODECATALOGUEREDUCTION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="06f9cc6d-932f-4808-8bed-4622c904693c" name="Reference Draft must be"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${draftInfo#refDraft}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b3ed1327-e3a6-40e7-bd94-1c6623249b0d" name="Reference Ligne must be null"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNE/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="67fe79cd-bde6-4f8c-a524-1483035db714" name="Reference ligne detail must be null"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNEDETAIL/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8f1d6bf-424a-4bd1-a81e-bfe084780bbb" name="Reduction fraise must be null"><con:configuration><token>&lt;REDUCTION.REFERENCEFRAIS/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="676fb18e-e3eb-4d7f-bec4-4e05c06f153a" name="Reference tarif must be null"><con:configuration><token>&lt;REDUCTION.REFERENCETARIF/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Eligible must be TRUE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a29512eb-62f4-43dc-9301-850cfe237be6" name="voucher must be FALSe"><con:configuration><token>&lt;REDUCTION.VOUCHER>0&lt;/REDUCTION.VOUCHER>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>customerKey1</con:name><con:value>6002367491</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>00001006956</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">DRA-00003177</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LID-00003197</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>584ef314-c9aa-4407-b133-a9544f8de2c9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>19f91eaf-f65f-4a78-be0d-dc6ef8b092fe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e95fd708-e93f-4fa6-908c-4796abc88c72</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="eeac9de4-e3ba-43ca-b26d-64d5977bd5f5" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01. Associer successfully_Reduction for draft_mvnoConso" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="draftInfo" id="19f91eaf-f65f-4a78-be0d-dc6ef8b092fe"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003311</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00003332</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="584ef314-c9aa-4407-b133-a9544f8de2c9"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue( "refDraftGlobal",null)
testRunner.testCase.setPropertyValue( "refDraftLigneGlobal",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftGlobal",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftLigneGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with mvno_conso" id="c11181a4-22b3-492d-8480-8ea3510a20a8"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>de4f846c-30c6-4009-99fa-1d548af5c9a0</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003311</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003332</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to draftInfo" id="e95fd708-e93f-4fa6-908c-4796abc88c72"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>refDraft</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>refDraftLigneGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refDraftLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>refDraftLigne</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Associate a reduction for draft" id="c00eef19-7a02-4065-b25b-bfbc2de730bc"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/associerReduction" methodName="associerReduction" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Associate a reduction for draft" id="a15d43e2-92b7-48c6-9b9e-e68e0083c64c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0112345",
"nbUtilisationMax": "1",
"label": "reduction draft",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/6e17cc68-7a21-475c-b59e-568b7bb37e61/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e7290574-2afb-4971-9c5f-02e44a8b01d4" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Select reduction to check_Eligible must be TRUE" id="43b2a41c-f115-4f15-bd36-cf06c0d661c7"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${draftInfo#refDraft}";</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - One reduction is found"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="feabb239-c7a6-4bed-ad42-4271dcddb6a0" name="Code catalog reduction must be"><con:configuration><token>&lt;REDUCTION.CODECATALOGUEREDUCTION>0112345&lt;/REDUCTION.CODECATALOGUEREDUCTION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="06f9cc6d-932f-4808-8bed-4622c904693c" name="Reference draft must be"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${draftInfo#refDraft}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b3ed1327-e3a6-40e7-bd94-1c6623249b0d" name="Reference Ligne must be null"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNE/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="67fe79cd-bde6-4f8c-a524-1483035db714" name="Reference ligne detail must be null"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNEDETAIL/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8f1d6bf-424a-4bd1-a81e-bfe084780bbb" name="Reduction fraise must be null"><con:configuration><token>&lt;REDUCTION.REFERENCEFRAIS/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="676fb18e-e3eb-4d7f-bec4-4e05c06f153a" name="Reference tarif must be null"><con:configuration><token>&lt;REDUCTION.REFERENCETARIF/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Eligible must be TRUE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="90edba4b-baf0-4473-b6c6-18a1218fd0df" name="Contains"><con:configuration><token>&lt;REDUCTION.VOUCHER>0&lt;/REDUCTION.VOUCHER></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">DRA-00003311</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LID-00003332</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>584ef314-c9aa-4407-b133-a9544f8de2c9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>19f91eaf-f65f-4a78-be0d-dc6ef8b092fe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e95fd708-e93f-4fa6-908c-4796abc88c72</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c00eef19-7a02-4065-b25b-bfbc2de730bc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="700fe54f-d074-4c7c-92eb-1b93203065b3" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02. Associer successfully_Reduction for draftLigne" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="draftInfo" id="c8bbee83-9dd5-422f-b404-e0df44ecaa26"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003308</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00003329</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="6ad92d2c-53b7-46ff-9823-be1bb143b4c7"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue( "refDraftGlobal",null)
testRunner.testCase.setPropertyValue( "refDraftLigneGlobal",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftGlobal",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftLigneGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with mvno_conso" id="651664bc-08ad-47cf-a2d2-cda2ce5cfdcf"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>de4f846c-30c6-4009-99fa-1d548af5c9a0</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003308</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003329</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to draftInfo" id="25febf77-b013-4916-832e-b82bcc49eba3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>refDraftLigneGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refDraftLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>refDraft</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>refDraftLigne</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Associate a reduction for draftLigne" id="bd286d96-da49-4054-b63b-56b6b4f34d5d"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/associerReduction" methodName="associerReductionLigne" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Associate a reduction for draftLigne" id="3ea26430-5ba4-4619-abcd-7ab79679f676" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0212345",
"nbUtilisationMax": "1",
"label": "reduction draft ligne",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/b98cf8a6-7a86-4035-ac65-b3956b9345c8/ligne//associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e0d81c71-eebb-456b-bc67-5fd5c610cde7" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Select reduction to check_Eligible must be TRUE" id="41989252-2048-4642-965d-165cbe96e626"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${draftInfo#refDraft}";</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - One reduction is found"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="feabb239-c7a6-4bed-ad42-4271dcddb6a0" name="Code catalog reduction must be"><con:configuration><token>&lt;REDUCTION.CODECATALOGUEREDUCTION>0212345&lt;/REDUCTION.CODECATALOGUEREDUCTION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="06f9cc6d-932f-4808-8bed-4622c904693c" name="Reference draft must be"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${draftInfo#refDraft}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b3ed1327-e3a6-40e7-bd94-1c6623249b0d" name="Reference Ligne must be"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNE>${draftInfo#refDraftLigne}&lt;/REDUCTION.REFERENCELIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="67fe79cd-bde6-4f8c-a524-1483035db714" name="Reference ligne detail must be null"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNEDETAIL/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8f1d6bf-424a-4bd1-a81e-bfe084780bbb" name="Reduction fraise must be null"><con:configuration><token>&lt;REDUCTION.REFERENCEFRAIS/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="676fb18e-e3eb-4d7f-bec4-4e05c06f153a" name="Reference tarif must be null"><con:configuration><token>&lt;REDUCTION.REFERENCETARIF/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Eligible must be TRUE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="07f6b197-adb8-4ccb-b659-56f691e0089e" name="Contains"><con:configuration><token>&lt;REDUCTION.VOUCHER>0&lt;/REDUCTION.VOUCHER>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">DRA-00003308</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LID-00003329</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>584ef314-c9aa-4407-b133-a9544f8de2c9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>19f91eaf-f65f-4a78-be0d-dc6ef8b092fe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e95fd708-e93f-4fa6-908c-4796abc88c72</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bd286d96-da49-4054-b63b-56b6b4f34d5d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="3aee6d58-f49d-4209-914e-3e58445dc822" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03. Associer successfully_Reduction for draftLigneDetail" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="draftInfo" id="1bba5434-c7d0-4bfb-bc7e-1441c44b56c9"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003306</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00003327</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="6436f0d5-4e3b-4aab-8e04-3488fce7dab3"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey4",'192112')
testRunner.testCase.setPropertyValue( "handleKey4",'511708010')
testRunner.testCase.setPropertyValue( "refDraftGlobal",null)
testRunner.testCase.setPropertyValue( "refDraftLigneGlobal",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_pack").setPropertyValue("refDraftGlobal",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_pack").setPropertyValue("refDraftLigneGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with mvno_pack" id="c6d150eb-84ae-4cde-b3d0-831e84a058b1"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>cf053310-7ebc-4c65-b3da-1a01ead5b478</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003306</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003327</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry><con:entry>customerKey4</con:entry><con:entry>handleKey4</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to draftInfo" id="3521b29b-8fdc-4435-a343-9445297511e7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_pack</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>refDraftLigneGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_pack</con:sourceStep><con:sourcePath/><con:targetType>refDraftLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>refDraft</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>refDraftLigne</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2.1 Associate a reduction for draftLigneDetail_Service" id="7b7a2425-6259-457d-8800-a5cb09a57ef1"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/detail/{refProduit}/associerReduction" methodName="associerReductionDetailLigne" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.1 Associate a reduction for draftLigneDetail_Service" id="f053f64c-7ab9-4ea0-9c9e-95ffeff8c102" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0312345",
"nbUtilisationMax": "1",
"label": "reduction draft ligne detail",
"voucher":false,
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/b22f4304-1490-48ed-90be-21b4619429fd/ligne/eae67d24-15bf-4c8c-bfec-8a4d7c2974f4/detail/mvno_pack/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="d56c0d91-d9df-4f51-bcfa-862305de49e7" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refProduit" value="mvno_pack"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2.2 Associate a reduction for draftLigneDetail_Bien" id="6e9edfcc-3f9b-444d-9b67-9ca6082be647"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/detail/{refProduit}/associerReduction" methodName="associerReductionDetailLigne" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.2 Associate a reduction for draftLigneDetail_Bien" id="f053f64c-7ab9-4ea0-9c9e-95ffeff8c102" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0312345",
"nbUtilisationMax": "1",
"label": "reduction draft ligne detail",
"voucher":false,
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/b22f4304-1490-48ed-90be-21b4619429fd/ligne/eae67d24-15bf-4c8c-bfec-8a4d7c2974f4/detail/mvno_pack/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="d56c0d91-d9df-4f51-bcfa-862305de49e7" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refProduit" value="PACK-MVNO-POSTPAID"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="3. Select reduction to check_Eligible must be TRUE" id="64a8e26a-d360-4052-9dd8-5fa4a26b99b7"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${draftInfo#refDraft}";</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - One reduction is found" disabled="true"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="feabb239-c7a6-4bed-ad42-4271dcddb6a0" name="Code catalog reduction must be"><con:configuration><token>&lt;REDUCTION.CODECATALOGUEREDUCTION>0312345&lt;/REDUCTION.CODECATALOGUEREDUCTION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="06f9cc6d-932f-4808-8bed-4622c904693c" name="Reference draft must be"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${draftInfo#refDraft}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b3ed1327-e3a6-40e7-bd94-1c6623249b0d" name="Reference Ligne must be"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNE>${draftInfo#refDraftLigne}&lt;/REDUCTION.REFERENCELIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="67fe79cd-bde6-4f8c-a524-1483035db714" name="Reference ligne detail must be mvno_pack"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNEDETAIL>mvno_pack&lt;/REDUCTION.REFERENCELIGNEDETAIL>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8f1d6bf-424a-4bd1-a81e-bfe084780bbb" name="Reduction fraise must be null"><con:configuration><token>&lt;REDUCTION.REFERENCEFRAIS/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="676fb18e-e3eb-4d7f-bec4-4e05c06f153a" name="Reference tarif must be null"><con:configuration><token>&lt;REDUCTION.REFERENCETARIF/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Eligible must be TRUE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="454c67f5-53ab-493f-a430-364b8d3d581f" name="Contains"><con:configuration><token>&lt;REDUCTION.VOUCHER>0&lt;/REDUCTION.VOUCHER>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">DRA-00003306</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LID-00003327</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>584ef314-c9aa-4407-b133-a9544f8de2c9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>19f91eaf-f65f-4a78-be0d-dc6ef8b092fe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e95fd708-e93f-4fa6-908c-4796abc88c72</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bd286d96-da49-4054-b63b-56b6b4f34d5d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7b7a2425-6259-457d-8800-a5cb09a57ef1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6e9edfcc-3f9b-444d-9b67-9ca6082be647</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="055f3359-2b06-4ad5-aba3-7e965e2daafb" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="04. Associer successfully_Reduction for Fraise of draftLigne" searchProperties="true" disabled="true" maxResults="0"><con:settings/><con:testStep type="properties" name="draftInfo" id="bd906657-2a16-4506-a08a-823787b969eb"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00002015</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00002022</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="7b7baf9b-bfc2-4258-b447-857031a3a243"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue( "refDraftGlobal",null)
testRunner.testCase.setPropertyValue( "refDraftLigneGlobal",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftGlobal",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftLigneGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with mvno_conso" id="9c254140-f366-4de2-b932-2cd310167d78"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>de4f846c-30c6-4009-99fa-1d548af5c9a0</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002015</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00002022</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>hientran01</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>006010387</con:value></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to draftInfo" id="a186e551-609e-411d-8915-c00b9110df79"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>refDraftLigneGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refDraftLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>refDraft</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>refDraftLigne</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Associate a reduction for Fraise of draftLigne" id="bf1a7b55-0645-4b6a-85ae-195e50ac5267"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/frais/{refFrais}/associerReduction" methodName="associerReductionFraisLigne" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Associate a reduction for Fraise of draftLigne" id="912abaf7-5402-4b0f-b1ba-4610e7133e39" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0412345",
"nbUtilisationMax": "1",
"label": "reduction frais of draft ligne",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/83d7e1d5-8a5e-4807-bb6b-cf7244996db9/ligne/4c244e58-f21a-4f83-841d-fbe87d08c282/frais/refFrais/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="3a5613ff-6fbf-4c84-b731-4e9337332e5e" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refFrais" value="refFrais"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Select reduction to check_Eligible must be TRUE" id="d02df584-984c-4b64-b7ff-eaef00e79054"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${draftInfo#refDraft}";</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - One reduction is found"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="feabb239-c7a6-4bed-ad42-4271dcddb6a0" name="Code catalog reduction must be"><con:configuration><token>&lt;REDUCTION.CODECATALOGUEREDUCTION>0412345&lt;/REDUCTION.CODECATALOGUEREDUCTION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="06f9cc6d-932f-4808-8bed-4622c904693c" name="Reference draft must be"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${draftInfo#refDraft}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b3ed1327-e3a6-40e7-bd94-1c6623249b0d" name="Reference Ligne must be"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNE>${draftInfo#refDraftLigne}&lt;/REDUCTION.REFERENCELIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="67fe79cd-bde6-4f8c-a524-1483035db714" name="Reference ligne detail must be null"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNEDETAIL/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8f1d6bf-424a-4bd1-a81e-bfe084780bbb" name="Reduction fraise must be"><con:configuration><token>&lt;REDUCTION.REFERENCEFRAIS>refFrais&lt;/REDUCTION.REFERENCEFRAIS></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="676fb18e-e3eb-4d7f-bec4-4e05c06f153a" name="Reference tarif must be null" disabled="true"><con:configuration><token>&lt;REDUCTION.REFERENCETARIF/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Eligible must be TRUE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002015</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00002022</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>584ef314-c9aa-4407-b133-a9544f8de2c9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>19f91eaf-f65f-4a78-be0d-dc6ef8b092fe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e95fd708-e93f-4fa6-908c-4796abc88c72</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bd286d96-da49-4054-b63b-56b6b4f34d5d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7b7a2425-6259-457d-8800-a5cb09a57ef1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c9d9605f-ebec-4d15-91cc-df3895ea1ead</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bf1a7b55-0645-4b6a-85ae-195e50ac5267</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="0606244a-8915-4471-8f88-6428bf16d9f5" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="05. Associer successfully_Reduction for Fraise of draftLigneDetail" searchProperties="true" disabled="true" maxResults="0"><con:settings/><con:testStep type="properties" name="draftInfo" id="5a4490c6-8ede-4aca-ac11-20805385450f"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00002024</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00002031</con:value></con:property><con:property><con:name>refDraftLigneDetail1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refDraftLigneDetail2</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="bf976f6f-1979-49f1-84eb-807cade09916"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",null)
testRunner.testCase.setPropertyValue( "refDraftGlobal",null)
testRunner.testCase.setPropertyValue( "refDraftLigneGlobal",'511708010')
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigneDetail1",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigneDetail2",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftGlobal",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftLigneGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with mvno_conso" id="2029560a-2ba6-49af-a81a-9760293984b4"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>de4f846c-30c6-4009-99fa-1d548af5c9a0</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002024</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00002031</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>hientran01</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>006010387</con:value></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to draftInfo" id="390d9f4d-2c29-4c31-acc9-7f54ec8d09aa"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>refDraftLigneGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refDraftLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>refDraft</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>refDraftLigne</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Associate a reduction for Fraise of draftLigneDetail" id="c9d9605f-ebec-4d15-91cc-df3895ea1ead"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/detail/{refProduit}/frais/{refFrais}/associerReduction" methodName="associerReductionFraisLigneDetaille" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Associate a reduction for Fraise of draftLigneDetail" id="25edea25-1471-4f8b-84ca-8b29a46f170c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0512345",
"nbUtilisationMax": "1",
"label": "reduction frais of draft ligne detail",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/9dedc356-3d38-4d80-8d40-e5c3c857c149/ligne/e44ef845-48a6-4237-b99f-5c489f144424/detail/mvno_conso/frais/refFrais/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="de257d10-c01f-42ef-ba62-751b44ca9b2a" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refProduit" value="mvno_conso"/>
  <con:entry key="refFrais" value="refFrais"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Select reduction to check_Eligible must be TRUE" id="32a22cf9-c6e6-408f-8ccb-d55db887c3b4"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${draftInfo#refDraft}";</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - One reduction is found"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="feabb239-c7a6-4bed-ad42-4271dcddb6a0" name="Code catalog reduction must be"><con:configuration><token>&lt;REDUCTION.CODECATALOGUEREDUCTION>0512345&lt;/REDUCTION.CODECATALOGUEREDUCTION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="06f9cc6d-932f-4808-8bed-4622c904693c" name="Reference draft must be"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${draftInfo#refDraft}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b3ed1327-e3a6-40e7-bd94-1c6623249b0d" name="Reference Ligne must be"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNE>${draftInfo#refDraftLigne}&lt;/REDUCTION.REFERENCELIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="67fe79cd-bde6-4f8c-a524-1483035db714" name="Reference ligne detail must be mvno_conso"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNEDETAIL>mvno_conso&lt;/REDUCTION.REFERENCELIGNEDETAIL>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8f1d6bf-424a-4bd1-a81e-bfe084780bbb" name="Reduction fraise must be"><con:configuration><token>&lt;REDUCTION.REFERENCEFRAIS>refFrais&lt;/REDUCTION.REFERENCEFRAIS>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="676fb18e-e3eb-4d7f-bec4-4e05c06f153a" name="Reference tarif must be null" disabled="true"><con:configuration><token>&lt;REDUCTION.REFERENCETARIF/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Eligible must be TRUE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002024</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00002031</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>584ef314-c9aa-4407-b133-a9544f8de2c9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>19f91eaf-f65f-4a78-be0d-dc6ef8b092fe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e95fd708-e93f-4fa6-908c-4796abc88c72</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bd286d96-da49-4054-b63b-56b6b4f34d5d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7b7a2425-6259-457d-8800-a5cb09a57ef1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c9d9605f-ebec-4d15-91cc-df3895ea1ead</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="e5059340-00a6-4363-b072-773c13ee96c8" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="06. Associer successfully_Reduction for Tarif of draftLigne" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="draftInfo" id="78b329d5-5298-4ed2-b8c4-bb895848ea3a"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003262</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00003283</con:value></con:property><con:property><con:name>refDraftLigneDetail1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refDraftLigneDetail2</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="69c76647-5629-4af1-bb61-51855349ccc3"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue( "refDraftGlobal",null)
testRunner.testCase.setPropertyValue( "refDraftLigneGlobal",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigneDetail1",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigneDetail2",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftGlobal",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftLigneGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with mvno_conso" id="fc0fcff3-a15d-40a7-9ae2-6c6c6cdaaa72"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>de4f846c-30c6-4009-99fa-1d548af5c9a0</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003262</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003283</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to draftInfo" id="c0170726-80e8-4b52-a835-b7c8569416b2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>refDraftLigneGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refDraftLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>refDraft</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>refDraftLigne</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Associate a reduction for Tarif of draftLigne" id="622c3307-20c1-4c22-9594-be358f0c3eb6"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/tarif/{refTarif}/associerReduction" methodName="associerReductionTarifOffre" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Associate a reduction for Tarif of draftLigne" id="05bece9c-95a0-4045-a87b-6fa5b6c18c7b" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0612345",
"nbUtilisationMax": "1",
"label": "reduction for tarif of draft ligne",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/893da468-488d-4b4b-a1a2-98a46aa595fe/ligne/62a4bb16-25f7-4b9d-ad20-2bdea792708d/tarif/79/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="17a28eb1-c316-4189-989f-67b524a9d6f6" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
  <con:entry key="refTarif" value="79"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Select reduction to check_Eligible must be TRUE" id="739b12ad-b970-46c4-9057-c66584a43822"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${draftInfo#refDraft}";</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - One reduction is found"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="feabb239-c7a6-4bed-ad42-4271dcddb6a0" name="Code catalog reduction must be"><con:configuration><token>&lt;REDUCTION.CODECATALOGUEREDUCTION>0612345&lt;/REDUCTION.CODECATALOGUEREDUCTION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="06f9cc6d-932f-4808-8bed-4622c904693c" name="Reference draft must be"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${draftInfo#refDraft}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b3ed1327-e3a6-40e7-bd94-1c6623249b0d" name="Reference Ligne must be"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNE>${draftInfo#refDraftLigne}&lt;/REDUCTION.REFERENCELIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="67fe79cd-bde6-4f8c-a524-1483035db714" name="Reference ligne detail must be null"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNEDETAIL/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8f1d6bf-424a-4bd1-a81e-bfe084780bbb" name="Reduction fraise must be NULL"><con:configuration><token>&lt;REDUCTION.REFERENCEFRAIS/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="676fb18e-e3eb-4d7f-bec4-4e05c06f153a" name="Reference tarif must be"><con:configuration><token>&lt;REDUCTION.REFERENCETARIF>79&lt;/REDUCTION.REFERENCETARIF>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Eligible must be TRUE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b245f00c-4b62-4aae-b826-273d6aa60539" name="Contains"><con:configuration><token>&lt;REDUCTION.VOUCHER>0&lt;/REDUCTION.VOUCHER>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">DRA-00003262</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LID-00003283</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>584ef314-c9aa-4407-b133-a9544f8de2c9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>19f91eaf-f65f-4a78-be0d-dc6ef8b092fe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e95fd708-e93f-4fa6-908c-4796abc88c72</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bd286d96-da49-4054-b63b-56b6b4f34d5d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7b7a2425-6259-457d-8800-a5cb09a57ef1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c9d9605f-ebec-4d15-91cc-df3895ea1ead</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bf1a7b55-0645-4b6a-85ae-195e50ac5267</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>622c3307-20c1-4c22-9594-be358f0c3eb6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="2441c4b3-1e36-4de3-8e72-75538437416f" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="07.01 Associer successfully_Reduction for all_No frais reductions_mvnoConso" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="draftInfo" id="575cfb31-b129-41bc-912e-c05881f197a1"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003210</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00003230</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="3e481c5c-0b16-4689-9f56-aea518c8e3d1"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue( "refDraftGlobal",null)
testRunner.testCase.setPropertyValue( "refDraftLigneGlobal",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftGlobal",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftLigneGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with mvno_conso" id="20524f37-1b23-42a5-a210-58d2489cb801"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>de4f846c-30c6-4009-99fa-1d548af5c9a0</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003210</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003230</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to draftInfo" id="82a7c893-bbf8-4d4a-a187-85242bda29ce"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>refDraftLigneGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refDraftLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>refDraft</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>refDraftLigne</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2.1 Associate a reduction for draft" id="7a14ba20-8504-4f38-a1b4-52815910d9f3"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/associerReduction" methodName="associerReduction" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.1 Associate a reduction for draft" id="a15d43e2-92b7-48c6-9b9e-e68e0083c64c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0112345",
"nbUtilisationMax": "1",
"label": "reduction draft",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/6e17cc68-7a21-475c-b59e-568b7bb37e61/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e7290574-2afb-4971-9c5f-02e44a8b01d4" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2.2 Associate a reduction for draftLigne" id="8d6ba7e8-8f71-44d3-bc81-e1cb9016f1ab"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/associerReduction" methodName="associerReductionLigne" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.2 Associate a reduction for draftLigne" id="3ea26430-5ba4-4619-abcd-7ab79679f676" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0212345",
"nbUtilisationMax": "1",
"label": "reduction draft ligne",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/b98cf8a6-7a86-4035-ac65-b3956b9345c8/ligne//associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e0d81c71-eebb-456b-bc67-5fd5c610cde7" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2.3 Associate a reduction for draftLigneDetail" id="3fb950d8-e4b2-4023-9d19-110690c39a65"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/detail/{refProduit}/associerReduction" methodName="associerReductionDetailLigne" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.3 Associate a reduction for draftLigneDetail" id="f053f64c-7ab9-4ea0-9c9e-95ffeff8c102" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0312345",
"nbUtilisationMax": "1",
"label": "reduction draft ligne detail",
"voucher":false,
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/b22f4304-1490-48ed-90be-21b4619429fd/ligne/eae67d24-15bf-4c8c-bfec-8a4d7c2974f4/detail/mvno_pack/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="d56c0d91-d9df-4f51-bcfa-862305de49e7" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refProduit" value="mvno_conso"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2.4 Associate a reduction for Tarif of draftLigne" id="af8859d0-7e9c-45b6-84a4-9aa359f6a294"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/tarif/{refTarif}/associerReduction" methodName="associerReductionTarifOffre" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.4 Associate a reduction for Tarif of draftLigne" id="05bece9c-95a0-4045-a87b-6fa5b6c18c7b" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0412345",
"nbUtilisationMax": "1",
"label": "reduction for tarif of draft ligne",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/893da468-488d-4b4b-a1a2-98a46aa595fe/ligne/62a4bb16-25f7-4b9d-ad20-2bdea792708d/tarif/79/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="17a28eb1-c316-4189-989f-67b524a9d6f6" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
  <con:entry key="refTarif" value="79"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="3. Select reduction to check_Eligible must be TRUE 2" id="9a4cf35f-42b6-4e24-870f-935a78da4913"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${draftInfo#refDraft}";</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - Four reductions are found"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>4</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="65f977c5-d65e-4cac-8152-71342e4436fe" name="Not Contains Eligible FALSE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>0&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="e5202efe-a974-4700-88b3-8eb50ab97939" name="Not Contains"><con:configuration><token>&lt;REDUCTION.VOUCHER>1&lt;/REDUCTION.VOUCHER>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">DRA-00003210</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LID-00003230</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>584ef314-c9aa-4407-b133-a9544f8de2c9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>19f91eaf-f65f-4a78-be0d-dc6ef8b092fe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e95fd708-e93f-4fa6-908c-4796abc88c72</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bd286d96-da49-4054-b63b-56b6b4f34d5d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7b7a2425-6259-457d-8800-a5cb09a57ef1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c9d9605f-ebec-4d15-91cc-df3895ea1ead</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bf1a7b55-0645-4b6a-85ae-195e50ac5267</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>622c3307-20c1-4c22-9594-be358f0c3eb6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6c14055c-eddc-4cca-8b88-c82060338085</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d8e3b2cc-c000-4de3-ac57-1a0c5afb7776</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="bec8d97e-2763-4cc4-9a19-e7dbb061bff0" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="07.02 Associer successfully_Reduction for all_No frais reductions_mvnoPack" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="draftInfo" id="8056600c-dced-405d-9ef5-2bea9a90c282"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003211</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00003231</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="374d082f-0da1-41f1-96be-2fa9df5aa33f"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey4",'192112')
testRunner.testCase.setPropertyValue( "handleKey4",'511708010')
testRunner.testCase.setPropertyValue( "refDraftGlobal",null)
testRunner.testCase.setPropertyValue( "refDraftLigneGlobal",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_pack").setPropertyValue("refDraftGlobal",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_pack").setPropertyValue("refDraftLigneGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with mvno_pack" id="a2131fa8-44b9-479f-8325-4a5f5933244e"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>cf053310-7ebc-4c65-b3da-1a01ead5b478</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003211</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003231</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry><con:entry>customerKey4</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to draftInfo" id="f53ee4f6-d080-442c-a584-b5407fe3ce66"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_pack</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>refDraftLigneGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_pack</con:sourceStep><con:sourcePath/><con:targetType>refDraftLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>refDraft</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>refDraftLigne</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2.1 Associate a reduction for draft" id="9bd46a1e-13f3-4b82-a5d4-7898a741a4a5"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/associerReduction" methodName="associerReduction" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.1 Associate a reduction for draft" id="a15d43e2-92b7-48c6-9b9e-e68e0083c64c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0112345",
"nbUtilisationMax": "1",
"label": "reduction draft",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/6e17cc68-7a21-475c-b59e-568b7bb37e61/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e7290574-2afb-4971-9c5f-02e44a8b01d4" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2.2 Associate a reduction for draftLigne" id="90094213-1e43-419b-a483-b45b089c1974"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/associerReduction" methodName="associerReductionLigne" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.2 Associate a reduction for draftLigne" id="3ea26430-5ba4-4619-abcd-7ab79679f676" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0212345",
"nbUtilisationMax": "1",
"label": "reduction draft ligne",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/b98cf8a6-7a86-4035-ac65-b3956b9345c8/ligne//associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e0d81c71-eebb-456b-bc67-5fd5c610cde7" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2.3 Associate a reduction for draftLigneDetail_Service" id="76d21978-c296-45c1-9212-929201fb5f4c"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/detail/{refProduit}/associerReduction" methodName="associerReductionDetailLigne" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.3 Associate a reduction for draftLigneDetail_Service" id="f053f64c-7ab9-4ea0-9c9e-95ffeff8c102" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0312345",
"nbUtilisationMax": "1",
"label": "reduction draft ligne detail",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/b22f4304-1490-48ed-90be-21b4619429fd/ligne/eae67d24-15bf-4c8c-bfec-8a4d7c2974f4/detail/mvno_pack/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="d56c0d91-d9df-4f51-bcfa-862305de49e7" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refProduit" value="mvno_pack"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2.4 Associate a reduction for draftLigneDetail_Bien" id="fca523c0-9cb9-4024-9698-56b900ce623c"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/detail/{refProduit}/associerReduction" methodName="associerReductionDetailLigne" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.4 Associate a reduction for draftLigneDetail_Bien" id="f053f64c-7ab9-4ea0-9c9e-95ffeff8c102" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0312345",
"nbUtilisationMax": "1",
"label": "reduction draft ligne detail",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/b22f4304-1490-48ed-90be-21b4619429fd/ligne/eae67d24-15bf-4c8c-bfec-8a4d7c2974f4/detail/mvno_pack/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="d56c0d91-d9df-4f51-bcfa-862305de49e7" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refProduit" value="PACK-MVNO-POSTPAID"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2.5 Associate a reduction for Tarif of draftLigne" id="0f6c92f2-e66c-41f2-9ade-ccf0fd345d28"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/tarif/{refTarif}/associerReduction" methodName="associerReductionTarifOffre" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.5 Associate a reduction for Tarif of draftLigne" id="05bece9c-95a0-4045-a87b-6fa5b6c18c7b" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0412345",
"nbUtilisationMax": "1",
"label": "reduction for tarif of draft ligne",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/893da468-488d-4b4b-a1a2-98a46aa595fe/ligne/62a4bb16-25f7-4b9d-ad20-2bdea792708d/tarif/79/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="17a28eb1-c316-4189-989f-67b524a9d6f6" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
  <con:entry key="refTarif" value="79"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="3. Select reduction to check_Eligible must be TRUE 2" id="d71c3cd3-c6ed-46bd-8eea-cf56315b9d19"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${draftInfo#refDraft}";</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - Four reductions are found"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>5</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>true</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="65f977c5-d65e-4cac-8152-71342e4436fe" name="Not Contains Eligible FALSE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>0&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="26649251-6810-4f51-8505-75170bcf164a" name="Not Contains"><con:configuration><token>&lt;REDUCTION.VOUCHER>1&lt;/REDUCTION.VOUCHER>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">DRA-00003211</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LID-00003231</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>584ef314-c9aa-4407-b133-a9544f8de2c9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>19f91eaf-f65f-4a78-be0d-dc6ef8b092fe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e95fd708-e93f-4fa6-908c-4796abc88c72</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bd286d96-da49-4054-b63b-56b6b4f34d5d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7b7a2425-6259-457d-8800-a5cb09a57ef1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c9d9605f-ebec-4d15-91cc-df3895ea1ead</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bf1a7b55-0645-4b6a-85ae-195e50ac5267</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>622c3307-20c1-4c22-9594-be358f0c3eb6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6c14055c-eddc-4cca-8b88-c82060338085</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d8e3b2cc-c000-4de3-ac57-1a0c5afb7776</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fca523c0-9cb9-4024-9698-56b900ce623c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="93dee895-a293-45d8-87b3-c9e54bf08cb3" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="07.03 Associer successfully_Reduction for all_No detailLigne reductions_avfw.essentiel" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="draftInfo" id="b7d15073-ff6f-4081-ba7c-5927c824e2a3"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003212</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00003232</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="fb8c8cc8-042d-41e3-a7ba-1d8d5f768729"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey1",'6002367491')
testRunner.testCase.setPropertyValue( "handleKey1",'00001006956')
testRunner.testCase.setPropertyValue( "refDraftGlobal",null)
testRunner.testCase.setPropertyValue( "refDraftLigneGlobal",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("1. Create a draft with avfw.essentiel").setPropertyValue("refDraftGlobal",null)
testRunner.testCase.getTestStepByName("1. Create a draft with avfw.essentiel").setPropertyValue("refDraftLigneGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with avfw.essentiel" id="3935972a-9de5-4cc7-99b4-0948619dce41"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>c5c7140a-49c8-4c3e-8b68-8cfdd2c3eda3</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003212</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003232</con:value></con:property><con:property><con:name>customerKey1</con:name><con:value>6002367491</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>00001006956</con:value></con:property><con:property><con:name>refLigneGlobal</con:name></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry><con:entry>customerKey1</con:entry><con:entry>handleKey1</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to draftInfo" id="d8e3b2cc-c000-4de3-ac57-1a0c5afb7776"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with avfw.essentiel</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>refDraftLigneGlobal</con:sourceType><con:sourceStep>1. Create a draft with avfw.essentiel</con:sourceStep><con:sourcePath/><con:targetType>refDraftLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>refDraft</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>refDraftLigne</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2.1 Associate a reduction for draft" id="e50c20fd-95d0-445b-9ced-7588d76ac33f"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/associerReduction" methodName="associerReduction" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.1 Associate a reduction for draft" id="a15d43e2-92b7-48c6-9b9e-e68e0083c64c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0112345",
"nbUtilisationMax": "1",
"label": "reduction draft",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/6e17cc68-7a21-475c-b59e-568b7bb37e61/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e7290574-2afb-4971-9c5f-02e44a8b01d4" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2.2 Associate a reduction for draftLigne" id="8e868e6a-8369-44ed-8a61-dcd12ba7b378"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/associerReduction" methodName="associerReductionLigne" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.2 Associate a reduction for draftLigne" id="3ea26430-5ba4-4619-abcd-7ab79679f676" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0212345",
"nbUtilisationMax": "1",
"label": "reduction draft ligne",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/b98cf8a6-7a86-4035-ac65-b3956b9345c8/ligne//associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e0d81c71-eebb-456b-bc67-5fd5c610cde7" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2.3 Associate a reduction for Tarif of draftLigne" id="6c14055c-eddc-4cca-8b88-c82060338085"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/tarif/{refTarif}/associerReduction" methodName="associerReductionTarifOffre" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.3 Associate a reduction for Tarif of draftLigne" id="05bece9c-95a0-4045-a87b-6fa5b6c18c7b" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0312345",
"nbUtilisationMax": "1",
"label": "reduction for tarif of draft ligne",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/893da468-488d-4b4b-a1a2-98a46aa595fe/ligne/62a4bb16-25f7-4b9d-ad20-2bdea792708d/tarif/79/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="17a28eb1-c316-4189-989f-67b524a9d6f6" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
  <con:entry key="refTarif" value="23"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="3. Select reduction to check_Eligible must be TRUE 2" id="0dbd36cd-ad71-4aab-bf3c-7bc1d6d41329"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${draftInfo#refDraft}";</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - Three reductions are found"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="65f977c5-d65e-4cac-8152-71342e4436fe" name="Not Contains Eligible FALSE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>0&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="f4c740b2-1b7a-4ada-bc59-c7d88966c533" name="Not Contains"><con:configuration><token>&lt;REDUCTION.VOUCHER>1&lt;/REDUCTION.VOUCHER>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">DRA-00003212</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LID-00003232</con:value></con:property><con:property><con:name>customerKey1</con:name><con:value>6002367491</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>00001006956</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>584ef314-c9aa-4407-b133-a9544f8de2c9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>19f91eaf-f65f-4a78-be0d-dc6ef8b092fe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e95fd708-e93f-4fa6-908c-4796abc88c72</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bd286d96-da49-4054-b63b-56b6b4f34d5d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7b7a2425-6259-457d-8800-a5cb09a57ef1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c9d9605f-ebec-4d15-91cc-df3895ea1ead</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bf1a7b55-0645-4b6a-85ae-195e50ac5267</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>622c3307-20c1-4c22-9594-be358f0c3eb6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6c14055c-eddc-4cca-8b88-c82060338085</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d8e3b2cc-c000-4de3-ac57-1a0c5afb7776</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="0568c141-880d-4a0a-bd81-68e3149af964" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="08.01 Associer successfully_Reduction is voucher for draft_mvnoConso" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="draftInfo" id="4ec621eb-38bd-40eb-a062-2e3c08022bdb"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003243</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00003264</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="fcb24f62-33d0-46a1-90c3-e8d6c8c0d404"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue( "refDraftGlobal",null)
testRunner.testCase.setPropertyValue( "refDraftLigneGlobal",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftGlobal",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftLigneGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with mvno_conso" id="18d6cfeb-7b60-450c-89de-81b0cf232db7"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>de4f846c-30c6-4009-99fa-1d548af5c9a0</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003243</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003264</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to draftInfo" id="9c0ec746-58df-4077-b7a9-fc32d586e5ed"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>refDraft</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>refDraftLigneGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refDraftLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>refDraftLigne</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Associate a reduction for draft" id="e452ce67-955a-4e89-84ab-f1a14fb50024"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/associerReduction" methodName="associerReduction" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Associate a reduction for draft" id="a15d43e2-92b7-48c6-9b9e-e68e0083c64c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0A4lkGQb",
"nbUtilisationMax": "1",
"label": "reduction draft",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/6e17cc68-7a21-475c-b59e-568b7bb37e61/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e7290574-2afb-4971-9c5f-02e44a8b01d4" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Select reduction to check_Eligible must be TRUE_Voucher TRUE" id="4d1cd956-d8ce-4cf4-a2fa-bd7cae366b54"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${draftInfo#refDraft}";</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - One reduction is found"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="feabb239-c7a6-4bed-ad42-4271dcddb6a0" name="Code catalog reduction must be"><con:configuration><token>&lt;REDUCTION.CODECATALOGUEREDUCTION>0A4lkGQb&lt;/REDUCTION.CODECATALOGUEREDUCTION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="06f9cc6d-932f-4808-8bed-4622c904693c" name="Reference draft must be"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${draftInfo#refDraft}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b3ed1327-e3a6-40e7-bd94-1c6623249b0d" name="Reference Ligne must be null"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNE/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="67fe79cd-bde6-4f8c-a524-1483035db714" name="Reference ligne detail must be null"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNEDETAIL/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8f1d6bf-424a-4bd1-a81e-bfe084780bbb" name="Reduction fraise must be null"><con:configuration><token>&lt;REDUCTION.REFERENCEFRAIS/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="676fb18e-e3eb-4d7f-bec4-4e05c06f153a" name="Reference tarif must be null"><con:configuration><token>&lt;REDUCTION.REFERENCETARIF/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Eligible must be TRUE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="90edba4b-baf0-4473-b6c6-18a1218fd0df" name="voucher must be TRUE"><con:configuration><token>&lt;REDUCTION.VOUCHER>1&lt;/REDUCTION.VOUCHER></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">DRA-00003243</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LID-00003264</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>584ef314-c9aa-4407-b133-a9544f8de2c9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>19f91eaf-f65f-4a78-be0d-dc6ef8b092fe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e95fd708-e93f-4fa6-908c-4796abc88c72</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c00eef19-7a02-4065-b25b-bfbc2de730bc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="91c838b5-431e-41d3-b007-4ba6c9b7e785" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="n. Associer successfully_Reduction for all_TBD" searchProperties="true" disabled="true" maxResults="0"><con:settings/><con:testStep type="properties" name="draftInfo" id="677ba5d9-f562-4770-9f5e-04dff105f5d3"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00002123</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00002130</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="313a8206-a644-4019-acd9-13db3e4f5ea6"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue( "refDraftGlobal",null)
testRunner.testCase.setPropertyValue( "refDraftLigneGlobal",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("1. Create a draft with avfw.essentiel").setPropertyValue("refDraftGlobal",null)
testRunner.testCase.getTestStepByName("1. Create a draft with avfw.essentiel").setPropertyValue("refDraftLigneGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with avfw.essentiel" id="a6aa9551-9628-46c0-957a-7422353ce476"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>c5c7140a-49c8-4c3e-8b68-8cfdd2c3eda3</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002123</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00002130</con:value></con:property><con:property><con:name>customerKey1</con:name><con:value>6002367491</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>00001006956</con:value></con:property><con:property><con:name>refLigneGlobal</con:name></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry><con:entry>customerKey1</con:entry><con:entry>handleKey1</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to draftInfo" id="d665c55f-5f52-4819-b9ef-3a5d048b9263"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with avfw.essentiel</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>refDraftLigneGlobal</con:sourceType><con:sourceStep>1. Create a draft with avfw.essentiel</con:sourceStep><con:sourcePath/><con:targetType>refDraftLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>refDraft</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>refDraftLigne</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2.1 Associate a reduction for draft" id="c33c7239-07a9-4ea2-8b70-25c2ee999822"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/associerReduction" methodName="associerReduction" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.1 Associate a reduction for draft" id="a15d43e2-92b7-48c6-9b9e-e68e0083c64c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0112345",
"nbUtilisationMax": "1",
"label": "reduction draft",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/6e17cc68-7a21-475c-b59e-568b7bb37e61/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e7290574-2afb-4971-9c5f-02e44a8b01d4" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2.2 Associate a reduction for draftLigne" id="a224343d-eb33-428c-a917-73927637f00a"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/associerReduction" methodName="associerReductionLigne" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.2 Associate a reduction for draftLigne" id="3ea26430-5ba4-4619-abcd-7ab79679f676" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0212345",
"nbUtilisationMax": "1",
"label": "reduction draft ligne",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/b98cf8a6-7a86-4035-ac65-b3956b9345c8/ligne//associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e0d81c71-eebb-456b-bc67-5fd5c610cde7" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2.3 Associate a reduction for draftLigneDetail" id="b9f06aab-6498-4853-bf41-5e5738f18cdc"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/detail/{refProduit}/associerReduction" methodName="associerReductionDetailLigne" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.3 Associate a reduction for draftLigneDetail" id="f053f64c-7ab9-4ea0-9c9e-95ffeff8c102" mediaType="application/x-www-form-urlencoded" postQueryString="true"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0312345",
"nbUtilisationMax": "1",
"label": "reduction draft ligne detail",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/b22f4304-1490-48ed-90be-21b4619429fd/ligne/eae67d24-15bf-4c8c-bfec-8a4d7c2974f4/detail/mvno_pack/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="d56c0d91-d9df-4f51-bcfa-862305de49e7" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refProduit" value="mvno_conso"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2.4 Associate a reduction for Fraise of draftLigne" id="6f406635-01b4-495d-942a-e9c3f8cca9c2"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/frais/{refFrais}/associerReduction" methodName="associerReductionFraisLigne" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.4 Associate a reduction for Fraise of draftLigne" id="912abaf7-5402-4b0f-b1ba-4610e7133e39" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0412345",
"nbUtilisationMax": "1",
"label": "reduction frais of draft ligne",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/83d7e1d5-8a5e-4807-bb6b-cf7244996db9/ligne/4c244e58-f21a-4f83-841d-fbe87d08c282/frais/refFrais/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="3a5613ff-6fbf-4c84-b731-4e9337332e5e" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refFrais" value="refFrais"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2.5 Associate a reduction for Fraise of draftLigneDetail" id="5c2f189f-2bed-4989-ad41-5c150cacba13"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/detail/{refProduit}/frais/{refFrais}/associerReduction" methodName="associerReductionFraisLigneDetaille" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.5 Associate a reduction for Fraise of draftLigneDetail" id="25edea25-1471-4f8b-84ca-8b29a46f170c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0512345",
"nbUtilisationMax": "1",
"label": "reduction frais of draft ligne detail",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/9dedc356-3d38-4d80-8d40-e5c3c857c149/ligne/e44ef845-48a6-4237-b99f-5c489f144424/detail/mvno_conso/frais/refFrais/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="de257d10-c01f-42ef-ba62-751b44ca9b2a" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refProduit" value="mvno_conso"/>
  <con:entry key="refFrais" value="refFrais"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2.6 Associate a reduction for Tarif of draftLigne" id="6de6b1a9-9dd1-475e-81c4-c8e4a6ddcf47"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/tarif/{refTarif}/associerReduction" methodName="associerReductionTarifOffre" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.6 Associate a reduction for Tarif of draftLigne" id="05bece9c-95a0-4045-a87b-6fa5b6c18c7b" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0612345",
"nbUtilisationMax": "1",
"label": "reduction for tarif of draft ligne",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/893da468-488d-4b4b-a1a2-98a46aa595fe/ligne/62a4bb16-25f7-4b9d-ad20-2bdea792708d/tarif/79/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="17a28eb1-c316-4189-989f-67b524a9d6f6" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
  <con:entry key="refTarif" value="79"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="3. Select reduction to check_Eligible must be TRUE 2" id="19ee62e1-d92f-427d-a952-0bf5cc0491a7"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${draftInfo#refDraft}";</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - Six reductions are found"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>6</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="65f977c5-d65e-4cac-8152-71342e4436fe" name="Not Contains Eligible FALSE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>0&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">DRA-00002123</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LID-00002130</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>584ef314-c9aa-4407-b133-a9544f8de2c9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>19f91eaf-f65f-4a78-be0d-dc6ef8b092fe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e95fd708-e93f-4fa6-908c-4796abc88c72</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bd286d96-da49-4054-b63b-56b6b4f34d5d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7b7a2425-6259-457d-8800-a5cb09a57ef1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c9d9605f-ebec-4d15-91cc-df3895ea1ead</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bf1a7b55-0645-4b6a-85ae-195e50ac5267</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>622c3307-20c1-4c22-9594-be358f0c3eb6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6c14055c-eddc-4cca-8b88-c82060338085</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d8e3b2cc-c000-4de3-ac57-1a0c5afb7776</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="2b738e7e-1a65-41db-bb22-2926840eedcf" name="calculerCoutCommand"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="423fd78a-0029-4c7b-b3a1-5acfb781b51f" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.01 Calculate cost for command WITH all reductions FALSE_mvnoConso_Price no changes" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="1caa97bb-81b3-43bf-b07b-6210c93624ea"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003311</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>081302000</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="29275451-1b95-43e9-b6d9-0834f5f6fdc0"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("1. Create a draft with reduction of draft_mvnoConso").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with reduction of draft_mvnoConso" id="24f3a1d8-cb14-487f-8d49-99f363b0667f"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>eeac9de4-e3ba-43ca-b26d-64d5977bd5f5</con:targetTestCase><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003311</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003332</con:value></con:property></con:properties><con:returnProperties><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to commandInfo" id="98619a41-7fb7-4762-94b6-49288798558d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with reduction of draft_mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with reduction" id="5810abe4-5fe0-498d-8bb0-71bf727260a4"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with reduction" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
      "ip":{"ip":"10.190.29.140"}
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"${#TestCase#handleKey3}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"${#TestCase#handleKey3}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"${#TestCase#handleKey3}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="31bab8b5-267a-4c3d-bd93-c8cbc300cbe5" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a4e26616-452c-4a7e-80fb-3f27b6389eda" name="Contains"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="799928a5-c75c-4d19-849b-bba1319464ca"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommande</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with reduction</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with reduction</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Update ELIGBILE to FALSE" id="e8318e87-f9f3-450a-9371-d10fd06bc556"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = false where referenceDraft = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple Contains" id="0ccc6d1c-21a7-440f-af74-5e08305ce544" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Make sure Eligible FALSE" id="70a697af-40b5-4e35-84d6-1c1edcdd67fa"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple NotContains" id="2dd1779f-d945-4468-a036-296a64b8d6b1" name="Not Contains Eligible TRUE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="3. Calculate cost for command_Cost has no changes" id="b68029a0-dc8b-4297-9567-ca4c6ed58072"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Calculate cost for command_Cost has no changes" id="3fab0599-c965-4ad8-80b4-281baa0426e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/037210040/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="93100678-21bd-484e-bc25-9593dafc4884" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Copy of Reset variables to null" id="35e3b067-83ab-4f64-8717-f25b8a6e6140"><con:settings/><con:config><script>import java.util.regex.Matcher
import java.util.regex.Pattern
def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context ) ;
def holder = groovyUtils.getXmlHolder( "GetAttachementList#Response" ) ;
log.info(holder.getXml());</script></con:config></con:testStep><con:testStep type="restrequest" name="Get promotion to check_MVNO" id="fa70cabb-08f3-47d7-9d7c-580906f0df4e" disabled="true"><con:settings/><con:config service="/default/promo" resourcePath="/discount.qualifier.ws-1.0.x/promo/offer/{offerCode}/price/{priceCode}" methodName="getPromoByOfferCodeAndPrice" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get promotion to check_MVNO" id="25bf5c2e-533d-452b-85d5-5747b5a22479" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/discount.qualifier.ws-1.0.x/promo/offer/MVNO/price/1</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="71ad5e29-4db1-40be-8ec7-e6fefeed5e87" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="priceCode" value="1"/>
  <con:entry key="offerCode" value="MVNO"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">081302000</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9656f05-50b4-4b2d-956d-55da470d6084</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1849f0f6-6afd-49d6-8aeb-a030543973ac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f483b2a3-b9d2-4d36-b7b3-f6a8cfda47f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d8ac3efb-f813-4abb-b693-6cc410532311</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c2e366d-7905-447b-9f87-7e1270aae1be</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c509f4fc-6e5c-470e-96ec-9ebe79c55483</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>749c22a1-d3cb-4400-ab0a-792db7f86cbe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>70a697af-40b5-4e35-84d6-1c1edcdd67fa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>73122371-daa0-4aac-854d-69273978d161</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="cb591d95-20d8-4dbb-969b-86e4f8da98fc" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02. Calculate cost for command WITH one reduction TRUE at level draftLigne_mvnoConso_Price including reduction" searchProperties="true" maxResults="0"><con:description/><con:settings/><con:testStep type="groovy" name="Reset variables to null" id="0ee16870-3219-40c4-a6e0-324411695522"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("redDraftLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("Promo1",null)
testRunner.testCase.getTestStepByName("1. Transform a draft to command manual reduction for draftLigne").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="properties" name="commandInfo" id="0482d848-6bdc-4cfa-b5a4-6b48359afa81"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommand</con:name><con:value>003002773</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redDraftLigne</con:name><con:value>0212345</con:value></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform a draft to command manual reduction for draftLigne" id="3cc64ab6-ca36-4beb-adf7-8c4d94b8bfc8"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>15500887-8965-4067-b149-599b21a73f58</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>003002773</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value>0212345</con:value></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>redDraftLigne</con:entry><con:entry>Promo1</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="faa8ea1e-bcae-4021-9dcf-2939c56c34bb"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform a draft to command manual reduction for draftLigne</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:sourcePath/><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>redDraftLigne</con:name><con:sourceType>redDraftLigne</con:sourceType><con:sourceStep>1. Transform a draft to command manual reduction for draftLigne</con:sourceStep><con:sourcePath/><con:targetType>redDraftLigne</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo1</con:name><con:sourceType>Promo1</con:sourceType><con:sourceStep>1. Transform a draft to command manual reduction for draftLigne</con:sourceStep><con:targetType>Promo1</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Update all ELIGBILE to FALSE" id="e512ecfc-1a12-4aab-ae67-a7f239399a9b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = false where referenceDraft = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple Contains" id="0ccc6d1c-21a7-440f-af74-5e08305ce544" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Make sure Eligible FALSE" id="f7e66492-33b6-4547-b086-5bab7d55e56f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Select * from reduction where referenceDraft = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple NotContains" id="678b27ea-7e62-41c0-85e5-82ea0bb1a651" name="Not Contains"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. Calculate cost for command before reduction_calculerCout" id="eb7b613a-5deb-469e-9fbe-e2e6e1b825ef"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Calculate cost for command before reduction_calculerCout" id="3fab0599-c965-4ad8-80b4-281baa0426e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/037210040/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="93100678-21bd-484e-bc25-9593dafc4884" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2.1. enhancedCalculerCout" id="49dfd9e3-f373-4092-b290-964f43d000c8"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/enhancedCostCalculation" methodName="enhancedCalculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.1. enhancedCalculerCout" id="7e95406e-677d-4399-a713-cfe7f94c4aab" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/004200237/enhancedCostCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7a126b6c-440d-4505-93b4-fdbc9c3a1806" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2.3 getInfosBonCommande" id="1046ec79-49e5-4185-8eef-e3e209ef0c72"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/getInfosBonCommande" methodName="getInfosBonCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.3 getInfosBonCommande" id="da0a0e74-02cb-495e-8eba-4888c52652d7" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/702001504/getInfosBonCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c20d97c3-4e45-4b63-b8c9-24c0bf2ee216" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Update one ELIGBILE to TRUE_Reduction of draftLigne" id="5af10a9b-109b-47a4-8076-2dc5e5595f1f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = true where referenceDraft = "${commandInfo#refCommand}" and codeCatalogueReduction = '${commandInfo#redDraftLigne}';</con:query><con:assertion type="Simple Contains" id="0ccc6d1c-21a7-440f-af74-5e08305ce544" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Make sure eligible of reduction DraftLigne TRUE" id="c58844f8-6366-4985-bde7-de7771600100"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = true where referenceDraft = "${commandInfo#refCommand}" and codeCatalogueReduction = '${commandInfo#redDraftLigne}';</con:query><con:assertion type="Simple Contains" id="0ccc6d1c-21a7-440f-af74-5e08305ce544" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="3. Calculate cost for command with one reduction DraftLigne" id="49016cee-c360-47f4-8e85-5676a2a33584"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Calculate cost for command with one reduction DraftLigne" id="3fab0599-c965-4ad8-80b4-281baa0426e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/037210040/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8dbd3754-b172-4b3d-ab45-a7bafbdc5c31" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3.2 getInfosBonCommande" id="07cc615e-66fe-4fc0-9626-18e335583a99"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/getInfosBonCommande" methodName="getInfosBonCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3.2 getInfosBonCommande" id="da0a0e74-02cb-495e-8eba-4888c52652d7" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/702001504/getInfosBonCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c20d97c3-4e45-4b63-b8c9-24c0bf2ee216" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3.3 enhancedCostCaculation" id="0f24d6ce-248a-4e81-8762-f968f26cc7a6"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/enhancedCostCalculation" methodName="enhancedCalculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3.3 enhancedCostCaculation" id="7e95406e-677d-4399-a713-cfe7f94c4aab" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/004200237/enhancedCostCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="7a126b6c-440d-4505-93b4-fdbc9c3a1806" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get promotion to check_MVNO" id="2c13b3d8-1f81-4d27-b516-7d6d9159910e" disabled="true"><con:settings/><con:config service="/default/promo" resourcePath="/discount.qualifier.ws-1.0.x/promo/offer/{offerCode}/price/{priceCode}" methodName="getPromoByOfferCodeAndPrice" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get promotion to check_MVNO" id="25bf5c2e-533d-452b-85d5-5747b5a22479" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/discount.qualifier.ws-1.0.x/promo/offer/MVNO/price/1</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="71ad5e29-4db1-40be-8ec7-e6fefeed5e87" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="priceCode" value="1"/>
  <con:entry key="offerCode" value="MVNO"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">003002773</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9656f05-50b4-4b2d-956d-55da470d6084</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1849f0f6-6afd-49d6-8aeb-a030543973ac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f483b2a3-b9d2-4d36-b7b3-f6a8cfda47f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d8ac3efb-f813-4abb-b693-6cc410532311</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c2e366d-7905-447b-9f87-7e1270aae1be</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c509f4fc-6e5c-470e-96ec-9ebe79c55483</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>749c22a1-d3cb-4400-ab0a-792db7f86cbe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f772d6e4-d014-43be-a149-0d8c7bc7ca64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8c2b08f0-1f1d-48af-a27d-71b0fe64bff9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b830b115-99fa-4d01-9f96-76c767233059</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ddd93480-e0ae-4b75-93c5-cfc4c84a5a89</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c58844f8-6366-4985-bde7-de7771600100</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>07cc615e-66fe-4fc0-9626-18e335583a99</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eb7b613a-5deb-469e-9fbe-e2e6e1b825ef</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0482d848-6bdc-4cfa-b5a4-6b48359afa81</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f7e66492-33b6-4547-b086-5bab7d55e56f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>aa77ac60-220b-49ff-a6d2-89113f5b7f1d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e422417d-73b1-481c-9299-98aa879bdfe2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>449eeb80-e2ed-445c-ab8c-379d8bef0f52</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="fd258f2d-e1ee-4a2b-b1ce-eefb65a2d730" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03. Calculate cost for command WITH one reduction TRUE at level draftLigneDetail_mvnoPack" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="87a36619-7979-453e-ab25-b0aeb443c10a"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommand</con:name><con:value>702002403</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_SIM</con:value></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value>0312345</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="00908d10-5e7a-4904-a988-33c1e46836ff"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey4",'192112')
testRunner.testCase.setPropertyValue( "handleKey4",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("redDraftLigneDetail",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("Promo1",null)
testRunner.testCase.getTestStepByName("1. Transform a draft to command manual reduction for draftLigneDetail").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform a draft to command manual reduction for draftLigneDetail" id="f772d6e4-d014-43be-a149-0d8c7bc7ca64"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>4023001f-206d-44e6-8a6f-08d119bb91ee</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>702002403</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_SIM</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>handleKey4</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value>0312345</con:value></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>customerKey4</con:entry><con:entry>handleKey4</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>redDraftLigneDetail</con:entry><con:entry>Promo1</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="901b25ee-6d77-4d18-bd9a-5c0a5a7388a8"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform a draft to command manual reduction for draftLigneDetail</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:sourcePath/><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>redDraftLigneDetail</con:name><con:sourceType>redDraftLigneDetail</con:sourceType><con:sourceStep>1. Transform a draft to command manual reduction for draftLigneDetail</con:sourceStep><con:sourcePath/><con:targetType>redDraftLigneDetail</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo1</con:name><con:sourceType>Promo1</con:sourceType><con:sourceStep>1. Transform a draft to command manual reduction for draftLigneDetail</con:sourceStep><con:targetType>Promo1</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Update all ELIGBILE to FALSE" id="9189e7a4-b8c6-4163-83a1-93222a6ad2f8"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = false where referenceDraft = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple Contains" id="0ccc6d1c-21a7-440f-af74-5e08305ce544" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Make sure Eligible FALSE" id="ddd93480-e0ae-4b75-93c5-cfc4c84a5a89"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple NotContains" id="153bf2a0-a71e-4bb8-8d9d-6e8a84ebf3ef" name="Not Contains Eligible TRUE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. Calculate cost for command before reduction" id="b830b115-99fa-4d01-9f96-76c767233059"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Calculate cost for command before reduction" id="3fab0599-c965-4ad8-80b4-281baa0426e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/037210040/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="93100678-21bd-484e-bc25-9593dafc4884" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Update one ELIGBILE to TRUE_Reduction of draftLigneDetail" id="8c2b08f0-1f1d-48af-a27d-71b0fe64bff9"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = true where referenceDraft = "${commandInfo#refCommand}" and codeCatalogueReduction = '${commandInfo#redDraftLigneDetail}';</con:query><con:assertion type="Simple Contains" id="0ccc6d1c-21a7-440f-af74-5e08305ce544" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Make sure Eligible TRUE_Reduction of draftLigneDetail" id="c5fb576d-9082-47e7-981c-16dd48902758"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${commandInfo#refCommand}" and codeCatalogueReduction = '${commandInfo#redDraftLigneDetail}';</con:query><con:assertion type="Simple Contains" id="0ccc6d1c-21a7-440f-af74-5e08305ce544" name="Contains"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="3. Calculate cost for command with one reduction DraftLigneDetail" id="c0317139-94f8-47a0-b092-37f7bb07f580"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Calculate cost for command with one reduction DraftLigneDetail" id="3fab0599-c965-4ad8-80b4-281baa0426e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/037210040/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8345422f-ca7e-4485-8717-b216c6649d6b" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4. getInfosBonCommande" id="16c690c9-b918-4f82-9236-4290d37cd14f"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/getInfosBonCommande" methodName="getInfosBonCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. getInfosBonCommande" id="da0a0e74-02cb-495e-8eba-4888c52652d7" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/702001504/getInfosBonCommande</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get promotion to check_MVNO" id="06a2619f-c63a-4bbc-9a7a-e80a3e2a8a5e" disabled="true"><con:settings/><con:config service="/default/promo" resourcePath="/discount.qualifier.ws-1.0.x/promo/offer/{offerCode}/price/{priceCode}" methodName="getPromoByOfferCodeAndPrice" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get promotion to check_MVNO" id="25bf5c2e-533d-452b-85d5-5747b5a22479" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/discount.qualifier.ws-1.0.x/promo/offer/MVNO/price/1</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="71ad5e29-4db1-40be-8ec7-e6fefeed5e87" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="priceCode" value="1"/>
  <con:entry key="offerCode" value="MVNO"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">702002403</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9656f05-50b4-4b2d-956d-55da470d6084</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1849f0f6-6afd-49d6-8aeb-a030543973ac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f483b2a3-b9d2-4d36-b7b3-f6a8cfda47f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d8ac3efb-f813-4abb-b693-6cc410532311</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c2e366d-7905-447b-9f87-7e1270aae1be</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c509f4fc-6e5c-470e-96ec-9ebe79c55483</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>749c22a1-d3cb-4400-ab0a-792db7f86cbe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f772d6e4-d014-43be-a149-0d8c7bc7ca64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8c2b08f0-1f1d-48af-a27d-71b0fe64bff9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b830b115-99fa-4d01-9f96-76c767233059</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ddd93480-e0ae-4b75-93c5-cfc4c84a5a89</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>16c690c9-b918-4f82-9236-4290d37cd14f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="435ae077-bcfc-4720-8776-a6f0e92780bb" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="04. Calculate cost for command WITH one reduction for Tarif of draftLigne_mvnoConso" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="1cdb822c-2f6a-4bab-9de0-c288eb14744f"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommand</con:name><con:value>325000032</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redDraftLigne</con:name><con:value>0212345</con:value></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>TarifredDraftLigneDetail</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redTarifDraftLigneDetail</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value>0612345</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="4098abb8-73e8-4e88-a730-4396fb6ef1b5"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("redTarifDraftLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("Promo1",null)
testRunner.testCase.getTestStepByName("1. Transform a draft to command manual reduction for Tarif of draftLigne").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform a draft to command manual reduction for Tarif of draftLigne" id="ed67892d-5969-4f58-b910-e99ba696f6b1"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5cebccc2-023b-4473-8ba1-223539a356ba</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>325000032</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value>0612345</con:value></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>Promo1</con:entry><con:entry>redTarifDraftLigne</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="b8412303-ca59-426b-bea5-56667c91cfbf"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform a draft to command manual reduction for Tarif of draftLigne</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:sourcePath/><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>redTarifDraftLigne</con:name><con:sourceType>redTarifDraftLigne</con:sourceType><con:sourceStep>1. Transform a draft to command manual reduction for Tarif of draftLigne</con:sourceStep><con:sourcePath/><con:targetType>redTarifDraftLigne</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo1</con:name><con:sourceType>Promo1</con:sourceType><con:sourceStep>1. Transform a draft to command manual reduction for Tarif of draftLigne</con:sourceStep><con:targetType>Promo1</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Update all ELIGBILE to FALSE" id="03b2a24e-9884-46ae-9288-ac6860a8b209"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = false where referenceDraft = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple Contains" id="0ccc6d1c-21a7-440f-af74-5e08305ce544" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Make sure Eligible FALSE" id="56d2ec01-9915-4bb1-b143-2b182fe74c29"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple NotContains" id="678b27ea-7e62-41c0-85e5-82ea0bb1a651" name="Not Contains"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. Calculate cost for command before reduction" id="542453e8-9e0c-484c-9281-c99dd4cac6bc"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Calculate cost for command before reduction" id="3fab0599-c965-4ad8-80b4-281baa0426e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/037210040/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="93100678-21bd-484e-bc25-9593dafc4884" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Update one ELIGBILE to TRUE_Reduction for Tarif of draftLigne" id="b6b37994-2808-4c0c-bfe4-4e65635a81e6"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = true where referenceDraft = "${commandInfo#refCommand}" and codeCatalogueReduction = '${commandInfo#redTarifDraftLigne}';</con:query><con:assertion type="Simple Contains" id="0ccc6d1c-21a7-440f-af74-5e08305ce544" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Make sure eligible of reduction for Tarif of DraftLigne TRUE" id="fac9b56b-bf19-4ec0-a485-bbc294a4292d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${commandInfo#refCommand}" and codeCatalogueReduction = '${commandInfo#redTarifDraftLigne}';</con:query><con:assertion type="Simple Contains" id="0ccc6d1c-21a7-440f-af74-5e08305ce544" name="Contains"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="3. Calculate cost for command with one reduction DraftLigne" id="2eef7be3-6187-4202-8484-fb40fc0cc513"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Calculate cost for command with one reduction DraftLigne" id="3fab0599-c965-4ad8-80b4-281baa0426e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/037210040/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="0e2d4e0d-e47e-438b-bd8e-ef5316c24452" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get promotion to check_MVNO" id="c2376aee-defe-4bc5-aa89-ce32c53a3a09" disabled="true"><con:settings/><con:config service="/default/promo" resourcePath="/discount.qualifier.ws-1.0.x/promo/offer/{offerCode}/price/{priceCode}" methodName="getPromoByOfferCodeAndPrice" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get promotion to check_MVNO" id="25bf5c2e-533d-452b-85d5-5747b5a22479" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/discount.qualifier.ws-1.0.x/promo/offer/MVNO/price/1</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="71ad5e29-4db1-40be-8ec7-e6fefeed5e87" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="priceCode" value="1"/>
  <con:entry key="offerCode" value="MVNO"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">325000032</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9656f05-50b4-4b2d-956d-55da470d6084</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1849f0f6-6afd-49d6-8aeb-a030543973ac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f483b2a3-b9d2-4d36-b7b3-f6a8cfda47f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d8ac3efb-f813-4abb-b693-6cc410532311</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c2e366d-7905-447b-9f87-7e1270aae1be</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c509f4fc-6e5c-470e-96ec-9ebe79c55483</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>749c22a1-d3cb-4400-ab0a-792db7f86cbe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f772d6e4-d014-43be-a149-0d8c7bc7ca64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8c2b08f0-1f1d-48af-a27d-71b0fe64bff9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b830b115-99fa-4d01-9f96-76c767233059</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ddd93480-e0ae-4b75-93c5-cfc4c84a5a89</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c58844f8-6366-4985-bde7-de7771600100</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="be20a15b-d13f-41cc-beba-0b96e310fdf1" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="05. Calculate cost for command WITH all reductions TRUE_mvnoConso" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="75f56851-0017-4d28-9275-75a01f7b99bb"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003263</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>302002303</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="552b6993-a034-4008-adc2-d4522ea43ce6"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("1. Create a draft with reduction of draft_mvnoConso").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with reduction of draft_mvnoConso" id="dc15032c-d0bf-4e10-92b7-5ca9d658dd24"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>eeac9de4-e3ba-43ca-b26d-64d5977bd5f5</con:targetTestCase><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003263</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003284</con:value></con:property></con:properties><con:returnProperties><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to commandInfo" id="d9cb3086-073a-41e7-86d8-dbd63c051a22"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with reduction of draft_mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with reduction" id="46eca2fb-0c73-4a63-978c-3429930ab032"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with reduction" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
      "ip":{"ip":"10.190.29.140"}
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"${#TestCase#handleKey3}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"${#TestCase#handleKey3}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"${#TestCase#handleKey3}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="31bab8b5-267a-4c3d-bd93-c8cbc300cbe5" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a4e26616-452c-4a7e-80fb-3f27b6389eda" name="Contains"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="deb4ceb5-339b-4895-b4f8-75bc64783712"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommande</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with reduction</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with reduction</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Update ELIGBILE to FALSE" id="1ea97ce1-3819-4a51-9aff-7500ef09eae2"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = false where referenceDraft = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple Contains" id="0ccc6d1c-21a7-440f-af74-5e08305ce544" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Make sure Eligible FALSE" id="72f4de6a-32de-4338-b402-52ab0b3f10a7"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple NotContains" id="2dd1779f-d945-4468-a036-296a64b8d6b1" name="Not Contains Eligible TRUE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="3. Calculate cost for command_Cost has no changes" id="54f18d4b-845e-49d6-8347-66aaaf004a0b"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Calculate cost for command_Cost has no changes" id="3fab0599-c965-4ad8-80b4-281baa0426e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/037210040/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="93100678-21bd-484e-bc25-9593dafc4884" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Update ELIGBILE to TRUE" id="92fc4e15-fafc-4fa6-b90f-6d01813c9e3a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = true where referenceDraft = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple Contains" id="0ccc6d1c-21a7-440f-af74-5e08305ce544" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Make sure Eligible TRUE" id="24ab166b-b610-45d6-bdb9-a3ec047ab119"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple NotContains" id="2dd1779f-d945-4468-a036-296a64b8d6b1" name="Not Contains Eligible TRUE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>0&lt;/REDUCTION.ELIGIBLE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="4. Calculate cost for command_Cost must be reduced with reductions" id="6c482e64-bf18-4042-af68-d2c14d710ea9"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Calculate cost for command_Cost must be reduced with reductions" id="3fab0599-c965-4ad8-80b4-281baa0426e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/037210040/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="d689183d-dcd3-4537-a545-b8e7e30ec930" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get promotion to check_MVNO" id="385c1f78-126f-4b49-9cfd-93ef0da5d758" disabled="true"><con:settings/><con:config service="/default/promo" resourcePath="/discount.qualifier.ws-1.0.x/promo/offer/{offerCode}/price/{priceCode}" methodName="getPromoByOfferCodeAndPrice" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get promotion to check_MVNO" id="25bf5c2e-533d-452b-85d5-5747b5a22479" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/discount.qualifier.ws-1.0.x/promo/offer/MVNO/price/1</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="71ad5e29-4db1-40be-8ec7-e6fefeed5e87" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="priceCode" value="1"/>
  <con:entry key="offerCode" value="MVNO"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">302002303</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9656f05-50b4-4b2d-956d-55da470d6084</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1849f0f6-6afd-49d6-8aeb-a030543973ac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f483b2a3-b9d2-4d36-b7b3-f6a8cfda47f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d8ac3efb-f813-4abb-b693-6cc410532311</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c2e366d-7905-447b-9f87-7e1270aae1be</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c509f4fc-6e5c-470e-96ec-9ebe79c55483</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>749c22a1-d3cb-4400-ab0a-792db7f86cbe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>70a697af-40b5-4e35-84d6-1c1edcdd67fa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>92fc4e15-fafc-4fa6-b90f-6d01813c9e3a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>24ab166b-b610-45d6-bdb9-a3ec047ab119</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6c482e64-bf18-4042-af68-d2c14d710ea9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c5fb576d-9082-47e7-981c-16dd48902758</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="04b40147-3021-42c6-a665-9841972a6703" name="calculerCoutDraft"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="d96ba1ca-302a-4e35-bece-f2f57ea65b43" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01. Calculate cost for Draft WITH reduction BUT Eligible FALSE_Cost no changes" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="draftInfo" id="1375fb6e-bf1c-4e89-9328-eb5c6ccdba85"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00002274</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00002281</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null 2" id="f2dd11b8-3d41-4564-960c-4b10b6f8f7c4"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue( "refDraftGlobal",null)
testRunner.testCase.setPropertyValue( "refDraftLigneGlobal",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftGlobal",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftLigneGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with mvno_conso" id="e5943afc-937e-47c7-ab09-d6f63d5c9b7e"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>de4f846c-30c6-4009-99fa-1d548af5c9a0</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002274</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00002281</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to draftInfo 2" id="39a8bf29-3363-4815-a083-5b0cf30eec93"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>refDraft</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>refDraftLigneGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refDraftLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>refDraftLigne</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="1.1 Calculate cost before association reduction" id="6fec487c-744c-4361-b177-18b222fe003a"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1.1 Calculate cost before association reduction" id="1dde915e-49e9-44e7-ab71-824265a9bf5a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00002087/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="bed804a5-505c-4225-8415-4eeac629d217" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2. Associate a reduction for draft" id="fac9b51e-726c-469b-8006-bc571dbb1c01"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/associerReduction" methodName="associerReduction" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Associate a reduction for draft" id="a15d43e2-92b7-48c6-9b9e-e68e0083c64c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0112345",
"nbUtilisationMax": "1",
"label": "reduction draft",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/6e17cc68-7a21-475c-b59e-568b7bb37e61/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e7290574-2afb-4971-9c5f-02e44a8b01d4" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Update ELIGBILE to FALSE" id="7aee3a54-bcbf-4f61-bcb5-1abd163f23fb"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = false where referenceDraft = "${draftInfo#refDraft}";</con:query><con:assertion type="Simple Contains" id="0ccc6d1c-21a7-440f-af74-5e08305ce544" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Make sure Eligible FALSE" id="4a23582e-5ef6-4452-92bf-d762c5357b7a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${draftInfo#refDraft}";</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - One reduction is found"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="feabb239-c7a6-4bed-ad42-4271dcddb6a0" name="Code catalog reduction must be"><con:configuration><token>&lt;REDUCTION.CODECATALOGUEREDUCTION>0112345&lt;/REDUCTION.CODECATALOGUEREDUCTION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="06f9cc6d-932f-4808-8bed-4622c904693c" name="Reference draft must be"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${draftInfo#refDraft}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b3ed1327-e3a6-40e7-bd94-1c6623249b0d" name="Reference Ligne must be null"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNE/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="67fe79cd-bde6-4f8c-a524-1483035db714" name="Reference ligne detail must be null"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNEDETAIL/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8f1d6bf-424a-4bd1-a81e-bfe084780bbb" name="Reduction fraise must be null"><con:configuration><token>&lt;REDUCTION.REFERENCEFRAIS/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="676fb18e-e3eb-4d7f-bec4-4e05c06f153a" name="Reference tarif must be null"><con:configuration><token>&lt;REDUCTION.REFERENCETARIF/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Eligible must be FALSE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>0&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2.1 Calculate cost after association reduction" id="608f7f3d-a763-43db-8c85-7b5b273fa833"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.1 Calculate cost after association reduction" id="1dde915e-49e9-44e7-ab71-824265a9bf5a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00002087/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4a9672b5-1cf2-4645-abed-83811f5bd8c4" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="ba7fa95e-7ff7-473a-ab29-ce8336dff657" name="Cost is not changed"><con:configuration><token>"coutComptantHT":0.00,"coutComptantTTC":0.00,"coutComptantReduitHT":null,"coutComptantReduitTTC":null,"montantTva":0.00,"reductionHT":0.00,"reductionTTC":0.00,"tva":20.00,"coutRecurrentGlobale":[{"frequence":1,"normal":{"tarifHT":1.67,"tarifTTC":2.00,"tarifTva":0.33},"reduit":{"tarifHT":1.67,"tarifTTC":2.00,"tarifTva":0.33}}],"details":[{"coutComptantHT":0.00,"coutComptantTTC":0.00,"coutComptantReduitHT":null,"coutComptantReduitTTC":null,"montantTva":0.00,"reductionHT":0.00,"reductionTTC":0.00,"tva":20.00,"frequence":null,"numero":"LID-00002209","label":"MVNO","coutRecurrent":{"frequence":1,"normal":{"tarifHT":1.67,"tarifTTC":2.00,"tarifTva":0.33},"reduit":{"tarifHT":1.67,"tarifTTC":2.00,"tarifTva":0.33}}}]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002274</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00002281</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>03fd2a76-20a7-4fcc-8c1b-48a5f8721b3b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7aee3a54-bcbf-4f61-bcb5-1abd163f23fb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="2268a672-3b64-47fb-bc5f-3fb266b1a816" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.01 Calculate cost for Draft WITH one reduction draft and eligible TRUE_mvnoConso" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="draftInfo" id="05d77540-a5ec-44d9-ab93-45f91ed8ec59"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00002275</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00002282</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null 2" id="a34491c1-b467-47b3-8075-6742efe0730d"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue( "refDraftGlobal",null)
testRunner.testCase.setPropertyValue( "refDraftLigneGlobal",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftGlobal",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftLigneGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with mvno_conso" id="2c491ed0-d5e8-4784-83ac-c7b7e90e78bd"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>de4f846c-30c6-4009-99fa-1d548af5c9a0</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002275</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00002282</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to draftInfo 2" id="ceb45c9c-7c99-433a-ac05-63aad57bb7d5"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>refDraft</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>refDraftLigneGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refDraftLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>refDraftLigneGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:targetType>refDraftLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="1.1 Calculate cost before association reduction" id="03fd2a76-20a7-4fcc-8c1b-48a5f8721b3b"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1.1 Calculate cost before association reduction" id="1dde915e-49e9-44e7-ab71-824265a9bf5a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00002087/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="bed804a5-505c-4225-8415-4eeac629d217" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2. Associate a reduction for draft_Eligbile TRUE" id="d13e91e2-ced4-447f-bda5-d78eff4f34f4"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/associerReduction" methodName="associerReduction" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Associate a reduction for draft_Eligbile TRUE" id="a15d43e2-92b7-48c6-9b9e-e68e0083c64c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0112345",
"nbUtilisationMax": "1",
"label": "reduction draft",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/6e17cc68-7a21-475c-b59e-568b7bb37e61/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e7290574-2afb-4971-9c5f-02e44a8b01d4" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Make sure Eligible TRUE" id="431cc901-ea5e-4232-9463-e58042794c28"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${draftInfo#refDraft}";</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - One reduction is found"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="feabb239-c7a6-4bed-ad42-4271dcddb6a0" name="Code catalog reduction must be"><con:configuration><token>&lt;REDUCTION.CODECATALOGUEREDUCTION>0112345&lt;/REDUCTION.CODECATALOGUEREDUCTION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="06f9cc6d-932f-4808-8bed-4622c904693c" name="Reference draft must be"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${draftInfo#refDraft}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b3ed1327-e3a6-40e7-bd94-1c6623249b0d" name="Reference Ligne must be null"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNE/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="67fe79cd-bde6-4f8c-a524-1483035db714" name="Reference ligne detail must be null"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNEDETAIL/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8f1d6bf-424a-4bd1-a81e-bfe084780bbb" name="Reduction fraise must be null"><con:configuration><token>&lt;REDUCTION.REFERENCEFRAIS/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="676fb18e-e3eb-4d7f-bec4-4e05c06f153a" name="Reference tarif must be null"><con:configuration><token>&lt;REDUCTION.REFERENCETARIF/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Eligible must be TRUE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2.2 Calculate cost after association reduction" id="db7d721c-a41d-4ed3-8ff9-46220922bb15"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.2 Calculate cost after association reduction" id="1dde915e-49e9-44e7-ab71-824265a9bf5a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00002087/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4a9672b5-1cf2-4645-abed-83811f5bd8c4" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b903aa1-bbaf-4ffc-aeaa-6b2b8855f756" name="Contains"><con:configuration><token>"coutComptantHT":0.00,"coutComptantTTC":0.00,"coutComptantReduitHT":null,"coutComptantReduitTTC":null,"montantTva":0.00,"reductionHT":0.00,"reductionTTC":0.00,"tva":20.00,"coutRecurrentGlobale":[{"frequence":1,"normal":{"tarifHT":1.67,"tarifTTC":2.00,"tarifTva":0.33},"reduit":{"tarifHT":0.84,"tarifTTC":2.00,"tarifTva":1.16}}],"details":[{"coutComptantHT":0.00,"coutComptantTTC":0.00,"coutComptantReduitHT":null,"coutComptantReduitTTC":null,"montantTva":0.00,"reductionHT":0.00,"reductionTTC":0.00,"tva":20.00,"frequence":null,"numero":"LID-00002199","label":"MVNO","coutRecurrent":{"frequence":1,"normal":{"tarifHT":1.67,"tarifTTC":2.00,"tarifTva":0.33},"reduit":{"tarifHT":0.84,"tarifTTC":2.00,"tarifTva":1.16}}}]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002275</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>03fd2a76-20a7-4fcc-8c1b-48a5f8721b3b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="578f2bc1-3499-42a9-9be5-b35d4fb2d9da" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.02 Calculate cost for Draft WITH one reduction TRUE and one reduction FALSE_mvnoConso" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="draftInfo" id="a9f971fb-2ade-4f53-95a7-f702019efc99"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00002277</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00002284</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null 2" id="116e2cbb-bdee-4d20-bc36-db6a1d223ffd"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue( "refDraftGlobal",null)
testRunner.testCase.setPropertyValue( "refDraftLigneGlobal",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftGlobal",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftLigneGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with mvno_conso" id="ed1a1fc5-f87f-4294-910d-5a47799e9a3f"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>de4f846c-30c6-4009-99fa-1d548af5c9a0</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002277</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00002284</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to draftInfo 2" id="05930284-b96b-4310-b70a-d6a30017eb6f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>refDraft</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>refDraftLigneGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refDraftLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>refDraftLigneGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:targetType>refDraftLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="1.1 Calculate cost before association reduction" id="13720124-474b-4983-850e-7909ecf5ed41"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1.1 Calculate cost before association reduction" id="1dde915e-49e9-44e7-ab71-824265a9bf5a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00002087/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="bed804a5-505c-4225-8415-4eeac629d217" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2. Associate a reduction 1 for draft" id="8344d83f-66af-4151-9bb3-52fa53f4dc1c"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/associerReduction" methodName="associerReduction" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Associate a reduction 1 for draft" id="a15d43e2-92b7-48c6-9b9e-e68e0083c64c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "5",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0112345",
"nbUtilisationMax": "1",
"label": "reduction draft",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/6e17cc68-7a21-475c-b59e-568b7bb37e61/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e7290574-2afb-4971-9c5f-02e44a8b01d4" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Update ELIGBILE to FALSE" id="5d03292e-fb0f-4490-bc22-f728442a0062"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = false where referenceDraft = "${draftInfo#refDraft}";</con:query><con:assertion type="Simple Contains" id="0ccc6d1c-21a7-440f-af74-5e08305ce544" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Make sure Eligible FALSE" id="e437b0ea-8b94-49ea-b89b-bcdd4d68be6a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${draftInfo#refDraft}";</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - One reduction is found"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="feabb239-c7a6-4bed-ad42-4271dcddb6a0" name="Code catalog reduction must be"><con:configuration><token>&lt;REDUCTION.CODECATALOGUEREDUCTION>0112345&lt;/REDUCTION.CODECATALOGUEREDUCTION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="06f9cc6d-932f-4808-8bed-4622c904693c" name="Reference draft must be"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${draftInfo#refDraft}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b3ed1327-e3a6-40e7-bd94-1c6623249b0d" name="Reference Ligne must be null"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNE/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="67fe79cd-bde6-4f8c-a524-1483035db714" name="Reference ligne detail must be null"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNEDETAIL/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8f1d6bf-424a-4bd1-a81e-bfe084780bbb" name="Reduction fraise must be null"><con:configuration><token>&lt;REDUCTION.REFERENCEFRAIS/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="676fb18e-e3eb-4d7f-bec4-4e05c06f153a" name="Reference tarif must be null"><con:configuration><token>&lt;REDUCTION.REFERENCETARIF/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Eligible must be FALSE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>0&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="3. Associate a reduction 2 for draft_Eligbile TRUE" id="00a9fda8-c71b-42a9-9781-cc818123b0a1"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/associerReduction" methodName="associerReduction" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Associate a reduction 2 for draft_Eligbile TRUE" id="a15d43e2-92b7-48c6-9b9e-e68e0083c64c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0112345",
"nbUtilisationMax": "1",
"label": "reduction draft",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/6e17cc68-7a21-475c-b59e-568b7bb37e61/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e7290574-2afb-4971-9c5f-02e44a8b01d4" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Make sure Eligible TRUE" id="66ce9691-e6f7-4833-b66b-f71021add6c7"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${draftInfo#refDraft}";</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - One reduction is found"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="feabb239-c7a6-4bed-ad42-4271dcddb6a0" name="Code catalog reduction must be"><con:configuration><token>&lt;REDUCTION.CODECATALOGUEREDUCTION>0112345&lt;/REDUCTION.CODECATALOGUEREDUCTION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="06f9cc6d-932f-4808-8bed-4622c904693c" name="Reference draft must be"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${draftInfo#refDraft}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b3ed1327-e3a6-40e7-bd94-1c6623249b0d" name="Reference Ligne must be null"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNE/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="67fe79cd-bde6-4f8c-a524-1483035db714" name="Reference ligne detail must be null"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNEDETAIL/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8f1d6bf-424a-4bd1-a81e-bfe084780bbb" name="Reduction fraise must be null"><con:configuration><token>&lt;REDUCTION.REFERENCEFRAIS/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="676fb18e-e3eb-4d7f-bec4-4e05c06f153a" name="Reference tarif must be null"><con:configuration><token>&lt;REDUCTION.REFERENCETARIF/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Eligible must be TRUE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="4. Calculate cost after association reduction" id="3fe06761-c2b1-4f9a-961e-7a9435ee1a9c"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Calculate cost after association reduction" id="1dde915e-49e9-44e7-ab71-824265a9bf5a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00002087/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4a9672b5-1cf2-4645-abed-83811f5bd8c4" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="0c03b9f5-f7eb-4a4a-af2c-ee1c8b5bc517" name="Contains" disabled="true"><con:configuration><token>""</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002277</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>03fd2a76-20a7-4fcc-8c1b-48a5f8721b3b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8344d83f-66af-4151-9bb3-52fa53f4dc1c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5d03292e-fb0f-4490-bc22-f728442a0062</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e437b0ea-8b94-49ea-b89b-bcdd4d68be6a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="696e43d6-b55a-43b2-a6b9-87f5016e60fc" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03.01 Calculate cost for draft WITH reduction for draftLigne and Eligible TRUE_mvnoConso" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="draftInfo" id="b91f4b94-2d4c-4d21-b518-c9a6a209af4c"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00002301</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00002308</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="f1c2bdfa-9553-4d2d-8482-639bc4e5c68d"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue( "refDraftGlobal",null)
testRunner.testCase.setPropertyValue( "refDraftLigneGlobal",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftGlobal",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftLigneGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with mvno_conso" id="45921caa-eefb-4fb0-9fea-96dd7f17a6cf"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>de4f846c-30c6-4009-99fa-1d548af5c9a0</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002301</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00002308</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to draftInfo" id="97d1883f-bc10-48be-97d7-8ec9731a81b3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>refDraftLigneGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refDraftLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>refDraft</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>refDraftLigne</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="1.1 Calculate the cost of draftLigne WITHOUT reduction" id="c09a5618-e1e1-43d0-8fd2-f71fe6d89652"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1.1 Calculate the cost of draftLigne WITHOUT reduction" id="1dde915e-49e9-44e7-ab71-824265a9bf5a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00002087/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="bed804a5-505c-4225-8415-4eeac629d217" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2. Associate a reduction for draftLigne" id="fbcd0ba9-c329-4ba5-b405-851b6f59f316"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/associerReduction" methodName="associerReductionLigne" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Associate a reduction for draftLigne" id="3ea26430-5ba4-4619-abcd-7ab79679f676" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0212345",
"nbUtilisationMax": "1",
"label": "reduction draft ligne",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/b98cf8a6-7a86-4035-ac65-b3956b9345c8/ligne//associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e0d81c71-eebb-456b-bc67-5fd5c610cde7" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Select reduction to check_Eligible must be TRUE" id="3f8092fe-ebc5-43b0-ac70-b31c493fd7d5"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${draftInfo#refDraft}";</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - One reduction is found"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="feabb239-c7a6-4bed-ad42-4271dcddb6a0" name="Code catalog reduction must be"><con:configuration><token>&lt;REDUCTION.CODECATALOGUEREDUCTION>0212345&lt;/REDUCTION.CODECATALOGUEREDUCTION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="06f9cc6d-932f-4808-8bed-4622c904693c" name="Reference draft must be"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${draftInfo#refDraft}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b3ed1327-e3a6-40e7-bd94-1c6623249b0d" name="Reference Ligne must be"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNE>${draftInfo#refDraftLigne}&lt;/REDUCTION.REFERENCELIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="67fe79cd-bde6-4f8c-a524-1483035db714" name="Reference ligne detail must be null"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNEDETAIL/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8f1d6bf-424a-4bd1-a81e-bfe084780bbb" name="Reduction fraise must be null"><con:configuration><token>&lt;REDUCTION.REFERENCEFRAIS/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="676fb18e-e3eb-4d7f-bec4-4e05c06f153a" name="Reference tarif must be null"><con:configuration><token>&lt;REDUCTION.REFERENCETARIF/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Eligible must be TRUE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2.2 Calculate the cost of Draft WITH reduction" id="4fd54b10-541a-48ab-aa78-edeeed89aca0"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.2 Calculate the cost of Draft WITH reduction" id="1dde915e-49e9-44e7-ab71-824265a9bf5a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00002087/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4a9672b5-1cf2-4645-abed-83811f5bd8c4" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002301</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00002308</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>584ef314-c9aa-4407-b133-a9544f8de2c9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>19f91eaf-f65f-4a78-be0d-dc6ef8b092fe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e95fd708-e93f-4fa6-908c-4796abc88c72</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bd286d96-da49-4054-b63b-56b6b4f34d5d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c09a5618-e1e1-43d0-8fd2-f71fe6d89652</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fbcd0ba9-c329-4ba5-b405-851b6f59f316</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="6965f1d0-133e-4d69-a682-fde90e8d9a4d" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03.02. Calculate cost for draft WITH reduction for draftLigne and Eligible TRUE_mvnoPack" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="draftInfo" id="5dde4c73-9f54-4f03-bed8-9dc50b178c5d"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00002221</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00002228</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="5456f0ac-9e77-4b20-823e-b75275c2ff94"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue( "refDraftGlobal",null)
testRunner.testCase.setPropertyValue( "refDraftLigneGlobal",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftGlobal",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftLigneGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with mvno_pack" id="459bea8a-c366-4a47-b86d-d61618fa239b"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>cf053310-7ebc-4c65-b3da-1a01ead5b478</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002221</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00002228</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry><con:entry>customerKey4</con:entry><con:entry>handleKey4</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to draftInfo" id="d4ffc088-1f2a-4827-95d6-c60cda0e5467"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_pack</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>refDraftLigneGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_pack</con:sourceStep><con:sourcePath/><con:targetType>refDraftLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>refDraft</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>refDraftLigne</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="1.1 Calculate the cost of draftLigne WITHOUT reduction" id="9c80890d-1af3-493c-8907-c00cea653f03"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1.1 Calculate the cost of draftLigne WITHOUT reduction" id="1dde915e-49e9-44e7-ab71-824265a9bf5a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00002087/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="bed804a5-505c-4225-8415-4eeac629d217" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2. Associate a reduction for draftLigne" id="bd43cb89-2e74-44bd-adff-4426c60e6830"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/associerReduction" methodName="associerReductionLigne" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Associate a reduction for draftLigne" id="3ea26430-5ba4-4619-abcd-7ab79679f676" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0212345",
"nbUtilisationMax": "1",
"label": "reduction draft ligne",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/b98cf8a6-7a86-4035-ac65-b3956b9345c8/ligne//associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e0d81c71-eebb-456b-bc67-5fd5c610cde7" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Select reduction to check_Eligible must be TRUE" id="aabab4a9-90e8-48de-a951-54ca85ad5e65"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${draftInfo#refDraft}";</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - One reduction is found"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="feabb239-c7a6-4bed-ad42-4271dcddb6a0" name="Code catalog reduction must be"><con:configuration><token>&lt;REDUCTION.CODECATALOGUEREDUCTION>0212345&lt;/REDUCTION.CODECATALOGUEREDUCTION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="06f9cc6d-932f-4808-8bed-4622c904693c" name="Reference draft must be"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${draftInfo#refDraft}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b3ed1327-e3a6-40e7-bd94-1c6623249b0d" name="Reference Ligne must be"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNE>${draftInfo#refDraftLigne}&lt;/REDUCTION.REFERENCELIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="67fe79cd-bde6-4f8c-a524-1483035db714" name="Reference ligne detail must be null"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNEDETAIL/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8f1d6bf-424a-4bd1-a81e-bfe084780bbb" name="Reduction fraise must be null"><con:configuration><token>&lt;REDUCTION.REFERENCEFRAIS/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="676fb18e-e3eb-4d7f-bec4-4e05c06f153a" name="Reference tarif must be null"><con:configuration><token>&lt;REDUCTION.REFERENCETARIF/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Eligible must be TRUE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2.2 Calculate the cost of Draft WITH reduction" id="7e1da4fa-ea0f-49ac-89dc-0152491e8acf"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.2 Calculate the cost of Draft WITH reduction" id="1dde915e-49e9-44e7-ab71-824265a9bf5a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00002087/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4a9672b5-1cf2-4645-abed-83811f5bd8c4" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002221</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00002228</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>584ef314-c9aa-4407-b133-a9544f8de2c9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>19f91eaf-f65f-4a78-be0d-dc6ef8b092fe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e95fd708-e93f-4fa6-908c-4796abc88c72</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bd286d96-da49-4054-b63b-56b6b4f34d5d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c09a5618-e1e1-43d0-8fd2-f71fe6d89652</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fbcd0ba9-c329-4ba5-b405-851b6f59f316</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="edda59c8-7b4e-4549-826b-92fd7352777d" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="04.01 Calculate cost for Draft with reduction for draftLigneDetail_mvnoPack" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="draftInfo" id="281cebb6-6986-4848-8821-3e0210dbc4b4"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00002253</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00002260</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="c4a4a630-69c0-4aef-8bfa-e371d7eea623"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey4",'192112')
testRunner.testCase.setPropertyValue( "handleKey4",'511708010')
testRunner.testCase.setPropertyValue( "refDraftGlobal",null)
testRunner.testCase.setPropertyValue( "refDraftLigneGlobal",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_pack").setPropertyValue("refDraftGlobal",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_pack").setPropertyValue("refDraftLigneGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with mvno_pack" id="0dd31a23-3e84-43e0-983c-9cf22c20b190"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>cf053310-7ebc-4c65-b3da-1a01ead5b478</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002253</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00002260</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry><con:entry>customerKey4</con:entry><con:entry>handleKey4</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to draftInfo" id="775126b3-9e5d-4183-b5f1-6076a3446141"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_pack</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>refDraftLigneGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_pack</con:sourceStep><con:sourcePath/><con:targetType>refDraftLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>refDraft</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>refDraftLigne</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="1.1 Calculate the cost of draftLigne WITHOUT reduction" id="fe699630-2986-4e42-a83c-766a12f88e77"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1.1 Calculate the cost of draftLigne WITHOUT reduction" id="1dde915e-49e9-44e7-ab71-824265a9bf5a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00002087/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="bed804a5-505c-4225-8415-4eeac629d217" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2. Associate a reduction for draftLigneDetail" id="7844e3d9-1d2f-464e-b3cb-ce515c918dc4"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/detail/{refProduit}/associerReduction" methodName="associerReductionDetailLigne" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Associate a reduction for draftLigneDetail" id="f053f64c-7ab9-4ea0-9c9e-95ffeff8c102" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0312345",
"nbUtilisationMax": "1",
"label": "reduction draft ligne detail",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/b22f4304-1490-48ed-90be-21b4619429fd/ligne/eae67d24-15bf-4c8c-bfec-8a4d7c2974f4/detail/mvno_pack/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="d56c0d91-d9df-4f51-bcfa-862305de49e7" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refProduit" value="mvno_pack"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Select reduction to check_Eligible must be TRUE" id="daec92e0-133e-460b-8b64-62e354e57b1a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${draftInfo#refDraft}";</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - One reduction is found"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="feabb239-c7a6-4bed-ad42-4271dcddb6a0" name="Code catalog reduction must be"><con:configuration><token>&lt;REDUCTION.CODECATALOGUEREDUCTION>0312345&lt;/REDUCTION.CODECATALOGUEREDUCTION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="06f9cc6d-932f-4808-8bed-4622c904693c" name="Reference draft must be"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${draftInfo#refDraft}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b3ed1327-e3a6-40e7-bd94-1c6623249b0d" name="Reference Ligne must be"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNE>${draftInfo#refDraftLigne}&lt;/REDUCTION.REFERENCELIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="67fe79cd-bde6-4f8c-a524-1483035db714" name="Reference ligne detail must be mvno_pack"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNEDETAIL>mvno_pack&lt;/REDUCTION.REFERENCELIGNEDETAIL>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8f1d6bf-424a-4bd1-a81e-bfe084780bbb" name="Reduction fraise must be null"><con:configuration><token>&lt;REDUCTION.REFERENCEFRAIS/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="676fb18e-e3eb-4d7f-bec4-4e05c06f153a" name="Reference tarif must be null"><con:configuration><token>&lt;REDUCTION.REFERENCETARIF/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Eligible must be TRUE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2.2 Calculate the cost of Draft WITH reduction" id="f7227277-7791-4eaa-ac83-b95469e76d77"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.2 Calculate the cost of Draft WITH reduction" id="1dde915e-49e9-44e7-ab71-824265a9bf5a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00002087/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4a9672b5-1cf2-4645-abed-83811f5bd8c4" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002253</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00002260</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>584ef314-c9aa-4407-b133-a9544f8de2c9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>19f91eaf-f65f-4a78-be0d-dc6ef8b092fe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e95fd708-e93f-4fa6-908c-4796abc88c72</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bd286d96-da49-4054-b63b-56b6b4f34d5d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7b7a2425-6259-457d-8800-a5cb09a57ef1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fe699630-2986-4e42-a83c-766a12f88e77</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="3303902d-d90c-4164-bee5-592f480bb4b0" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="04.01 Calculate cost for draft_Reduction for Tarif of draftLigne" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="draftInfo" id="a31d7ad9-fcb5-4449-a2e3-272866b8f3d0"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00002242</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00002249</con:value></con:property><con:property><con:name>refDraftLigneDetail1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refDraftLigneDetail2</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="88a710b4-da5f-4746-aa08-eec5ea0ef92b"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue( "refDraftGlobal",null)
testRunner.testCase.setPropertyValue( "refDraftLigneGlobal",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigneDetail1",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigneDetail2",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftGlobal",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftLigneGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with mvno_conso" id="5e83ef78-a4bf-4912-aa57-395456f28629"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>de4f846c-30c6-4009-99fa-1d548af5c9a0</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002242</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00002249</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to draftInfo" id="7d876356-6524-49c7-b53b-a75a27547332"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>refDraftLigneGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refDraftLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>refDraft</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>refDraftLigne</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="1.1 Calculate the cost of draftLigne WITHOUT reduction" id="1d0fb323-1904-4655-aac9-6014cd4499d7"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1.1 Calculate the cost of draftLigne WITHOUT reduction" id="1dde915e-49e9-44e7-ab71-824265a9bf5a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00002087/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="bed804a5-505c-4225-8415-4eeac629d217" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2. Associate a reduction for Tarif of draftLigne" id="f1d8afa2-a12b-4794-9abe-8352d0b3f85f"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/tarif/{refTarif}/associerReduction" methodName="associerReductionTarifOffre" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Associate a reduction for Tarif of draftLigne" id="05bece9c-95a0-4045-a87b-6fa5b6c18c7b" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "1",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0612345",
"nbUtilisationMax": "1",
"label": "reduction for tarif of draft ligne",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/893da468-488d-4b4b-a1a2-98a46aa595fe/ligne/62a4bb16-25f7-4b9d-ad20-2bdea792708d/tarif/79/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="17a28eb1-c316-4189-989f-67b524a9d6f6" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
  <con:entry key="refTarif" value="79"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Select reduction to check_Eligible must be TRUE" id="9691862d-586f-47ad-aceb-e70012dc6e6a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${draftInfo#refDraft}";</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - One reduction is found"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="feabb239-c7a6-4bed-ad42-4271dcddb6a0" name="Code catalog reduction must be"><con:configuration><token>&lt;REDUCTION.CODECATALOGUEREDUCTION>0612345&lt;/REDUCTION.CODECATALOGUEREDUCTION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="06f9cc6d-932f-4808-8bed-4622c904693c" name="Reference draft must be"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${draftInfo#refDraft}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b3ed1327-e3a6-40e7-bd94-1c6623249b0d" name="Reference Ligne must be"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNE>${draftInfo#refDraftLigne}&lt;/REDUCTION.REFERENCELIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="67fe79cd-bde6-4f8c-a524-1483035db714" name="Reference ligne detail must be null"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNEDETAIL/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8f1d6bf-424a-4bd1-a81e-bfe084780bbb" name="Reduction fraise must be NULL"><con:configuration><token>&lt;REDUCTION.REFERENCEFRAIS/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="676fb18e-e3eb-4d7f-bec4-4e05c06f153a" name="Reference tarif must be"><con:configuration><token>&lt;REDUCTION.REFERENCETARIF>79&lt;/REDUCTION.REFERENCETARIF>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Eligible must be TRUE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2.2 Calculate the cost of Draft WITH reduction" id="efdec761-a155-4368-b377-96dd1499b31a"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.2 Calculate the cost of Draft WITH reduction" id="1dde915e-49e9-44e7-ab71-824265a9bf5a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00002087/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4a9672b5-1cf2-4645-abed-83811f5bd8c4" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002242</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00002249</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>584ef314-c9aa-4407-b133-a9544f8de2c9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>19f91eaf-f65f-4a78-be0d-dc6ef8b092fe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e95fd708-e93f-4fa6-908c-4796abc88c72</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bd286d96-da49-4054-b63b-56b6b4f34d5d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7b7a2425-6259-457d-8800-a5cb09a57ef1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c9d9605f-ebec-4d15-91cc-df3895ea1ead</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bf1a7b55-0645-4b6a-85ae-195e50ac5267</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>622c3307-20c1-4c22-9594-be358f0c3eb6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d0fb323-1904-4655-aac9-6014cd4499d7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="4b74c8c1-072d-4950-b5eb-41c920760bd4" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="05.01 Calculate cost for draff_Reduction for all_No frais reductions_mvnoConso" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="draftInfo" id="b11204be-de09-4be6-a98f-941df0eef417"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00002245</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00002252</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="9aa53510-5f99-4de5-8117-ec2dfd9159dd"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue( "refDraftGlobal",null)
testRunner.testCase.setPropertyValue( "refDraftLigneGlobal",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftGlobal",null)
testRunner.testCase.getTestStepByName("1. Create a draft with mvno_conso").setPropertyValue("refDraftLigneGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with mvno_conso" id="c9666de0-6645-4998-ace6-85b7dfdcae7b"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>de4f846c-30c6-4009-99fa-1d548af5c9a0</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002245</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00002252</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to draftInfo" id="ea75c3a6-06c9-4088-9c5f-d9e732b46996"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>refDraftLigneGlobal</con:sourceType><con:sourceStep>1. Create a draft with mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refDraftLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>refDraft</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>refDraftLigne</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="1.1 Calculate the cost of draftLigne WITHOUT reduction" id="808dbb84-2327-4343-af92-ed8e66d96b29"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1.1 Calculate the cost of draftLigne WITHOUT reduction" id="1dde915e-49e9-44e7-ab71-824265a9bf5a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00002087/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="bed804a5-505c-4225-8415-4eeac629d217" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2.1 Associate a reduction for draft" id="2670d343-cf86-4fb4-94e1-5d8837a20676"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/associerReduction" methodName="associerReduction" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.1 Associate a reduction for draft" id="a15d43e2-92b7-48c6-9b9e-e68e0083c64c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "0.25",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0112345",
"nbUtilisationMax": "1",
"label": "reduction draft",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/6e17cc68-7a21-475c-b59e-568b7bb37e61/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e7290574-2afb-4971-9c5f-02e44a8b01d4" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2.2 Associate a reduction for draftLigne" id="921cc5ef-e420-4925-83f5-995bb3b93103"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/associerReduction" methodName="associerReductionLigne" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.2 Associate a reduction for draftLigne" id="3ea26430-5ba4-4619-abcd-7ab79679f676" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "0.25",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0212345",
"nbUtilisationMax": "1",
"label": "reduction draft ligne",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/b98cf8a6-7a86-4035-ac65-b3956b9345c8/ligne//associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e0d81c71-eebb-456b-bc67-5fd5c610cde7" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2.3 Associate a reduction for draftLigneDetail" id="a76fc7a9-7581-4e0a-bbb9-bcdb760a57ba"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/detail/{refProduit}/associerReduction" methodName="associerReductionDetailLigne" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.3 Associate a reduction for draftLigneDetail" id="f053f64c-7ab9-4ea0-9c9e-95ffeff8c102" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "0.25",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0312345",
"nbUtilisationMax": "1",
"label": "reduction draft ligne detail",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/b22f4304-1490-48ed-90be-21b4619429fd/ligne/eae67d24-15bf-4c8c-bfec-8a4d7c2974f4/detail/mvno_pack/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="d56c0d91-d9df-4f51-bcfa-862305de49e7" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refProduit" value="mvno_conso"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2.4 Associate a reduction for Tarif of draftLigne" id="3af69360-22f5-46a6-ab02-f83445ea365a"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/tarif/{refTarif}/associerReduction" methodName="associerReductionTarifOffre" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.4 Associate a reduction for Tarif of draftLigne" id="05bece9c-95a0-4045-a87b-6fa5b6c18c7b" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "0.25",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0412345",
"nbUtilisationMax": "1",
"label": "reduction for tarif of draft ligne",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/893da468-488d-4b4b-a1a2-98a46aa595fe/ligne/62a4bb16-25f7-4b9d-ad20-2bdea792708d/tarif/79/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="17a28eb1-c316-4189-989f-67b524a9d6f6" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
  <con:entry key="refTarif" value="79"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="3. Select reduction to check_Eligible must be TRUE 2" id="9996a1ac-83cc-4ee2-b6cc-1eadb5ccb43d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${draftInfo#refDraft}";</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - Four reductions are found"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>4</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="65f977c5-d65e-4cac-8152-71342e4436fe" name="Not Contains Eligible FALSE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>0&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="4 Calculate the cost of Draft WITH reduction" id="f831040a-2a0e-4a9d-9742-16fc330070bf"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4 Calculate the cost of Draft WITH reduction" id="1dde915e-49e9-44e7-ab71-824265a9bf5a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00002087/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4a9672b5-1cf2-4645-abed-83811f5bd8c4" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">DRA-00002245</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LID-00002252</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>584ef314-c9aa-4407-b133-a9544f8de2c9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>19f91eaf-f65f-4a78-be0d-dc6ef8b092fe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e95fd708-e93f-4fa6-908c-4796abc88c72</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bd286d96-da49-4054-b63b-56b6b4f34d5d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7b7a2425-6259-457d-8800-a5cb09a57ef1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c9d9605f-ebec-4d15-91cc-df3895ea1ead</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bf1a7b55-0645-4b6a-85ae-195e50ac5267</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>622c3307-20c1-4c22-9594-be358f0c3eb6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6c14055c-eddc-4cca-8b88-c82060338085</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d8e3b2cc-c000-4de3-ac57-1a0c5afb7776</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>808dbb84-2327-4343-af92-ed8e66d96b29</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="6a81a6fd-0320-4611-905d-96b8c0808b9d" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="05.02 Calculate cost for Draft_Reduction for all_No detailLigne reductions_avfw.essentiel" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="draftInfo" id="b64a2ccb-915d-49e8-bf13-a355da765775"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00002246</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00002253</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="27e92308-d57b-4813-b98e-50521ba95be8"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey1",'6002367491')
testRunner.testCase.setPropertyValue( "handleKey1",'00001006956')
testRunner.testCase.setPropertyValue( "refDraftGlobal",null)
testRunner.testCase.setPropertyValue( "refDraftLigneGlobal",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("1. Create a draft with avfw.essentiel").setPropertyValue("refDraftGlobal",null)
testRunner.testCase.getTestStepByName("1. Create a draft with avfw.essentiel").setPropertyValue("refDraftLigneGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with avfw.essentiel" id="18a1d48e-6264-4f68-bd44-e2d85b4b4b9f"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>c5c7140a-49c8-4c3e-8b68-8cfdd2c3eda3</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002246</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00002253</con:value></con:property><con:property><con:name>customerKey1</con:name><con:value>6002367491</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>00001006956</con:value></con:property><con:property><con:name>refLigneGlobal</con:name></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry><con:entry>customerKey1</con:entry><con:entry>handleKey1</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to draftInfo" id="984c1675-73ad-4ca3-b153-940af61f7bb1"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with avfw.essentiel</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>refDraftLigneGlobal</con:sourceType><con:sourceStep>1. Create a draft with avfw.essentiel</con:sourceStep><con:sourcePath/><con:targetType>refDraftLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>refDraft</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>refDraftLigne</con:sourceType><con:sourceStep>draftInfo</con:sourceStep><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="1.1 Calculate the cost of draftLigne WITHOUT reduction" id="9095ff52-943c-4d50-9aae-8e44a6184a10"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1.1 Calculate the cost of draftLigne WITHOUT reduction" id="1dde915e-49e9-44e7-ab71-824265a9bf5a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ts": 1411654933,
      "ip": "10.190.29.140"
    }
  },
  "trameCatalogue": {
    "offres": [
      {
        "reference": "avfw.essentiel",
        "label": "Securitoo Integral",
        "gamme": "Antivirus",
        "secteur": "Securite",
        "modeFacturation": "DATE_ANNIVERSAIRE",
        "type": "SERVICE",
        "tarifs": [
          {
            "idTarif": "23",
            "prix": "5",
            "frequence": "1",
            "tva": "R"
          }
        ]
      }
    ]
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00002087/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="bed804a5-505c-4225-8415-4eeac629d217" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2.1 Associate a reduction for draft" id="5e6f0565-1331-4293-82f2-cfab924f3143"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/associerReduction" methodName="associerReduction" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.1 Associate a reduction for draft" id="a15d43e2-92b7-48c6-9b9e-e68e0083c64c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "0.25",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0112345",
"nbUtilisationMax": "1",
"label": "reduction draft",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/6e17cc68-7a21-475c-b59e-568b7bb37e61/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e7290574-2afb-4971-9c5f-02e44a8b01d4" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2.2 Associate a reduction for draftLigne" id="ff495a44-69da-4556-9ce3-000b9a2136ca"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/associerReduction" methodName="associerReductionLigne" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.2 Associate a reduction for draftLigne" id="3ea26430-5ba4-4619-abcd-7ab79679f676" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "0.25",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0212345",
"nbUtilisationMax": "1",
"label": "reduction draft ligne",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/b98cf8a6-7a86-4035-ac65-b3956b9345c8/ligne//associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e0d81c71-eebb-456b-bc67-5fd5c610cde7" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2.3 Associate a reduction for Tarif of draftLigne" id="ec74824a-1be6-4dcc-8b91-864a5b674a96"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/ligne/{refLigne}/tarif/{refTarif}/associerReduction" methodName="associerReductionTarifOffre" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2.3 Associate a reduction for Tarif of draftLigne" id="05bece9c-95a0-4045-a87b-6fa5b6c18c7b" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
"valeur": "0.5",
"typeValeur": "MONTANT",
"codeCatalogueReduction": "0312345",
"nbUtilisationMax": "1",
"label": "reduction for tarif of draft ligne",
"auteur": {
"qui": "hientran",
"canal": "SOAPUI",
"ip": {
"ts": 1455408000000,
"ip": "10.190.29.140"
}
}
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/893da468-488d-4b4b-a1a2-98a46aa595fe/ligne/62a4bb16-25f7-4b9d-ad20-2bdea792708d/tarif/79/associerReduction</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="17a28eb1-c316-4189-989f-67b524a9d6f6" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refDraft" value="${draftInfo#refDraft}"/>
  <con:entry key="refLigne" value="${draftInfo#refDraftLigne}"/>
  <con:entry key="refTarif" value="23"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="3. Select reduction to check_Eligible must be TRUE 2" id="b1595c9c-22ba-4174-83ca-49657bf2c175"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${draftInfo#refDraft}";</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - Three reductions are found"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="65f977c5-d65e-4cac-8152-71342e4436fe" name="Not Contains Eligible FALSE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>0&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="4. Calculate the cost of Draft WITH reduction" id="cc378e3e-66e0-449d-bc92-9a09f81f1a5a"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/{refDraft}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Calculate the cost of Draft WITH reduction" id="1dde915e-49e9-44e7-ab71-824265a9bf5a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ts": 1411654933,
      "ip": "10.190.29.140"
    }
  },
  "trameCatalogue": {
    "offres": [
      {
        "reference": "avfw.essentiel",
        "label": "Securitoo Integral",
        "gamme": "Antivirus",
        "secteur": "Securite",
        "modeFacturation": "DATE_ANNIVERSAIRE",
        "type": "SERVICE",
        "tarifs": [
          {
            "idTarif": "23",
            "prix": "5",
            "frequence": "1",
            "tva": "R"
          }
        ]
      }
    ]
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00002087/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4a9672b5-1cf2-4645-abed-83811f5bd8c4" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${draftInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">DRA-00002246</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LID-00002253</con:value></con:property><con:property><con:name>customerKey1</con:name><con:value>6002367491</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>00001006956</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>584ef314-c9aa-4407-b133-a9544f8de2c9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>19f91eaf-f65f-4a78-be0d-dc6ef8b092fe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e95fd708-e93f-4fa6-908c-4796abc88c72</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bd286d96-da49-4054-b63b-56b6b4f34d5d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7b7a2425-6259-457d-8800-a5cb09a57ef1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c9d9605f-ebec-4d15-91cc-df3895ea1ead</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bf1a7b55-0645-4b6a-85ae-195e50ac5267</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>622c3307-20c1-4c22-9594-be358f0c3eb6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6c14055c-eddc-4cca-8b88-c82060338085</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d8e3b2cc-c000-4de3-ac57-1a0c5afb7776</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9095ff52-943c-4d50-9aae-8e44a6184a10</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="9d16ae25-3a2a-4772-85e4-221ec19060ec" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="06.01 Calculate cost for command WITH all reductions false_mvnoConso" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="bdc2ed03-e3a1-48da-a3ae-9538224c46b5"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00002283</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>057310040</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="8437c2d6-be79-462f-90a8-157dc3e5036d"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("1. Create a draft with reduction of draft_mvnoConso").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with reduction of draft_mvnoConso" id="56d63bc0-b1b2-4b91-bfa9-54b1f6285c6e"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>eeac9de4-e3ba-43ca-b26d-64d5977bd5f5</con:targetTestCase><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002283</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00002290</con:value></con:property></con:properties><con:returnProperties><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to commandInfo" id="8a7a5ca2-7b10-492f-8dc9-528bc2f2f508"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with reduction of draft_mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with reduction" id="4b845b54-dfe7-4bff-acee-2eaed94408e8"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with reduction" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"${#TestCase#handleKey3}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"${#TestCase#handleKey3}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"${#TestCase#handleKey3}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="31bab8b5-267a-4c3d-bd93-c8cbc300cbe5" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a4e26616-452c-4a7e-80fb-3f27b6389eda" name="Contains"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="d8ac3efb-f813-4abb-b693-6cc410532311"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommande</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with reduction</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with reduction</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Update ELIGBILE to FALSE" id="c509f4fc-6e5c-470e-96ec-9ebe79c55483"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = false where referenceDraft = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple Contains" id="0ccc6d1c-21a7-440f-af74-5e08305ce544" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="3. Calculate cost for command_Cost has no changes" id="f483b2a3-b9d2-4d36-b7b3-f6a8cfda47f4"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Calculate cost for command_Cost has no changes" id="3fab0599-c965-4ad8-80b4-281baa0426e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/037210040/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="93100678-21bd-484e-bc25-9593dafc4884" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Copy of Update ELIGBILE to FALSE" id="749c22a1-d3cb-4400-ab0a-792db7f86cbe"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = false where referenceDraft = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple Contains" id="0ccc6d1c-21a7-440f-af74-5e08305ce544" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="4. Calculate cost before payment" id="2c2e366d-7905-447b-9f87-7e1270aae1be" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}" methodName="getCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Calculate cost before payment" id="aa6a8048-7c88-4ef1-89f9-7bea6af43f65" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/037210040/beforePaymentCost</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b4d67f70-15c5-48fa-b61e-9f68b6267c36" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get promotion to check_MVNO" id="1849f0f6-6afd-49d6-8aeb-a030543973ac" disabled="true"><con:settings/><con:config service="/default/promo" resourcePath="/discount.qualifier.ws-1.0.x/promo/offer/{offerCode}/price/{priceCode}" methodName="getPromoByOfferCodeAndPrice" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get promotion to check_MVNO" id="25bf5c2e-533d-452b-85d5-5747b5a22479" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/discount.qualifier.ws-1.0.x/promo/offer/MVNO/price/1</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="71ad5e29-4db1-40be-8ec7-e6fefeed5e87" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="priceCode" value="1"/>
  <con:entry key="offerCode" value="MVNO"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">057310040</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9656f05-50b4-4b2d-956d-55da470d6084</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1849f0f6-6afd-49d6-8aeb-a030543973ac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f483b2a3-b9d2-4d36-b7b3-f6a8cfda47f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d8ac3efb-f813-4abb-b693-6cc410532311</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c2e366d-7905-447b-9f87-7e1270aae1be</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c509f4fc-6e5c-470e-96ec-9ebe79c55483</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>749c22a1-d3cb-4400-ab0a-792db7f86cbe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="3510c66b-3383-4bd2-937b-45becbcd7533" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="06.02 Calculate cost for command WITHone reduction TRUE_mvnoConso" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="b2046795-7ef6-47ec-aea6-478591449805"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00002283</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>057310040</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="a3353513-dc24-403a-9f57-4853d983301c"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("1. Create a draft with reduction of draft_mvnoConso").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with reduction of draft_mvnoConso" id="071e9d86-67c7-4b73-9652-d548f0975a66"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>eeac9de4-e3ba-43ca-b26d-64d5977bd5f5</con:targetTestCase><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002283</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00002290</con:value></con:property></con:properties><con:returnProperties><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to commandInfo" id="06e95c6c-eeee-4cc8-bbec-344621f4c3c0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with reduction of draft_mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with reduction" id="a0028f5b-5581-4060-a7c3-637b28f4f09f"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with reduction" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"${#TestCase#handleKey3}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"${#TestCase#handleKey3}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"${#TestCase#handleKey3}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="31bab8b5-267a-4c3d-bd93-c8cbc300cbe5" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a4e26616-452c-4a7e-80fb-3f27b6389eda" name="Contains"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="b91be5c8-afcb-40df-8d53-157b35c2b802"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommande</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with reduction</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with reduction</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Update ELIGBILE to FALSE" id="1cdcc4af-d128-489d-9f71-4977e2da3430"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = false where referenceDraft = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple Contains" id="0ccc6d1c-21a7-440f-af74-5e08305ce544" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="3. Calculate cost for command_Cost has no changes" id="b72fd65c-c1ae-499c-99ca-a61afe408aa2"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/costCalculation" methodName="calculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Calculate cost for command_Cost has no changes" id="3fab0599-c965-4ad8-80b4-281baa0426e8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/037210040/costCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="93100678-21bd-484e-bc25-9593dafc4884" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Update ELIGBILE to TRUE_Reduction of draft" id="86900187-6c87-4186-87ad-0bb601c78949"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = true where referenceDraft = "${commandInfo#refCommand}" and codeCatalogueReduction = '';</con:query><con:assertion type="Simple Contains" id="0ccc6d1c-21a7-440f-af74-5e08305ce544" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="4. Calculate cost before payment" id="133a2206-0f1d-4069-9d88-cc2b063149f2" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}" methodName="getCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Calculate cost before payment" id="aa6a8048-7c88-4ef1-89f9-7bea6af43f65" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/037210040/beforePaymentCost</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b4d67f70-15c5-48fa-b61e-9f68b6267c36" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get promotion to check_MVNO" id="2ca47f1b-efea-45d1-a0e6-b5ec5a1814cb" disabled="true"><con:settings/><con:config service="/default/promo" resourcePath="/discount.qualifier.ws-1.0.x/promo/offer/{offerCode}/price/{priceCode}" methodName="getPromoByOfferCodeAndPrice" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get promotion to check_MVNO" id="25bf5c2e-533d-452b-85d5-5747b5a22479" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/discount.qualifier.ws-1.0.x/promo/offer/MVNO/price/1</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="71ad5e29-4db1-40be-8ec7-e6fefeed5e87" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="priceCode" value="1"/>
  <con:entry key="offerCode" value="MVNO"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="Run TestCase" id="a2b12ef9-d5ae-4d02-b77c-3ce394c44d07"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>15500887-8965-4067-b149-599b21a73f58</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name></con:property><con:property><con:name>customerKey3</con:name></con:property><con:property><con:name>handleKey3</con:name></con:property><con:property><con:name>redDraftLigne</con:name></con:property><con:property><con:name>Promo1</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>customerKey4</con:entry><con:entry>handleKey4</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">057310040</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9656f05-50b4-4b2d-956d-55da470d6084</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1849f0f6-6afd-49d6-8aeb-a030543973ac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f483b2a3-b9d2-4d36-b7b3-f6a8cfda47f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d8ac3efb-f813-4abb-b693-6cc410532311</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c2e366d-7905-447b-9f87-7e1270aae1be</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c509f4fc-6e5c-470e-96ec-9ebe79c55483</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>749c22a1-d3cb-4400-ab0a-792db7f86cbe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="a6830dfe-81ab-40aa-807a-473ce963de2e" name="creerDraft"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="c5c7140a-49c8-4c3e-8b68-8cfdd2c3eda3" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01. Create a draft_One offer_No detail_avfw.essentiel" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="draftInfo" id="db16cc38-d672-4ca2-83f5-b87876d11986"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003212</con:value></con:property><con:property><con:name>refLigne</con:name><con:value>LID-00003232</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="ef8153f5-612f-4ba5-a3b5-093d3346edf9"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey1",'6002367491')
testRunner.testCase.setPropertyValue( "handleKey1",'00001006956')
testRunner.testCase.setPropertyValue("refDraftGlobal",null)
testRunner.testCase.setPropertyValue("refLigneGlobal",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refLigne",null)
</script></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft without detail offer" id="ebe3efd3-6cb1-454d-bdb7-1f679ed08f74"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft without detail offer" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "canal": "SoapUIPRO",
    "qui": "hientran",
    "ip": {
      "ts": 1455615028000,
      "ip": "10.190.29.140"
    }
  },
  "lignes": [
    {
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "avfw.essentiel",
        "referenceTarif": "23"
      }
    }
  ],
  "souscripteur": {
      "clientId": "${#TestCase#customerKey1}",
      "adresseId": "${#TestCase#handleKey1}"
    },

    "facturation": {
      "clientId": "${#TestCase#customerKey1}",
      "adresseId": "${#TestCase#handleKey1}"
    },

    "livraison": {
      "clientId": "${#TestCase#customerKey1}",
      "adresseId": "${#TestCase#handleKey1}"
    },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="cd735495-c20b-44bb-8a16-31bc00ec4811" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refDraft" id="358d68d4-4278-4a40-8808-30310f35e3d3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft without detail offer</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft without detail offer</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft without detail offer</con:sourceStep><con:sourcePath>//*:referenceLigne</con:sourcePath><con:targetType>refLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigneGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft without detail offer</con:sourceStep><con:sourcePath>//*:referenceLigne</con:sourcePath><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="2. Vefrify the draft is created" id="ebc14973-1a26-4084-8770-97307d2ef2bb"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from draft where reference = "${draftInfo#refDraft}";</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="reference must be refDraft"><con:configuration><token>&lt;DRAFT.REFERENCE>${draftInfo#refDraft}&lt;/DRAFT.REFERENCE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="3. Verify no ligne is created" id="24d6544a-f03e-472b-a549-867f94d32b26"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM draftligne where draftId = (SELECT id FROM draft where reference = "${draftInfo#refDraft}");</con:query><con:assertion type="XPath Match" id="2abe7564-ff5d-4296-8d7f-7d6c4cafe9af" name="One ligne is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="4. Verify no detail ligne is created" id="cf16f04c-b1c1-40eb-8c6b-61395cfb9db2"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from draftlignedetail where draftLigneId = (SELECT id FROM draftligne where draftId = (SELECT id FROM draft where reference = "${draftInfo#refDraft}"));</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="No ligne is created"><con:configuration><token>&lt;ResultSet fetchSize="0"/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">DRA-00003212</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LID-00003232</con:value></con:property><con:property><con:name>customerKey1</con:name><con:value>6002367491</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>00001006956</con:value></con:property><con:property><con:name>refLigneGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="cad4bf66-e332-405d-bdda-284d84df1017" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02. Create a draft_One offer_One choice_mvno_conso" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="draftInfo" id="60aa6f27-2fc9-4dd3-87b0-88e972843b41"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003240</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00003261</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="1f4a1c47-6a1c-4796-91ef-6cc7f32fef3e"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey2",'192112')
testRunner.testCase.setPropertyValue( "handleKey2",'511708010')
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigne",null)
testRunner.testCase.setPropertyValue("refDraftGlobal",null)
testRunner.testCase.setPropertyValue("refDraftLigneGlobal",null)</script></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with one choice" id="bad6a853-fca4-4024-a672-244b345b045c"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with one choice" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "canal": "SoapUIPRO",
    "qui": "hientran",
    "ip": {
      "ts": 1455615028000,
      "ip": "10.190.29.140"
    }
  },
  "lignes": [
    {
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
"details":[{
"referenceSelection": "MVNO-SERVICE" ,
"referenceChoix": "mvno_conso",
"referenceTarif": "83"
}]
      }
    }
  ],
  "souscripteur": {
      "clientId": "${#TestCase#customerKey2}",
      "adresseId": "${#TestCase#handleKey2}"
    },

    "facturation": {
      "clientId": "${#TestCase#customerKey2}",
      "adresseId": "${#TestCase#handleKey2}"
    }
    ,

    "livraison": {
      "clientId": "${#TestCase#customerKey2}",
      "adresseId": "${#TestCase#handleKey2}"
    },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c918050e-5fc7-49ce-8e3f-11157f0790f9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refDraft" id="e934471d-d931-4328-b037-fe7348744a8c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with one choice</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with one choice</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with one choice</con:sourceStep><con:sourcePath>//*:referenceLigne</con:sourcePath><con:targetType>refDraftLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigneGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with one choice</con:sourceStep><con:sourcePath>//*:referenceLigne</con:sourcePath><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="2. Vefrify the draft is created" id="f13a2f6a-9c1a-4ce0-81b6-d53f93a9f71c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from draft where reference = "${draftInfo#refDraft}";</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="reference must be refDraft"><con:configuration><token>&lt;DRAFT.REFERENCE>${draftInfo#refDraft}&lt;/DRAFT.REFERENCE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="3. Verify the ligne is created" id="9c7febcf-7f8e-430b-a069-db2adc4be72b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM draftligne where draftId = (SELECT id FROM draft where reference = "${draftInfo#refDraft}");</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="refDraftLigne must be"><con:configuration><token> &lt;DRAFTLIGNE.REFERENCE>${refDraftLigne}&lt;/DRAFTLIGNE.REFERENCE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="ffb91168-dd63-4372-8f2c-3918cef71102" name="Draft Ligne must be MVNO"><con:configuration><token>&lt;DRAFTLIGNE.REFERENCEOFFRE>MVNO&lt;/DRAFTLIGNE.REFERENCEOFFRE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="4. Verify the ligne detail is created" id="975766a0-447d-4c53-b14a-1d5022283478"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from draftlignedetail where draftLigneId = (SELECT id FROM draftligne where draftId = (SELECT id FROM draft where reference = "${draftInfo#refDraft}"));</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Draft Ligne Detail must be mvno_conso"><con:configuration><token>&lt;DRAFTLIGNEDETAIL.REFERENCECHOIX>mvno_conso&lt;/DRAFTLIGNEDETAIL.REFERENCECHOIX></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">DRA-00003240</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LID-00003261</con:value></con:property><con:property><con:name>customerKey2</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey2</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="de4f846c-30c6-4009-99fa-1d548af5c9a0" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03. Create a draft_One offer_Two choices_mvno_conso and bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="draftInfo" id="cff2f1af-398a-4d2f-8213-e04f0cde18ee"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003307</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00003328</con:value></con:property><con:property><con:name>refDraftLigneDetail1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refDraftLigneDetail2</con:name><con:value/></con:property><con:property><con:name>refLigne1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refLigne2</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refDraftLigneDetail1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refDraftLigneDetail2</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="0a68edf9-ba53-40d9-923c-578cee4c4fc8"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigneDetail1",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigneDetail2",null)
testRunner.testCase.setPropertyValue("refDraftGlobal",null)
testRunner.testCase.setPropertyValue("refDraftLigneGlobal",null)</script></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with one offer multi choices_mvnoConso and Bien" id="4366f5a2-a2b6-4231-ae7a-0b3d39783362"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with one offer multi choices_mvnoConso and Bien" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "Welcome",
    "ip": {
      "ip": "10.190.29.140",
      "ts": 1456370857000
    }
  },
  "lignes": [
    {
      "auteur": {
        "qui": "hientran",
        "canal": "Welcome",
        "ip": {
          "ip": "10.190.29.150",
          "ts": 1456370857000
        }
      },
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
        
      "details": [
         {
            "referenceSelection": "MVNO-SERVICE",
            "referenceChoix": "mvno_conso",
            "referenceTarif": "83"
          },
         		  {
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }
      ]
    }
  }
  ],
  "souscripteur": {
    "clientId": "${#TestCase#customerKey3}",
    "adresseId": "${#TestCase#handleKey3}",
    "tva": "01"
  },
  "livraison": {
     "clientId": "${#TestCase#customerKey3}",
    "adresseId": "102008617",
    "tva": "01"
  },
  "facturation": {
     "clientId": "${#TestCase#customerKey3}",
    "adresseId": "${#TestCase#handleKey3}",
    "tva": "01"
  },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1e955254-7b0e-4dd5-a613-90a9b07b21ba" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refDraft" id="c4656367-2cae-48f3-ab04-1e05a7f6d407"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with one offer multi choices_mvnoConso and Bien</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with one offer multi choices_mvnoConso and Bien</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with one offer multi choices_mvnoConso and Bien</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:lignes[1]/ns1:e[1]/ns1:referenceLigne[1]</con:sourcePath><con:targetType>refDraftLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with one offer multi choices_mvnoConso and Bien</con:sourceStep><con:sourcePath>//*:referenceLigne</con:sourcePath><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="2. Make sure the draft is created" id="7b8928ac-eb10-44f9-ab52-af7b2d441845"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from draft where reference = "${draftInfo#refDraft}";</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="reference must be refDraft"><con:configuration><token>&lt;DRAFT.REFERENCE>${draftInfo#refDraft}&lt;/DRAFT.REFERENCE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="3. Make sure one ligne is created" id="b9ae935c-3307-47c3-9379-c7a534f8dddc"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM draftligne where draftId = (SELECT id FROM draft where reference = "${draftInfo#refDraft}");</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="refDraftLigne must be"><con:configuration><token> &lt;DRAFTLIGNE.REFERENCE>${refDraftLigne}&lt;/DRAFTLIGNE.REFERENCE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="fc984749-33fa-4d3c-a0aa-37e346c95e40" name="Draft Ligne must be MVNO"><con:configuration><token>&lt;DRAFTLIGNE.REFERENCEOFFRE>MVNO&lt;/DRAFTLIGNE.REFERENCEOFFRE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="4. Make sure two ligne details are created" id="15e2ff4b-3004-4122-a857-67ba0226fe04"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from draftlignedetail where draftLigneId = (SELECT id FROM draftligne where draftId = (SELECT id FROM draft where reference = "${draftInfo#refDraft}"));</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Draft Ligne Detail 1 must be MVNO_CONSO"><con:configuration><token>&lt;DRAFTLIGNEDETAIL.REFERENCECHOIX>mvno_conso&lt;/DRAFTLIGNEDETAIL.REFERENCECHOIX></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Draft Ligne Detail 2 must be PACK-MVNO-POSTPAID-MOBILE"><con:configuration><token>&lt;DRAFTLIGNEDETAIL.REFERENCECHOIX>PACK-MVNO-POSTPAID-MOBILE&lt;/DRAFTLIGNEDETAIL.REFERENCECHOIX></token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">DRA-00003307</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LID-00003328</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eb1e7bd1-3e67-4845-a8cd-249342cbe98f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0c34b17b-23d2-4cc3-be1b-ef16dce758e8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="cf053310-7ebc-4c65-b3da-1a01ead5b478" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="04. Create a draft_One offer_Two choices_mvno_pack and bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="draftInfo" id="bab1aaff-f240-4a41-a562-0eb15940b903"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003211</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00003231</con:value></con:property><con:property><con:name>refDraftLigneDetail1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refDraftLigneDetail2</con:name><con:value/></con:property><con:property><con:name>refLigne1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refLigne2</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refDraftLigneDetail1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refDraftLigneDetail2</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="ae988183-9c73-423d-9751-a6bbd9de272c"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey4",'192112')
testRunner.testCase.setPropertyValue( "handleKey4",'511708010')
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigneDetail1",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigneDetail2",null)
testRunner.testCase.setPropertyValue("refDraftGlobal",null)
testRunner.testCase.setPropertyValue("refDraftLigneGlobal",null)</script></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with one offer multi choices_mvnoPack and Bien" id="3d0fcf1a-fa2c-4c0a-a71b-91d1fb0caa8c"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with one offer multi choices_mvnoPack and Bien" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "Welcome",
    "ip": {
      "ip": "10.190.29.140",
      "ts": 1456370857000
    }
  },
  "lignes": [
    {
      "auteur": {
        "qui": "hientran",
        "canal": "Welcome",
        "ip": {
          "ip": "10.190.29.150",
          "ts": 1456370857000
        }
      },
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
        
      "details": [
         {
            "referenceSelection": "MVNO-SERVICE",
            "referenceChoix": "mvno_pack",
            "referenceTarif": "77"
          },
         		  {
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID",
            "referenceTarif": "75"
          }
      ]
    }
  }
  ],
  "souscripteur": {
    "clientId": "${#TestCase#customerKey4}",
    "adresseId": "${#TestCase#handleKey4}",
    "tva": "01"
  },
  "livraison": {
     "clientId": "${#TestCase#customerKey4}",
    "adresseId": "102008617",
    "tva": "01"
  },
  "facturation": {
     "clientId": "${#TestCase#customerKey4}",
    "adresseId": "${#TestCase#handleKey4}",
    "tva": "01"
  },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1e955254-7b0e-4dd5-a613-90a9b07b21ba" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refDraft" id="63096495-0e8a-4c0c-b796-8b39a2bdb61c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with one offer multi choices_mvnoPack and Bien</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with one offer multi choices_mvnoPack and Bien</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with one offer multi choices_mvnoPack and Bien</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:lignes[1]/ns1:e[1]/ns1:referenceLigne[1]</con:sourcePath><con:targetType>refDraftLigne</con:targetType><con:targetStep>draftInfo</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with one offer multi choices_mvnoPack and Bien</con:sourceStep><con:sourcePath>//*:referenceLigne</con:sourcePath><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="2. Make sure the draft is created" id="53b398b7-b871-485f-98ec-2c101863afe5"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from draft where reference = "${draftInfo#refDraft}";</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="reference must be refDraft"><con:configuration><token>&lt;DRAFT.REFERENCE>${draftInfo#refDraft}&lt;/DRAFT.REFERENCE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="3. Make sure one ligne is created" id="fa3164c3-0876-481e-a44d-12316e320e74"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM draftligne where draftId = (SELECT id FROM draft where reference = "${draftInfo#refDraft}");</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="refDraftLigne must be"><con:configuration><token> &lt;DRAFTLIGNE.REFERENCE>${refDraftLigne}&lt;/DRAFTLIGNE.REFERENCE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="fc984749-33fa-4d3c-a0aa-37e346c95e40" name="Draft Ligne must be MVNO"><con:configuration><token>&lt;DRAFTLIGNE.REFERENCEOFFRE>MVNO&lt;/DRAFTLIGNE.REFERENCEOFFRE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="4. Make sure two ligne details are created" id="b2302c9f-de6b-4b97-8eae-a3420201572c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from draftlignedetail where draftLigneId = (SELECT id FROM draftligne where draftId = (SELECT id FROM draft where reference = "${draftInfo#refDraft}"));</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Draft Ligne Detail 1 must be MVNO_PACK"><con:configuration><token>&lt;DRAFTLIGNEDETAIL.REFERENCECHOIX>mvno_pack&lt;/DRAFTLIGNEDETAIL.REFERENCECHOIX></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Draft Ligne Detail 2 must be PACK-MVNO-POSTPAID"><con:configuration><token>&lt;DRAFTLIGNEDETAIL.REFERENCECHOIX>PACK-MVNO-POSTPAID&lt;/DRAFTLIGNEDETAIL.REFERENCECHOIX></token><ignoreCase>true</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">DRA-00003211</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LID-00003231</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eb1e7bd1-3e67-4845-a8cd-249342cbe98f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0c34b17b-23d2-4cc3-be1b-ef16dce758e8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="1f409fe4-f206-4600-86f6-49dd96f6b353" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="05. Create a draft_Multi offers_MVNO and Other" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="draftInfo" id="a28bcfd9-4a67-49fc-b9d1-e7fa2a1229d1"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003172</con:value></con:property><con:property><con:name>refDraftLigne1</con:name><con:value>LID-00003191</con:value></con:property><con:property><con:name>refDraftLigne2</con:name><con:value>LID-00003192</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="51db3d9b-b24a-4ed0-9d4e-3f76bcae325e"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey2",'192112')
testRunner.testCase.setPropertyValue( "handleKey2",'511708010')
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigne1",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraftLigne2",null)
testRunner.testCase.setPropertyValue("refDraftGlobal",null)
testRunner.testCase.setPropertyValue("refDraftLigneGlobal1",null)
testRunner.testCase.setPropertyValue("refDraftLigneGlobal2",null)</script></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with offer MVNO and Pack_Relais" id="3df88505-a848-449f-b108-c3c4026316a1"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with offer MVNO and Pack_Relais" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "Welcome",
    "ip": {
      "ip": "10.190.29.140",
      "ts": 1456370857000
    }
  },
  "lignes": [
    {
      "auteur": {
        "qui": "hientran",
        "canal": "Welcome",
        "ip": {
          "ip": "10.190.29.140",
          "ts": 1456370857000
        }
      },
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "77",
        "details": [
          {
           "referenceSelection": "MVNO-SERVICE" ,
		"referenceChoix": "mvno_conso",
		"referenceTarif": "83"
		
          }
        ]
      }
    },
    {
    "auteur": {
      "qui": "hientran",
      "canal": "SOAPUI",
      "ip": {
        "ip": "10.190.29.140",
        "ts": 1456370857000
      }
    },
     "geste": "VENTE",
      "offre": {
      "referenceOffre": "pack_relais_essentiel",
      "referenceTarif": "79",
      "details": [
        {
          "referenceSelection": "pack_relais_essentiel.nom_domaine",
          "referenceChoix": "nom_domaine",
          "referenceTarif": ""
        }
      ]
    }
  }
  ],
  "souscripteur": {
    "clientId": "6002367491",
    "adresseId": "00001006956",
    "tva": "01"
  },
  "livraison": {
     "clientId": "6002367491",
    "adresseId": "00001006956",
    "tva": "01"
  },
  "facturation": {
     "clientId": "6002367491",
    "adresseId": "00001006956",
    "tva": "01"
  },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="a2957537-2f4b-4fa2-9967-1cb7474904c4" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refDraft" id="06267d3a-32b8-4441-a14e-f1c834233512"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with offer MVNO and Pack_Relais</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with offer MVNO and Pack_Relais</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigne1</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with offer MVNO and Pack_Relais</con:sourceStep><con:sourcePath>//*:referenceLigne</con:sourcePath><con:targetType>refDraftLigne1</con:targetType><con:targetStep>draftInfo</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal1</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with offer MVNO and Pack_Relais</con:sourceStep><con:sourcePath>//*:referenceLigne</con:sourcePath><con:targetType>refDraftLigneGlobal1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigne2</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with offer MVNO and Pack_Relais</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:lignes[1]/ns1:e[2]/ns1:referenceLigne[1]</con:sourcePath><con:targetType>refDraftLigne2</con:targetType><con:targetStep>draftInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal2</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with offer MVNO and Pack_Relais</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:lignes[1]/ns1:e[2]/ns1:referenceLigne[1]</con:sourcePath><con:targetType>refDraftLigneGlobal2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="2. Make sure the draft is created" id="4e9b8b5c-167c-4007-a78d-720c8f863e6a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from draft where reference = "${draftInfo#refDraft}";</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="reference must be refDraft"><con:configuration><token>&lt;DRAFT.REFERENCE>${draftInfo#refDraft}&lt;/DRAFT.REFERENCE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="3. Make sure two lignes are created" id="e62f783f-6689-4268-8f2f-8ea168d4e3d9"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM draftligne where draftId = (SELECT id FROM draft where reference = "${draftInfo#refDraft}");</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="refLigne1 must be"><con:configuration><token> &lt;DRAFTLIGNE.REFERENCE>${refDraftLigne1}&lt;/DRAFTLIGNE.REFERENCE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="719f5226-70c5-401f-96ad-33e5dc6ab54d" name="refLigne2 must be"><con:configuration><token> &lt;DRAFTLIGNE.REFERENCE>${refDraftLigne2}&lt;/DRAFTLIGNE.REFERENCE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="4. Make sure ligne detail of MVNO" id="5e65261a-e54b-4b5a-8c5f-a6fb51c57476"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from draftlignedetail where draftLigneId = ( select id from draftligne where reference = "${draftInfo#refDraftLigne1}");</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Draft Ligne Detail 1 must be MVNO_CONSO"><con:configuration><token>&lt;DRAFTLIGNEDETAIL.REFERENCECHOIX>mvno_conso&lt;/DRAFTLIGNEDETAIL.REFERENCECHOIX></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="5. Make sure ligne detail of Pack_Relais" id="37422714-4700-463d-9522-c752c5d196c1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from draftlignedetail where draftLigneId = ( select id from draftligne where reference = "${draftInfo#refDraftLigne2}");</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Reference choice must be nom_domaine"><con:configuration><token>&lt;DRAFTLIGNEDETAIL.REFERENCECHOIX>nom_domaine&lt;/DRAFTLIGNEDETAIL.REFERENCECHOIX></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">DRA-00003172</con:value></con:property><con:property><con:name>refDraftLigneGlobal1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LID-00003191</con:value></con:property><con:property><con:name>refDraftLigneGlobal2</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LID-00003192</con:value></con:property><con:property><con:name>customerKey2</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey2</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="3930ed48-6d13-44c3-adb6-e7810c93fe01" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="06. Create a draft with invalid offer" searchProperties="true" maxResults="0" disabled="true"><con:settings/><con:testStep type="properties" name="draftInfo" id="1bc58755-17fb-4402-9d34-ad4ed4875f4f"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refLigne</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="317fe738-66c6-41fe-8dce-02685b1a3bbf"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("draftInfo").setPropertyValue("refLigne",null)
testRunner.testCase.setPropertyValue("refDraftGlobal",null)
testRunner.testCase.setPropertyValue("refLigneGlobal",null)</script></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with one choice" id="ee1d9c7f-97d4-4e59-9eb3-6bbe14694b68"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with one choice" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "canal": "SoapUIPRO",
    "qui": "hientran",
    "ip": {
      "ts": 1455615028000,
      "ip": "10.190.29.140"
    }
  },
  "lignes": [
    {
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "75",
"details":[{
"referenceSelection": "NotExisted" ,
"referenceChoix": "NotExisted",
"referenceTarif": "77",
"configurationJson": "abc"
}]
      }
    }
  ],
  "souscripteur": {
      "clientId": "accountKey",
      "adresseId": "handle-1"
    },

    "facturation": {
      "clientId": "accountKey",
      "adresseId": "handle-1"
    }
    ,

    "livraison": {
      "clientId": "accountKey",
      "adresseId": "handle-1"
    }
  },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="6ab7ed7e-75a1-492e-83db-ba39e9b09e6e" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refLigneGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties><con:property><con:name>customerKey</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite id="6b3e8019-39e5-426b-87bc-4d56c93dd829" name="creerCommande"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="7406c322-8d8b-401a-b288-6b16942d3bfa" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01. Create new command with one offer one choice_mvnoConso_Successfully" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="7863134c-3ea9-4798-9acb-9c191736c5e8"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>571302000</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value>LIC-00002379</con:value></con:property><con:property><con:name>refCommandLigneDetail</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>reCommand</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="40a4f63c-67e7-44f4-9d09-52b42cfe40b9"><con:settings/><con:config><script>testRunner.testCase.testSuite.setPropertyValue( "customerKey",'192112')
testRunner.testCase.testSuite.setPropertyValue( "handleKey",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigneDetail",null)</script></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a command with one offer once choice" id="d854e8ed-070f-4c17-85ce-c1518ab7c347"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/creer" methodName="creerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a command with one offer once choice" id="cbefa18f-91b7-484d-b05b-80de3b4cd914" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1457596266"
    }
  },
  "offres": [
    {
      "reference": "MVNO",
      "label": "MVNO",
      "gamme": "MVNO",
      "secteur": "MVNO",
      "tarif": {
        "idTarif": "79",
        "prix": 1.67,
        "frequence": 1,
        "engagement": null,
        "duree": 6,
        "tva": "S",
        "frais": null
      },
      "modeFacturation": "PREMIER_MOIS",
      "typeProduit": "BIEN",
      "details": [
        {
          "reference": "mvno_conso",
          "label": "mvno_conso",
          "tarif": {
            "idTarif": "83",
            "prix": 0,
            "frequence": 1,
            "engagement": null,
            "duree": 6,
            "tva": "S",
            "frais": null
          },
          "typeProduit": "SERVICE"
        }
      ]
    }
  ],
  "client": {
       "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
},
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/creer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b3c915c7-ef16-4713-9583-347b9ad7a7fb" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4ecae06e-f9c0-47e2-9276-c7e29027808a" name="Contains"><con:configuration><token>"numeroCommande"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b2d98102-5c67-4c08-8fe5-a59ad6cce5d3" name="Contains 2"><con:configuration><token>"numeroLignes"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="398fb187-f1d0-4f51-ba2f-e64beb4f3805"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a command with one offer once choice</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/commande/creer';
//ns1:Response[1]/ns1:numeroCommande[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a command with one offer once choice</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/commande/creer';
//ns1:Response[1]/ns1:numeroLignes[1]/ns1:e[1]/ns1:referenceLigne[1]</con:sourcePath><con:targetType>refCommandLigne</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a command with one offer once choice</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/commande/creer';
//ns1:Response[1]/ns1:numeroCommande[1]</con:sourcePath><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="2. Make sure command ligne is created successfully" id="8ec69d44-9f84-4bc2-b2fa-cd41c142574a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commandeligne` where commandeId = (select id from commande where reference = "${commandInfo#refCommand}");</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Only one commandLigne is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="397c1681-3bd5-412b-a58a-61038d910f20" name="Reference Selection must be"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNE.REFERENCEOFFRE[1]</path><content>MVNO</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommandLigne" id="81d92697-6f72-436f-b54b-6e66084fda7b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Make sure command ligne is created successfully</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNE.REFERENCE[1]</con:sourcePath><con:targetType>refCommandLigne</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="3. Make sure command ligne detail is created with refCommandLigneDetail" id="ef637dfe-1c2a-4e80-a79c-b40452db9c29"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from commandelignedetail where commandeLigneId = ( select id from commandeligne where reference = "${commandInfo#refCommandLigne}");</con:query><con:assertion type="XPath Match" id="8502dfce-7002-4ab2-adbb-7c1cdafc0362" name="XPath Match"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Reference command ligne detail must be ${commandInfo#refCommandLigne}-1"><con:configuration><token>${commandInfo#refCommandLigne}-1</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">571302000</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7863134c-3ea9-4798-9acb-9c191736c5e8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ec69d44-9f84-4bc2-b2fa-cd41c142574a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>81d92697-6f72-436f-b54b-6e66084fda7b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>40a4f63c-67e7-44f4-9d09-52b42cfe40b9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="6480b3ef-c7b1-44d2-b94f-b962d23bd271" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02. Create new command with one offer two choices_mvnoConso and Bien_Successfully" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="0966e3fd-1eea-4d7f-b362-61a6c259dbdc"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>102002803</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value>LIC-00002322</con:value></con:property><con:property><con:name>refCommandLigneDetail</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="42f87c22-f4dc-41ee-95c7-c8f694a0ab0b"><con:settings/><con:config><script>testRunner.testCase.testSuite.setPropertyValue( "customerKey",'192112')
testRunner.testCase.testSuite.setPropertyValue( "handleKey",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigneDetail",null)</script></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a command with one offer two choice" id="b9a4fab9-d261-4737-ad4f-bfec6d97929a"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/creer" methodName="creerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a command with one offer two choice" id="cbefa18f-91b7-484d-b05b-80de3b4cd914" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1457596266"
    }
  },
  "offres": [
    {
      "reference": "MVNO",
      "label": "MVNO",
      "gamme": "MVNO",
      "secteur": "MVNO",
      "tarif": {
        "idTarif": "79",
        "prix": 1.67,
        "frequence": 1,
        "engagement": null,
        "duree": 6,
        "tva": "S",
        "frais": null
      },
      "modeFacturation": "PREMIER_MOIS",
      "typeProduit": "BIEN",
      "details": [
        {
          "reference": "mvno_conso",
          "label": "mvno_conso",
          "tarif": {
            "idTarif": "83",
            "prix": 0,
            "frequence": 1,
            "engagement": null,
            "duree": 6,
            "tva": "S",
            "frais": null
          },
          "typeProduit": "SERVICE"
        },
{
          "reference": "PACK-MVNO-POSTPAID-MOBILE",
          "label": "PACK-MVNO-POSTPAID_MOBILE",
          "tarif": {
            "idTarif": "81",
            "prix": 29.158333,
            "frequence": 6,
            "engagement": null,
            "duree": 6,
            "tva": "S",
            "frais": null
          },
          "typeProduit": "BIEN"
        }
      ]
    }
  ],
  "client": {
       "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
},
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/creer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b3c915c7-ef16-4713-9583-347b9ad7a7fb" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4ecae06e-f9c0-47e2-9276-c7e29027808a" name="Contains"><con:configuration><token>"numeroCommande"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b2d98102-5c67-4c08-8fe5-a59ad6cce5d3" name="Contains 2"><con:configuration><token>"numeroLignes"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="4e410dc9-7b34-4a90-b0f5-f6fbd585a7d8"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a command with one offer two choice</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/commande/creer';
//ns1:Response[1]/ns1:numeroCommande[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a command with one offer two choice</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/commande/creer';
//ns1:Response[1]/ns1:numeroLignes[1]/ns1:e[1]/ns1:referenceLigne[1]</con:sourcePath><con:targetType>refCommandLigne</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a command with one offer two choice</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/commande/creer';
//ns1:Response[1]/ns1:numeroCommande[1]</con:sourcePath><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="2. Make sure command ligne is created successfully" id="c961bbd1-8f08-499c-88a4-a499dba39d54"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commandeligne` where commandeId = (select id from commande where reference = "${commandInfo#refCommand}");</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Only one commandLigne is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="397c1681-3bd5-412b-a58a-61038d910f20" name="Reference Selection must be"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNE.REFERENCEOFFRE[1]</path><content>MVNO</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommandLigne" id="2524b954-a2b2-4030-819a-14b22c75dea0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Make sure command ligne is created successfully</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNE.REFERENCE[1]</con:sourcePath><con:targetType>refCommandLigne</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="3. Make sure command ligne detail is created with refCommandLigneDetail" id="d6d2a6ae-fd6b-4249-bb2f-3d915c964799"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select referenceCommandeLigneDetail from commandelignedetail where commandeLigneId = ( select id from commandeligne where reference = "${commandInfo#refCommandLigne}");</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Reference command ligne detail 1 must be ${commandInfo#refCommandLigne}-1"><con:configuration><token>${commandInfo#refCommandLigne}-1</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Reference command ligne detail 2 must be ${commandInfo#refCommandLigne}-2"><con:configuration><token>${commandInfo#refCommandLigne}-2</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">102002803</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7863134c-3ea9-4798-9acb-9c191736c5e8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ec69d44-9f84-4bc2-b2fa-cd41c142574a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>81d92697-6f72-436f-b54b-6e66084fda7b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>42f87c22-f4dc-41ee-95c7-c8f694a0ab0b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="6fd96844-4465-4f1b-b8cf-859bb4f2e150" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03. Create new command with one offer two choices_mvnoPack and Bien_Successfully" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="4245f570-db0d-4612-a503-7fb48576bbdb"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>225000047</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value>LIC-00002251</con:value></con:property><con:property><con:name>refCommandLigneDetail</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="92be9ddb-2869-482a-b0d3-d7fc61174dd6"><con:settings/><con:config><script>testRunner.testCase.testSuite.setPropertyValue( "customerKey",'192112')
testRunner.testCase.testSuite.setPropertyValue( "handleKey",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigneDetail",null)</script></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a command with one offer two choice" id="8cf9affb-a32e-4bb0-b6c7-98d91c03dceb"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/creer" methodName="creerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a command with one offer two choice" id="cbefa18f-91b7-484d-b05b-80de3b4cd914" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1457596266"
    }
  },
  "offres": [
    {
      "reference": "MVNO",
      "label": "MVNO",
      "gamme": "MVNO",
      "secteur": "MVNO",
      "tarif": {
        "idTarif": "79",
        "prix": 1.67,
        "frequence": 6,
        "engagement": null,
        "duree": 6,
        "tva": "S",
        "frais": null
      },
      "modeFacturation": "PREMIER_MOIS",
      "typeProduit": "BIEN",
      "details": [
        {
          "reference": "mvno_pack",
          "label": "mvno_pack",
          "tarif": {
            "idTarif": "77",
            "prix": 5,
            "frequence": 1,
            "engagement": null,
            "duree": 6,
            "tva": "S",
            "frais": null
          },
          "typeProduit": "SERVICE"
        },
{
          "reference": "PACK-MVNO-POSTPAID-MOBILE",
          "label": "PACK-MVNO-POSTPAID_MOBILE",
          "tarif": {
            "idTarif": "81",
            "prix": 29.158333,
            "frequence": 1,
            "engagement": null,
            "duree": 6,
            "tva": "S",
            "frais": null
          },
          "typeProduit": "BIEN"
        }
      ]
    }
  ],
  "client": {
       "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
},
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/creer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b3c915c7-ef16-4713-9583-347b9ad7a7fb" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4ecae06e-f9c0-47e2-9276-c7e29027808a" name="Contains"><con:configuration><token>"numeroCommande"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b2d98102-5c67-4c08-8fe5-a59ad6cce5d3" name="Contains 2"><con:configuration><token>"numeroLignes"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="e9c5f7d4-e84a-401e-af42-2ee5bce6a427"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a command with one offer two choice</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/commande/creer';
//ns1:Response[1]/ns1:numeroCommande[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a command with one offer two choice</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/commande/creer';
//ns1:Response[1]/ns1:numeroLignes[1]/ns1:e[1]/ns1:referenceLigne[1]</con:sourcePath><con:targetType>refCommandLigne</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a command with one offer two choice</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/commande/creer';
//ns1:Response[1]/ns1:numeroCommande[1]</con:sourcePath><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="2. Make sure command ligne is created successfully" id="98c944c6-4b70-4604-84bd-5a56a9294f7a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commandeligne` where commandeId = (select id from commande where reference = "${commandInfo#refCommand}");</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Only one commandLigne is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="397c1681-3bd5-412b-a58a-61038d910f20" name="Reference Selection must be"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNE.REFERENCEOFFRE[1]</path><content>MVNO</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommandLigne" id="5c945362-501e-4622-ad98-1d68bb70c070"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Make sure command ligne is created successfully</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNE.REFERENCE[1]</con:sourcePath><con:targetType>refCommandLigne</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="3. Make sure command ligne detail is created with refCommandLigneDetail" id="4860d13a-77e1-4316-95e3-3662aee7172b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select referenceCommandeLigneDetail from commandelignedetail where commandeLigneId = ( select id from commandeligne where reference = "${commandInfo#refCommandLigne}");</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Reference command ligne detail 1 must be ${commandInfo#refCommandLigne}-1"><con:configuration><token>${commandInfo#refCommandLigne}-1</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="Reference command ligne detail 2 must be ${commandInfo#refCommandLigne}-2"><con:configuration><token>${commandInfo#refCommandLigne}-2</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>225000047</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>7863134c-3ea9-4798-9acb-9c191736c5e8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ec69d44-9f84-4bc2-b2fa-cd41c142574a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>81d92697-6f72-436f-b54b-6e66084fda7b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>92be9ddb-2869-482a-b0d3-d7fc61174dd6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties><con:property><con:name>customerKey</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite id="1254b54f-44e3-4bfd-b398-d3eeff61edab" name="envoyerConfirmationCommande"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="c3249162-8fbb-4c51-9639-8b6932c67a37" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.01 Send failed_User info is not valid" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="4459213e-ea39-4722-8468-18a9bd70014f">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Reset variables to null" id="35e79528-8b16-4280-8bcd-d2df334dcb0a"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "refCommand",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a command mvnoConso" id="bcf34af3-38d0-465b-b0d0-d6d63a93228a"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>6480b3ef-c7b1-44d2-b94f-b962d23bd271</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>004600194</con:value></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="e79e3413-3ef6-4225-adc0-e9793a288f95"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a command mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay COMPTANT for the created command" id="8ba2934c-e2e4-4996-b0c8-5ded63fbb86c"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "1",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R0000000",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3. Send email for this command_Send failed_Check exeption" id="c7e37061-a393-48d8-9642-5a54e8693e5e"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/communication/{typeCommunication}/envoyerEmail" methodName="envoyerConfirmationCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Send email for this command_Send failed_Check exeption" id="cfe43d61-000c-4702-b274-80bdd62467be" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1461226828"
    }
  },
  "politiqueInfo": {
    "besoinPaiementValidation": true
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//communication/PAID_COMMANDE_CONFIRMATION/envoyerEmail</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="28788f21-5345-4819-9459-14dfe075e48b" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refCommande" value="${#TestCase#refCommand}"/>
  <con:entry key="typeCommunication" value="PAID_COMMANDE_CONFIRMATION"/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>typeCommunication</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommand</con:name><con:value>004600194</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>0</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>35e79528-8b16-4280-8bcd-d2df334dcb0a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bcf34af3-38d0-465b-b0d0-d6d63a93228a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4459213e-ea39-4722-8468-18a9bd70014f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ba2934c-e2e4-4996-b0c8-5ded63fbb86c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7e37061-a393-48d8-9642-5a54e8693e5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="e174cf83-71df-4aeb-8b3e-3dd99bba3ed8" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.02 Send failed_Invalid typeCommunication" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="3bf91eff-807c-4663-9f81-0088a8e78a38">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Reset variables to null" id="078d4e40-0a93-4b83-bd4f-c18b9ccd80ed"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "refCommand",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a command mvnoConso" id="af1eeacf-0536-49e8-84a3-0259f057cbb2"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>6480b3ef-c7b1-44d2-b94f-b962d23bd271</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>561901000</con:value></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="f3b450f8-f2cf-4f67-afec-202a9bd59173"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a command mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay COMPTANT for the created command" id="a9b7d1d0-d9e8-453e-98a8-507bb1eaf1c9"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "1",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R0000000",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3. Send email for this command_Send failed_Check exeption" id="63749422-d354-4326-85bd-d3f059cfe6f1"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/communication/{typeCommunication}/envoyerEmail" methodName="envoyerConfirmationCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Send email for this command_Send failed_Check exeption" id="cfe43d61-000c-4702-b274-80bdd62467be" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1461226828"
    }
  },
  "politiqueInfo": {
    "besoinPaiementValidation": true
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//communication/PAID_COMMANDE_CONFIRMATION/envoyerEmail</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="28788f21-5345-4819-9459-14dfe075e48b" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="93735e49-86dc-490d-a291-0150d0c19ccf" name="errorCode must be 0.1.16"><con:configuration><token>"errorCode":"0.1.16"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="206f3568-eb97-4eaf-ae43-a301e9181882" name="errorMessage must be"><con:configuration><token>"errorMessage":"Le type de la communication est invalid."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refCommande" value="${#TestCase#refCommand}"/>
  <con:entry key="typeCommunication" value="abc"/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>typeCommunication</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommand</con:name><con:value>561901000</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>0</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>35e79528-8b16-4280-8bcd-d2df334dcb0a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bcf34af3-38d0-465b-b0d0-d6d63a93228a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4459213e-ea39-4722-8468-18a9bd70014f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ba2934c-e2e4-4996-b0c8-5ded63fbb86c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7e37061-a393-48d8-9642-5a54e8693e5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="fb4afb99-ccf6-4149-b89a-765954057e3c" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.03 Send failed_Command is not found" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="1a9bb0f6-5405-4158-bac0-18e18a4e46a3">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Reset variables to null" id="aef87e04-7618-42df-bb4e-5942363f3caf"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "refCommand",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a command mvnoConso" id="b9d556df-1cea-4591-9f48-de9d928ea478"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>6480b3ef-c7b1-44d2-b94f-b962d23bd271</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>602001609</con:value></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="59f3c237-d018-4498-ba1e-78832953a96f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a command mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay COMPTANT for the created command" id="7712090a-44c4-4c30-8533-db3ec9e7c76b"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "1",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R0000000",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3. Send email for this command_Send failed_Check exeption" id="3df21219-e93a-481a-9d94-26cb19ff1c22"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/communication/{typeCommunication}/envoyerEmail" methodName="envoyerConfirmationCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Send email for this command_Send failed_Check exeption" id="cfe43d61-000c-4702-b274-80bdd62467be" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1461226828"
    }
  },
  "politiqueInfo": {
    "besoinPaiementValidation": true
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//communication/PAID_COMMANDE_CONFIRMATION/envoyerEmail</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="28788f21-5345-4819-9459-14dfe075e48b" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="93735e49-86dc-490d-a291-0150d0c19ccf" name="errorCode must be 0.1.16"><con:configuration><token>"errorCode":"0.1.2"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refCommande" value="abc"/>
  <con:entry key="typeCommunication" value="PAID_COMMANDE_CONFIRMATION"/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>typeCommunication</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommand</con:name><con:value>602001609</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>0</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>35e79528-8b16-4280-8bcd-d2df334dcb0a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bcf34af3-38d0-465b-b0d0-d6d63a93228a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4459213e-ea39-4722-8468-18a9bd70014f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ba2934c-e2e4-4996-b0c8-5ded63fbb86c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7e37061-a393-48d8-9642-5a54e8693e5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="268f9b41-e42c-4703-a685-b3c12a0f1ba8" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.04 Send failed_Command is not paied" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="1e510489-f221-42a5-952a-bfe53d1d7220">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Reset variables to null" id="05582ea2-5ad7-4f2f-bc30-0785b997d649"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "refCommand",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a command mvnoConso" id="8198afdc-bb4f-406e-b01c-504ae5e2c314"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>6480b3ef-c7b1-44d2-b94f-b962d23bd271</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>102002803</con:value></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="b7368a91-ab74-435c-8797-45b10a4cc4f1"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a command mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Send email for this command_Send failed_Check exeption" id="3a483b06-6d07-46dc-9994-9e5f7f638dd6"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/communication/{typeCommunication}/envoyerEmail" methodName="envoyerConfirmationCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Send email for this command_Send failed_Check exeption" id="cfe43d61-000c-4702-b274-80bdd62467be" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1461226828"
    }
  },
  "politiqueInfo": {
    "besoinPaiementValidation": true
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//communication/PAID_COMMANDE_CONFIRMATION/envoyerEmail</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="28788f21-5345-4819-9459-14dfe075e48b" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="93735e49-86dc-490d-a291-0150d0c19ccf" name="errorCode must be"><con:configuration><token>"errorCode":"2.1.6"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="230052af-0e82-4bea-9509-d3da019b0628" name="errorMessage must be"><con:configuration><token>"errorMessage":"La commande nest pas totalement pay."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refCommande" value="${#TestCase#refCommand}"/>
  <con:entry key="typeCommunication" value="PAID_COMMANDE_CONFIRMATION"/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>typeCommunication</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommand</con:name><con:value>102002803</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>0</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>35e79528-8b16-4280-8bcd-d2df334dcb0a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bcf34af3-38d0-465b-b0d0-d6d63a93228a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4459213e-ea39-4722-8468-18a9bd70014f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ba2934c-e2e4-4996-b0c8-5ded63fbb86c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7e37061-a393-48d8-9642-5a54e8693e5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="9a5839a0-8972-408c-ba3e-901401235676" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.04.02 Send failed_Command is paied partielly" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="37a3c7ce-82b1-4135-97f0-13aebd84a39b">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Reset variables to null" id="e61e4cdf-f53f-4ee9-ba97-70a451cd40f6"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "refCommand",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Command transformed with one reduction in draftLigne" id="dd9caeca-a623-4655-96c4-18cf98c34bc7"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>cb591d95-20d8-4dbb-969b-86e4f8da98fc</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>521302000</con:value></con:property><con:property><con:name>customerKey3</con:name></con:property><con:property><con:name>handleKey3</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="a24a9605-1e16-474d-8b56-51d5d3b11763"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Command transformed with one reduction in draftLigne</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay 33.99 Euros = Price to pay" id="e8e437ef-5de7-40e0-a921-7396479ced03"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay 33.99 Euros = Price to pay" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "33.99",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R123456",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3. Send email for this command_Send failed_Check exeption" id="619ecba0-7c24-4887-beef-897c1fff99f2"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/communication/{typeCommunication}/envoyerEmail" methodName="envoyerConfirmationCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Send email for this command_Send failed_Check exeption" id="cfe43d61-000c-4702-b274-80bdd62467be" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1461226828"
    }
  },
  "politiqueInfo": {
    "besoinPaiementValidation": true
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//communication/PAID_COMMANDE_CONFIRMATION/envoyerEmail</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="28788f21-5345-4819-9459-14dfe075e48b" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refCommande" value="${#TestCase#refCommand}"/>
  <con:entry key="typeCommunication" value="PAID_COMMANDE_CONFIRMATION"/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>typeCommunication</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="validerCommand" id="0f1d10fd-5f85-49fe-b760-b6eee252e91f"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="validerCommand" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/004100236/valider</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommand</con:name><con:value>521302000</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>0</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>35e79528-8b16-4280-8bcd-d2df334dcb0a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bcf34af3-38d0-465b-b0d0-d6d63a93228a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4459213e-ea39-4722-8468-18a9bd70014f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ba2934c-e2e4-4996-b0c8-5ded63fbb86c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7e37061-a393-48d8-9642-5a54e8693e5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d57dce0e-a75d-44a8-89ea-e7385f821349</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="19169bb5-414d-4ea1-950f-1ff15c74dda6" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.05 Send failed_transformerEnCommande_Mail is already sent" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="e2525019-2a9a-4567-86c9-040205b35e57">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Reset variables to null" id="e6d2dc9b-1329-4cbe-ab74-7b40f9c6ccc6"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "refCommand",null)
testRunner.testCase.setPropertyValue( "RUM3","RRE4F5CB")</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform to command mvnoConso" id="319e4e9b-1f8d-4cc6-a1fa-3f8d99e92c23"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>b93b868a-13f5-479a-9046-5beb3a9f7314</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>915000068</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>refCommandLigneGlobal</con:name></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="4f5a9fd5-eabc-47db-90bc-e3ecd670e686"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform to command mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay COMPTANT for the created command" id="ce6bdc46-68c4-4a92-b22f-1963667abdb2"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "1",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R0000000",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Pay RECURRENT for the created command" id="e1c21d62-b742-42f7-8d34-a570158de926" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3. Send email for this command_Send successfully" id="04dbeef3-f8e9-4ae9-84c1-bd12448c1d00"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/communication/{typeCommunication}/envoyerEmail" methodName="envoyerConfirmationCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Send email for this command_Send successfully" id="cfe43d61-000c-4702-b274-80bdd62467be" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1461226828"
    }
  },
  "politiqueInfo": {
    "besoinPaiementValidation": true
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//communication/PAID_COMMANDE_CONFIRMATION/envoyerEmail</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8e73cf5a-88da-44b6-9c2a-601eeafe71e3" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="ffed3744-1078-40b8-a6bc-212e25689b24" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refCommande" value="${#TestCase#refCommand}"/>
  <con:entry key="typeCommunication" value="PAID_COMMANDE_CONFIRMATION"/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>typeCommunication</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4. Send again_Send failed_Check exeption" id="22588d9b-a17e-4f11-94ba-98d3162ee22d"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/communication/{typeCommunication}/envoyerEmail" methodName="envoyerConfirmationCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Send again_Send failed_Check exeption" id="cfe43d61-000c-4702-b274-80bdd62467be" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1461226828"
    }
  },
  "politiqueInfo": {
    "besoinPaiementValidation": true
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//communication/PAID_COMMANDE_CONFIRMATION/envoyerEmail</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8e73cf5a-88da-44b6-9c2a-601eeafe71e3" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="ee323c3b-cd57-4ee9-baee-b8edacab579f" name="errorCode must be"><con:configuration><token>"errorCode":"2.1.31"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="eaed2145-1d92-4150-94d1-3b6200c783cc" name="errorMessage must  be"><con:configuration><token>"errorMessage":"La communication de type </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refCommande" value="${#TestCase#refCommand}"/>
  <con:entry key="typeCommunication" value="PAID_COMMANDE_CONFIRMATION"/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>typeCommunication</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommand</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NbPassed</con:name><con:value>0</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>35e79528-8b16-4280-8bcd-d2df334dcb0a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bcf34af3-38d0-465b-b0d0-d6d63a93228a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4459213e-ea39-4722-8468-18a9bd70014f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ba2934c-e2e4-4996-b0c8-5ded63fbb86c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7e37061-a393-48d8-9642-5a54e8693e5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e1558b7e-5785-40d1-b4de-940f6f06eac5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5c80985f-f0ac-49a0-aa3c-d88a15207574</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d3db037a-2e92-470e-aae6-4088d3783c9e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4550d337-530a-4b10-8583-78ec42c735d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b37aebab-01dd-451a-b8ce-e4a448570dcd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="9a6fdd4e-901f-4b04-9e06-36f5364d31b5" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.01 Send successfully_mvnoConso_With Params_Validated reductions MVNO ISP_Paied via SEPA" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="bcd204db-7153-4c57-bca7-15bb8547e954">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Reset variables to null" id="a9552d3c-d494-4a1b-adeb-d78890bccfc7"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "refCommand",null)
testRunner.testCase.setPropertyValue( "refCommandLigne",null)
testRunner.testCase.setPropertyValue( "Promo1",null)
testRunner.testCase.setPropertyValue( "Promo2",null)
testRunner.testCase.setPropertyValue( "RUM3","RRE4F5CB")</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform to command mvnoConso" id="b6b4dd2b-b002-41f1-973b-3ece484a30af"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>b93b868a-13f5-479a-9046-5beb3a9f7314</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>041002000</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>customerKey3</con:name></con:property><con:property><con:name>handleKey3</con:name></con:property><con:property><con:name>Promo2</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommandLigneGlobal</con:name><con:value>LIC-00002044</con:value></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>Promo1</con:entry><con:entry>Promo2</con:entry><con:entry>refCommandLigneGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="4244d8b9-d5b9-4d25-9385-6804a9533d6b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform to command mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo1</con:name><con:sourceType>Promo1</con:sourceType><con:sourceStep>1. Transform to command mvnoConso</con:sourceStep><con:targetType>Promo1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo2</con:name><con:sourceType>Promo2</con:sourceType><con:sourceStep>1. Transform to command mvnoConso</con:sourceStep><con:targetType>Promo2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigne</con:name><con:sourceType>refCommandLigneGlobal</con:sourceType><con:sourceStep>1. Transform to command mvnoConso</con:sourceStep><con:targetType>refCommandLigne</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Update Eligible REM_MVNO_ISP to true_Make the reduction to be valid" id="86043d54-f607-46b0-a502-73b1073bed63"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = true where referenceDraft = "${#TestCase#refCommand}" and codeCatalogueReduction = 'REM_MVNO_ISP';</con:query><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Update Eligible REM_MVNO_SIM to false_Make the reduction to be Invalid" id="a259c4db-6c35-44f0-b57a-f5c8e892f60d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = false where referenceDraft = "${#TestCase#refCommand}" and codeCatalogueReduction = 'REM_MVNO_SIM';</con:query><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay RECURRENT for the created command with SEPA mode" id="9649ade8-576b-4d21-9e9a-f5506704e988"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay RECURRENT for the created command with SEPA mode" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3. Send email for this command_Send successfully_Check received email" id="cb6aac17-2dff-4461-b4e5-e2d7aa6c80ef"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/communication/{typeCommunication}/envoyerEmail" methodName="envoyerConfirmationCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Send email for this command_Send successfully_Check received email" id="cfe43d61-000c-4702-b274-80bdd62467be" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1461226828"
    }
  },
  "politiqueInfo": {
    "besoinPaiementValidation": true
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//communication/PAID_COMMANDE_CONFIRMATION/envoyerEmail</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8e73cf5a-88da-44b6-9c2a-601eeafe71e3" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="ee323c3b-cd57-4ee9-baee-b8edacab579f" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refCommande" value="${#TestCase#refCommand}"/>
  <con:entry key="typeCommunication" value="PAID_COMMANDE_CONFIRMATION"/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>typeCommunication</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="4. Select from DB to check communication record" id="a97a47f2-493b-407e-85c0-43f73f0fc5ba"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from communication where referenceCommande = '${#TestCase#refCommand}';</con:query><con:assertion type="XPath Match" id="9432a346-890a-4618-b19c-3fff8bc4af2f" name="XPath Match - 1 record is inserted"><con:configuration><path>count(//*:Results[1]/*:ResultSet[1]/*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Communication type must be"><con:configuration><token>&lt;COMMUNICATION.TYPE>PAID_COMMANDE_CONFIRMATION&lt;/COMMUNICATION.TYPE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f60fb081-a915-4f59-8c32-36919fca1449" name="refCommand must be"><con:configuration><token>&lt;COMMUNICATION.REFERENCECOMMANDE>${#TestCase#refCommand}&lt;/COMMUNICATION.REFERENCECOMMANDE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f4ceb4ca-280b-4a3f-b221-d9a2940fa808" name="refCommandLigne must be"><con:configuration><token>&lt;COMMUNICATION.REFERENCECOMMANDELIGNE>${#TestCase#refCommandLigne}&lt;/COMMUNICATION.REFERENCECOMMANDELIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6734673c-96fa-4f4f-8698-74d7ead21131" name="causeNonEnvoi must be null"><con:configuration><token>&lt;COMMUNICATION.CAUSENONENVOI/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refCommand</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">041002000</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NbPassed</con:name><con:value>0</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LIC-00002044</con:value></con:property><con:property><con:name>Promo2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>35e79528-8b16-4280-8bcd-d2df334dcb0a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bcf34af3-38d0-465b-b0d0-d6d63a93228a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4459213e-ea39-4722-8468-18a9bd70014f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ba2934c-e2e4-4996-b0c8-5ded63fbb86c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7e37061-a393-48d8-9642-5a54e8693e5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e1558b7e-5785-40d1-b4de-940f6f06eac5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5c80985f-f0ac-49a0-aa3c-d88a15207574</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d3db037a-2e92-470e-aae6-4088d3783c9e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4550d337-530a-4b10-8583-78ec42c735d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4dec816a-5eb2-4a0b-996a-22e19b955f5c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9b7f58c1-e6fb-4363-acac-9ec39a9fd302</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7286ab8a-6123-4673-8c8c-f584a131533f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4e9755c0-0405-419c-90cd-d29ff6c57347</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="12d2e665-abe7-47b1-a7b5-82e9c7a70713" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.02 Send successfully_mvnoConso_With Params_Validated reductions MVNO_SIM_Paied via SEPA" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="9e42e7e5-a425-464a-a2dc-726a5e1d1afd">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Reset variables to null" id="ff6be630-0575-4fe0-b723-f96b23898e86"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "refCommand",null)
testRunner.testCase.setPropertyValue( "refCommandLigne",null)
testRunner.testCase.setPropertyValue( "Promo1",null)
testRunner.testCase.setPropertyValue( "Promo2",null)
testRunner.testCase.setPropertyValue( "RUM3","RRE4F5CB")</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform to command mvnoConso" id="be84bd7f-d83d-4de4-bf80-e931e30cbe9e"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>b93b868a-13f5-479a-9046-5beb3a9f7314</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>025000041</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>customerKey3</con:name></con:property><con:property><con:name>handleKey3</con:name></con:property><con:property><con:name>Promo2</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommandLigneGlobal</con:name><con:value>LIC-00002045</con:value></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>Promo1</con:entry><con:entry>Promo2</con:entry><con:entry>refCommandLigneGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="cb32fdb4-59de-4020-af8c-3ff0f334ec28"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform to command mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo1</con:name><con:sourceType>Promo1</con:sourceType><con:sourceStep>1. Transform to command mvnoConso</con:sourceStep><con:targetType>Promo1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo2</con:name><con:sourceType>Promo2</con:sourceType><con:sourceStep>1. Transform to command mvnoConso</con:sourceStep><con:targetType>Promo2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigne</con:name><con:sourceType>refCommandLigneGlobal</con:sourceType><con:sourceStep>1. Transform to command mvnoConso</con:sourceStep><con:targetType>refCommandLigne</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Update Eligible REM_MVNO_SIM to true_Make the reduction to be valid" id="bca08f42-fba8-44e1-80ae-a54be6921023"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = true where referenceDraft = "${#TestCase#refCommand}" and codeCatalogueReduction = 'REM_MVNO_SIM';</con:query><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Update Eligible REM_MVNO_ISP to false_Make the reduction to be valid" id="116b7eeb-6c3f-4844-9e27-a09753c0b958"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = false where referenceDraft = "${#TestCase#refCommand}" and codeCatalogueReduction = 'REM_MVNO_ISP';</con:query><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay RECURRENT for the created command with SEPA mode" id="2099b7c7-ca0e-46cb-b1b3-5930aff0cc24"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay RECURRENT for the created command with SEPA mode" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3. Send email for this command_Send successfully_Check received email" id="246cf9de-7cbc-46a1-a2d7-03581a4f1980"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/communication/{typeCommunication}/envoyerEmail" methodName="envoyerConfirmationCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Send email for this command_Send successfully_Check received email" id="cfe43d61-000c-4702-b274-80bdd62467be" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1461226828"
    }
  },
  "politiqueInfo": {
    "besoinPaiementValidation": true
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//communication/PAID_COMMANDE_CONFIRMATION/envoyerEmail</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8e73cf5a-88da-44b6-9c2a-601eeafe71e3" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="ee323c3b-cd57-4ee9-baee-b8edacab579f" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refCommande" value="${#TestCase#refCommand}"/>
  <con:entry key="typeCommunication" value="PAID_COMMANDE_CONFIRMATION"/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>typeCommunication</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="4. Select from DB to check communication record" id="847b7cdb-4c97-460d-87e0-63f65f0b193b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from communication where referenceCommande = '${#TestCase#refCommand}';</con:query><con:assertion type="XPath Match" id="9432a346-890a-4618-b19c-3fff8bc4af2f" name="XPath Match - 1 record is inserted"><con:configuration><path>count(//*:Results[1]/*:ResultSet[1]/*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Communication type must be"><con:configuration><token>&lt;COMMUNICATION.TYPE>PAID_COMMANDE_CONFIRMATION&lt;/COMMUNICATION.TYPE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f60fb081-a915-4f59-8c32-36919fca1449" name="refCommand must be"><con:configuration><token>&lt;COMMUNICATION.REFERENCECOMMANDE>${#TestCase#refCommand}&lt;/COMMUNICATION.REFERENCECOMMANDE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f4ceb4ca-280b-4a3f-b221-d9a2940fa808" name="refCommandLigne must be"><con:configuration><token>&lt;COMMUNICATION.REFERENCECOMMANDELIGNE>${#TestCase#refCommandLigne}&lt;/COMMUNICATION.REFERENCECOMMANDELIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6734673c-96fa-4f4f-8698-74d7ead21131" name="causeNonEnvoi must be null"><con:configuration><token>&lt;COMMUNICATION.CAUSENONENVOI/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refCommand</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">025000041</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NbPassed</con:name><con:value>0</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value>LIC-00002045</con:value></con:property><con:property><con:name>Promo2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>35e79528-8b16-4280-8bcd-d2df334dcb0a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bcf34af3-38d0-465b-b0d0-d6d63a93228a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4459213e-ea39-4722-8468-18a9bd70014f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ba2934c-e2e4-4996-b0c8-5ded63fbb86c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7e37061-a393-48d8-9642-5a54e8693e5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e1558b7e-5785-40d1-b4de-940f6f06eac5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5c80985f-f0ac-49a0-aa3c-d88a15207574</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d3db037a-2e92-470e-aae6-4088d3783c9e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4550d337-530a-4b10-8583-78ec42c735d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4dec816a-5eb2-4a0b-996a-22e19b955f5c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9b7f58c1-e6fb-4363-acac-9ec39a9fd302</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7286ab8a-6123-4673-8c8c-f584a131533f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5a71f6be-21a2-40b6-97e2-45ceaa9137bf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="4149e14a-5b2b-4ee1-8f4f-1d3f73da7a6b" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.03 Send successfully_mvnoConso_With Params_All reductions validated_Paied via SEPA" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="2e8c157a-3314-418e-ad7d-00052a11648a">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Reset variables to null" id="574fd053-c077-4211-bd6d-0cf807148a0c"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "refCommand",null)
testRunner.testCase.setPropertyValue( "refCommandLigne",null)
testRunner.testCase.setPropertyValue( "Promo1",null)
testRunner.testCase.setPropertyValue( "Promo2",null)
testRunner.testCase.setPropertyValue( "RUM3","RRE4F5CB")</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform to command mvnoConso" id="6d06f115-3602-47af-bf84-623c2dcd5e5c"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>b93b868a-13f5-479a-9046-5beb3a9f7314</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>402002200</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>customerKey3</con:name></con:property><con:property><con:name>handleKey3</con:name></con:property><con:property><con:name>Promo2</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommandLigneGlobal</con:name><con:value>LIC-00002046</con:value></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>Promo1</con:entry><con:entry>Promo2</con:entry><con:entry>refCommandLigneGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="a62c217a-97db-4e94-ad49-a02755ce49fa"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform to command mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo1</con:name><con:sourceType>Promo1</con:sourceType><con:sourceStep>1. Transform to command mvnoConso</con:sourceStep><con:targetType>Promo1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo2</con:name><con:sourceType>Promo2</con:sourceType><con:sourceStep>1. Transform to command mvnoConso</con:sourceStep><con:targetType>Promo2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigne</con:name><con:sourceType>refCommandLigneGlobal</con:sourceType><con:sourceStep>1. Transform to command mvnoConso</con:sourceStep><con:targetType>refCommandLigne</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Update Eligible REM_MVNO_ISP to true_Make the reduction to be valid" id="e8dfc5e6-debe-4e5f-ae87-f8dcc36b2724"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = true where referenceDraft = "${#TestCase#refCommand}" and codeCatalogueReduction = 'REM_MVNO_ISP';</con:query><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Update Eligible REM_MVNO_SIM to true_Make the reduction to be valid" id="44e31474-3bdb-483d-aa13-7d7d365cbdad"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = true where referenceDraft = "${#TestCase#refCommand}" and codeCatalogueReduction = 'REM_MVNO_SIM';</con:query><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay RECURRENT for the created command with SEPA mode" id="140500e1-7c21-486a-8b76-2bf2dbf5cfe8"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay RECURRENT for the created command with SEPA mode" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3. Send email for this command_Send successfully_Check received email" id="14406298-d35c-4e71-87f6-39e063066963"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/communication/{typeCommunication}/envoyerEmail" methodName="envoyerConfirmationCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Send email for this command_Send successfully_Check received email" id="cfe43d61-000c-4702-b274-80bdd62467be" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1461226828"
    }
  },
  "politiqueInfo": {
    "besoinPaiementValidation": true
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//communication/PAID_COMMANDE_CONFIRMATION/envoyerEmail</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8e73cf5a-88da-44b6-9c2a-601eeafe71e3" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="ee323c3b-cd57-4ee9-baee-b8edacab579f" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refCommande" value="${#TestCase#refCommand}"/>
  <con:entry key="typeCommunication" value="PAID_COMMANDE_CONFIRMATION"/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>typeCommunication</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="4. Select from DB to check communication record" id="20cfe8ba-5535-4dd6-a10a-cf1a646b851c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from communication where referenceCommande = '${#TestCase#refCommand}';</con:query><con:assertion type="XPath Match" id="9432a346-890a-4618-b19c-3fff8bc4af2f" name="XPath Match - 1 record is inserted"><con:configuration><path>count(//*:Results[1]/*:ResultSet[1]/*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Communication type must be"><con:configuration><token>&lt;COMMUNICATION.TYPE>PAID_COMMANDE_CONFIRMATION&lt;/COMMUNICATION.TYPE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f60fb081-a915-4f59-8c32-36919fca1449" name="refCommand must be"><con:configuration><token>&lt;COMMUNICATION.REFERENCECOMMANDE>${#TestCase#refCommand}&lt;/COMMUNICATION.REFERENCECOMMANDE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f4ceb4ca-280b-4a3f-b221-d9a2940fa808" name="refCommandLigne must be"><con:configuration><token>&lt;COMMUNICATION.REFERENCECOMMANDELIGNE>${#TestCase#refCommandLigne}&lt;/COMMUNICATION.REFERENCECOMMANDELIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6734673c-96fa-4f4f-8698-74d7ead21131" name="causeNonEnvoi must be null"><con:configuration><token>&lt;COMMUNICATION.CAUSENONENVOI/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refCommand</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">402002200</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NbPassed</con:name><con:value>0</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value>LIC-00002046</con:value></con:property><con:property><con:name>Promo2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>35e79528-8b16-4280-8bcd-d2df334dcb0a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bcf34af3-38d0-465b-b0d0-d6d63a93228a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4459213e-ea39-4722-8468-18a9bd70014f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ba2934c-e2e4-4996-b0c8-5ded63fbb86c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7e37061-a393-48d8-9642-5a54e8693e5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e1558b7e-5785-40d1-b4de-940f6f06eac5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5c80985f-f0ac-49a0-aa3c-d88a15207574</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d3db037a-2e92-470e-aae6-4088d3783c9e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4550d337-530a-4b10-8583-78ec42c735d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4dec816a-5eb2-4a0b-996a-22e19b955f5c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9b7f58c1-e6fb-4363-acac-9ec39a9fd302</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7286ab8a-6123-4673-8c8c-f584a131533f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="9cf10153-a3d5-4a56-8311-fed3f5707d64" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.04 Send successfully_mvnoConso_With Params_Validated voucher_Paied via SEPA" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="677044c7-34f6-4297-9003-048722904d2b">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Reset variables to null" id="abe53d72-b2e1-48f4-b144-4adb3da3dbf8"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "refCommand",null)
testRunner.testCase.setPropertyValue( "refCommandLigne",null)
testRunner.testCase.setPropertyValue( "Promo1",null)
testRunner.testCase.setPropertyValue( "Promo2",null)
testRunner.testCase.setPropertyValue( "RUM3","RRE4F5CB")</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform to command mvnoConso" id="4a35f8d1-0c25-4b8c-8d08-f2ac6cee99f2"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>b93b868a-13f5-479a-9046-5beb3a9f7314</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>200004004</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>customerKey3</con:name></con:property><con:property><con:name>handleKey3</con:name></con:property><con:property><con:name>Promo2</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommandLigneGlobal</con:name><con:value>LIC-00002048</con:value></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>Promo1</con:entry><con:entry>Promo2</con:entry><con:entry>refCommandLigneGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="0b17f5df-64e0-48fa-b894-b7ae8d893031"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform to command mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo1</con:name><con:sourceType>Promo1</con:sourceType><con:sourceStep>1. Transform to command mvnoConso</con:sourceStep><con:targetType>Promo1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo2</con:name><con:sourceType>Promo2</con:sourceType><con:sourceStep>1. Transform to command mvnoConso</con:sourceStep><con:targetType>Promo2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigne</con:name><con:sourceType>refCommandLigneGlobal</con:sourceType><con:sourceStep>1. Transform to command mvnoConso</con:sourceStep><con:targetType>refCommandLigne</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Update Eligible and Voucher REM_MVNO_ISP to true_Make the reduction to be valid" id="083d0b76-9ee9-45c5-8d8a-859d1bc34edc"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = true, voucher = true where referenceDraft = "${#TestCase#refCommand}" and codeCatalogueReduction = 'REM_MVNO_ISP';</con:query><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Update Eligible and Voucher REM_MVNO_SIM to true_Make the reductions to be voucher" id="010e59ae-ccf0-4c0d-bbfc-8764ccdb038c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = true, voucher = true where referenceDraft = "${#TestCase#refCommand}" and codeCatalogueReduction = 'REM_MVNO_SIM';</con:query><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay RECURRENT for the created command with SEPA mode" id="926411fa-f4f4-4866-9de6-5c5f8ce5b6c5"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay RECURRENT for the created command with SEPA mode" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3. Send email for this command_Send successfully_Check received email" id="53a7abc9-530f-46b7-a6d2-1a1f91d7beb0"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/communication/{typeCommunication}/envoyerEmail" methodName="envoyerConfirmationCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Send email for this command_Send successfully_Check received email" id="cfe43d61-000c-4702-b274-80bdd62467be" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1461226828"
    }
  },
  "politiqueInfo": {
    "besoinPaiementValidation": true
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//communication/PAID_COMMANDE_CONFIRMATION/envoyerEmail</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8e73cf5a-88da-44b6-9c2a-601eeafe71e3" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="ee323c3b-cd57-4ee9-baee-b8edacab579f" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refCommande" value="${#TestCase#refCommand}"/>
  <con:entry key="typeCommunication" value="PAID_COMMANDE_CONFIRMATION"/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>typeCommunication</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="4. Select from DB to check communication record" id="87236253-943f-42a2-9ce3-38b9c27be0b6"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from communication where referenceCommande = '${#TestCase#refCommand}';</con:query><con:assertion type="XPath Match" id="9432a346-890a-4618-b19c-3fff8bc4af2f" name="XPath Match - 1 record is inserted"><con:configuration><path>count(//*:Results[1]/*:ResultSet[1]/*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Communication type must be"><con:configuration><token>&lt;COMMUNICATION.TYPE>PAID_COMMANDE_CONFIRMATION&lt;/COMMUNICATION.TYPE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f60fb081-a915-4f59-8c32-36919fca1449" name="refCommand must be"><con:configuration><token>&lt;COMMUNICATION.REFERENCECOMMANDE>${#TestCase#refCommand}&lt;/COMMUNICATION.REFERENCECOMMANDE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f4ceb4ca-280b-4a3f-b221-d9a2940fa808" name="refCommandLigne must be"><con:configuration><token>&lt;COMMUNICATION.REFERENCECOMMANDELIGNE>${#TestCase#refCommandLigne}&lt;/COMMUNICATION.REFERENCECOMMANDELIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6734673c-96fa-4f4f-8698-74d7ead21131" name="causeNonEnvoi must be null"><con:configuration><token>&lt;COMMUNICATION.CAUSENONENVOI/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refCommand</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">200004004</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NbPassed</con:name><con:value>0</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value>LIC-00002048</con:value></con:property><con:property><con:name>Promo2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>35e79528-8b16-4280-8bcd-d2df334dcb0a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bcf34af3-38d0-465b-b0d0-d6d63a93228a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4459213e-ea39-4722-8468-18a9bd70014f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ba2934c-e2e4-4996-b0c8-5ded63fbb86c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7e37061-a393-48d8-9642-5a54e8693e5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e1558b7e-5785-40d1-b4de-940f6f06eac5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5c80985f-f0ac-49a0-aa3c-d88a15207574</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d3db037a-2e92-470e-aae6-4088d3783c9e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4550d337-530a-4b10-8583-78ec42c735d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4dec816a-5eb2-4a0b-996a-22e19b955f5c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9b7f58c1-e6fb-4363-acac-9ec39a9fd302</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7286ab8a-6123-4673-8c8c-f584a131533f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>010e59ae-ccf0-4c0d-bbfc-8764ccdb038c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="713b622a-28d2-49cc-b0da-5317e19c1dcc" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.05 Send successfully_mvnoConso_With Params_Validated voucher ISP and validated reduction SIM_Paied via SEPA" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="dfe48084-10b7-4ba2-8089-b1e37bd35721">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Reset variables to null" id="d429ec4b-1ccd-4b1a-8766-9ae5a7e44f22"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "refCommand",null)
testRunner.testCase.setPropertyValue( "refCommandLigne",null)
testRunner.testCase.setPropertyValue( "Promo1",null)
testRunner.testCase.setPropertyValue( "Promo2",null)
testRunner.testCase.setPropertyValue( "RUM3","RRE4F5CB")</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform to command mvnoConso" id="b7b60b3f-e8e2-4ac0-8532-70765437eaa4"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>b93b868a-13f5-479a-9046-5beb3a9f7314</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>038000204</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>customerKey3</con:name></con:property><con:property><con:name>handleKey3</con:name></con:property><con:property><con:name>Promo2</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommandLigneGlobal</con:name><con:value>LIC-00002047</con:value></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>Promo1</con:entry><con:entry>Promo2</con:entry><con:entry>refCommandLigneGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="01e13cbc-caac-4650-a546-ff3aaa30b135"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform to command mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo1</con:name><con:sourceType>Promo1</con:sourceType><con:sourceStep>1. Transform to command mvnoConso</con:sourceStep><con:targetType>Promo1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo2</con:name><con:sourceType>Promo2</con:sourceType><con:sourceStep>1. Transform to command mvnoConso</con:sourceStep><con:targetType>Promo2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigne</con:name><con:sourceType>refCommandLigneGlobal</con:sourceType><con:sourceStep>1. Transform to command mvnoConso</con:sourceStep><con:targetType>refCommandLigne</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Update Eligible and Voucher REM_MVNO_ISP to true_Make the reduction to be voucher" id="a40ba59c-4ea1-475a-ae13-3485ff337c49"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = true, voucher = true where referenceDraft = "${#TestCase#refCommand}" and codeCatalogueReduction = 'REM_MVNO_ISP';</con:query><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Update Eligible REM_MVNO_SIM to true_Make the reduction to be valid" id="cbb371c0-6350-4f89-a2c4-e8520c72c1f0"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = true where referenceDraft = "${#TestCase#refCommand}" and codeCatalogueReduction = 'REM_MVNO_SIM';</con:query><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay RECURRENT for the created command with SEPA mode" id="e76e81da-e972-4311-b224-4f822e6f0217"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay RECURRENT for the created command with SEPA mode" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3. Send email for this command_Send successfully_Check received email" id="da11359e-966e-4854-bac6-2cd36a972e5b"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/communication/{typeCommunication}/envoyerEmail" methodName="envoyerConfirmationCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Send email for this command_Send successfully_Check received email" id="cfe43d61-000c-4702-b274-80bdd62467be" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1461226828"
    }
  },
  "politiqueInfo": {
    "besoinPaiementValidation": true
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//communication/PAID_COMMANDE_CONFIRMATION/envoyerEmail</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8e73cf5a-88da-44b6-9c2a-601eeafe71e3" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="ee323c3b-cd57-4ee9-baee-b8edacab579f" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refCommande" value="${#TestCase#refCommand}"/>
  <con:entry key="typeCommunication" value="PAID_COMMANDE_CONFIRMATION"/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>typeCommunication</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="4. Select from DB to check communication record" id="c9b26b4d-d477-4cf4-9d69-65639ade3d6d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from communication where referenceCommande = '${#TestCase#refCommand}';</con:query><con:assertion type="XPath Match" id="9432a346-890a-4618-b19c-3fff8bc4af2f" name="XPath Match - 1 record is inserted"><con:configuration><path>count(//*:Results[1]/*:ResultSet[1]/*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Communication type must be"><con:configuration><token>&lt;COMMUNICATION.TYPE>PAID_COMMANDE_CONFIRMATION&lt;/COMMUNICATION.TYPE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f60fb081-a915-4f59-8c32-36919fca1449" name="refCommand must be"><con:configuration><token>&lt;COMMUNICATION.REFERENCECOMMANDE>${#TestCase#refCommand}&lt;/COMMUNICATION.REFERENCECOMMANDE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f4ceb4ca-280b-4a3f-b221-d9a2940fa808" name="refCommandLigne must be"><con:configuration><token>&lt;COMMUNICATION.REFERENCECOMMANDELIGNE>${#TestCase#refCommandLigne}&lt;/COMMUNICATION.REFERENCECOMMANDELIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6734673c-96fa-4f4f-8698-74d7ead21131" name="causeNonEnvoi must be null"><con:configuration><token>&lt;COMMUNICATION.CAUSENONENVOI/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refCommand</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">038000204</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NbPassed</con:name><con:value>0</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value>LIC-00002047</con:value></con:property><con:property><con:name>Promo2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>35e79528-8b16-4280-8bcd-d2df334dcb0a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bcf34af3-38d0-465b-b0d0-d6d63a93228a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4459213e-ea39-4722-8468-18a9bd70014f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ba2934c-e2e4-4996-b0c8-5ded63fbb86c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7e37061-a393-48d8-9642-5a54e8693e5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e1558b7e-5785-40d1-b4de-940f6f06eac5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5c80985f-f0ac-49a0-aa3c-d88a15207574</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d3db037a-2e92-470e-aae6-4088d3783c9e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4550d337-530a-4b10-8583-78ec42c735d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4dec816a-5eb2-4a0b-996a-22e19b955f5c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9b7f58c1-e6fb-4363-acac-9ec39a9fd302</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7286ab8a-6123-4673-8c8c-f584a131533f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cbb371c0-6350-4f89-a2c4-e8520c72c1f0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="bc2dd1a1-698f-4ad2-bd3e-b55b56c63a95" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.06 Send successfully_mvnoConso_With Params_Validated voucher SIM and validated reduction ISP_Paied via SEPA" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="def24910-4a80-4f9c-ab62-f8c120b1e9fc">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Reset variables to null" id="fe1ed233-c82e-4ee5-9841-35aca0b84cfd"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "refCommand",null)
testRunner.testCase.setPropertyValue( "refCommandLigne",null)
testRunner.testCase.setPropertyValue( "Promo1",null)
testRunner.testCase.setPropertyValue( "Promo2",null)
testRunner.testCase.setPropertyValue( "RUM3","RRE4F5CB")</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform to command mvnoConso" id="719d43d0-fa35-49c3-9e5a-2b2e4db80499"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>b93b868a-13f5-479a-9046-5beb3a9f7314</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>003002450</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>customerKey3</con:name></con:property><con:property><con:name>handleKey3</con:name></con:property><con:property><con:name>Promo2</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommandLigneGlobal</con:name><con:value>LIC-00002049</con:value></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>Promo1</con:entry><con:entry>Promo2</con:entry><con:entry>refCommandLigneGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="f8f66029-0ea5-4610-8d5c-bfe45202da14"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform to command mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo1</con:name><con:sourceType>Promo1</con:sourceType><con:sourceStep>1. Transform to command mvnoConso</con:sourceStep><con:targetType>Promo1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo2</con:name><con:sourceType>Promo2</con:sourceType><con:sourceStep>1. Transform to command mvnoConso</con:sourceStep><con:targetType>Promo2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigne</con:name><con:sourceType>refCommandLigneGlobal</con:sourceType><con:sourceStep>1. Transform to command mvnoConso</con:sourceStep><con:targetType>refCommandLigne</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Update Eligible and Voucher REM_MVNO_SIM to true_Make the reduction to be voucher" id="dcb05b0a-a8f2-4a40-8af3-2fb83e3a8c25"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = true, voucher = true where referenceDraft = "${#TestCase#refCommand}" and codeCatalogueReduction = 'REM_MVNO_SIM';</con:query><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Update Eligible REM_MVNO_ISP to true_Make the reduction to be valid" id="8fbc3a76-4e42-4158-af24-36b13d8d3588"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = true where referenceDraft = "${#TestCase#refCommand}" and codeCatalogueReduction = 'REM_MVNO_ISP';</con:query><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay RECURRENT for the created command with SEPA mode" id="0fa55f59-2b42-49da-b8e8-a4e3f6258186"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay RECURRENT for the created command with SEPA mode" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3. Send email for this command_Send successfully_Check received email" id="a485d3f3-8937-4e6c-b487-43a2140a505b"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/communication/{typeCommunication}/envoyerEmail" methodName="envoyerConfirmationCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Send email for this command_Send successfully_Check received email" id="cfe43d61-000c-4702-b274-80bdd62467be" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1461226828"
    }
  },
  "politiqueInfo": {
    "besoinPaiementValidation": true
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//communication/PAID_COMMANDE_CONFIRMATION/envoyerEmail</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8e73cf5a-88da-44b6-9c2a-601eeafe71e3" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="ee323c3b-cd57-4ee9-baee-b8edacab579f" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refCommande" value="${#TestCase#refCommand}"/>
  <con:entry key="typeCommunication" value="PAID_COMMANDE_CONFIRMATION"/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>typeCommunication</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="4. Select from DB to check communication record" id="7e2bcad0-7cd9-4466-9f9b-24663345c93b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from communication where referenceCommande = '${#TestCase#refCommand}';</con:query><con:assertion type="XPath Match" id="9432a346-890a-4618-b19c-3fff8bc4af2f" name="XPath Match - 1 record is inserted"><con:configuration><path>count(//*:Results[1]/*:ResultSet[1]/*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Communication type must be"><con:configuration><token>&lt;COMMUNICATION.TYPE>PAID_COMMANDE_CONFIRMATION&lt;/COMMUNICATION.TYPE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f60fb081-a915-4f59-8c32-36919fca1449" name="refCommand must be"><con:configuration><token>&lt;COMMUNICATION.REFERENCECOMMANDE>${#TestCase#refCommand}&lt;/COMMUNICATION.REFERENCECOMMANDE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f4ceb4ca-280b-4a3f-b221-d9a2940fa808" name="refCommandLigne must be"><con:configuration><token>&lt;COMMUNICATION.REFERENCECOMMANDELIGNE>${#TestCase#refCommandLigne}&lt;/COMMUNICATION.REFERENCECOMMANDELIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6734673c-96fa-4f4f-8698-74d7ead21131" name="causeNonEnvoi must be null"><con:configuration><token>&lt;COMMUNICATION.CAUSENONENVOI/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refCommand</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">003002450</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NbPassed</con:name><con:value>0</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value>LIC-00002049</con:value></con:property><con:property><con:name>Promo2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>35e79528-8b16-4280-8bcd-d2df334dcb0a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bcf34af3-38d0-465b-b0d0-d6d63a93228a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4459213e-ea39-4722-8468-18a9bd70014f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ba2934c-e2e4-4996-b0c8-5ded63fbb86c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7e37061-a393-48d8-9642-5a54e8693e5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e1558b7e-5785-40d1-b4de-940f6f06eac5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5c80985f-f0ac-49a0-aa3c-d88a15207574</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d3db037a-2e92-470e-aae6-4088d3783c9e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4550d337-530a-4b10-8583-78ec42c735d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4dec816a-5eb2-4a0b-996a-22e19b955f5c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9b7f58c1-e6fb-4363-acac-9ec39a9fd302</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7286ab8a-6123-4673-8c8c-f584a131533f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cbb371c0-6350-4f89-a2c4-e8520c72c1f0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="a326dd31-9011-4420-af38-7dd0a90bd213" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.07 Send successfully_mvnoConso_No params_No reductions_No Sepa" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Reset variables to null" id="23c88b72-bbde-444a-b4a6-4bdb76d9927a"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "refCommand",null)
testRunner.testCase.setPropertyValue( "refCommandLigne",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a command mvnoConso" id="4d8c292a-5882-47c0-a4af-593d7626d631"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>6480b3ef-c7b1-44d2-b94f-b962d23bd271</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>006006024</con:value></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="dd62b174-c8b0-46bb-b6b2-f2a24f76e4ce"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a command mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay COMPTANT for the created command" id="4ec598c4-9bb5-4274-81ef-c20f1e0d973c"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "100",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "123456",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3. Send email for this command_Send successfully" id="5b979b6f-e23b-48b3-97cd-436069a9330d"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/communication/{typeCommunication}/envoyerEmail" methodName="envoyerConfirmationCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Send email for this command_Send successfully" id="cfe43d61-000c-4702-b274-80bdd62467be" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1461226828"
    }
  },
  "politiqueInfo": {
    "besoinPaiementValidation": true
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//communication/PAID_COMMANDE_CONFIRMATION/envoyerEmail</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="28788f21-5345-4819-9459-14dfe075e48b" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refCommande" value="${#TestCase#refCommand}"/>
  <con:entry key="typeCommunication" value="PAID_COMMANDE_CONFIRMATION"/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>typeCommunication</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="4. Select from DB to check communication record" id="35092325-e998-4624-bf6c-406a7cfea2cd"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from communication where referenceCommande = '${#TestCase#refCommand}';</con:query><con:assertion type="XPath Match" id="9432a346-890a-4618-b19c-3fff8bc4af2f" name="XPath Match - 1 record is inserted"><con:configuration><path>count(//*:Results[1]/*:ResultSet[1]/*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Communication type must be"><con:configuration><token>&lt;COMMUNICATION.TYPE>PAID_COMMANDE_CONFIRMATION&lt;/COMMUNICATION.TYPE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f60fb081-a915-4f59-8c32-36919fca1449" name="refCommand must be"><con:configuration><token>&lt;COMMUNICATION.REFERENCECOMMANDE>${#TestCase#refCommand}&lt;/COMMUNICATION.REFERENCECOMMANDE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f4ceb4ca-280b-4a3f-b221-d9a2940fa808" name="refCommandLigne must be" disabled="true"><con:configuration><token>&lt;COMMUNICATION.REFERENCECOMMANDELIGNE>${#TestCase#refCommandLigne}&lt;/COMMUNICATION.REFERENCECOMMANDELIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6734673c-96fa-4f4f-8698-74d7ead21131" name="causeNonEnvoi must be null"><con:configuration><token>&lt;COMMUNICATION.CAUSENONENVOI/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refCommand</con:name><con:value>006006024</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>0</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>35e79528-8b16-4280-8bcd-d2df334dcb0a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bcf34af3-38d0-465b-b0d0-d6d63a93228a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4459213e-ea39-4722-8468-18a9bd70014f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ba2934c-e2e4-4996-b0c8-5ded63fbb86c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7e37061-a393-48d8-9642-5a54e8693e5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="441d4291-02f0-42b2-834d-a816a8c0f344" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03.01 Send successfully_mvnoPack_With Params_Validated reductions MVNO ISP_Paied via SEPA" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="49d50636-c212-4508-9139-92d654cb54f1">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Reset variables to null" id="9e0b390e-af00-43d8-83fa-ab98e1b24657"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "refCommand",null)
testRunner.testCase.setPropertyValue( "refCommandLigne",null)
testRunner.testCase.setPropertyValue( "Promo1",null)
testRunner.testCase.setPropertyValue( "Promo2",null)
testRunner.testCase.setPropertyValue( "RUM3","RRE4F5CB")</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform to command mvnoPack" id="edc5970a-d7ea-45c2-97a8-ff17f111cbe1"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1727ab8b-9657-4e07-b4db-cef3539c93ee</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>025000047</con:value></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>customerKey4</con:name></con:property><con:property><con:name>handleKey4</con:name></con:property><con:property><con:name>Promo2</con:name><con:value>REM_MVNO_ISP_ELITE</con:value></con:property><con:property><con:name>refCommandLigneGlobal</con:name><con:value>LIC-00002051</con:value></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>Promo1</con:entry><con:entry>Promo2</con:entry><con:entry>refCommandLigneGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="0d134086-3e68-4526-8800-83b0550641b7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform to command mvnoPack</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo1</con:name><con:sourceType>Promo1</con:sourceType><con:sourceStep>1. Transform to command mvnoPack</con:sourceStep><con:targetType>Promo1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo2</con:name><con:sourceType>Promo2</con:sourceType><con:sourceStep>1. Transform to command mvnoPack</con:sourceStep><con:targetType>Promo2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigne</con:name><con:sourceType>refCommandLigneGlobal</con:sourceType><con:sourceStep>1. Transform to command mvnoPack</con:sourceStep><con:targetType>refCommandLigne</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Update Eligible of REM_MVNO_ISP to true_Make the reduction to be valid" id="29bdde0c-f9df-49b4-9bea-16f3ea89470c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = true where referenceDraft = "${#TestCase#refCommand}" and codeCatalogueReduction = 'REM_MVNO_ISP';</con:query><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Update Eligible REM_MVNO_SIM to false_Make the reduction to be Invalid" id="0a00aa6d-70a9-4d0d-a8c5-1cf28c6c4b65"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = false where referenceDraft = "${#TestCase#refCommand}" and codeCatalogueReduction = 'REM_MVNO_SIM';</con:query><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay RECURRENT for the created command with SEPA mode" id="4ab83f64-1009-4a0b-ad92-05dc260103c9"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay RECURRENT for the created command with SEPA mode" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay COMPTANT for the created command" id="a029096a-48d1-4bcc-9715-c6df35cf66e2" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "1",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R0000000",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3. Send email for this command_Send successfully" id="da4bd133-e200-4bf9-b25b-9e373681f7ac"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/communication/{typeCommunication}/envoyerEmail" methodName="envoyerConfirmationCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Send email for this command_Send successfully" id="cfe43d61-000c-4702-b274-80bdd62467be" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1461226828"
    }
  },
  "politiqueInfo": {
    "besoinPaiementValidation": true
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//communication/PAID_COMMANDE_CONFIRMATION/envoyerEmail</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8e73cf5a-88da-44b6-9c2a-601eeafe71e3" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="ee323c3b-cd57-4ee9-baee-b8edacab579f" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refCommande" value="${#TestCase#refCommand}"/>
  <con:entry key="typeCommunication" value="PAID_COMMANDE_CONFIRMATION"/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>typeCommunication</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="4. Select from DB to check communication record" id="6cca6906-67c7-4350-8e9e-ef92c97f9ddc"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from communication where referenceCommande = '${#TestCase#refCommand}';</con:query><con:assertion type="XPath Match" id="9432a346-890a-4618-b19c-3fff8bc4af2f" name="XPath Match - 1 record is inserted"><con:configuration><path>count(//*:Results[1]/*:ResultSet[1]/*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Communication type must be"><con:configuration><token>&lt;COMMUNICATION.TYPE>PAID_COMMANDE_CONFIRMATION&lt;/COMMUNICATION.TYPE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f60fb081-a915-4f59-8c32-36919fca1449" name="refCommand must be"><con:configuration><token>&lt;COMMUNICATION.REFERENCECOMMANDE>${#TestCase#refCommand}&lt;/COMMUNICATION.REFERENCECOMMANDE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f4ceb4ca-280b-4a3f-b221-d9a2940fa808" name="refCommandLigne must be"><con:configuration><token>&lt;COMMUNICATION.REFERENCECOMMANDELIGNE>${#TestCase#refCommandLigne}&lt;/COMMUNICATION.REFERENCECOMMANDELIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6734673c-96fa-4f4f-8698-74d7ead21131" name="causeNonEnvoi must be null"><con:configuration><token>&lt;COMMUNICATION.CAUSENONENVOI/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refCommand</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">025000047</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>0</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value>LIC-00002051</con:value></con:property><con:property><con:name>Promo2</con:name><con:value>REM_MVNO_ISP_ELITE</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>35e79528-8b16-4280-8bcd-d2df334dcb0a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bcf34af3-38d0-465b-b0d0-d6d63a93228a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4459213e-ea39-4722-8468-18a9bd70014f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ba2934c-e2e4-4996-b0c8-5ded63fbb86c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7e37061-a393-48d8-9642-5a54e8693e5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e1558b7e-5785-40d1-b4de-940f6f06eac5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5c80985f-f0ac-49a0-aa3c-d88a15207574</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d3db037a-2e92-470e-aae6-4088d3783c9e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4550d337-530a-4b10-8583-78ec42c735d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4dec816a-5eb2-4a0b-996a-22e19b955f5c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9b7f58c1-e6fb-4363-acac-9ec39a9fd302</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7286ab8a-6123-4673-8c8c-f584a131533f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2221fe95-0f29-4d5b-bdbc-dbfa8aec7926</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="cf3f2621-1b35-4b5a-ba1f-b39187a69c7f" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03.02 Send successfully_mvnoPack_With Params_Validated reductions MVNO SIM_Paied via SEPA" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="81770c36-c585-4419-af61-b0df73532e88">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Reset variables to null" id="e9747964-1b0c-40fe-8d9f-e1464f18a478"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "refCommand",null)
testRunner.testCase.setPropertyValue( "refCommandLigne",null)
testRunner.testCase.setPropertyValue( "Promo1",null)
testRunner.testCase.setPropertyValue( "Promo2",null)
testRunner.testCase.setPropertyValue( "RUM3","RRE4F5CB")</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform to command mvnoPack" id="222633b1-00fd-4d06-97d3-dfeba9b0448e"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1727ab8b-9657-4e07-b4db-cef3539c93ee</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>003002480</con:value></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>customerKey4</con:name></con:property><con:property><con:name>handleKey4</con:name></con:property><con:property><con:name>Promo2</con:name><con:value>REM_MVNO_ISP_ELITE</con:value></con:property><con:property><con:name>refCommandLigneGlobal</con:name><con:value>LIC-00002052</con:value></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>Promo1</con:entry><con:entry>Promo2</con:entry><con:entry>refCommandLigneGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="6485f9ef-fa83-4dfe-835c-3c7685d86386"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform to command mvnoPack</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo1</con:name><con:sourceType>Promo1</con:sourceType><con:sourceStep>1. Transform to command mvnoPack</con:sourceStep><con:targetType>Promo1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo2</con:name><con:sourceType>Promo2</con:sourceType><con:sourceStep>1. Transform to command mvnoPack</con:sourceStep><con:targetType>Promo2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigne</con:name><con:sourceType>refCommandLigneGlobal</con:sourceType><con:sourceStep>1. Transform to command mvnoPack</con:sourceStep><con:targetType>refCommandLigne</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Update Eligible of REM_MVNO_SIM to true_Make the reduction to be valid" id="66325d61-8047-40ca-8bf2-1c95180f65ea"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = true where referenceDraft = "${#TestCase#refCommand}" and codeCatalogueReduction = 'REM_MVNO_SIM';</con:query><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Update Eligible REM_MVNO_ISP to false_Make the reduction to be valid" id="ef7a973f-0199-474d-a493-78af28290941"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = false where referenceDraft = "${#TestCase#refCommand}" and codeCatalogueReduction = 'REM_MVNO_ISP';</con:query><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay RECURRENT for the created command with SEPA mode" id="12b68363-8600-4245-bddc-fb13221485ce"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay RECURRENT for the created command with SEPA mode" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay COMPTANT for the created command" id="e8d0a3db-046c-4cb0-828c-611738023074" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "1",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R0000000",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3. Send email for this command_Send successfully" id="e168e61d-99b9-4912-981e-9a692263581d"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/communication/{typeCommunication}/envoyerEmail" methodName="envoyerConfirmationCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Send email for this command_Send successfully" id="cfe43d61-000c-4702-b274-80bdd62467be" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1461226828"
    }
  },
  "politiqueInfo": {
    "besoinPaiementValidation": true
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//communication/PAID_COMMANDE_CONFIRMATION/envoyerEmail</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8e73cf5a-88da-44b6-9c2a-601eeafe71e3" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="ee323c3b-cd57-4ee9-baee-b8edacab579f" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refCommande" value="${#TestCase#refCommand}"/>
  <con:entry key="typeCommunication" value="PAID_COMMANDE_CONFIRMATION"/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>typeCommunication</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="4. Select from DB to check communication record" id="c0334f88-13ab-405e-976c-90b84e6d46a3"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from communication where referenceCommande = '${#TestCase#refCommand}';</con:query><con:assertion type="XPath Match" id="9432a346-890a-4618-b19c-3fff8bc4af2f" name="XPath Match - 1 record is inserted"><con:configuration><path>count(//*:Results[1]/*:ResultSet[1]/*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Communication type must be"><con:configuration><token>&lt;COMMUNICATION.TYPE>PAID_COMMANDE_CONFIRMATION&lt;/COMMUNICATION.TYPE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f60fb081-a915-4f59-8c32-36919fca1449" name="refCommand must be"><con:configuration><token>&lt;COMMUNICATION.REFERENCECOMMANDE>${#TestCase#refCommand}&lt;/COMMUNICATION.REFERENCECOMMANDE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f4ceb4ca-280b-4a3f-b221-d9a2940fa808" name="refCommandLigne must be"><con:configuration><token>&lt;COMMUNICATION.REFERENCECOMMANDELIGNE>${#TestCase#refCommandLigne}&lt;/COMMUNICATION.REFERENCECOMMANDELIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6734673c-96fa-4f4f-8698-74d7ead21131" name="causeNonEnvoi must be null"><con:configuration><token>&lt;COMMUNICATION.CAUSENONENVOI/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refCommand</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">003002480</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>0</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value>LIC-00002052</con:value></con:property><con:property><con:name>Promo2</con:name><con:value>REM_MVNO_ISP_ELITE</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>35e79528-8b16-4280-8bcd-d2df334dcb0a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bcf34af3-38d0-465b-b0d0-d6d63a93228a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4459213e-ea39-4722-8468-18a9bd70014f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ba2934c-e2e4-4996-b0c8-5ded63fbb86c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7e37061-a393-48d8-9642-5a54e8693e5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e1558b7e-5785-40d1-b4de-940f6f06eac5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5c80985f-f0ac-49a0-aa3c-d88a15207574</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d3db037a-2e92-470e-aae6-4088d3783c9e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4550d337-530a-4b10-8583-78ec42c735d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4dec816a-5eb2-4a0b-996a-22e19b955f5c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9b7f58c1-e6fb-4363-acac-9ec39a9fd302</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7286ab8a-6123-4673-8c8c-f584a131533f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ef7a973f-0199-474d-a493-78af28290941</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="45c0e1eb-35bd-46ba-8e0e-d2cfeec1a701" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03.03 Send successfully_mvnoPack_With Params_All reductions validated_Paied via SEPA" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="09e192f0-c1f8-49cd-8b30-553ef507811a">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Reset variables to null" id="31b5d065-f054-4a25-b50d-b0381c8e3478"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "refCommand",null)
testRunner.testCase.setPropertyValue( "refCommandLigne",null)
testRunner.testCase.setPropertyValue( "Promo1",null)
testRunner.testCase.setPropertyValue( "Promo2",null)
testRunner.testCase.setPropertyValue( "RUM3","RRE4F5CB")</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform to command mvnoPack" id="870b0ead-75f2-4a3b-a53a-8a41fa6be81e"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1727ab8b-9657-4e07-b4db-cef3539c93ee</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>025000090</con:value></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>customerKey4</con:name></con:property><con:property><con:name>handleKey4</con:name></con:property><con:property><con:name>Promo2</con:name><con:value>REM_MVNO_ISP_ELITE</con:value></con:property><con:property><con:name>refCommandLigneGlobal</con:name><con:value>LIC-00002094</con:value></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>Promo1</con:entry><con:entry>Promo2</con:entry><con:entry>refCommandLigneGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="71a1621f-a96a-416b-a18b-6df9b923d2f3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform to command mvnoPack</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo1</con:name><con:sourceType>Promo1</con:sourceType><con:sourceStep>1. Transform to command mvnoPack</con:sourceStep><con:targetType>Promo1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo2</con:name><con:sourceType>Promo2</con:sourceType><con:sourceStep>1. Transform to command mvnoPack</con:sourceStep><con:targetType>Promo2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigne</con:name><con:sourceType>refCommandLigneGlobal</con:sourceType><con:sourceStep>1. Transform to command mvnoPack</con:sourceStep><con:targetType>refCommandLigne</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Update Eligible of REM_MVNO_ISP to true_Make the reduction to be valid" id="8e756de1-ca4f-4d56-a006-b5df24abf0da"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = true where referenceDraft = "${#TestCase#refCommand}" and codeCatalogueReduction = 'REM_MVNO_ISP';</con:query><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Update Eligible of REM_MVNO_SIM to true_Make the reduction to be valid" id="3460ab47-dd71-4eef-ab1b-5a81a211e12c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = true where referenceDraft = "${#TestCase#refCommand}" and codeCatalogueReduction = 'REM_MVNO_SIM';</con:query><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay RECURRENT for the created command with SEPA mode" id="7191fa8f-b0b9-4f19-8d71-98742f9f4faf"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay RECURRENT for the created command with SEPA mode" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay COMPTANT for the created command" id="268d66ea-5cea-415b-8a87-55fe9becd429" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "1",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R0000000",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3. Send email for this command_Send successfully" id="6e95dc50-467d-42c5-8727-11f47a7c0cba"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/communication/{typeCommunication}/envoyerEmail" methodName="envoyerConfirmationCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Send email for this command_Send successfully" id="cfe43d61-000c-4702-b274-80bdd62467be" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1461226828"
    }
  },
  "politiqueInfo": {
    "besoinPaiementValidation": true
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//communication/PAID_COMMANDE_CONFIRMATION/envoyerEmail</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8e73cf5a-88da-44b6-9c2a-601eeafe71e3" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="ee323c3b-cd57-4ee9-baee-b8edacab579f" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refCommande" value="${#TestCase#refCommand}"/>
  <con:entry key="typeCommunication" value="PAID_COMMANDE_CONFIRMATION"/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>typeCommunication</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="4. Select from DB to check communication record" id="198dae80-e6c6-4816-9f79-921f21fdaf7e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from communication where referenceCommande = '${#TestCase#refCommand}';</con:query><con:assertion type="XPath Match" id="9432a346-890a-4618-b19c-3fff8bc4af2f" name="XPath Match - 1 record is inserted"><con:configuration><path>count(//*:Results[1]/*:ResultSet[1]/*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Communication type must be"><con:configuration><token>&lt;COMMUNICATION.TYPE>PAID_COMMANDE_CONFIRMATION&lt;/COMMUNICATION.TYPE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f60fb081-a915-4f59-8c32-36919fca1449" name="refCommand must be"><con:configuration><token>&lt;COMMUNICATION.REFERENCECOMMANDE>${#TestCase#refCommand}&lt;/COMMUNICATION.REFERENCECOMMANDE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f4ceb4ca-280b-4a3f-b221-d9a2940fa808" name="refCommandLigne must be"><con:configuration><token>&lt;COMMUNICATION.REFERENCECOMMANDELIGNE>${#TestCase#refCommandLigne}&lt;/COMMUNICATION.REFERENCECOMMANDELIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6734673c-96fa-4f4f-8698-74d7ead21131" name="causeNonEnvoi must be null"><con:configuration><token>&lt;COMMUNICATION.CAUSENONENVOI/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refCommand</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">025000090</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>0</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value>LIC-00002094</con:value></con:property><con:property><con:name>Promo2</con:name><con:value>REM_MVNO_ISP_ELITE</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>35e79528-8b16-4280-8bcd-d2df334dcb0a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bcf34af3-38d0-465b-b0d0-d6d63a93228a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4459213e-ea39-4722-8468-18a9bd70014f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ba2934c-e2e4-4996-b0c8-5ded63fbb86c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7e37061-a393-48d8-9642-5a54e8693e5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e1558b7e-5785-40d1-b4de-940f6f06eac5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5c80985f-f0ac-49a0-aa3c-d88a15207574</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d3db037a-2e92-470e-aae6-4088d3783c9e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4550d337-530a-4b10-8583-78ec42c735d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4dec816a-5eb2-4a0b-996a-22e19b955f5c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9b7f58c1-e6fb-4363-acac-9ec39a9fd302</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7286ab8a-6123-4673-8c8c-f584a131533f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="075b087b-785e-412b-acf1-293dd3c423b6" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03.04 Send successfully_mvnoPack_With Params_Validated voucher ISP and validated reduction SIM_Paied via SEPA" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="1118f120-400d-4add-9fc5-5378a6e91387">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Reset variables to null" id="999f27a5-21dc-48d3-a768-6a9a593f4ee6"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "refCommand",null)
testRunner.testCase.setPropertyValue( "refCommandLigne",null)
testRunner.testCase.setPropertyValue( "Promo1",null)
testRunner.testCase.setPropertyValue( "Promo2",null)
testRunner.testCase.setPropertyValue( "RUM3","RRE4F5CB")</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform to command mvnoPack" id="1caf4842-5a85-4696-8d4e-9f66a71b553f"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1727ab8b-9657-4e07-b4db-cef3539c93ee</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>006008028</con:value></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>customerKey4</con:name></con:property><con:property><con:name>handleKey4</con:name></con:property><con:property><con:name>Promo2</con:name><con:value>REM_MVNO_ISP_ELITE</con:value></con:property><con:property><con:name>refCommandLigneGlobal</con:name><con:value>LIC-00002092</con:value></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>Promo1</con:entry><con:entry>Promo2</con:entry><con:entry>refCommandLigneGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="976e89cc-0969-458c-8e87-b50c7164a7c6"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform to command mvnoPack</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo1</con:name><con:sourceType>Promo1</con:sourceType><con:sourceStep>1. Transform to command mvnoPack</con:sourceStep><con:targetType>Promo1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo2</con:name><con:sourceType>Promo2</con:sourceType><con:sourceStep>1. Transform to command mvnoPack</con:sourceStep><con:targetType>Promo2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigne</con:name><con:sourceType>refCommandLigneGlobal</con:sourceType><con:sourceStep>1. Transform to command mvnoPack</con:sourceStep><con:targetType>refCommandLigne</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Update Eligible and Voucher of REM_MVNO_ISP to true_Make the reduction to be valid" id="3aeaf9f6-6031-4629-b7ff-66c9445cf5d3"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = true, voucher = true where referenceDraft = "${#TestCase#refCommand}" and codeCatalogueReduction = 'REM_MVNO_ISP';</con:query><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Update Eligible REM_MVNO_SIM to true_Make the reduction to be valid" id="6fc08fe1-3c7c-4e85-9f1a-db96330584e6"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = true where referenceDraft = "${#TestCase#refCommand}" and codeCatalogueReduction = 'REM_MVNO_SIM';</con:query><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay RECURRENT for the created command with SEPA mode" id="eaf4ab79-2259-453e-88a8-104f0a23d3ed"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay RECURRENT for the created command with SEPA mode" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay COMPTANT for the created command" id="1f2a501c-04d7-4d23-845a-3bf2863194e1" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "1",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R0000000",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3. Send email for this command_Send successfully" id="0390edea-6460-4dcc-8a92-1e32209086b9"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/communication/{typeCommunication}/envoyerEmail" methodName="envoyerConfirmationCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Send email for this command_Send successfully" id="cfe43d61-000c-4702-b274-80bdd62467be" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1461226828"
    }
  },
  "politiqueInfo": {
    "besoinPaiementValidation": true
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//communication/PAID_COMMANDE_CONFIRMATION/envoyerEmail</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8e73cf5a-88da-44b6-9c2a-601eeafe71e3" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="ee323c3b-cd57-4ee9-baee-b8edacab579f" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refCommande" value="${#TestCase#refCommand}"/>
  <con:entry key="typeCommunication" value="PAID_COMMANDE_CONFIRMATION"/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>typeCommunication</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="4. Select from DB to check communication record" id="a4d4aab4-8ae3-4ac9-9e3f-63f11460a1bf"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from communication where referenceCommande = '${#TestCase#refCommand}';</con:query><con:assertion type="XPath Match" id="9432a346-890a-4618-b19c-3fff8bc4af2f" name="XPath Match - 1 record is inserted"><con:configuration><path>count(//*:Results[1]/*:ResultSet[1]/*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Communication type must be"><con:configuration><token>&lt;COMMUNICATION.TYPE>PAID_COMMANDE_CONFIRMATION&lt;/COMMUNICATION.TYPE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f60fb081-a915-4f59-8c32-36919fca1449" name="refCommand must be"><con:configuration><token>&lt;COMMUNICATION.REFERENCECOMMANDE>${#TestCase#refCommand}&lt;/COMMUNICATION.REFERENCECOMMANDE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f4ceb4ca-280b-4a3f-b221-d9a2940fa808" name="refCommandLigne must be"><con:configuration><token>&lt;COMMUNICATION.REFERENCECOMMANDELIGNE>${#TestCase#refCommandLigne}&lt;/COMMUNICATION.REFERENCECOMMANDELIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6734673c-96fa-4f4f-8698-74d7ead21131" name="causeNonEnvoi must be null"><con:configuration><token>&lt;COMMUNICATION.CAUSENONENVOI/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refCommand</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">006008028</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>0</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value>LIC-00002092</con:value></con:property><con:property><con:name>Promo2</con:name><con:value>REM_MVNO_ISP_ELITE</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>35e79528-8b16-4280-8bcd-d2df334dcb0a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bcf34af3-38d0-465b-b0d0-d6d63a93228a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4459213e-ea39-4722-8468-18a9bd70014f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ba2934c-e2e4-4996-b0c8-5ded63fbb86c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7e37061-a393-48d8-9642-5a54e8693e5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e1558b7e-5785-40d1-b4de-940f6f06eac5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5c80985f-f0ac-49a0-aa3c-d88a15207574</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d3db037a-2e92-470e-aae6-4088d3783c9e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4550d337-530a-4b10-8583-78ec42c735d2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4dec816a-5eb2-4a0b-996a-22e19b955f5c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9b7f58c1-e6fb-4363-acac-9ec39a9fd302</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7286ab8a-6123-4673-8c8c-f584a131533f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6fc08fe1-3c7c-4e85-9f1a-db96330584e6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="b834e34d-ea5a-4e5c-98fd-4e1c5f5cf505" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03.05_Send successfully_mvnoPack_No params_No reductions_No SEPA" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Reset variables to null" id="187e1aac-6dad-4776-8c31-f549f513605e"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "refCommand",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a command mvnoPack" id="b32be558-830e-4cf0-82e5-2c265ff63484"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>6fd96844-4465-4f1b-b8cf-859bb4f2e150</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>006002025</con:value></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="a6961a3c-778c-42ef-8d79-649c4baa38d4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a command mvnoPack</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay COMPTANT for the created command" id="f9c0ad4f-b82b-405e-bcc8-a69b82d37e7b"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "100",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R0000000",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3. Send email for this command_Send successfully" id="9d7ea669-d400-4824-a5e3-4da0f8de7ba0"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/communication/{typeCommunication}/envoyerEmail" methodName="envoyerConfirmationCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Send email for this command_Send successfully" id="cfe43d61-000c-4702-b274-80bdd62467be" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1461226828"
    }
  },
  "politiqueInfo": {
    "besoinPaiementValidation": true
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//communication/PAID_COMMANDE_CONFIRMATION/envoyerEmail</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="28788f21-5345-4819-9459-14dfe075e48b" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refCommande" value="${#TestCase#refCommand}"/>
  <con:entry key="typeCommunication" value="PAID_COMMANDE_CONFIRMATION"/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>typeCommunication</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="4. Select from DB to check communication record" id="b0ad2c66-5a02-434e-95d8-9a5a19f53619"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from communication where referenceCommande = '${#TestCase#refCommand}';</con:query><con:assertion type="XPath Match" id="9432a346-890a-4618-b19c-3fff8bc4af2f" name="XPath Match - 1 record is inserted"><con:configuration><path>count(//*:Results[1]/*:ResultSet[1]/*:Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Communication type must be"><con:configuration><token>&lt;COMMUNICATION.TYPE>PAID_COMMANDE_CONFIRMATION&lt;/COMMUNICATION.TYPE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f60fb081-a915-4f59-8c32-36919fca1449" name="refCommand must be"><con:configuration><token>&lt;COMMUNICATION.REFERENCECOMMANDE>${#TestCase#refCommand}&lt;/COMMUNICATION.REFERENCECOMMANDE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f4ceb4ca-280b-4a3f-b221-d9a2940fa808" name="refCommandLigne must be" disabled="true"><con:configuration><token>&lt;COMMUNICATION.REFERENCECOMMANDELIGNE>${#TestCase#refCommandLigne}&lt;/COMMUNICATION.REFERENCECOMMANDELIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6734673c-96fa-4f4f-8698-74d7ead21131" name="causeNonEnvoi must be null"><con:configuration><token>&lt;COMMUNICATION.CAUSENONENVOI/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refCommand</con:name><con:value>006002025</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>0</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>35e79528-8b16-4280-8bcd-d2df334dcb0a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bcf34af3-38d0-465b-b0d0-d6d63a93228a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4459213e-ea39-4722-8468-18a9bd70014f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ba2934c-e2e4-4996-b0c8-5ded63fbb86c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7e37061-a393-48d8-9642-5a54e8693e5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="839fbe25-bb57-47fa-83f5-e97878909180" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="04.01 Send successfully_Command is paied_Amount = Price to be paied" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="6a3678f4-477f-4b08-ab28-cded23577d1d">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Reset variables to null" id="2174d14a-460c-497d-99d3-6d2143319e87"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "refCommand",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Command transformed with one reduction in draftLigne" id="478041bf-f68c-4857-a199-bb03b3fdb898"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>cb591d95-20d8-4dbb-969b-86e4f8da98fc</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>customerKey3</con:name></con:property><con:property><con:name>handleKey3</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="aa5d66c3-b5c9-4e6b-8fef-b736f18092da"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Command transformed with one reduction in draftLigne</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. enhancedCalculationCost" id="db4cf41e-6904-4c42-9ca1-a2e37bdbe6a8"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/enhancedCostCalculation" methodName="enhancedCalculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. enhancedCalculationCost" id="7e95406e-677d-4399-a713-cfe7f94c4aab" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/088003205/enhancedCostCalculation</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3. Pay 23.99 > Price to pay" id="68d7b76e-890c-441f-bbbc-5a22784a7fbe"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Pay 23.99 > Price to pay" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "23.99",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R123456",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Copy of 2. enhancedCalculationCost" id="9dcc4130-5374-4ac7-bc03-9e90b95cee6b"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/enhancedCostCalculation" methodName="enhancedCalculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Copy of 2. enhancedCalculationCost" id="7e95406e-677d-4399-a713-cfe7f94c4aab" mediaType="application/json" postQueryString="false"><con:settings/><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/088003205/enhancedCostCalculation</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4. Send email for this command_Send failed_Check exeption" id="3faef36a-1152-4ad0-b5c8-48bf1a2a9be7"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/communication/{typeCommunication}/envoyerEmail" methodName="envoyerConfirmationCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Send email for this command_Send failed_Check exeption" id="cfe43d61-000c-4702-b274-80bdd62467be" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1461226828"
    }
  },
  "politiqueInfo": {
    "besoinPaiementValidation": true
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//communication/PAID_COMMANDE_CONFIRMATION/envoyerEmail</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="28788f21-5345-4819-9459-14dfe075e48b" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="93735e49-86dc-490d-a291-0150d0c19ccf" name="contain"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refCommande" value="${#TestCase#refCommand}"/>
  <con:entry key="typeCommunication" value="PAID_COMMANDE_CONFIRMATION"/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>typeCommunication</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommand</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NbPassed</con:name><con:value>0</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>35e79528-8b16-4280-8bcd-d2df334dcb0a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bcf34af3-38d0-465b-b0d0-d6d63a93228a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4459213e-ea39-4722-8468-18a9bd70014f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ba2934c-e2e4-4996-b0c8-5ded63fbb86c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7e37061-a393-48d8-9642-5a54e8693e5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d57dce0e-a75d-44a8-89ea-e7385f821349</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e143998-e293-4aa8-a88c-777807c936ef</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>33252a2e-5662-4836-9d2d-564df0ea81aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="fb2e01b0-3e1c-4155-901c-3c5493a4f173" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="externalServices" searchProperties="true" disabled="true" maxResults="0"><con:settings/><con:testStep type="request" name="01. netCom_sendMail_mvnoConso" id="ba37b690-380f-4197-9c74-a6b6607c1ef0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NetCommMailWSImplServiceSoapBinding</con:interface><con:operation>sendMail</con:operation><con:request name="01. netCom_sendMail_mvnoConso" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="PasswordText" id="d0f239ad-3102-4d1c-9559-3b75c5ca3136" defaultOutgoingWss="" defaultIncomingWss=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.119.11:8080/net-comm-ws-1.0.x/services/netCommMail</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://www.nordnet.com/netcommmail/schemas">
   <soapenv:Header/>
   <soapenv:Body>
      <sch:sendMail>
         <templateName>Confirmation_commande_MVNO_CONSO</templateName>
         
         <idRecipient>192112</idRecipient><typeRecipient>CUSTOMER</typeRecipient>
         <dynamicFields>
            <Field>
               <name>DEST</name>
               <value>htranthithu@pentalog.fr</value>
            </Field>
            <Field>
               <name>DATE_JOUR</name>
               <value>DATE_JOUR</value>
            </Field>
            <Field>
               <name>CUSTOMER_REF</name>
               <value>CUSTOMER_REF</value>
            </Field>            
            <Field>
               <name>AVANTAGE</name>
               <value>AVANTAGE</value>
            </Field> 
            <Field>
               <name>ADRESSE_FACTURATION</name>
               <value>ADRESSE_FACTURATION</value>
            </Field>
            <Field>
               <name>ADRESSE_UTILISATEUR</name>
               <value>ADRESSE_UTILISATEUR</value>
            </Field>
            <Field>
               <name>PRIX_LOCATION</name>
               <value>PRIX_LOCATION</value>
            </Field>
            <Field>
               <name>PRIX_SIM</name>
               <value>PRIX_SIM</value>
            </Field>
            <Field>
               <name>REGLEMENT</name>
               <value>REGLEMENT</value>
            </Field>
            <Field>
               <name>ADRESSE_LIVRAISON</name>
               <value>ADRESSE_LIVRAISON</value>
            </Field>
            <Field>
               <name>CHOIX_NUMERO</name>
               <value>CHOIX_NUMERO</value>
            </Field>
            </dynamicFields>
         <userInfos>
            <userName>hientran</userName>
            <httpUserAgent>SoapUI</httpUserAgent>
            <ip>10.190.29.140</ip>
         </userInfos>
      </sch:sendMail>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="3fc8e98a-47e3-46c3-a2be-d1c50518d98b"/><con:credentials><con:username>topaze</con:username><con:password>1e2cec460349e1218f534ce337042895</con:password><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="sendMail"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="02. netCom_sendMail_mvnoPack" id="f5232835-3037-4ed0-be49-15d9bf532512"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NetCommMailWSImplServiceSoapBinding</con:interface><con:operation>sendMail</con:operation><con:request name="02. netCom_sendMail_mvnoPack" outgoingWss="" incomingWss="" timeout="" sslKeystore="" useWsAddressing="false" useWsReliableMessaging="false" wssPasswordType="PasswordText" id="d0f239ad-3102-4d1c-9559-3b75c5ca3136" defaultOutgoingWss="" defaultIncomingWss=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.119.11:8080/net-comm-ws-1.0.x/services/netCommMail</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://www.nordnet.com/netcommmail/schemas">
   <soapenv:Header/>
   <soapenv:Body>
      <sch:sendMail>
         
         
         <templateName>Confirmation_commande_MVNO_FORFAIT</templateName><idRecipient>field1</idRecipient><typeRecipient>CUSTOMER</typeRecipient>
         <dynamicFields>
            <Field>
               <name>DEST</name>
               <value>htranthithu@pentalog.fr</value>
            </Field>
            <Field>
               <name>DATE_JOUR</name>
               <value>DATE_JOUR</value>
            </Field>
            <Field>
               <name>CUSTOMER_REF</name>
               <value>CUSTOMER_REF</value>
            </Field>            
            <Field>
               <name>AVANTAGE</name>
               <value>AVANTAGE</value>
            </Field> 
            <Field>
               <name>ADRESSE_FACTURATION</name>
               <value>ADRESSE_FACTURATION</value>
            </Field>
            <Field>
               <name>ADRESSE_UTILISATEUR</name>
               <value>ADRESSE_UTILISATEUR</value>
            </Field>
            <Field>
               <name>PRIX_LOCATION</name>
               <value>PRIX_LOCATION</value>
            </Field>
            <Field>
               <name>PRIX_SIM</name>
               <value>PRIX_SIM</value>
            </Field>
            <Field>
               <name>REGLEMENT</name>
               <value>REGLEMENT</value>
            </Field>
            <Field>
               <name>ADRESSE_LIVRAISON</name>
               <value>ADRESSE_LIVRAISON</value>
            </Field>
            <Field>
               <name>CHOIX_NUMERO</name>
               <value>CHOIX_NUMERO</value>
            </Field>
            </dynamicFields>
         <userInfos>
            <userName>SJO</userName>
            <httpUserAgent>SoapUI</httpUserAgent>
            <ip>10.190.29.140</ip>
         </userInfos>
      </sch:sendMail>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" name="SOAP Response" id="3fc8e98a-47e3-46c3-a2be-d1c50518d98b"/><con:credentials><con:username>topaze</con:username><con:password>1e2cec460349e1218f534ce337042895</con:password><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="sendMail"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="restrequest" name="03. disqualifier_Check reduction valid_REM_MVNO_ISP" id="3170fcbc-6add-4066-b7a5-29dcd146a399"><con:settings/><con:config service="/default/qualifier" resourcePath="/discount.qualifier.ws-1.0.x/discount/{codeReduction}/isValid/commande/{referenceCommande}" methodName="validateForOrder" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="03. disqualifier_Check reduction valid_REM_MVNO_ISP" id="b39454ff-2919-4389-93bc-45260f810e7c" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080/</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/discount.qualifier.ws-1.0.x/discount/REM_MVNO_ISP/isValid/commande/006008718</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="codeReduction" value="REM_MVNO_ISP"/>
  <con:entry key="referenceCommande" value="006008718"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="04. disqualifier_Check reduction valid_REM_MVNO_SIM" id="0c30e8ff-9fec-4878-a9ab-bbda1c1d5f7f"><con:settings/><con:config service="/default/qualifier" resourcePath="/discount.qualifier.ws-1.0.x/discount/{codeReduction}/isValid/commande/{referenceCommande}" methodName="validateForOrder" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="04. disqualifier_Check reduction valid_REM_MVNO_SIM" id="b39454ff-2919-4389-93bc-45260f810e7c" mediaType="application/json"><con:settings/><con:request/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="codeReduction" value="REM_MVNO_SIM" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="request" name="05. mandat_getMandate" id="8203fbab-e787-4273-9258-f798f386bde6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>MandateLibraryWSImplServiceSoapBinding</con:interface><con:operation>getMandate</con:operation><con:request name="05. mandat_getMandate" id="ef38b8a7-386a-4ffd-b729-3d04ec848d1a" defaultOutgoingWss="" defaultIncomingWss=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.mandatelibrary.nordnet.com/">
   <soapenv:Header/>
   <soapenv:Body>
      <ws:getMandate><ws:rum>RRE4F5CB</ws:rum></ws:getMandate>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="4c0364c8-94a4-4df6-85ba-6617331fff5a"/><con:assertion type="XPath Match" id="042fc72b-be18-46e8-861b-d389e174ac28" name="XPath Match - IBAN number"><con:configuration><path>//*:getMandateResponse[1]/*:return[1]/*:account[1]/*:iban[1]/*:number[1]</path><content>DK5750510001322617</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="57fae720-30c8-4cc8-9230-0c0d65582fe0" name="XPath Match 2 - IBAN BIC"><con:configuration><path>//*:getMandateResponse[1]/return[1]/*:account[1]/*:iban[1]/*:bic[1]</path><content>5051</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>c4c56c37-dd6d-4d7b-9854-0243c973a7e7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="0fefe476-d1c1-44c5-b336-cb2f00e55e0f" name="findByIdClient (check manually)"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="51a66f22-c96c-4ef8-8f6d-19f3056dbbf0" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01. Get successfully_No document association_Return document TRUE" searchProperties="true" maxResults="0"><con:description>Can not test automatically this case > To be continued in next sprint</con:description><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="3c5ad724-3028-4247-8bd2-80956900bc58">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="bab1007d-98bb-42ff-9646-b3b446f07ec0"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>2423d660-2013-4ff9-9359-d7a39512a10c</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>f290f613-8ba4-48f7-be06-7665e495b18e</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft_Antivirus" id="e1f660f6-220b-467c-bc6c-24c76415029e"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft_Antivirus" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "canal": "SoapUIPRO",
    "qui": "hientran",
    "ip": {
      "ts": 1455615028000,
      "ip": "10.190.29.140"
    }
  },
  "lignes": [
    {
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "avfw.essentiel",
        "referenceTarif": "23"
      }
    }
  ],
  "souscripteur": {
      "clientId": "hientran03",
      "adresseId": "171308010"
    },

    "facturation": {
      "clientId": "hientran03",
      "adresseId": "171308010",
      "tva": "01"
    }
    ,

    "livraison": {
      "clientId": "hientran03",
      "adresseId": "171308010",
       "tva": "01"
    }
  },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="cd735495-c20b-44bb-8a16-31bc00ec4811" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refDraft" id="6a62622b-4ce2-45a9-9631-5d9dfa1ca959"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft_Antivirus</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande" id="fdad66a0-c625-428e-92fe-d23f605d4aa1"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ts": 1411654933,
      "ip": "10.190.29.140"
    }
  },
  "trameCatalogue": {
    "offres": [
      {
        "reference": "avfw.essentiel",
        "label": "Securitoo Integral",
        "gamme": "Antivirus",
        "secteur": "Securite",
        "modeFacturation": "DATE_ANNIVERSAIRE",
        "type": "SERVICE",
        "tarifs": [
          {
            "idTarif": "23",
            "prix": "5",
            "frequence": "1",
            "tva": "R"
          }
        ]
      }
    ]
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="de120654-314f-499a-b88a-bad7fadefd53" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="1827bc99-dea5-4df0-867b-69e4829a80a7" name="Contains"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="f8c47d74-87a7-4cf5-921b-04d3eaa42189"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="b1c3fc5c-5e7e-4bbd-a42d-b6c5819feea0">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait initiation of document" id="4d5f44a3-7ff8-4ee5-8de4-6a4fc137344e"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="6b3283a4-5983-4e10-ae25-985a10cecc7c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="53fe5a9e-c9d3-4009-a462-2b0826b6bd6f"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="3. Get client info 'hientran03' to check" id="e30459a8-9ad1-4ace-93ad-81ca3f023c85"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/client/{idClient}" methodName="findByIdClient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Get client info 'hientran03' to check" id="e707573e-305f-420c-8ce2-e2b8e85e5bea" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-finder-1.2.x/Commande/client/</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="d7f84949-fd8d-491d-ad84-b838b02b24f0" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="5a81a196-bfdf-4981-8619-c4939d5f01b1" name="Not Contains &quot;documente&quot; False"><con:configuration><token>"documente":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="idClient" value="hientran03" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4. Get the created command to check documente" id="ae83c17c-1820-4690-99f1-07610e4fdb48"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/commande/{refCommande}" methodName="findByReferenceCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Get the created command to check documente" id="c6ac2f41-b5d9-4ae6-a6c5-27697f44dad0" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-finder-1.2.x/Commande/commande/973233c8-5b09-4acf-8ef9-fd2f630dcbd4</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="46eb0064-c838-40a1-bd1d-47e0086b7fa8" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7aa7f7ed-74e3-4b15-83bd-7ac9a109ab2c" name="documente is TRUE"><con:configuration><token>"documente":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>3fb77764-ef68-4d18-bbfa-2d7a6b7d7d9d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>75bcb716-7bc1-47b7-95bb-a253724dc969</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>686ec412-d90e-4dfa-a129-f032ec3d0b1c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e1f660f6-220b-467c-bc6c-24c76415029e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fdad66a0-c625-428e-92fe-d23f605d4aa1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bab1007d-98bb-42ff-9646-b3b446f07ec0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6a62622b-4ce2-45a9-9631-5d9dfa1ca959</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3c5ad724-3028-4247-8bd2-80956900bc58</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b1c3fc5c-5e7e-4bbd-a42d-b6c5819feea0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>53fe5a9e-c9d3-4009-a462-2b0826b6bd6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6b3283a4-5983-4e10-ae25-985a10cecc7c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f8c47d74-87a7-4cf5-921b-04d3eaa42189</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="a4b0fa7b-256a-4b27-9ef9-64c1c0cc8180" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02. Get successfully_documentDemande False_Return document TRUE (Check manually)" searchProperties="true" maxResults="0"><con:description>Can not test automatically this case > To be continued in next sprint</con:description><con:settings/><con:testStep type="properties" name="commandInfo" id="a5a33b9c-71fa-4536-8404-172b5b967b2f"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>5121fd4a-8c70-4f73-9d46-000779847123</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Set Nb Passes = 0" id="17a3e372-f314-4d1f-ba03-aef4de47013d">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="restrequest" name="0. Update document status of customer to TRUE" id="e27e1510-6059-4caf-abb9-da414d40c5e8" disabled="true"><con:settings/><con:config service="BaseClient" resourcePath="/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="0. Update document status of customer to TRUE" id="ab52b71c-646d-4c0b-8a2e-5cb09269b6b9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="c0d2e59f-076b-4bc2-b918-ec96fc13814d"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionCNI is true" id="78efdf77-5b5e-4a40-a3cd-e5ff382e9d68"><con:configuration><token>"flagReceptionCNI":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionJD is true" id="45830ed8-8d1b-4e2a-9ea2-73918bede086"><con:configuration><token>"flagReceptionJD":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="updateReceptionDocRequest" value="{&quot;handleKey&quot;:&quot;511708010&quot;, &quot;flagReceptionCNI&quot;:&quot;true&quot;, &quot;flagReceptionJD&quot;:&quot;true&quot;}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform to command from draft mvnoPack and Bien" id="fada4c6f-1692-41a7-b1a7-0e2cbc8d5fe8"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1727ab8b-9657-4e07-b4db-cef3539c93ee</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>5121fd4a-8c70-4f73-9d46-000779847123</con:value></con:property><con:property><con:name>customerKey4</con:name></con:property><con:property><con:name>handleKey4</con:name></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>refCommandLigneGlobal</con:name></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="654219d3-92cc-44da-813c-9e2c0b72b91e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform to command from draft mvnoPack and Bien</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="181be28b-ed58-4e69-840a-1872ce3abbe9">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait for initiation of documents" id="f31bf905-9196-46d7-88eb-6c0997da946e"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="18dd8600-6214-4f1f-a116-631501c3268d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation documents" id="89f899e2-469c-4536-bd75-a3d3428f2064"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="Update documentDemande to False (just for the tests)" id="e0789844-a85b-4efd-9ba2-8f4792a02927"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update `documentassociation` set documentDemande = 0 where referenceCommande = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple Contains" id="4a7c0b8e-cf37-4a7e-a6d8-5865d3279ca7" name="Contains"><con:configuration><token>&lt;UpdateCount>2&lt;/UpdateCount>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check_documentDemande must be FALSE" id="3c112980-f20d-42d4-9f90-e970dfc758ac"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple NotContains" id="3af9c3b9-aaee-46e6-964e-802ab1bbd1ad" name="Not Contains documentDemande TRUE"><con:configuration><token>&lt;DOCUMENTASSOCIATION.DOCUMENTDEMANDE>1&lt;/DOCUMENTASSOCIATION.DOCUMENTDEMANDE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. Get command via clientId '192112'_documente must be true (Check by eyes)" id="e818a078-931c-453d-b058-9bdd252b81e4"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/client/{idClient}" methodName="findByIdClient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Get command via clientId '192112'_documente must be true (Check by eyes)" id="e707573e-305f-420c-8ce2-e2b8e85e5bea" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-finder-1.2.x/Commande/client/</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="d7f84949-fd8d-491d-ad84-b838b02b24f0" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="239e6bc8-1375-47eb-bfcb-3c900a471db1" name="Contains"><con:configuration><token>"documente":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="idClient" value="192112" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3. Get the created command to check documente" id="88b80d85-bd85-4429-adcc-8c7619b2ee5e"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/commande/{refCommande}" methodName="findByReferenceCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Get the created command to check documente" id="c6ac2f41-b5d9-4ae6-a6c5-27697f44dad0" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-finder-1.2.x/Commande/commande/973233c8-5b09-4acf-8ef9-fd2f630dcbd4</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="46eb0064-c838-40a1-bd1d-47e0086b7fa8" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7aa7f7ed-74e3-4b15-83bd-7ac9a109ab2c" name="documente is TRUE"><con:configuration><token>"documente":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>ff6670c5-3dec-4fef-8700-39c88c2d5814</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fb77764-ef68-4d18-bbfa-2d7a6b7d7d9d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>75bcb716-7bc1-47b7-95bb-a253724dc969</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>686ec412-d90e-4dfa-a129-f032ec3d0b1c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eadeb5c7-f876-4caf-9ddc-82d4cdc98afd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>563fffb3-1ba9-41c6-9060-1bba8d88914e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b0f8d3bf-3059-4e1d-bbab-99bd6f07d865</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>75e6d6f5-9387-4c2e-bd5d-89669d7f17b8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a0966ce7-1225-45de-b9af-c5a2d17c0dac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>91bfdb6f-1a52-4331-8d28-91274d06c1e1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a70a11cc-5d7a-479c-af55-910e73e91063</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>97f19ad2-11c8-4cd8-8305-5835be2ff4be</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fada4c6f-1692-41a7-b1a7-0e2cbc8d5fe8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>654219d3-92cc-44da-813c-9e2c0b72b91e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0789844-a85b-4efd-9ba2-8f4792a02927</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3c112980-f20d-42d4-9f90-e970dfc758ac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a5a33b9c-71fa-4536-8404-172b5b967b2f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="0f263a9e-4f3b-4e7b-98f9-a703a2f8c5f9" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03. Get successfully_documentDemande True_Documente False_Return document FALSE (Check manually)" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="9d10bd50-0bfa-440d-9f13-8f079cef3db0"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>db788a28-40a9-40c0-9d4e-90d83baeab63</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Set Nb Passes = 0" id="25b914cb-c874-4c3c-a36f-fe864baa7fe9">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="restrequest" name="0. Update document status of customer to FALSE_'hientran01'" id="75bcb716-7bc1-47b7-95bb-a253724dc969" disabled="true"><con:settings/><con:config service="BaseClient" resourcePath="/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="0. Update document status of customer to FALSE_'hientran01'" id="ab52b71c-646d-4c0b-8a2e-5cb09269b6b9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="c0d2e59f-076b-4bc2-b918-ec96fc13814d"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionCNI is false" id="78efdf77-5b5e-4a40-a3cd-e5ff382e9d68"><con:configuration><token>"flagReceptionCNI":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionJD is false" id="45830ed8-8d1b-4e2a-9ea2-73918bede086"><con:configuration><token>"flagReceptionJD":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="updateReceptionDocRequest" value="{&quot;handleKey&quot;:&quot;006010387&quot;, &quot;flagReceptionCNI&quot;:&quot;false&quot;, &quot;flagReceptionJD&quot;:&quot;false&quot;}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a command with mvno_conso and Bien" id="3fb77764-ef68-4d18-bbfa-2d7a6b7d7d9d"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/creer" methodName="creerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a command with mvno_conso and Bien" id="cbefa18f-91b7-484d-b05b-80de3b4cd914" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1457596266"
    }
  },
  "offres": [
    {
      "reference": "MVNO",
      "label": "MVNO",
      "gamme": "MVNO",
      "secteur": "MVNO",
      "tarif": {
        "idTarif": "79",
        "prix": 1.67,
        "frequence": 1,
        "engagement": null,
        "duree": 6,
        "tva": "S",
        "frais": null
      },
      "modeFacturation": "PREMIER_MOIS",
      "typeProduit": "SERVICE",
      "details": [
        {
          "reference": "mvno_conso",
          "label": "mvno_conso",
          "tarif": {
            "idTarif": "83",
            "prix": 0,
            "frequence": 1,
            "engagement": null,
            "duree": 6,
            "tva": "S",
            "frais": null
          },
          "typeProduit": "SERVICE"
        },
{
          "reference": "PACK-MVNO-POSTPAID-MOBILE",
          "label": "PACK-MVNO-POSTPAID_MOBILE",
          "tarif": {
            "idTarif": "81",
            "prix": 29.158333,
            "frequence": 1,
            "engagement": null,
            "duree": 6,
            "tva": "S",
            "frais": null
          },
          "typeProduit": "BIEN"
        }
      ]
    }
  ],
  "client": {
       "souscripteur":{  
         "clientId":"hientran01",
         "adresseId":"006010387",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"hientran01",
         "adresseId":"006010387",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"hientran01",
         "adresseId":"006010387",
         "tva":"00"
      }
},
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/creer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b3c915c7-ef16-4713-9583-347b9ad7a7fb" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4ecae06e-f9c0-47e2-9276-c7e29027808a" name="Contains"><con:configuration><token>"numeroCommande"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b2d98102-5c67-4c08-8fe5-a59ad6cce5d3" name="Contains 2"><con:configuration><token>"numeroLignes"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="8647b97b-7e13-4ac7-8401-cd22ba78f47a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a command with mvno_conso and Bien</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/commande/creer';
//ns1:Response[1]/ns1:numeroCommande[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="3962acb7-0ce3-41de-9e3e-b200b58cd106">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait initiation of document" id="686ec412-d90e-4dfa-a129-f032ec3d0b1c"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="afb94554-a274-48bb-a9cc-7d58573e7139"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="d652f2b2-a397-46cb-8630-2b80e6ca62a0"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="Update documentDemande to True and Documente to False (just for the tests)" id="21f8f287-d6ce-4e20-8849-ca742805a4f0"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update `documentassociation` set documentDemande = 0 where referenceCommande = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple Contains" id="4a7c0b8e-cf37-4a7e-a6d8-5865d3279ca7" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association_documentDemande must be  False" id="06858102-7057-4b34-bdc9-1159b09552ed"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple NotContains" id="3af9c3b9-aaee-46e6-964e-802ab1bbd1ad" name="Not Contains documentDemande TRUE"><con:configuration><token>&lt;DOCUMENTASSOCIATION.DOCUMENTDEMANDE>1&lt;/DOCUMENTASSOCIATION.DOCUMENTDEMANDE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. Get command via clientId 'hientran01'_documente must be false_(Check by eyes)" id="d56eda3d-449c-4e76-ae1f-ae78aa3aef96"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/client/{idClient}" methodName="findByIdClient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Get command via clientId 'hientran01'_documente must be false_(Check by eyes)" id="e707573e-305f-420c-8ce2-e2b8e85e5bea" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-finder-1.2.x/Commande/client/</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="d7f84949-fd8d-491d-ad84-b838b02b24f0" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="1977db89-6c96-4796-a8ec-7d3b9a2ff3e3" name="Contains"><con:configuration><token>"documente":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="idClient" value="hientran01" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>3fb77764-ef68-4d18-bbfa-2d7a6b7d7d9d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>75bcb716-7bc1-47b7-95bb-a253724dc969</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>686ec412-d90e-4dfa-a129-f032ec3d0b1c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>25b914cb-c874-4c3c-a36f-fe864baa7fe9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3962acb7-0ce3-41de-9e3e-b200b58cd106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>afb94554-a274-48bb-a9cc-7d58573e7139</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d652f2b2-a397-46cb-8630-2b80e6ca62a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>21f8f287-d6ce-4e20-8849-ca742805a4f0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>06858102-7057-4b34-bdc9-1159b09552ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9d10bd50-0bfa-440d-9f13-8f079cef3db0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8647b97b-7e13-4ac7-8401-cd22ba78f47a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="45cdcbf6-6ce3-4497-83c7-42878efd8b9b" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="04. Get successfully_documentDemande True_Documente True_Return document TRUE (Check manually)" searchProperties="true" maxResults="0"><con:description>Can not test automatically this case > To be continued in next sprint</con:description><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="a70a11cc-5d7a-479c-af55-910e73e91063">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="75e6d6f5-9387-4c2e-bd5d-89669d7f17b8"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>84f2db11-7c89-41a8-ae88-2ca3790edd68</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a command with mvno_conso and Bien" id="5dbf8252-a063-49e1-8425-7c46fe480a8a"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/creer" methodName="creerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a command with mvno_conso and Bien" id="cbefa18f-91b7-484d-b05b-80de3b4cd914" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1457596266"
    }
  },
  "offres": [
    {
      "reference": "MVNO",
      "label": "MVNO",
      "gamme": "MVNO",
      "secteur": "MVNO",
      "tarif": {
        "idTarif": "79",
        "prix": 1.67,
        "frequence": 1,
        "engagement": null,
        "duree": 6,
        "tva": "S",
        "frais": null
      },
      "modeFacturation": "PREMIER_MOIS",
      "typeProduit": "SERVICE",
      "details": [
        {
          "reference": "mvno_conso",
          "label": "mvno_conso",
          "tarif": {
            "idTarif": "83",
            "prix": 0,
            "frequence": 1,
            "engagement": null,
            "duree": 6,
            "tva": "S",
            "frais": null
          },
          "typeProduit": "SERVICE"
        },
{
          "reference": "PACK-MVNO-POSTPAID-MOBILE",
          "label": "PACK-MVNO-POSTPAID_MOBILE",
          "tarif": {
            "idTarif": "81",
            "prix": 29.158333,
            "frequence": 1,
            "engagement": null,
            "duree": 6,
            "tva": "S",
            "frais": null
          },
          "typeProduit": "BIEN"
        }
      ]
    }
  ],
  "client": {
       "souscripteur":{  
         "clientId":"hientran02",
         "adresseId":"602008913",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"hientran02",
         "adresseId":"602008913",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"hientran02",
         "adresseId":"602008913",
         "tva":"00"
      }
},
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/creer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b3c915c7-ef16-4713-9583-347b9ad7a7fb" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4ecae06e-f9c0-47e2-9276-c7e29027808a" name="Contains"><con:configuration><token>"numeroCommande"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b2d98102-5c67-4c08-8fe5-a59ad6cce5d3" name="Contains 2"><con:configuration><token>"numeroLignes"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="a0966ce7-1225-45de-b9af-c5a2d17c0dac"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a command with mvno_conso and Bien</con:sourceStep><con:sourcePath>//*:numeroCommande</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="97f19ad2-11c8-4cd8-8305-5835be2ff4be">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait for initiation and synchronization of documents" id="563fffb3-1ba9-41c6-9060-1bba8d88914e"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="b0f8d3bf-3059-4e1d-bbab-99bd6f07d865"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="If document association is not existed > Goto wait for initiation of documents" id="91bfdb6f-1a52-4331-8d28-91274d06c1e1"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="Update documentDemande to True and documente to False (just for the tests)" id="f0071c91-9b60-47c8-9dbd-b9f9d3442895"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update `documentassociation` set documentDemande = 1 and documente = 0 where referenceCommande = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple Contains" id="4a7c0b8e-cf37-4a7e-a6d8-5865d3279ca7" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association_documentDemande must be TRUE_Documente must be FALSE" id="785794ba-eda5-4cf1-a269-5f3406b6d42f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:assertion type="XPath Match" id="0ed356e5-ca10-4a04-8666-dec231432ec8" name="documentDemande of doc 1 must be 1"><con:configuration><path>//*:Results/*:ResultSet/Row[1]/DOCUMENTASSOCIATION.DOCUMENTDEMANDE</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="0ed356e5-ca10-4a04-8666-dec231432ec8" name="documente of doc 1 must be 0"><con:configuration><path>//*:Results/*:ResultSet/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="3. Get command via clientId 'hientran02'_documente must be FALSE (Check by eyes)" id="373b1721-3177-4e11-bac9-2a48f07a3e0e" disabled="true"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/client/{idClient}" methodName="findByIdClient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Get command via clientId 'hientran02'_documente must be FALSE (Check by eyes)" id="e707573e-305f-420c-8ce2-e2b8e85e5bea" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-finder-1.2.x/Commande/client/</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="d7f84949-fd8d-491d-ad84-b838b02b24f0" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="idClient" value="hientran02" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>ff6670c5-3dec-4fef-8700-39c88c2d5814</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fb77764-ef68-4d18-bbfa-2d7a6b7d7d9d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>75bcb716-7bc1-47b7-95bb-a253724dc969</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>686ec412-d90e-4dfa-a129-f032ec3d0b1c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>563fffb3-1ba9-41c6-9060-1bba8d88914e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b0f8d3bf-3059-4e1d-bbab-99bd6f07d865</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>75e6d6f5-9387-4c2e-bd5d-89669d7f17b8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a0966ce7-1225-45de-b9af-c5a2d17c0dac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>91bfdb6f-1a52-4331-8d28-91274d06c1e1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a70a11cc-5d7a-479c-af55-910e73e91063</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>97f19ad2-11c8-4cd8-8305-5835be2ff4be</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>373b1721-3177-4e11-bac9-2a48f07a3e0e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f0071c91-9b60-47c8-9dbd-b9f9d3442895</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>785794ba-eda5-4cf1-a269-5f3406b6d42f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="4375fdd4-1d61-434d-badd-bfbbdfbacbf6" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="05. Get successfully_documentDemande True_Not all documents True_Return documente FALSE (Check manually)" searchProperties="true" maxResults="0"><con:description>Can not test automatically this case > To be continued in next sprint</con:description><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="1d1879dd-cfd3-4682-bafa-bfe008fdc2cd">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="11816a43-4276-41dc-9849-81bf554256c8"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>5d82ccea-9506-42d9-8b74-f94cf95f1651</con:value></con:property><con:property><con:name>clientSouscripteurId</con:name><con:value>11029</con:value></con:property><con:property><con:name>clientALivrerId</con:name><con:value>11028</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="calltestcase" name="1. Init successfully_Two types of document for soucripteur and livraison" id="ed70df9b-f156-44d8-b08b-125fb60f7fb9"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>d057950b-dd22-48ae-88d6-5939777ecb35</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>5d82ccea-9506-42d9-8b74-f94cf95f1651</con:value></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand1" id="3a93f522-bdc3-4ec8-85f8-9a1719ddb77a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Init successfully_Two types of document for soucripteur and livraison</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Select the created commande from DB" id="f0ac4e65-9161-4e25-9f15-ade671c2886f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commande` where reference = "${commandInfo#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer clientInfo" id="b1d48c5b-43de-400f-97d5-6605f7fe10ae"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>clientSouscripteurId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Select the created commande from DB</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/COMMANDE.CLIENTSOUSCRIPTEURID[1]</con:sourcePath><con:targetType>clientSouscripteurId</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>clientALivrerId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Select the created commande from DB</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/COMMANDE.CLIENTALIVRERID[1]</con:sourcePath><con:targetType>clientALivrerId</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Update documentDemande to True and documente to False for the TITULAIRE" id="9f9a2a07-a62b-4c1f-910d-a259e276ebef"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update `documentassociation` set documentDemande = 1 and documente = 0 where referenceCommande = "${commandInfo#refCommand}" and clientId = '${commandInfo#clientSouscripteurId}';</con:query><con:assertion type="Simple Contains" id="4a7c0b8e-cf37-4a7e-a6d8-5865d3279ca7" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Update documentDemande to True and documente to true for the UTILISATEUR" id="33f44cd9-8953-4d65-b341-915d52de4f6f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update `documentassociation` set documentDemande = 1 and documente = 0 where referenceCommande = "${commandInfo#refCommand}" and clientId = '${commandInfo#clientALivrerId}';</con:query><con:assertion type="Simple Contains" id="4a7c0b8e-cf37-4a7e-a6d8-5865d3279ca7" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. Get command via clientId 'hientran02'_documente must be FALSE (Check by manually)" id="4d9e2268-e991-4b05-8eb6-e60136cf220f"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/client/{idClient}" methodName="findByIdClient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Get command via clientId 'hientran02'_documente must be FALSE (Check by manually)" id="e707573e-305f-420c-8ce2-e2b8e85e5bea" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-finder-1.2.x/Commande/client/</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="d7f84949-fd8d-491d-ad84-b838b02b24f0" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="edafe199-8bdf-4cac-b6ad-2c8a9386c05c" name="Contains"><con:configuration><token>"documente":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="idClient" value="hientran02" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>NbPassed</con:name><con:value>0</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>ff6670c5-3dec-4fef-8700-39c88c2d5814</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fb77764-ef68-4d18-bbfa-2d7a6b7d7d9d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>75bcb716-7bc1-47b7-95bb-a253724dc969</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>686ec412-d90e-4dfa-a129-f032ec3d0b1c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eadeb5c7-f876-4caf-9ddc-82d4cdc98afd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>563fffb3-1ba9-41c6-9060-1bba8d88914e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b0f8d3bf-3059-4e1d-bbab-99bd6f07d865</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>75e6d6f5-9387-4c2e-bd5d-89669d7f17b8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a0966ce7-1225-45de-b9af-c5a2d17c0dac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>91bfdb6f-1a52-4331-8d28-91274d06c1e1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a70a11cc-5d7a-479c-af55-910e73e91063</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>97f19ad2-11c8-4cd8-8305-5835be2ff4be</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>373b1721-3177-4e11-bac9-2a48f07a3e0e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f0071c91-9b60-47c8-9dbd-b9f9d3442895</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>785794ba-eda5-4cf1-a269-5f3406b6d42f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>33f44cd9-8953-4d65-b341-915d52de4f6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f0ac4e65-9161-4e25-9f15-ade671c2886f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b1d48c5b-43de-400f-97d5-6605f7fe10ae</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ed70df9b-f156-44d8-b08b-125fb60f7fb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3a93f522-bdc3-4ec8-85f8-9a1719ddb77a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="969e07ef-ea4e-4553-80fa-5ac3762d5100" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="06. Get successfully_dateDocumentInitialization NULL_Return documente NULL" searchProperties="true" maxResults="0"><con:description>Can not test automatically this case > To be continued in next sprint</con:description><con:settings/><con:testStep type="properties" name="commandInfo" id="dd247897-57e5-4475-b958-fd95cab35da5"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>2bc72c8b-0348-4463-8e0e-81c4f4e1537c</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset properties to null" id="a5308195-faab-4412-9820-d22db7196a8a">
        <con:settings/>
        <con:config><script>testRunner.testCase.getTestStepByName('commandInfo').setPropertyValue("refCommand",null)</script></con:config>
      </con:testStep><con:testStep type="restrequest" name="1. Create a command with mvno_conso and Bien" id="d2e42f05-4383-41df-a928-90242de3dd9d"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/creer" methodName="creerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a command with mvno_conso and Bien" id="cbefa18f-91b7-484d-b05b-80de3b4cd914" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1457596266"
    }
  },
  "offres": [
    {
      "reference": "MVNO",
      "label": "MVNO",
      "gamme": "MVNO",
      "secteur": "MVNO",
      "tarif": {
        "idTarif": "79",
        "prix": 1.67,
        "frequence": 1,
        "engagement": null,
        "duree": 6,
        "tva": "S",
        "frais": null
      },
      "modeFacturation": "PREMIER_MOIS",
      "typeProduit": "SERVICE",
      "details": [
        {
          "reference": "mvno_conso",
          "label": "mvno_conso",
          "tarif": {
            "idTarif": "83",
            "prix": 0,
            "frequence": 1,
            "engagement": null,
            "duree": 6,
            "tva": "S",
            "frais": null
          },
          "typeProduit": "SERVICE"
        },
{
          "reference": "PACK-MVNO-POSTPAID-MOBILE",
          "label": "PACK-MVNO-POSTPAID_MOBILE",
          "tarif": {
            "idTarif": "81",
            "prix": 29.158333,
            "frequence": 1,
            "engagement": null,
            "duree": 6,
            "tva": "S",
            "frais": null
          },
          "typeProduit": "BIEN"
        }
      ]
    }
  ],
  "client": {
       "souscripteur":{  
         "clientId":"hientran02",
         "adresseId":"602008913",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"hientran02",
         "adresseId":"602008913",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"hientran02",
         "adresseId":"602008913",
         "tva":"00"
      }
},
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/creer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b3c915c7-ef16-4713-9583-347b9ad7a7fb" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4ecae06e-f9c0-47e2-9276-c7e29027808a" name="Contains"><con:configuration><token>"numeroCommande"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b2d98102-5c67-4c08-8fe5-a59ad6cce5d3" name="Contains 2"><con:configuration><token>"numeroLignes"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="b6b515ca-dcdc-4053-82a3-dfd29d7a968a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a command with mvno_conso and Bien</con:sourceStep><con:sourcePath>//*:numeroCommande</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Get command via clientId 'hientran02'_signe must be FALSE" id="d9e74073-b3b5-4b3b-841f-d11c65156978"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/client/{idClient}" methodName="findByIdClient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Get command via clientId 'hientran02'_signe must be FALSE" id="e707573e-305f-420c-8ce2-e2b8e85e5bea" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-finder-1.2.x/Commande/client/</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="d7f84949-fd8d-491d-ad84-b838b02b24f0" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="edafe199-8bdf-4cac-b6ad-2c8a9386c05c" name="Reference commande must be"><con:configuration><token>"reference":"${commandInfo#refCommand}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="18bf3778-4957-4a96-8ae7-a296f96047c3" name="documente must be NULL"><con:configuration><token/><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="idClient" value="hientran02" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>ff6670c5-3dec-4fef-8700-39c88c2d5814</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fb77764-ef68-4d18-bbfa-2d7a6b7d7d9d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>75bcb716-7bc1-47b7-95bb-a253724dc969</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>686ec412-d90e-4dfa-a129-f032ec3d0b1c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eadeb5c7-f876-4caf-9ddc-82d4cdc98afd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>563fffb3-1ba9-41c6-9060-1bba8d88914e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b0f8d3bf-3059-4e1d-bbab-99bd6f07d865</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>75e6d6f5-9387-4c2e-bd5d-89669d7f17b8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a0966ce7-1225-45de-b9af-c5a2d17c0dac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>91bfdb6f-1a52-4331-8d28-91274d06c1e1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a70a11cc-5d7a-479c-af55-910e73e91063</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>97f19ad2-11c8-4cd8-8305-5835be2ff4be</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>373b1721-3177-4e11-bac9-2a48f07a3e0e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f0071c91-9b60-47c8-9dbd-b9f9d3442895</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>785794ba-eda5-4cf1-a269-5f3406b6d42f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>33f44cd9-8953-4d65-b341-915d52de4f6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f0ac4e65-9161-4e25-9f15-ade671c2886f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b1d48c5b-43de-400f-97d5-6605f7fe10ae</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282d9f6b-c93f-4020-b22e-ac35c0b74e26</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a5308195-faab-4412-9820-d22db7196a8a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="3ff01ddf-e2a9-42ac-8e3c-787686327ffa" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="07. Get successfully_dateSignatureInitialization NULL and no signatureassociation_Return signe NULL" searchProperties="true" maxResults="0"><con:description>Can not test automatically this case > To be continued in next sprint</con:description><con:settings/><con:testStep type="properties" name="commandInfo" id="76fd3a52-a2fd-44be-847e-56d2b6451209"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>9ccd9b7a-8f46-4fcc-a95e-cc9d40c34cc0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset properties to null" id="50afd733-69af-43b4-9b1d-01447abc333d">
        <con:settings/>
        <con:config><script>testRunner.testCase.getTestStepByName('commandInfo').setPropertyValue("refCommand",null)</script></con:config>
      </con:testStep><con:testStep type="restrequest" name="1. Create a command for hientran02 with mvno_conso and Bien" id="3d513bc2-f46d-42c6-ba1a-690d807f10c7"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/creer" methodName="creerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a command for hientran02 with mvno_conso and Bien" id="cbefa18f-91b7-484d-b05b-80de3b4cd914" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1457596266"
    }
  },
  "offres": [
    {
      "reference": "MVNO",
      "label": "MVNO",
      "gamme": "MVNO",
      "secteur": "MVNO",
      "tarif": {
        "idTarif": "79",
        "prix": 1.67,
        "frequence": 1,
        "engagement": null,
        "duree": 6,
        "tva": "S",
        "frais": null
      },
      "modeFacturation": "PREMIER_MOIS",
      "typeProduit": "SERVICE",
      "details": [
        {
          "reference": "mvno_conso",
          "label": "mvno_conso",
          "tarif": {
            "idTarif": "83",
            "prix": 0,
            "frequence": 1,
            "engagement": null,
            "duree": 6,
            "tva": "S",
            "frais": null
          },
          "typeProduit": "SERVICE"
        },
{
          "reference": "PACK-MVNO-POSTPAID-MOBILE",
          "label": "PACK-MVNO-POSTPAID_MOBILE",
          "tarif": {
            "idTarif": "81",
            "prix": 29.158333,
            "frequence": 1,
            "engagement": null,
            "duree": 6,
            "tva": "S",
            "frais": null
          },
          "typeProduit": "BIEN"
        }
      ]
    }
  ],
  "client": {
       "souscripteur":{  
         "clientId":"hientran02",
         "adresseId":"602008913",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"hientran02",
         "adresseId":"602008913",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"hientran02",
         "adresseId":"602008913",
         "tva":"00"
      }
},
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/creer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b3c915c7-ef16-4713-9583-347b9ad7a7fb" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4ecae06e-f9c0-47e2-9276-c7e29027808a" name="Contains"><con:configuration><token>"numeroCommande"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b2d98102-5c67-4c08-8fe5-a59ad6cce5d3" name="Contains 2"><con:configuration><token>"numeroLignes"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="fbb5eced-2311-416b-966f-6b87b5148c6d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a command for hientran02 with mvno_conso and Bien</con:sourceStep><con:sourcePath>//*:numeroCommande</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Get command via clientId 'hientran02'_signe must be NULL (Check manually)" id="25516fba-5999-4a31-a356-4839eaa3a910"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/client/{idClient}" methodName="findByIdClient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Get command via clientId 'hientran02'_signe must be NULL (Check manually)" id="e707573e-305f-420c-8ce2-e2b8e85e5bea" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-finder-1.2.x/Commande/client/</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="d7f84949-fd8d-491d-ad84-b838b02b24f0" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="edafe199-8bdf-4cac-b6ad-2c8a9386c05c" name="Reference commande must be"><con:configuration><token>"reference":"${commandInfo#refCommand}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="18bf3778-4957-4a96-8ae7-a296f96047c3" name="signe must be NULL"><con:configuration><token>"signe":null</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="idClient" value="hientran02" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>ff6670c5-3dec-4fef-8700-39c88c2d5814</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3fb77764-ef68-4d18-bbfa-2d7a6b7d7d9d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>75bcb716-7bc1-47b7-95bb-a253724dc969</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>686ec412-d90e-4dfa-a129-f032ec3d0b1c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eadeb5c7-f876-4caf-9ddc-82d4cdc98afd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>563fffb3-1ba9-41c6-9060-1bba8d88914e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b0f8d3bf-3059-4e1d-bbab-99bd6f07d865</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>75e6d6f5-9387-4c2e-bd5d-89669d7f17b8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a0966ce7-1225-45de-b9af-c5a2d17c0dac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>91bfdb6f-1a52-4331-8d28-91274d06c1e1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a70a11cc-5d7a-479c-af55-910e73e91063</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>97f19ad2-11c8-4cd8-8305-5835be2ff4be</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>373b1721-3177-4e11-bac9-2a48f07a3e0e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f0071c91-9b60-47c8-9dbd-b9f9d3442895</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>785794ba-eda5-4cf1-a269-5f3406b6d42f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>33f44cd9-8953-4d65-b341-915d52de4f6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f0ac4e65-9161-4e25-9f15-ade671c2886f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b1d48c5b-43de-400f-97d5-6605f7fe10ae</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>282d9f6b-c93f-4020-b22e-ac35c0b74e26</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a5308195-faab-4412-9820-d22db7196a8a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="ccfb476f-d5bc-4591-89ee-38d326be7a3a" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="08_Get successfully_dateSignatureInitialisation NULL_but singe = TRUE_Return signe NULL" searchProperties="true" disabled="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="20792ff6-9564-4d1c-85fc-80ed7784c33c"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>702000509</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset properties to null" id="5f04d7cd-0f7b-44e5-b58f-0508a216c6b3">
        <con:settings/>
        <con:config><script>testRunner.testCase.getTestStepByName('commandInfo').setPropertyValue("refCommand",null)</script></con:config>
      </con:testStep><con:testStep type="restrequest" name="1. Create a command for hientran02 with mvno_conso and Bien" id="44c2e713-ce24-4ef0-8353-6ce0eeb25efd"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/creer" methodName="creerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a command for hientran02 with mvno_conso and Bien" id="cbefa18f-91b7-484d-b05b-80de3b4cd914" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1457596266"
    }
  },
  "offres": [
    {
      "reference": "MVNO",
      "label": "MVNO",
      "gamme": "MVNO",
      "secteur": "MVNO",
      "tarif": {
        "idTarif": "79",
        "prix": 1.67,
        "frequence": 1,
        "engagement": null,
        "duree": 6,
        "tva": "S",
        "frais": null
      },
      "modeFacturation": "PREMIER_MOIS",
      "typeProduit": "SERVICE",
      "details": [
        {
          "reference": "mvno_conso",
          "label": "mvno_conso",
          "tarif": {
            "idTarif": "83",
            "prix": 0,
            "frequence": 1,
            "engagement": null,
            "duree": 6,
            "tva": "S",
            "frais": null
          },
          "typeProduit": "SERVICE"
        },
{
          "reference": "PACK-MVNO-POSTPAID-MOBILE",
          "label": "PACK-MVNO-POSTPAID_MOBILE",
          "tarif": {
            "idTarif": "81",
            "prix": 29.158333,
            "frequence": 1,
            "engagement": null,
            "duree": 6,
            "tva": "S",
            "frais": null
          },
          "typeProduit": "BIEN"
        }
      ]
    }
  ],
  "client": {
       "souscripteur":{  
         "clientId":"hientran02",
         "adresseId":"602008913",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"hientran02",
         "adresseId":"602008913",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"hientran02",
         "adresseId":"602008913",
         "tva":"00"
      }
},
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/creer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b3c915c7-ef16-4713-9583-347b9ad7a7fb" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4ecae06e-f9c0-47e2-9276-c7e29027808a" name="Contains"><con:configuration><token>"numeroCommande"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b2d98102-5c67-4c08-8fe5-a59ad6cce5d3" name="Contains 2"><con:configuration><token>"numeroLignes"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="b4b21c29-43ce-45d1-971f-dc8e5fcf15ff"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a command for hientran02 with mvno_conso and Bien</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/commande/creer';
//ns1:Response[1]/ns1:numeroCommande[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="delay" name="Waiting for transformation process" id="0be1afce-cea6-46fd-9757-d057338bd210"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="restrequest" name="2. Sign created command but not init" id="e660a3ff-e28b-4891-a5fe-1ead0d55b2c3"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Sign created command but not init" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3. Get command via clientId 'hientran02'_signe must be NULL (Check manually)" id="1be34c02-f368-4b22-b206-f052a0b46131"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/client/{idClient}" methodName="findByIdClient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Get command via clientId 'hientran02'_signe must be NULL (Check manually)" id="e707573e-305f-420c-8ce2-e2b8e85e5bea" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-finder-1.2.x/Commande/client/</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="d7f84949-fd8d-491d-ad84-b838b02b24f0" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="edafe199-8bdf-4cac-b6ad-2c8a9386c05c" name="Reference commande must be"><con:configuration><token>"reference":"${commandInfo#refCommand}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="18bf3778-4957-4a96-8ae7-a296f96047c3" name="signe must be NULL"><con:configuration><token>"signe":null</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="idClient" value="hientran02" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand 2" id="1e811bb7-518f-4319-994c-82ade65653df"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="4. Get the created command to check documente" id="1ec8f6bc-aca7-4576-85f3-35776cb87a82"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/commande/{refCommande}" methodName="findByReferenceCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Get the created command to check documente" id="c6ac2f41-b5d9-4ae6-a6c5-27697f44dad0" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-finder-1.2.x/Commande/commande/973233c8-5b09-4acf-8ef9-fd2f630dcbd4</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="46eb0064-c838-40a1-bd1d-47e0086b7fa8" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7aa7f7ed-74e3-4b15-83bd-7ac9a109ab2c" name="documente is TRUE"><con:configuration><token>"documente":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>20792ff6-9564-4d1c-85fc-80ed7784c33c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5f04d7cd-0f7b-44e5-b58f-0508a216c6b3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b4b21c29-43ce-45d1-971f-dc8e5fcf15ff</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>44c2e713-ce24-4ef0-8353-6ce0eeb25efd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0be1afce-cea6-46fd-9757-d057338bd210</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e660a3ff-e28b-4891-a5fe-1ead0d55b2c3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="6df52900-4ab5-4624-83d8-29f2c7245bc0" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="09_Get successfully_besoinSign TRUE and signe TRUE_Return signe TRUE (Check manually)" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="04bae93f-c56d-4941-bfdb-8410e9140b6b"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>8736a269-8214-4372-9167-34d03f7475b3</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset properties to null" id="bf00ac04-bc46-481c-9304-68b948f6ddf1">
        <con:settings/>
        <con:config><script>testRunner.testCase.getTestStepByName('commandInfo').setPropertyValue("refCommand",null)</script></con:config>
      </con:testStep><con:testStep type="restrequest" name="1. Create a command for hientran02 with mvno_conso and Bien" id="2600a837-960e-4ce5-951f-11a47e8bed22"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/creer" methodName="creerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a command for hientran02 with mvno_conso and Bien" id="cbefa18f-91b7-484d-b05b-80de3b4cd914" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1457596266"
    }
  },
  "offres": [
    {
      "reference": "MVNO",
      "label": "MVNO",
      "gamme": "MVNO",
      "secteur": "MVNO",
      "tarif": {
        "idTarif": "79",
        "prix": 1.67,
        "frequence": 1,
        "engagement": null,
        "duree": 6,
        "tva": "S",
        "frais": null
      },
      "modeFacturation": "PREMIER_MOIS",
      "typeProduit": "SERVICE",
      "details": [
        {
          "reference": "mvno_conso",
          "label": "mvno_conso",
          "tarif": {
            "idTarif": "83",
            "prix": 0,
            "frequence": 1,
            "engagement": null,
            "duree": 6,
            "tva": "S",
            "frais": null
          },
          "typeProduit": "SERVICE"
        },
{
          "reference": "PACK-MVNO-POSTPAID-MOBILE",
          "label": "PACK-MVNO-POSTPAID_MOBILE",
          "tarif": {
            "idTarif": "81",
            "prix": 29.158333,
            "frequence": 1,
            "engagement": null,
            "duree": 6,
            "tva": "S",
            "frais": null
          },
          "typeProduit": "BIEN"
        }
      ]
    }
  ],
  "client": {
       "souscripteur":{  
         "clientId":"hientran02",
         "adresseId":"602008913",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"hientran02",
         "adresseId":"602008913",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"hientran02",
         "adresseId":"602008913",
         "tva":"00"
      }
},
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/creer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b3c915c7-ef16-4713-9583-347b9ad7a7fb" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4ecae06e-f9c0-47e2-9276-c7e29027808a" name="Contains"><con:configuration><token>"numeroCommande"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b2d98102-5c67-4c08-8fe5-a59ad6cce5d3" name="Contains 2"><con:configuration><token>"numeroLignes"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="2f39129f-c544-4932-b197-9d3ab5a7df50"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a command for hientran02 with mvno_conso and Bien</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/commande/creer';
//ns1:Response[1]/ns1:numeroCommande[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="delay" name="Waiting for transformation process" id="7f753523-87ed-4470-bccf-8233ab3d4577"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="restrequest" name="2. Init signature for MVNO_besoinSign = TRUE" id="650f6191-e5a7-4e0c-91f1-af9f613c4731"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Init signature for MVNO_besoinSign = TRUE" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInitAfterSignature",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3. Sign the command_Successfully" id="d154de33-fdf8-4318-862e-068f6759d39c"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Sign the command_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4. Get command via clientId 'hientran02'_signe must be TRUE (Check manually)" id="5d98af1f-bfb2-4573-9ee0-419a217e2ba6"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/client/{idClient}" methodName="findByIdClient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Get command via clientId 'hientran02'_signe must be TRUE (Check manually)" id="e707573e-305f-420c-8ce2-e2b8e85e5bea" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-finder-1.2.x/Commande/client/</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="d7f84949-fd8d-491d-ad84-b838b02b24f0" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="edafe199-8bdf-4cac-b6ad-2c8a9386c05c" name="Reference commande must be"><con:configuration><token>"reference":"${commandInfo#refCommand}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="18bf3778-4957-4a96-8ae7-a296f96047c3" name="signe must be TRUE"><con:configuration><token>"signe":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="idClient" value="hientran02" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>20792ff6-9564-4d1c-85fc-80ed7784c33c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5f04d7cd-0f7b-44e5-b58f-0508a216c6b3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b4b21c29-43ce-45d1-971f-dc8e5fcf15ff</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>44c2e713-ce24-4ef0-8353-6ce0eeb25efd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0be1afce-cea6-46fd-9757-d057338bd210</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e660a3ff-e28b-4891-a5fe-1ead0d55b2c3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>650f6191-e5a7-4e0c-91f1-af9f613c4731</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="6cf41f1c-1857-4ee3-9395-5cb2756d10c7" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="10_Get successfully_besoinSign TRUE and signe FALSE_Return signe FALSE (Check manually)" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="0e885018-927f-4d5b-a7dc-a900d6d80a9d"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>b37fd11f-7d9c-42cd-baa3-b6b81c196567</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset properties to null" id="05d39ba4-0a7e-491f-97e6-f22406de9cf8">
        <con:settings/>
        <con:config><script>testRunner.testCase.getTestStepByName('commandInfo').setPropertyValue("refCommand",null)</script></con:config>
      </con:testStep><con:testStep type="restrequest" name="1. Create a command for hientran02 with mvno_conso and Bien" id="ce9379e5-8d67-4de5-b1fe-a2ac57f117ab"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/creer" methodName="creerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a command for hientran02 with mvno_conso and Bien" id="cbefa18f-91b7-484d-b05b-80de3b4cd914" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1457596266"
    }
  },
  "offres": [
    {
      "reference": "MVNO",
      "label": "MVNO",
      "gamme": "MVNO",
      "secteur": "MVNO",
      "tarif": {
        "idTarif": "79",
        "prix": 1.67,
        "frequence": 1,
        "engagement": null,
        "duree": 6,
        "tva": "S",
        "frais": null
      },
      "modeFacturation": "PREMIER_MOIS",
      "typeProduit": "SERVICE",
      "details": [
        {
          "reference": "mvno_conso",
          "label": "mvno_conso",
          "tarif": {
            "idTarif": "83",
            "prix": 0,
            "frequence": 1,
            "engagement": null,
            "duree": 6,
            "tva": "S",
            "frais": null
          },
          "typeProduit": "SERVICE"
        },
{
          "reference": "PACK-MVNO-POSTPAID-MOBILE",
          "label": "PACK-MVNO-POSTPAID_MOBILE",
          "tarif": {
            "idTarif": "81",
            "prix": 29.158333,
            "frequence": 1,
            "engagement": null,
            "duree": 6,
            "tva": "S",
            "frais": null
          },
          "typeProduit": "BIEN"
        }
      ]
    }
  ],
  "client": {
       "souscripteur":{  
         "clientId":"hientran02",
         "adresseId":"602008913",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"hientran02",
         "adresseId":"602008913",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"hientran02",
         "adresseId":"602008913",
         "tva":"00"
      }
},
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/creer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b3c915c7-ef16-4713-9583-347b9ad7a7fb" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4ecae06e-f9c0-47e2-9276-c7e29027808a" name="Contains"><con:configuration><token>"numeroCommande"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b2d98102-5c67-4c08-8fe5-a59ad6cce5d3" name="Contains 2"><con:configuration><token>"numeroLignes"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="1f68a961-99f5-4eb8-b06c-35a665074b77"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a command for hientran02 with mvno_conso and Bien</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/commande/creer';
//ns1:Response[1]/ns1:numeroCommande[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="delay" name="Waiting for transformation process" id="dd995183-a33f-42a0-8d47-9d08e51c0aa3"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="restrequest" name="2. Init signature for MVNO_besoinSign = TRUE" id="9ea7ccbe-0419-4244-a23a-b85d8ad11724"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Init signature for MVNO_besoinSign = TRUE" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInitAfterSignature",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3. Get command via clientId 'hientran02'_signe must be FALSE (Check manually)" id="3d3de079-c599-4b4c-835c-2c65dc427b66"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/client/{idClient}" methodName="findByIdClient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Get command via clientId 'hientran02'_signe must be FALSE (Check manually)" id="e707573e-305f-420c-8ce2-e2b8e85e5bea" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-finder-1.2.x/Commande/client/</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="d7f84949-fd8d-491d-ad84-b838b02b24f0" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="edafe199-8bdf-4cac-b6ad-2c8a9386c05c" name="Reference commande must be"><con:configuration><token>"reference":"${commandInfo#refCommand}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="18bf3778-4957-4a96-8ae7-a296f96047c3" name="signe must be TRUE"><con:configuration><token>"signe":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="idClient" value="hientran02" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>20792ff6-9564-4d1c-85fc-80ed7784c33c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5f04d7cd-0f7b-44e5-b58f-0508a216c6b3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b4b21c29-43ce-45d1-971f-dc8e5fcf15ff</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>44c2e713-ce24-4ef0-8353-6ce0eeb25efd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0be1afce-cea6-46fd-9757-d057338bd210</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e660a3ff-e28b-4891-a5fe-1ead0d55b2c3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>650f6191-e5a7-4e0c-91f1-af9f613c4731</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="e51434ff-3f55-4490-a96b-b2d2b7393ce0" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="11. Get successfully_besoinSign FALSE_Return signe TRUE (Check manually)" searchProperties="true" maxResults="0"><con:description>Can not test automatically this case > To be continued in next sprint</con:description><con:settings/><con:testStep type="properties" name="commandInfo" id="a4e005dd-43cb-4c6d-8750-46591d848df5"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>bd307cbb-69b8-4562-83fa-f6fd6228a248</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>ecd46bfc-38b5-48c6-bc3d-04b8d7a9178c</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset properties to null" id="fa0c619e-06d4-40de-8fc7-2668aea8c4af">
        <con:settings/>
        <con:config><script>testRunner.testCase.getTestStepByName('commandInfo').setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName('commandInfo').setPropertyValue("refDraft",null)</script></con:config>
      </con:testStep><con:testStep type="restrequest" name="1. Create a Draft_Antivirus" id="e5ad3662-cd11-4d9e-b0b6-0742ea38fd85"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft_Antivirus" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "canal": "SoapUIPRO",
    "qui": "hientran",
    "ip": {
      "ts": 1455615028000,
      "ip": "10.190.29.140"
    }
  },
  "lignes": [
    {
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "avfw.essentiel",
        "referenceTarif": "23"
      }
    }
  ],
  "souscripteur": {
      "clientId": "hientran03",
      "adresseId": "171308010"
    },

    "facturation": {
      "clientId": "hientran03",
      "adresseId": "171308010"
    }
    ,

    "livraison": {
      "clientId": "hientran03",
      "adresseId": "171308010"
    }
  },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="cd735495-c20b-44bb-8a16-31bc00ec4811" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refDraft" id="57671d35-143f-4369-8e77-e859bfe1e2be"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft_Antivirus</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande" id="00ac8dde-c83a-4716-b394-db2d1923d896"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ts": 1411654933,
      "ip": "10.190.29.140"
    }
  },
  "trameCatalogue": {
    "offres": [
      {
        "reference": "avfw.essentiel",
        "label": "Securitoo Integral",
        "gamme": "Antivirus",
        "secteur": "Securite",
        "modeFacturation": "DATE_ANNIVERSAIRE",
        "type": "SERVICE",
        "tarifs": [
          {
            "idTarif": "23",
            "prix": "5",
            "frequence": "1",
            "tva": "R"
          }
        ]
      }
    ]
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="de120654-314f-499a-b88a-bad7fadefd53" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="1827bc99-dea5-4df0-867b-69e4829a80a7" name="Contains"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="27f7858b-006d-4a6d-9338-24784e66fd24"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="delay" name="Waiting for transformation process" id="dc646f84-b7c6-4e6e-89e7-7d6244f46be1"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="restrequest" name="3. Init signature for Antivirus_besoinSign = FALSE" id="c5e9079d-d1b6-4797-bc4f-6716e7f4c5db"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Init signature for Antivirus_besoinSign = FALSE" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInit",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4. Get command via clientId 'hientran03'_sisgne TRUE (check manually)" id="396ec7e8-925c-4eaa-aa8e-eb0da22a0281"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/client/{idClient}" methodName="findByIdClient" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Get command via clientId 'hientran03'_sisgne TRUE (check manually)" id="e707573e-305f-420c-8ce2-e2b8e85e5bea" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-finder-1.2.x/Commande/client/</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="d7f84949-fd8d-491d-ad84-b838b02b24f0" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="5599e143-fc64-46f1-a3ef-ac332931613c" name="signe TRUE"><con:configuration><token>"signe":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Reference commande must be" id="f4c79585-26de-4e24-b265-59a1f3571cea"><con:configuration><token>"reference":"${commandInfo#refCommand}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="idClient" value="291826" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>3fb77764-ef68-4d18-bbfa-2d7a6b7d7d9d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>75bcb716-7bc1-47b7-95bb-a253724dc969</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>686ec412-d90e-4dfa-a129-f032ec3d0b1c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e1f660f6-220b-467c-bc6c-24c76415029e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fdad66a0-c625-428e-92fe-d23f605d4aa1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bab1007d-98bb-42ff-9646-b3b446f07ec0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6a62622b-4ce2-45a9-9631-5d9dfa1ca959</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3c5ad724-3028-4247-8bd2-80956900bc58</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b1c3fc5c-5e7e-4bbd-a42d-b6c5819feea0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>53fe5a9e-c9d3-4009-a462-2b0826b6bd6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6b3283a4-5983-4e10-ae25-985a10cecc7c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fa0c619e-06d4-40de-8fc7-2668aea8c4af</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dc646f84-b7c6-4e6e-89e7-7d6244f46be1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>27f7858b-006d-4a6d-9338-24784e66fd24</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c5e9079d-d1b6-4797-bc4f-6716e7f4c5db</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="16e73396-8ad7-44af-8edc-5f957f29a195" name="findByReferenceCommande"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="9f77e0ee-46ee-41a5-8485-b8f1ce73d044" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01. Get successfully_Check the signatureassociation_Not init yet" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="ec1d62fa-6c4f-4470-985e-3d4dcfd1f79f"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>c14e0914-c02b-4412-bcb4-d139f7697a28</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>ce4f41be-475b-466c-b6e7-b883b6ce843b</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="d35ab6f2-9e4b-47a6-8e27-213402c1e8c1"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
</script></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected" id="1782b2eb-f00e-4cc9-93e1-e7d587caf9e0"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "Welcome",
    "ip": {
      "ip": "10.190.29.140",
      "ts": 1456370857000
    }
  },
  "lignes": [
    {
      "auteur": {
        "qui": "hientran",
        "canal": "Welcome",
        "ip": {
          "ip": "10.190.29.150",
          "ts": 1456370857000
        }
      },
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
        
      "details": [
         {
            "referenceSelection": "MVNO-SERVICE",
            "referenceChoix": "mvno_conso",
            "referenceTarif": "83"
          },
         		  {
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }
      ]
    }
  }
  ],
  "souscripteur": {
    "clientId": "hientran01",
    "adresseId": "006010387",
    "tva": "01"
  },
  "livraison": {
    "clientId": "hientran01",
    "adresseId": "006010387",
    "tva": "01"
  },
  "facturation": {
     "clientId": "hientran01",
    "adresseId": "006010387",
    "tva": "01"
  },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c918050e-5fc7-49ce-8e3f-11157f0790f9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refDraft" id="31d7b789-c391-493a-9865-3d424b2da80d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande" id="c3a88470-e213-422f-8d3a-0ac1f6a16cb6"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "clientId": "hientran01",
    "adresseId": "006010387",
    "tva": "01"
  },
  "livraison": {
     "clientId": "hientran01",
    "adresseId": "006010387",
    "tva": "01"
  },
  "facturation": {
     "clientId": "hientran01",
    "adresseId": "006010387",
    "tva": "01"
  }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="30f940d7-8a4d-4d5c-97b3-e10f145d7995" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="e7c52f7d-53d4-4be3-af60-6fb60c052fc2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="3. Get the created command to check signatureassociation" id="f71db178-7744-41ce-a0e4-d7d97f42b186"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/commande/{refCommande}" methodName="findByReferenceCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Get the created command to check signatureassociation" id="c6ac2f41-b5d9-4ae6-a6c5-27697f44dad0" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-finder-1.2.x/Commande/commande/973233c8-5b09-4acf-8ef9-fd2f630dcbd4</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="46eb0064-c838-40a1-bd1d-47e0086b7fa8" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="288e696c-864c-4355-b303-51b6ce4b4471" name="documente is null"><con:configuration><token>"documente":null</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="288e696c-864c-4355-b303-51b6ce4b4471" name="signe is null"><con:configuration><token>"signe":null</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="51b8cc5c-a290-4d85-b4fd-c7b56e0747ec" name="signatureassociation is empty"><con:configuration><token>"signatureAssociations":[]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d094790d-bbd2-4c5b-bfaf-9ea9bf55b226" name="ClientID must be"><con:configuration><token>"clientId":"hientran01"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>customerKey1</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refLigneGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4edc882c-c08a-4007-b221-ed013f349563</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ca4d9310-be06-4636-9c8e-c38c68d500b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ef57f960-b373-4044-9bb2-5e801713d1f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0805237-9155-4488-ad2d-25f5953baed7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1f408692-658d-4f78-8a01-6740142bad3e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8d21975f-820b-42d8-9b08-074cf231746d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7b43f5a-18c4-47ca-80cf-73f1dd4cf436</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d206a272-69a5-4692-b03b-c05e91e3f43e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6a3338f6-6ee1-4dff-beb7-d900365a63f7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="46295b5d-fd6b-4cf7-b929-48ec4e943f5a" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02. Get successfully_Check the signatureassociation_Init but not sign yet" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="c75f9b2c-796d-49f8-a8c9-8350e55affc3"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>03aba79f-a011-48d4-8e02-e64d39ec70bb</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>05502669-a8bd-4620-8c87-d74a69a666fc</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="fc79c8c8-987c-45e0-998f-f1a5671f0cba"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
</script></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected" id="adbc0471-9c06-4fc0-95a8-ba5284ba93d4"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "Welcome",
    "ip": {
      "ip": "10.190.29.140",
      "ts": 1456370857000
    }
  },
  "lignes": [
    {
      "auteur": {
        "qui": "hientran",
        "canal": "Welcome",
        "ip": {
          "ip": "10.190.29.150",
          "ts": 1456370857000
        }
      },
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
        
      "details": [
         {
            "referenceSelection": "MVNO-SERVICE",
            "referenceChoix": "mvno_conso",
            "referenceTarif": "83"
          },
         		  {
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }
      ]
    }
  }
  ],
  "souscripteur": {
    "clientId": "hientran01",
    "adresseId": "006010387",
    "tva": "01"
  },
  "livraison": {
      "clientId": "hientran01",
    "adresseId": "006010387",
    "tva": "01"
  },
  "facturation": {
     "clientId": "hientran01",
    "adresseId": "006010387",
    "tva": "01"
  },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c918050e-5fc7-49ce-8e3f-11157f0790f9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refDraft" id="a0fdc061-ff71-414b-80a6-740dc7b86202"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande" id="9123cfe6-58d4-4a2f-b775-82c19df9c387"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur": {
    "clientId": "hientran01",
    "adresseId": "006010387",
    "tva": "01"
  },
  "livraison": {
      "clientId": "hientran01",
    "adresseId": "006010387",
    "tva": "01"
  },
  "facturation": {
     "clientId": "hientran01",
    "adresseId": "006010387",
    "tva": "01"
  }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="30f940d7-8a4d-4d5c-97b3-e10f145d7995" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="84a17ca3-c7e2-47cd-a27a-2ae2c492060d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="delay" name="Waiting for initiation of documents" id="261697e2-a359-4501-ba49-bbaeccffc91b"><con:settings/><con:config><delay>5000</delay></con:config></con:testStep><con:testStep type="restrequest" name="3. Init signature successfully" id="dc2a55a2-dae0-47d3-a8e0-d200bcb49182"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Init signature successfully" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInitAfterSignature",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4. Get the created command to check signatureassociation" id="60b373c6-6258-4c49-899c-f8535805ac6d"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/commande/{refCommande}" methodName="findByReferenceCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Get the created command to check signatureassociation" id="c6ac2f41-b5d9-4ae6-a6c5-27697f44dad0" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-finder-1.2.x/Commande/commande/973233c8-5b09-4acf-8ef9-fd2f630dcbd4</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="46eb0064-c838-40a1-bd1d-47e0086b7fa8" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d537a362-e8a4-4f9d-b540-06c115c7192e" name="documente must be false"><con:configuration><token>"documente":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7aa7f7ed-74e3-4b15-83bd-7ac9a109ab2c" name="signe must be FALSE"><con:configuration><token>"signe":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="0294a329-fcd5-4368-bc63-c69fb1b47516" name="signatureassociation contains"><con:configuration><token>"referenceCommande":"${commandInfo#refCommand}","codePartenaire":"NNCOM","referenceContrat":null,"transformeEnContrat":false,"parrain":null,"typePaiement":null,"datePaiement":null,"ippaiement":null,"dateTransformationEnContrat":null,"signe":true,"documente":false,"signatureAssociations":[{"mode":null,"referenceSignature":null,"codeFolio":null,"besoinSignature":false,"signe":false,"dateSignature":null}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d094790d-bbd2-4c5b-bfaf-9ea9bf55b226" name="ClientID must be"><con:configuration><token>"clientId":"hientran01"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Copy of documente must be false" id="b042a1c8-9eab-4192-ab43-135e12a55b0d"><con:configuration><token>"documente":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Copy of signatureassociation contains" id="e69a9ee8-2ad6-4ec3-804a-9ad519b18207"><con:configuration><token>"referenceCommande":"${commandInfo#refCommand}","codePartenaire":"NNCOM","referenceContrat":null,"transformeEnContrat":false,"parrain":null,"typePaiement":null,"datePaiement":null,"ippaiement":null,"dateTransformationEnContrat":null,"signe":true,"documente":false,"signatureAssociations":[{"mode":null,"referenceSignature":null,"codeFolio":null,"besoinSignature":false,"signe":false,"dateSignature":null}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>customerKey1</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refLigneGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4edc882c-c08a-4007-b221-ed013f349563</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ca4d9310-be06-4636-9c8e-c38c68d500b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ef57f960-b373-4044-9bb2-5e801713d1f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0805237-9155-4488-ad2d-25f5953baed7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1f408692-658d-4f78-8a01-6740142bad3e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8d21975f-820b-42d8-9b08-074cf231746d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7b43f5a-18c4-47ca-80cf-73f1dd4cf436</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d206a272-69a5-4692-b03b-c05e91e3f43e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6a3338f6-6ee1-4dff-beb7-d900365a63f7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="d5411b77-e28b-48b5-b1e6-04b4cdab26e6" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03. Get successfully_Check the signatureassociation_Already sign" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="1a1321c8-c0fe-47c9-8d92-a128f06674e2">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="19e7bd5a-502a-49e1-9e2c-67bc8462d6a1"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>af301efa-490c-43a3-8a6f-7203fd75a1bf</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>76fb849c-b55b-40ac-87e9-ef1988b149a0</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="6eb41afd-5e9c-4ad9-8f0c-b953fa13d3bf"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
</script></con:config></con:testStep><con:testStep type="restrequest" name="0. Update document status to TRUE" id="4347e9db-067f-421e-9cbd-8a49fe29a2ea"><con:settings/><con:config service="BaseClient" resourcePath="/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="0. Update document status to TRUE" id="ab52b71c-646d-4c0b-8a2e-5cb09269b6b9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="c0d2e59f-076b-4bc2-b918-ec96fc13814d"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionCNI is true" id="78efdf77-5b5e-4a40-a3cd-e5ff382e9d68"><con:configuration><token>"flagReceptionCNI":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionJD is true" id="45830ed8-8d1b-4e2a-9ea2-73918bede086"><con:configuration><token>"flagReceptionJD":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="updateReceptionDocRequest" value="{&quot;handleKey&quot;:&quot;511708010&quot;, &quot;flagReceptionCNI&quot;:&quot;true&quot;, &quot;flagReceptionJD&quot;:&quot;true&quot;}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected" id="2529addc-0e50-4a78-8c0d-77beba5cc09c"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "Welcome",
    "ip": {
      "ip": "10.190.29.140",
      "ts": 1456370857000
    }
  },
  "lignes": [
    {
      "auteur": {
        "qui": "hientran",
        "canal": "Welcome",
        "ip": {
          "ip": "10.190.29.150",
          "ts": 1456370857000
        }
      },
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
        
      "details": [
         {
            "referenceSelection": "MVNO-SERVICE",
            "referenceChoix": "mvno_conso",
            "referenceTarif": "83"
          },
         		  {
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }
      ]
    }
  }
  ],
  "souscripteur": {
    "clientId": "hientran01",
    "adresseId": "006010387",
    "tva": "01"
  },
  "livraison": {
     "clientId": "hientran02",
    "adresseId": "602008913",
    "tva": "01"
  },
  "facturation": {
     "clientId": "hientran01",
    "adresseId": "006010387",
    "tva": "01"
  },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c918050e-5fc7-49ce-8e3f-11157f0790f9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refDraft" id="c16e9dab-2e8d-4fba-8f78-4238420869ba"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande" id="430f22fd-b8f5-477e-b412-3a9ec49a60c3"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur": {
    "clientId": "hientran01",
    "adresseId": "006010387",
    "tva": "01"
  },
  "livraison": {
     "clientId": "hientran02",
    "adresseId": "602008913",
    "tva": "01"
  },
  "facturation": {
     "clientId": "hientran01",
    "adresseId": "006010387",
    "tva": "01"
  }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="30f940d7-8a4d-4d5c-97b3-e10f145d7995" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="c9018c6b-7bdf-4a4f-b07f-420de70e8408"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="54c57278-5019-43fc-8d87-38b6c0e8b89e">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait cronExpressionSynchronizerDocument" id="2e1aca4c-7a67-4b33-a9ab-42725fee955b"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="183d3c18-8411-4eb3-81dd-1f5b47cac241"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${Properties#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for synchronization of documents" id="53157995-9e41-4f16-9a0c-50178c1d3839"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()="0"
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="3. Init signature successfully" id="bd18f394-4ec4-4438-bce8-4bf5df6d2614"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Init signature successfully" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInitAfterSignature",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4. Sign the created command_Successfully" id="9d0d7245-8d25-4d9f-8737-e29c102ecf5b"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Sign the created command_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="5. Get the created command to check signatureassociation" id="c55f455a-de27-434d-a6d7-4895da213132"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/commande/{refCommande}" methodName="findByReferenceCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5. Get the created command to check signatureassociation" id="c6ac2f41-b5d9-4ae6-a6c5-27697f44dad0" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-finder-1.2.x/Commande/commande/973233c8-5b09-4acf-8ef9-fd2f630dcbd4</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="46eb0064-c838-40a1-bd1d-47e0086b7fa8" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="documente must be true" id="3c64704a-4fd2-4172-aca8-a81759eaa633"><con:configuration><token>"documente":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7aa7f7ed-74e3-4b15-83bd-7ac9a109ab2c" name="signe must be TRUE"><con:configuration><token>"signe":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d094790d-bbd2-4c5b-bfaf-9ea9bf55b226" name="clientId must be"><con:configuration><token>"clientId":"hientran01"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="signatureassociation contains" id="d086efe0-fd1a-45db-a44c-8f05c1b148cb"><con:configuration><token>"referenceCommande":"${commandInfo#refCommand}","codePartenaire":"NNCOM","referenceContrat":null,"transformeEnContrat":false,"parrain":null,"typePaiement":null,"datePaiement":null,"ippaiement":null,"dateTransformationEnContrat":null,"signe":true,"documente":false,"signatureAssociations":[{"mode":"OPEN_TRUST","referenceSignature":null,"codeFolio":"9CBEBAWGE2","besoinSignature":false,"signe":true,"dateSignature":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>customerKey1</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refLigneGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4edc882c-c08a-4007-b221-ed013f349563</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ca4d9310-be06-4636-9c8e-c38c68d500b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ef57f960-b373-4044-9bb2-5e801713d1f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0805237-9155-4488-ad2d-25f5953baed7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1f408692-658d-4f78-8a01-6740142bad3e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8d21975f-820b-42d8-9b08-074cf231746d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7b43f5a-18c4-47ca-80cf-73f1dd4cf436</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d206a272-69a5-4692-b03b-c05e91e3f43e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6a3338f6-6ee1-4dff-beb7-d900365a63f7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1a1321c8-c0fe-47c9-8d92-a128f06674e2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>54c57278-5019-43fc-8d87-38b6c0e8b89e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4347e9db-067f-421e-9cbd-8a49fe29a2ea</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2e1aca4c-7a67-4b33-a9ab-42725fee955b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>183d3c18-8411-4eb3-81dd-1f5b47cac241</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>53157995-9e41-4f16-9a0c-50178c1d3839</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="b6bab372-dffb-4f44-993e-562f39c58adb" name="findCommandeDocumentAssociations"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="f12e71a6-b800-43d4-9051-99e5826fae84" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01. Get failed_Command is not found" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="restrequest" name="1. Let the refCommand not existed_Get failed" id="a41ee461-7a63-48c9-b566-529108db7bdd"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/{refCommande}/documentAssociation" methodName="findCommandeDocumentAssociations" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Let the refCommand not existed_Get failed" id="216480eb-f429-433e-8752-fd248db0ba7f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale.finder.ws-1.2.x/Commande/abc/documentAssociation</con:originalUri><con:assertion type="Simple Contains" name="errorCode must be" id="8f34e1e6-c567-457a-98e5-160aeacfcdce"><con:configuration><token>"errorCode":"0.1.2"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="errorMessage must be" id="30a8e3ac-1c3f-4b94-af3d-5f6277409451"><con:configuration><token>"errorMessage":"llement commande de rference abc nexiste pas."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="abc" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/></con:testCase><con:testCase id="b27a1bc5-d252-47be-aba6-96d31b493ef5" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02. Get successfully_Offer has not any associated document" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="ed899eea-76f5-47d0-aaf5-31dbd3c8242e">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="b7c112d1-d4f4-4602-b3c7-a34f82070b98"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>6e0fb6de-8580-4a57-9a27-dc2402d4eec1</con:value></con:property><con:property><con:name>clientSouscripteurId</con:name><con:value>5499</con:value></con:property><con:property><con:name>clientALivrerId</con:name><con:value>5498</con:value></con:property><con:property><con:name>clientAFactureId</con:name><con:value/></con:property></con:properties></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a commande with one offer no detail_ATV" id="b04e3bdf-aabb-4c51-ba63-2ee3683101b8"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>0d51eb30-0a61-410c-9f6d-3c60240f37ae</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>6e0fb6de-8580-4a57-9a27-dc2402d4eec1</con:value></con:property><con:property><con:name>customerKey1</con:name></con:property><con:property><con:name>handleKey1</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="6cfe4fb0-bf0a-4245-872d-ab63e72ad5bc"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a commande with one offer no detail_ATV</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="8887325d-c6ce-486e-ae5a-8ae83d8f2de7">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait for initiation of associated documents" id="75a61755-faa5-430a-bcff-b0f26d09a5cc"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="b71e50f3-8bed-4819-87fd-33f96df72141"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${Properties#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for synchronization of documents" id="09e5e1d4-b56b-45f8-83e2-ed5402d3400c"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()="0"
and 
${#TestCase#NbPassed} &lt; 3</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="2. Let the refCommand existed_Get document association" id="4e04523f-b488-4ac4-a999-d5114987c8b5"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/{refCommande}/documentAssociation" methodName="findCommandeDocumentAssociations" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Let the refCommand existed_Get document association" id="216480eb-f429-433e-8752-fd248db0ba7f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale.finder.ws-1.2.x/Commande/abc/documentAssociation</con:originalUri><con:assertion type="Simple Contains" id="6ed10ec0-f894-460a-816c-843560adea8b" name="No document is found"><con:configuration><token>"documentAssociations":[]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="957b6b0f-3aa6-40af-9fe9-5900937b578a" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>75a61755-faa5-430a-bcff-b0f26d09a5cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ed899eea-76f5-47d0-aaf5-31dbd3c8242e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8887325d-c6ce-486e-ae5a-8ae83d8f2de7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b71e50f3-8bed-4819-87fd-33f96df72141</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09e5e1d4-b56b-45f8-83e2-ed5402d3400c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="6bcfbbb1-59e7-4a5b-a22e-6bf155b1b2c0" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03. Get successfuly_Offer has some associated documents" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="4e23440a-dbb7-4c55-8015-b473d86a012b">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="c890f076-b1f1-46bb-82b0-1db93dadacb1"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>c7f0573d-906a-485b-8ed5-7c4c2ec2b494</con:value></con:property><con:property><con:name>refCommandLigneDetail</con:name><con:value>b0672480-dbb8-4300-b9e4-7c0c43f975dd-1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a command with offer mvno_conso and Bien" id="285f94e1-27a8-4886-8e4f-b1bed31aefb4"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>b93b868a-13f5-479a-9046-5beb3a9f7314</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>c7f0573d-906a-485b-8ed5-7c4c2ec2b494</con:value></con:property><con:property><con:name>customerKey3</con:name></con:property><con:property><con:name>handleKey3</con:name></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>refCommandLigneGlobal</con:name></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="e6ed8ffe-e911-4736-ac48-3cc3d9c3813a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a command with offer mvno_conso and Bien</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Select the created command ligne detail" id="ee8228e0-e215-4163-8fbd-82a59f41e252"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commandelignedetail` where commandeLigneId = (SELECT id FROM `commandeligne` where commandeId = (select id from commande where reference = "${commandInfo#refCommand}")) and referenceChoix = 'mvno_conso';</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Two commandLigneDetails is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4ee6e65a-6fbc-447d-8185-c4362807905c" name="Reference Choice must be"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNEDETAIL.REFERENCECHOIX[1]</path><content>mvno_conso</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommandeLigneDetail" id="b0b86b3e-62d5-43f3-bb56-fc33f864d405"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigneDetail</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Select the created command ligne detail</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNEDETAIL.REFERENCECOMMANDELIGNEDETAIL[1]</con:sourcePath><con:targetType>refCommandLigneDetail</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="9bb88806-ec53-46e6-956e-1750d785c3f3">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait for initiation of associated documents" id="fbdbafb6-7ca1-459e-a967-0b429a8b71fa"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="ade1c264-7c72-48b1-a63f-fa4916101e34"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${Properties#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for synchronization of documents" id="5fae6a08-557e-4458-b922-9f5400870fb1"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()="0"
and 
${#TestCase#NbPassed} &lt; 3</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="2. Let the refCommand existed_Get document association" id="ccb2885b-20d6-43d2-8c76-279bc047704b"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/{refCommande}/documentAssociation" methodName="findCommandeDocumentAssociations" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Let the refCommand existed_Get document association" id="216480eb-f429-433e-8752-fd248db0ba7f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale.finder.ws-1.2.x/Commande/abc/documentAssociation</con:originalUri><con:assertion type="JsonPath Count" id="9433f223-6330-4720-bebb-f90c05128404" name="Two documents are returned"><con:configuration><path>$.documentAssociations[*]</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e22dabb0-bbad-44fa-b352-00ce82127757" name="clientId must be 192112"><con:configuration><token>"clientId":"192112"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8f364de6-f2ae-45cb-a2c0-c6aaf26113aa" name="adressId must be 511708010"><con:configuration><token>"adresseId":"511708010"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="dc9648e1-188a-4b8f-8914-bd62fb8a61c8" name="Reference of command ligne detail must be"><con:configuration><token>"referenceCommandeLigneDetail":"${commandInfo#refCommandLigneDetail}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="0a955ae4-7fef-4896-89b1-3070ca8c62c5" name="documentDemande must be true"><con:configuration><token>"documentDemande":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="bfe8181e-b3a2-4d2c-854b-0d31c3a44d73" name="documente must be false" disabled="true"><con:configuration><token>"documente":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="540df192-da2a-43c8-b520-a5fe0c32b99d" name="forceValide must be false"><con:configuration><token>"forceValide":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>c890f076-b1f1-46bb-82b0-1db93dadacb1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ccb2885b-20d6-43d2-8c76-279bc047704b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fbdbafb6-7ca1-459e-a967-0b429a8b71fa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ee8228e0-e215-4163-8fbd-82a59f41e252</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b0b86b3e-62d5-43f3-bb56-fc33f864d405</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4e23440a-dbb7-4c55-8015-b473d86a012b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9bb88806-ec53-46e6-956e-1750d785c3f3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ade1c264-7c72-48b1-a63f-fa4916101e34</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5fae6a08-557e-4458-b922-9f5400870fb1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="7efcd0ba-0d64-4fcc-80d4-e2447525cdb2" name="findCommandeParameters"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="f90effe5-399d-47b0-9db1-0e41aa2f64a4" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01. Get failed_Command not found" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="restrequest" name="2. Put a refCommand not existed_Get failed_Check exception" id="2d11be36-6ddb-4d5e-b4f5-e3aa90c67910"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/{refCommande}/parametre" methodName="findCommandeParameters" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Put a refCommand not existed_Get failed_Check exception" id="41bbf639-34d1-41c2-8f42-644dcea9edb6" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-finder-1.1.x/Commande/4bb19bef-1753-4842-ba5e-962cb1c48c92/parametre</con:originalUri><con:assertion type="Simple Contains" id="3b0cdf42-c1bf-4a43-bdfc-7d4e51c9ab26" name="errorCode must be"><con:configuration><token>"errorCode":"0.1.2"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="809d5c41-f57f-4d96-a1ca-d478cdec76ff" name="errorMessage must be"><con:configuration><token>"errorMessage":"llement commande de rference abc-def nexiste pas."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="abc-def" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f0d62716-0404-4b9d-afab-287245326a01</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="869ba9d4-87a0-4bc4-9aa5-80713740f725" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02. Get successfully_No parameter is found" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="calltestcase" name="1.transformToCommandWithoutParam" id="739e5d94-f9d8-4d02-a93b-f419d45083f4"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>0d51eb30-0a61-410c-9f6d-3c60240f37ae</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>006007129</con:value></con:property><con:property><con:name>customerKey1</con:name></con:property><con:property><con:name>handleKey1</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="2. Get the created command parameters_No param is returned" id="7b10d5e4-8ba9-40c6-8996-047eccd793b1"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/{refCommande}/parametre" methodName="findCommandeParameters" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Get the created command parameters_No param is returned" id="41bbf639-34d1-41c2-8f42-644dcea9edb6" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-finder-1.1.x/Commande/4bb19bef-1753-4842-ba5e-962cb1c48c92/parametre</con:originalUri><con:assertion type="Simple Contains" id="3b0cdf42-c1bf-4a43-bdfc-7d4e51c9ab26" name="Parameters are empty"><con:configuration><token>"parametres":[]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${1.transformToCommandWithoutParam#refCommandGlobal}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>83d68016-d8a6-4828-a5d8-cf1f9a7f66ad</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="beef2c27-a412-4dc5-8f5a-ab09c4279dc5" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03. Get successfully_One param is found" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="5d0cb876-9131-4760-981e-1a6dd224bf43"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>004000220</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value>LIC-00002204</con:value></con:property><con:property><con:name>refCommandLigneDetail</con:name><con:value>27c7ee27-5f56-49e7-8397-0c69b9cf1e4a-1</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform to command with one param_Successfully" id="b54ea5bc-e434-4203-9076-bed391778c4c"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>b93b868a-13f5-479a-9046-5beb3a9f7314</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>004000220</con:value></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>refCommandLigneGlobal</con:name></con:property><con:property><con:name>customerKey3</con:name></con:property><con:property><con:name>handleKey3</con:name></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="96172c75-60d2-4336-95e7-c44021b93986"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform to command with one param_Successfully</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Get reference of command ligne" id="92af6fd7-caf6-46b0-8669-20b2f13540e1"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/details/{refCommande}" methodName="getCommandeDetailee" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Get reference of command ligne" id="3ce4c65a-c2b4-4b14-b750-0032082c171a" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/details/b693e7ea-2b0f-4b9c-8e38-094de956130d</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="17caed2f-d6b0-401e-bbf3-ce929a241f50" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommandLigne" id="d5f891cd-d089-4eff-8c91-53699f7a274a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Get reference of command ligne</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/commande/details/b693e7ea-2b0f-4b9c-8e38-094de956130d';
//ns1:Response[1]/ns1:lignes[1]/ns1:e[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommandLigne</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="3. Get the created command parameters_Check params returned" id="aa102c66-343b-41ca-8920-b0b4c989034e"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/{refCommande}/parametre" methodName="findCommandeParameters" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Get the created command parameters_Check params returned" id="41bbf639-34d1-41c2-8f42-644dcea9edb6" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-finder-1.1.x/Commande/4bb19bef-1753-4842-ba5e-962cb1c48c92/parametre</con:originalUri><con:assertion type="Simple Contains" id="3b0cdf42-c1bf-4a43-bdfc-7d4e51c9ab26" name="Key Rio must be"><con:configuration><token>"referenceChoix":"mvno_conso","cle":"Rio","valeur":"42ERRRRRRCCC"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89f89a19-1587-4498-b013-e3a0d4db35d7" name="Key MSISDN must be"><con:configuration><token>"referenceChoix":"mvno_conso","cle":"MSISDN","valeur":"0700112233"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="bc33cd76-006f-4feb-b496-61671f416452" name="Referene Choice must be"><con:configuration><token>"referenceChoix":"mvno_conso"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8073d7a5-6dd7-41eb-8b5a-f741807f208e" name="Reference of command ligne detail must be"><con:configuration><token>"referenceCommandeLigneDetail":"${commandInfo#refCommandLigne}-1"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e5708a9e-a1db-4344-85ca-a291c8b040fe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5d0cb876-9131-4760-981e-1a6dd224bf43</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>92af6fd7-caf6-46b0-8669-20b2f13540e1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>96172c75-60d2-4336-95e7-c44021b93986</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d5f891cd-d089-4eff-8c91-53699f7a274a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="38ff1496-2ae1-4a63-9546-160e18fe835a" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="04. Get successfully_More than one params are found" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="d94aed45-f0cf-40e8-a1fa-45aea28f40b2"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>200009109</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value>LIC-00002203</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform to command with more than one param_Successfully" id="81bb6b19-fea7-4bda-b787-836e4979e389"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>b93b868a-13f5-479a-9046-5beb3a9f7314</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>200009109</con:value></con:property><con:property><con:name>customerKey3</con:name></con:property><con:property><con:name>handleKey3</con:name></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>refCommandLigneGlobal</con:name></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="1ca04d7e-d25a-4d79-9cc0-5ec7346085be"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform to command with more than one param_Successfully</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Get reference of command ligne" id="d04ff107-cc9b-46a2-b349-13ddeb75af48"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/details/{refCommande}" methodName="getCommandeDetailee" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Get reference of command ligne" id="3ce4c65a-c2b4-4b14-b750-0032082c171a" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/details/b693e7ea-2b0f-4b9c-8e38-094de956130d</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="17caed2f-d6b0-401e-bbf3-ce929a241f50" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommandLigne" id="7f836f07-d50a-4b96-bce7-af3774186b17"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Get reference of command ligne</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/commande/details/b693e7ea-2b0f-4b9c-8e38-094de956130d';
//ns1:Response[1]/ns1:lignes[1]/ns1:e[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommandLigne</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="3. Get the created command parameters_Two params are returned" id="20fddc33-45f2-4993-8e36-d95a88900b78"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/{refCommande}/parametre" methodName="findCommandeParameters" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Get the created command parameters_Two params are returned" id="41bbf639-34d1-41c2-8f42-644dcea9edb6" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-finder-1.1.x/Commande/4bb19bef-1753-4842-ba5e-962cb1c48c92/parametre</con:originalUri><con:assertion type="Simple Contains" name="Key Rio MVNO_CONSO must be" id="36ecf931-c1bb-45b2-95b1-a9ab0883b033"><con:configuration><token>"referenceChoix":"mvno_conso","cle":"Rio","valeur":"42ERRRRRRCCC"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Key MSISDN_MVNO CONSO must be" id="51314b34-528f-4bc8-9378-018c42abb335"><con:configuration><token>"referenceChoix":"mvno_conso","cle":"MSISDN","valeur":"0700112233"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Key Rio PACK-MVNO-POSTPAID-MOBILE must be" id="36ecf931-c1bb-45b2-95b1-a9ab0883b033"><con:configuration><token>"referenceChoix":"PACK-MVNO-POSTPAID-MOBILE","cle":"Rio","valeur":"42ERRRRRRCCC"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Key MSISDN_SIM_MVNO must be" id="51314b34-528f-4bc8-9378-018c42abb335"><con:configuration><token>"referenceChoix":"PACK-MVNO-POSTPAID-MOBILE","cle":"MSISDN","valeur":"0700112233"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Referene Choice must be" id="58dbcd79-8b4c-4717-a6cc-ffafd1603ae2"><con:configuration><token>"referenceChoix":"mvno_conso"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Reference of command ligne detail 1 must be" id="b6c7af89-82fb-4d7f-bfd6-a9da5805e67b"><con:configuration><token>"referenceCommandeLigneDetail":"${commandInfo#refCommandLigne}-1"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Reference of command ligne detail 2 must be" id="b6c7af89-82fb-4d7f-bfd6-a9da5805e67b"><con:configuration><token>"referenceCommandeLigneDetail":"${commandInfo#refCommandLigne}-2"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e4c88b35-d413-4e70-b2c3-9d4dc5827aee</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d94aed45-f0cf-40e8-a1fa-45aea28f40b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1ca04d7e-d25a-4d79-9cc0-5ec7346085be</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d04ff107-cc9b-46a2-b349-13ddeb75af48</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7f836f07-d50a-4b96-bce7-af3774186b17</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="0f563655-a003-4a4f-a824-c1cbe2186ced" name="forceEligible_ReductionOfCommand"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="baae7fb4-4fb2-4724-882c-10cdc13bfac6" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.01. Force failed_'eligible' null" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="calltestcase" name="1.TransformCommandWithManyReductions" id="cac94b41-5f62-40c6-931c-a4975d5c270b"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>48fd983f-b5cc-421c-a9e6-1651da8c1851</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>003001723</con:value></con:property><con:property><con:name>redDraft</con:name><con:value>0112345</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value>0212345</con:value></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redFraiseDraftLigne</con:name><con:value>0312345</con:value></con:property><con:property><con:name>redFraiseDraftLigneDetail</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value>0412345</con:value></con:property><con:property><con:name>redBasePromo1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redBasePromo2</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refDraftGlobal</con:name></con:property><con:property><con:name>customerKey1</con:name></con:property><con:property><con:name>handleKey1</con:name></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>redDraft</con:entry><con:entry>redDraftLigne</con:entry><con:entry>redDraftLigneDetail</con:entry><con:entry>redFraiseDraftLigne</con:entry><con:entry>redFraiseDraftLigneDetail</con:entry><con:entry>redTarifDraftLigne</con:entry><con:entry>redBasePromo1</con:entry><con:entry>redBasePromo2</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="2. Let 'eligible' not in values (true,false,null)_Check exception" id="59fb2f2f-384b-41cd-8b2b-bf83cb63f1e3"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/reduction/{codeCatalogueReduction}" methodName="forceEligible" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Let 'eligible' not in values (true,false,null)_Check exception" id="6a191a80-0c15-4b05-8092-2ce72cd9ffe6" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{ 
     "eligible":null
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//reduction/</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="9029791e-782d-4580-9ab0-a4cba0592d08" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="1183aafe-3c73-4f0f-b0e0-5c0d8582740b" name="errorCode must be"><con:configuration><token>"errorCode":"2.1.28"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="624d7467-9d84-4c70-b1b4-2184cfbc8a0c" name="errorMessage must be"><con:configuration><token>"errorMessage":"L'eligible doit etre true ou false"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refCommande" value="${1.TransformCommandWithManyReductions#refCommandGlobal}"/>
  <con:entry key="codeCatalogueReduction" value="${1.TransformCommandWithManyReductions#redDraft}"/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>codeCatalogueReduction</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>755fd25f-6a05-4403-a472-dc2d966fa7ce</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="f8dda21e-5fca-493c-97e1-518987a8cf5c" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.02. Force failed_'eligible' empty" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="calltestcase" name="1.TransformCommandWithManyReductions" id="419503ab-2472-418a-bb7a-11924e74cae6"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>48fd983f-b5cc-421c-a9e6-1651da8c1851</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>802001702</con:value></con:property><con:property><con:name>redDraft</con:name><con:value>0112345</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value>0212345</con:value></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value>0312345</con:value></con:property><con:property><con:name>redFraiseDraftLigne</con:name><con:value>0412345</con:value></con:property><con:property><con:name>redFraiseDraftLigneDetail</con:name><con:value>0512345</con:value></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value>0612345</con:value></con:property><con:property><con:name>redBasePromo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>redBasePromo2</con:name><con:value>REM_MVNO_SIM</con:value></con:property><con:property><con:name>refDraftGlobal</con:name></con:property><con:property><con:name>customerKey1</con:name></con:property><con:property><con:name>handleKey1</con:name></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>redDraft</con:entry><con:entry>redDraftLigne</con:entry><con:entry>redDraftLigneDetail</con:entry><con:entry>redFraiseDraftLigne</con:entry><con:entry>redFraiseDraftLigneDetail</con:entry><con:entry>redTarifDraftLigne</con:entry><con:entry>redBasePromo1</con:entry><con:entry>redBasePromo2</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="2. Let 'eligible' empty_Check exception" id="25d0a06c-1dfb-44ec-82b2-1c479108c72d"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/reduction/{codeCatalogueReduction}" methodName="forceEligible" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Let 'eligible' empty_Check exception" id="6a191a80-0c15-4b05-8092-2ce72cd9ffe6" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{ 
     "eligible":""
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//reduction/</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="9029791e-782d-4580-9ab0-a4cba0592d08" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="1183aafe-3c73-4f0f-b0e0-5c0d8582740b" name="errorCode must be"><con:configuration><token>"errorCode":"2.1.28"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="624d7467-9d84-4c70-b1b4-2184cfbc8a0c" name="errorMessage must be"><con:configuration><token>"errorMessage":"L'eligible doit etre true ou false"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refCommande" value="${1.TransformCommandWithManyReductions#refCommandGlobal}"/>
  <con:entry key="codeCatalogueReduction" value="${1.TransformCommandWithManyReductions#redDraft}"/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>codeCatalogueReduction</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>755fd25f-6a05-4403-a472-dc2d966fa7ce</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="75f82b56-4b98-4fd7-90ad-7fbd1b4ff413" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.03. Force failed_Command is not found" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="calltestcase" name="1.TransformCommandWithManyReductions" id="fc15ab28-2bce-4c2f-9c7c-9546c6090c28"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>48fd983f-b5cc-421c-a9e6-1651da8c1851</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>006008218</con:value></con:property><con:property><con:name>redDraft</con:name><con:value>0112345</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value>0212345</con:value></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value>0312345</con:value></con:property><con:property><con:name>redFraiseDraftLigne</con:name><con:value>0412345</con:value></con:property><con:property><con:name>redFraiseDraftLigneDetail</con:name><con:value>0512345</con:value></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value>0612345</con:value></con:property><con:property><con:name>redBasePromo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>redBasePromo2</con:name><con:value>REM_MVNO_SIM</con:value></con:property><con:property><con:name>refDraftGlobal</con:name></con:property><con:property><con:name>customerKey1</con:name></con:property><con:property><con:name>handleKey1</con:name></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>redDraft</con:entry><con:entry>redDraftLigne</con:entry><con:entry>redDraftLigneDetail</con:entry><con:entry>redFraiseDraftLigne</con:entry><con:entry>redFraiseDraftLigneDetail</con:entry><con:entry>redTarifDraftLigne</con:entry><con:entry>redBasePromo1</con:entry><con:entry>redBasePromo2</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="2. Let refCommand not existed_Force failed_Check exception" id="125f15a1-b0fc-4b38-a188-d5c44fa505b3"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/reduction/{codeCatalogueReduction}" methodName="forceEligible" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Let refCommand not existed_Force failed_Check exception" id="6a191a80-0c15-4b05-8092-2ce72cd9ffe6" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{ 
     "eligible":false
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//reduction/</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="9029791e-782d-4580-9ab0-a4cba0592d08" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="1183aafe-3c73-4f0f-b0e0-5c0d8582740b" name="errorCode must be"><con:configuration><token>"errorCode":"0.1.2"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="624d7467-9d84-4c70-b1b4-2184cfbc8a0c" name="errorMessage must be"><con:configuration><token>"errorMessage":"llement commande de rference abc nexiste pas."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refCommande" value="abc"/>
  <con:entry key="codeCatalogueReduction" value="${1.TransformCommandWithManyReductions#redDraft}"/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>codeCatalogueReduction</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>755fd25f-6a05-4403-a472-dc2d966fa7ce</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="3ca8d257-f215-4c58-bde5-fdcd92b09637" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.04 Force failed_code reduction not found" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="calltestcase" name="1.TransformCommandWithManyReductions" id="00359bda-1e6c-4935-bac5-f3e4e64446a6"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>48fd983f-b5cc-421c-a9e6-1651da8c1851</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>215000089</con:value></con:property><con:property><con:name>redDraft</con:name><con:value>0112345</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value>0212345</con:value></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value>0312345</con:value></con:property><con:property><con:name>redFraiseDraftLigne</con:name><con:value>0412345</con:value></con:property><con:property><con:name>redFraiseDraftLigneDetail</con:name><con:value>0512345</con:value></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value>0612345</con:value></con:property><con:property><con:name>redBasePromo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>redBasePromo2</con:name><con:value>REM_MVNO_SIM</con:value></con:property><con:property><con:name>refDraftGlobal</con:name></con:property><con:property><con:name>customerKey1</con:name></con:property><con:property><con:name>handleKey1</con:name></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>redDraft</con:entry><con:entry>redDraftLigne</con:entry><con:entry>redDraftLigneDetail</con:entry><con:entry>redFraiseDraftLigne</con:entry><con:entry>redFraiseDraftLigneDetail</con:entry><con:entry>redTarifDraftLigne</con:entry><con:entry>redBasePromo1</con:entry><con:entry>redBasePromo2</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="2. Let code reduction not existed_Force failed_Check exception" id="0037f35e-65f6-4bf1-a3fb-35ab6ab0872d"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/reduction/{codeCatalogueReduction}" methodName="forceEligible" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Let code reduction not existed_Force failed_Check exception" id="6a191a80-0c15-4b05-8092-2ce72cd9ffe6" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{ 
     "eligible":true
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//reduction/</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="9029791e-782d-4580-9ab0-a4cba0592d08" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="1183aafe-3c73-4f0f-b0e0-5c0d8582740b" name="errorCode must be"><con:configuration><token>"errorCode":"2.1.29"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="624d7467-9d84-4c70-b1b4-2184cfbc8a0c" name="errorMessage must be"><con:configuration><token>"errorMessage":"La rduction du code ABC n'existe pas."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refCommande" value="${1.TransformCommandWithManyReductions#refCommandGlobal}"/>
  <con:entry key="codeCatalogueReduction" value="ABC"/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>codeCatalogueReduction</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>755fd25f-6a05-4403-a472-dc2d966fa7ce</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="defde375-1ec2-4795-867c-149a1aaf30ca" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02. Force successfully_Force to true" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="calltestcase" name="1.TransformCommandWithManyReductions" id="755fd25f-6a05-4403-a472-dc2d966fa7ce"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>48fd983f-b5cc-421c-a9e6-1651da8c1851</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>037510040</con:value></con:property><con:property><con:name>redDraft</con:name><con:value>0112345</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value>0212345</con:value></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redFraiseDraftLigne</con:name><con:value>0312345</con:value></con:property><con:property><con:name>redFraiseDraftLigneDetail</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value>AVFWPROMO</con:value></con:property><con:property><con:name>redBasePromo1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redBasePromo2</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refDraftGlobal</con:name></con:property><con:property><con:name>customerKey1</con:name></con:property><con:property><con:name>handleKey1</con:name></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>redDraft</con:entry><con:entry>redDraftLigne</con:entry><con:entry>redDraftLigneDetail</con:entry><con:entry>redFraiseDraftLigne</con:entry><con:entry>redFraiseDraftLigneDetail</con:entry><con:entry>redTarifDraftLigne</con:entry><con:entry>redBasePromo1</con:entry><con:entry>redBasePromo2</con:entry><con:entry>refDraftGlobal</con:entry><con:entry>customerKey1</con:entry><con:entry>handleKey1</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="jdbc" name="1.1 Select reduction to check_Eligible is FALSE" id="b1b0debf-12b4-4eac-9708-130f2c4c280f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM reduction where referenceDraft = "${1.TransformCommandWithManyReductions#refCommandGlobal}" and codeCatalogueReduction = '${1.TransformCommandWithManyReductions#redBasePromo1}';</con:query><con:assertion type="Simple Contains" id="9d5af93a-1166-4ad4-bb26-d7b16a923b43" name="Reference draft must be refCommand"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${1.TransformCommandWithManyReductions#refCommandGlobal}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8cd3d2c-ad0d-4d0e-a5a8-43d419ee9f14" name="eligible is FALSE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. Force eligible of reduction draft to false" id="30895102-e441-4ef7-ba03-1bf5a4198ede"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/reduction/{codeCatalogueReduction}" methodName="forceEligible" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Force eligible of reduction draft to false" id="6a191a80-0c15-4b05-8092-2ce72cd9ffe6" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{ 
     "eligible":true
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//reduction/</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="9029791e-782d-4580-9ab0-a4cba0592d08" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="1183aafe-3c73-4f0f-b0e0-5c0d8582740b" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refCommande" value="${1.TransformCommandWithManyReductions#refCommandGlobal}"/>
  <con:entry key="codeCatalogueReduction" value="${1.TransformCommandWithManyReductions#redBasePromo1}"/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>codeCatalogueReduction</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Select reduction to check_Eligible must be TRUE" id="e979c921-24e5-4ed9-ad2e-81a591b36e2f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM reduction where referenceDraft = "${1.TransformCommandWithManyReductions#refCommandGlobal}" and codeCatalogueReduction = '${1.TransformCommandWithManyReductions#redBasePromo1}';</con:query><con:assertion type="Simple Contains" id="9d5af93a-1166-4ad4-bb26-d7b16a923b43" name="Reference draft must be refCommand"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${1.TransformCommandWithManyReductions#refCommandGlobal}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8cd3d2c-ad0d-4d0e-a5a8-43d419ee9f14" name="eligible must be TRUE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>755fd25f-6a05-4403-a472-dc2d966fa7ce</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b1b0debf-12b4-4eac-9708-130f2c4c280f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="02bc0b6b-9b54-4c8e-b515-287439a79e83" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03. Force successfully_Force to false" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="bfa693c1-7c0c-4213-aa0b-237b9026250a"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>402001504</con:value></con:property><con:property><con:name>codeCatalogReduction</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>codeCatalogueReduction</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="80389a49-faa2-4ae4-b56e-13966e45abd1"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("codeCatalogueReduction",null)
testRunner.testCase.getTestStepByName("1.TransformCommandWithManyReductions").setPropertyValue("refCommandGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1.TransformCommandWithManyReductions" id="fcd424d7-aa36-42c0-b7f0-7cd11388115b"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5758cc92-e1dd-406c-8f70-00188ee392f8</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>402001504</con:value></con:property><con:property><con:name>redDraft</con:name><con:value>0112345</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value>0212345</con:value></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value>0312345</con:value></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value>REM_MVNO_SIM_ELITE</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>refDraftGlobal</con:name></con:property><con:property><con:name>redFraiseDraftLigne</con:name></con:property><con:property><con:name>redFraiseDraftLigneDetail</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>redDraft</con:entry><con:entry>redDraftLigne</con:entry><con:entry>redDraftLigneDetail</con:entry><con:entry>redFraiseDraftLigne</con:entry><con:entry>redFraiseDraftLigneDetail</con:entry><con:entry>redTarifDraftLigne</con:entry><con:entry>redBasePromo1</con:entry><con:entry>redBasePromo2</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>refDraftGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to commandInfo" id="f4f9b142-90b6-4223-90d4-8236848b9139"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1.TransformCommandWithManyReductions</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="1.1 Select reduction to check_Eligible is TRUE" id="0dfef2a7-d4aa-48e2-9f81-595a45dfb81b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM reduction where referenceDraft = "${1.TransformCommandWithManyReductions#refCommandGlobal}";</con:query><con:assertion type="Simple Contains" id="9d5af93a-1166-4ad4-bb26-d7b16a923b43" name="Reference draft must be refCommand"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${1.TransformCommandWithManyReductions#refCommandGlobal}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8cd3d2c-ad0d-4d0e-a5a8-43d419ee9f14" name="eligible is TRUE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. Force eligible of reduction to FALSE" id="ab22e41b-c6dd-4507-bf2f-92c969b455a5"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/reduction/{codeCatalogueReduction}" methodName="forceEligible" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Force eligible of reduction to FALSE" id="6a191a80-0c15-4b05-8092-2ce72cd9ffe6" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{ 
     "eligible":false
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//reduction/</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="9029791e-782d-4580-9ab0-a4cba0592d08" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="1183aafe-3c73-4f0f-b0e0-5c0d8582740b" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="refCommande" value="${1.TransformCommandWithManyReductions#refCommandGlobal}"/>
  <con:entry key="codeCatalogueReduction" value="${1.TransformCommandWithManyReductions#redTarifDraftLigne}"/>
</con:parameters><con:parameterOrder><con:entry>refCommande</con:entry><con:entry>codeCatalogueReduction</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Select reduction to check_Eligible must be FALSE" id="0d6ab0db-6f88-4910-8e1f-a64203f9c16d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM reduction where referenceDraft = "${1.TransformCommandWithManyReductions#refCommandGlobal}" and codeCatalogueReduction = '${1.TransformCommandWithManyReductions#redTarifDraftLigne}';</con:query><con:assertion type="Simple Contains" id="9d5af93a-1166-4ad4-bb26-d7b16a923b43" name="code reduction must be ${1.TransformCommandWithManyReductions#redTarifDraftLigne}"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${1.TransformCommandWithManyReductions#refCommandGlobal}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8cd3d2c-ad0d-4d0e-a5a8-43d419ee9f14" name="eligible must be FALSE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>0&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>755fd25f-6a05-4403-a472-dc2d966fa7ce</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>149fb8d7-d5a8-46ee-8251-d391d42a40c3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1065d506-f5be-45bd-92b9-057a49b7c538</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ed4d22ad-74a2-43e5-862a-07d40edf0c8e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0dfef2a7-d4aa-48e2-9f81-595a45dfb81b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="5fe65d43-1b05-4209-a895-3e84b416b9e3" name="getInfosBonCommande"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="18d26456-4600-46a1-89bd-6bc97d5b062b" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="00.01 Get validated command_All reductions with eligible FALSE_Return Reduction empty" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="e381b98b-c9a9-427c-93fb-83436e1c3b75"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommand</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value>0312345</con:value></con:property><con:property><con:name>redDraft</con:name><con:value>0112345</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value>0212345</con:value></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="7f889065-6ebb-45f3-863e-95f31da63133"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("1. Validate a command containing all supported manual reductions_mvnoConso").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Validate a command containing all supported manual reductions_mvnoConso" id="73688b98-1ea5-47e5-9f34-c6f96662129f"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>38a0392d-6346-49d1-843e-34b1094b9ec0</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>NbPassed</con:name></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property></con:properties><con:returnProperties><con:entry>RUM3</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="9ca62573-e8b1-435b-a3a2-fa292de48e74"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Validate a command containing all supported manual reductions_mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:sourcePath/><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Update all ELIGBILE to FALSE" id="a7af7bf6-6c6f-4ecd-80f9-5cc058238742"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = false where referenceDraft = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple Contains" id="0ccc6d1c-21a7-440f-af74-5e08305ce544" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Make sure Eligible FALSE" id="fd8b1b66-3933-43bf-8a96-456bb3ce2e76"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple NotContains" id="153bf2a0-a71e-4bb8-8d9d-6e8a84ebf3ef" name="Not Contains Eligible TRUE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. getInfosBonCommande to check reduction info" id="b64ae55d-1c8e-4633-a48d-fcf1fcd91af5"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/getInfosBonCommande" methodName="getInfosBonCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. getInfosBonCommande to check reduction info" id="da0a0e74-02cb-495e-8eba-4888c52652d7" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/702001504/getInfosBonCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="97174708-d077-4fa2-a723-e880f44f6857" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="012d3777-4012-44d6-a06b-50915e53006b" name="Not Contains any reduction"><con:configuration><token>"reductions":[{</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get promotion to check_MVNO" id="1a579cc2-094e-4ecd-9b1d-a3385eae5795" disabled="true"><con:settings/><con:config service="/default/promo" resourcePath="/discount.qualifier.ws-1.0.x/promo/offer/{offerCode}/price/{priceCode}" methodName="getPromoByOfferCodeAndPrice" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get promotion to check_MVNO" id="25bf5c2e-533d-452b-85d5-5747b5a22479" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/discount.qualifier.ws-1.0.x/promo/offer/MVNO/price/1</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="71ad5e29-4db1-40be-8ec7-e6fefeed5e87" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="priceCode" value="1"/>
  <con:entry key="offerCode" value="MVNO"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9656f05-50b4-4b2d-956d-55da470d6084</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1849f0f6-6afd-49d6-8aeb-a030543973ac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f483b2a3-b9d2-4d36-b7b3-f6a8cfda47f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d8ac3efb-f813-4abb-b693-6cc410532311</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c2e366d-7905-447b-9f87-7e1270aae1be</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c509f4fc-6e5c-470e-96ec-9ebe79c55483</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>749c22a1-d3cb-4400-ab0a-792db7f86cbe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f772d6e4-d014-43be-a149-0d8c7bc7ca64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8c2b08f0-1f1d-48af-a27d-71b0fe64bff9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b830b115-99fa-4d01-9f96-76c767233059</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ddd93480-e0ae-4b75-93c5-cfc4c84a5a89</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>16c690c9-b918-4f82-9236-4290d37cd14f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a7af7bf6-6c6f-4ecd-80f9-5cc058238742</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fd8b1b66-3933-43bf-8a96-456bb3ce2e76</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="4c1d20b2-d8eb-4aac-bcba-d2721c05ab68" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="00.02. Get validated command_All reductions with eligible TRUE_Return all Reductions" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="0c30a0ea-f3c3-4016-9c2b-386718157073"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommand</con:name><con:value>615000008</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value>0312345</con:value></con:property><con:property><con:name>redDraft</con:name><con:value>0112345</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value>0212345</con:value></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="43ed76da-6d6c-4f80-a868-1487bbde4356"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("1. Validate a command containing all supported manual reductions_mvnoPack").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Validate a command containing all supported manual reductions_mvnoPack" id="d512de62-c254-467b-916f-0630bfa00b35"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>c0b4f3ee-d9f7-45c2-b413-bd33f626a8d0</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>615000008</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>NbPassed</con:name></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property></con:properties><con:returnProperties><con:entry>RUM3</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="e59f211e-4b5e-485f-9477-421c6a1e18ff"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Validate a command containing all supported manual reductions_mvnoPack</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:sourcePath/><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Update all ELIGBILE to TRUE" id="1b62a492-3809-4e1e-8725-1f89259850eb"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = true where referenceDraft = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple Contains" id="0ccc6d1c-21a7-440f-af74-5e08305ce544" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Make sure Eligible TRUE" id="6c9d1226-4702-45f6-abc3-3f73900c9204"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple NotContains" id="153bf2a0-a71e-4bb8-8d9d-6e8a84ebf3ef" name="Not Contains Eligible TRUE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>0&lt;/REDUCTION.ELIGIBLE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. getInfosBonCommande to check reduction info" id="02e61b01-e3db-4e76-94b6-44446814c3cc"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/getInfosBonCommande" methodName="getInfosBonCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. getInfosBonCommande to check reduction info" id="da0a0e74-02cb-495e-8eba-4888c52652d7" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/702001504/getInfosBonCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="97174708-d077-4fa2-a723-e880f44f6857" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="d571cf03-936d-4c25-844b-651900917638" name="Not Contains reduction empty"><con:configuration><token>"reductions":[]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get promotion to check_MVNO" id="60d0ad95-ab8b-4b1c-be50-8246f7d381f4" disabled="true"><con:settings/><con:config service="/default/promo" resourcePath="/discount.qualifier.ws-1.0.x/promo/offer/{offerCode}/price/{priceCode}" methodName="getPromoByOfferCodeAndPrice" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get promotion to check_MVNO" id="25bf5c2e-533d-452b-85d5-5747b5a22479" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/discount.qualifier.ws-1.0.x/promo/offer/MVNO/price/1</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="71ad5e29-4db1-40be-8ec7-e6fefeed5e87" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="priceCode" value="1"/>
  <con:entry key="offerCode" value="MVNO"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">615000008</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9656f05-50b4-4b2d-956d-55da470d6084</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1849f0f6-6afd-49d6-8aeb-a030543973ac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f483b2a3-b9d2-4d36-b7b3-f6a8cfda47f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d8ac3efb-f813-4abb-b693-6cc410532311</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c2e366d-7905-447b-9f87-7e1270aae1be</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c509f4fc-6e5c-470e-96ec-9ebe79c55483</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>749c22a1-d3cb-4400-ab0a-792db7f86cbe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f772d6e4-d014-43be-a149-0d8c7bc7ca64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8c2b08f0-1f1d-48af-a27d-71b0fe64bff9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b830b115-99fa-4d01-9f96-76c767233059</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ddd93480-e0ae-4b75-93c5-cfc4c84a5a89</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>16c690c9-b918-4f82-9236-4290d37cd14f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a7af7bf6-6c6f-4ecd-80f9-5cc058238742</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fd8b1b66-3933-43bf-8a96-456bb3ce2e76</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="126639c0-aed1-4abf-bed4-1efb5c576d78" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01. Get validated command_One reduction TRUE for draft and others are FALSE_Return one reduction for ligne" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="7d19f601-1a94-4f66-b7a3-7246f4aa1de7"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommand</con:name><con:value>003001106</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redDraft</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="1420bf6a-7e58-47a4-9f21-60a219e5db9d"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("1. Validate a command containing one manual reduction for draft_mvnoConso").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Validate a command containing one manual reduction for draft_mvnoConso" id="b747d981-d76e-4b3f-8582-280ee4aaeae4"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>8927c214-38d9-46a1-9750-49e69cf3fb15</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>003001106</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>NbPassed</con:name></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>redDraft</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true"/></con:property></con:properties><con:returnProperties><con:entry>RUM3</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>refCommandGlobal</con:entry><con:entry>redDraft</con:entry><con:entry>Promo1</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="e382c7e3-6186-4613-98d5-477057afad9c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Validate a command containing one manual reduction for draft_mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:sourcePath/><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. getInfosBonCommande to check reduction info" id="184124cb-4559-4d1a-b1bb-c13f6b6cdc2f"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/getInfosBonCommande" methodName="getInfosBonCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. getInfosBonCommande to check reduction info" id="da0a0e74-02cb-495e-8eba-4888c52652d7" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/702001504/getInfosBonCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="97174708-d077-4fa2-a723-e880f44f6857" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="21c738f6-1b23-4529-99fa-d86e57746a32" name="Reduction is NOT empty"><con:configuration><token>"reductions":[{</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="dcaabd3e-1873-4fc2-9d11-ecf46e0272db" name="JsonPath Count - Reduction of ligne is only one"><con:configuration><path>$.lignes[0].reductions</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get promotion to check_MVNO" id="312754ff-7dab-4269-af91-2428d09b788f" disabled="true"><con:settings/><con:config service="/default/promo" resourcePath="/discount.qualifier.ws-1.0.x/promo/offer/{offerCode}/price/{priceCode}" methodName="getPromoByOfferCodeAndPrice" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get promotion to check_MVNO" id="25bf5c2e-533d-452b-85d5-5747b5a22479" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/discount.qualifier.ws-1.0.x/promo/offer/MVNO/price/1</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="71ad5e29-4db1-40be-8ec7-e6fefeed5e87" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="priceCode" value="1"/>
  <con:entry key="offerCode" value="MVNO"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">003001106</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9656f05-50b4-4b2d-956d-55da470d6084</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1849f0f6-6afd-49d6-8aeb-a030543973ac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f483b2a3-b9d2-4d36-b7b3-f6a8cfda47f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d8ac3efb-f813-4abb-b693-6cc410532311</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c2e366d-7905-447b-9f87-7e1270aae1be</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c509f4fc-6e5c-470e-96ec-9ebe79c55483</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>749c22a1-d3cb-4400-ab0a-792db7f86cbe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f772d6e4-d014-43be-a149-0d8c7bc7ca64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8c2b08f0-1f1d-48af-a27d-71b0fe64bff9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b830b115-99fa-4d01-9f96-76c767233059</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ddd93480-e0ae-4b75-93c5-cfc4c84a5a89</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>16c690c9-b918-4f82-9236-4290d37cd14f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="409ca35d-63e5-4ca2-80df-3665495d825b" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02. Get validated command_One reduction TRUE for draftLigne and others are FALSE_Return only one reduction for ligne" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="f8261e09-bfc6-4fe4-964d-1bf32f079024"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommand</con:name><con:value>609110010</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redDraft</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="3c5f52df-14aa-4869-aa00-bc8739bfee0e"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("1. Validate a command containing one manual reduction for draftLigne_mvnoConso").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Validate a command containing one manual reduction for draftLigne_mvnoConso" id="05f706eb-ad18-44a1-a986-33d02e50f403"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>2c9a1116-65c8-4488-b5ca-d4e8d7b64915</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>609110010</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>NbPassed</con:name></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>redDraftLigne</con:name></con:property></con:properties><con:returnProperties><con:entry>RUM3</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="4438f304-5275-4428-9fda-fdfbab8b007c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Validate a command containing one manual reduction for draftLigne_mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:sourcePath/><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. getInfosBonCommande to check reduction info" id="df29396a-972b-43d9-ab72-cea471d1ff2f"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/getInfosBonCommande" methodName="getInfosBonCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. getInfosBonCommande to check reduction info" id="da0a0e74-02cb-495e-8eba-4888c52652d7" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/702001504/getInfosBonCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="97174708-d077-4fa2-a723-e880f44f6857" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="21c738f6-1b23-4529-99fa-d86e57746a32" name="Reduction is NOT empty"><con:configuration><token>"reductions":[{</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="dcaabd3e-1873-4fc2-9d11-ecf46e0272db" name="JsonPath Count - Reduction of ligne is only one"><con:configuration><path>$.lignes[0].reductions</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get promotion to check_MVNO" id="9cef6b5b-2db3-4350-9747-ecdd87791cdd" disabled="true"><con:settings/><con:config service="/default/promo" resourcePath="/discount.qualifier.ws-1.0.x/promo/offer/{offerCode}/price/{priceCode}" methodName="getPromoByOfferCodeAndPrice" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get promotion to check_MVNO" id="25bf5c2e-533d-452b-85d5-5747b5a22479" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/discount.qualifier.ws-1.0.x/promo/offer/MVNO/price/1</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="71ad5e29-4db1-40be-8ec7-e6fefeed5e87" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="priceCode" value="1"/>
  <con:entry key="offerCode" value="MVNO"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">609110010</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9656f05-50b4-4b2d-956d-55da470d6084</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1849f0f6-6afd-49d6-8aeb-a030543973ac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f483b2a3-b9d2-4d36-b7b3-f6a8cfda47f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d8ac3efb-f813-4abb-b693-6cc410532311</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c2e366d-7905-447b-9f87-7e1270aae1be</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c509f4fc-6e5c-470e-96ec-9ebe79c55483</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>749c22a1-d3cb-4400-ab0a-792db7f86cbe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f772d6e4-d014-43be-a149-0d8c7bc7ca64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8c2b08f0-1f1d-48af-a27d-71b0fe64bff9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b830b115-99fa-4d01-9f96-76c767233059</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ddd93480-e0ae-4b75-93c5-cfc4c84a5a89</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>16c690c9-b918-4f82-9236-4290d37cd14f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="132ba2b6-3ee1-4491-aff6-06d1c0727f83" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03. Get validated command_One reduction TRUE for draftLigneDetail and others are FALSE_Return only one reduction for ligneDetail" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="137711b9-47eb-4415-ba4a-163134858405"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommand</con:name><con:value>006005611</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redDraft</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="ad19f6b9-93a1-437f-990b-3e6a98f63785"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey4",'192112')
testRunner.testCase.setPropertyValue( "handleKey4",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("1. Validate a command containing one manual reduction for draftLigneDetail_mvnoPack").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Validate a command containing one manual reduction for draftLigneDetail_mvnoPack" id="e464a386-f3f2-4981-9ebd-b68b83135f95"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>a23e0d43-cb02-4cf0-b068-9514d5b98b6d</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>006005611</con:value></con:property><con:property><con:name>NbPassed</con:name></con:property><con:property><con:name>RUM4</con:name><con:value>RRE4F5CB</con:value></con:property></con:properties><con:returnProperties><con:entry>RUM4</con:entry><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="e4d204b6-7078-4556-b52e-ba3daf67e9c9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Validate a command containing one manual reduction for draftLigneDetail_mvnoPack</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:sourcePath/><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. getInfosBonCommande to check reduction info" id="8301b49b-58b2-43f2-9461-aa472fc44c6f"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/getInfosBonCommande" methodName="getInfosBonCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. getInfosBonCommande to check reduction info" id="da0a0e74-02cb-495e-8eba-4888c52652d7" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/702001504/getInfosBonCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="97174708-d077-4fa2-a723-e880f44f6857" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="21c738f6-1b23-4529-99fa-d86e57746a32" name="Reduction is NOT empty"><con:configuration><token>"reductions":[{</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="dcaabd3e-1873-4fc2-9d11-ecf46e0272db" name="JsonPath Count - Reduction of ligneDetail is only one"><con:configuration><path>$.lignes[0].details[0].reductions</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get promotion to check_MVNO" id="b07fbc2f-4a2b-48cd-b8f2-e12cd8c12378" disabled="true"><con:settings/><con:config service="/default/promo" resourcePath="/discount.qualifier.ws-1.0.x/promo/offer/{offerCode}/price/{priceCode}" methodName="getPromoByOfferCodeAndPrice" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get promotion to check_MVNO" id="25bf5c2e-533d-452b-85d5-5747b5a22479" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/discount.qualifier.ws-1.0.x/promo/offer/MVNO/price/1</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="71ad5e29-4db1-40be-8ec7-e6fefeed5e87" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="priceCode" value="1"/>
  <con:entry key="offerCode" value="MVNO"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">006005611</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9656f05-50b4-4b2d-956d-55da470d6084</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1849f0f6-6afd-49d6-8aeb-a030543973ac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f483b2a3-b9d2-4d36-b7b3-f6a8cfda47f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d8ac3efb-f813-4abb-b693-6cc410532311</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c2e366d-7905-447b-9f87-7e1270aae1be</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c509f4fc-6e5c-470e-96ec-9ebe79c55483</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>749c22a1-d3cb-4400-ab0a-792db7f86cbe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f772d6e4-d014-43be-a149-0d8c7bc7ca64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8c2b08f0-1f1d-48af-a27d-71b0fe64bff9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b830b115-99fa-4d01-9f96-76c767233059</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ddd93480-e0ae-4b75-93c5-cfc4c84a5a89</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>16c690c9-b918-4f82-9236-4290d37cd14f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="c4df8c83-f48d-4e62-841f-033c4d439920" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="04. Get validated command_One reduction TRUE for tarifDraftLigne and others are FALSE_Return only one reduction for ligne" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="ea582516-9fc3-4f4a-ae4f-69fe864fa9d7"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommand</con:name><con:value>003001166</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redDraft</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="1803e33e-dd2c-43ff-96ed-f4660c21ba1e"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("1. Validate a command containing one manual reduction for tarifLigne_mvnoConso").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Validate a command containing one manual reduction for tarifLigne_mvnoConso" id="69825c12-e4b0-41c1-be4d-6cd452fccb1d"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>7ee7897c-7d67-406d-95c3-39cfd6f3b2d0</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>003001166</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>NbPassed</con:name></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>redDraftLigne</con:name></con:property></con:properties><con:returnProperties><con:entry>RUM3</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="616d076b-d31b-4b70-93dc-0ce90fce0ef7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Validate a command containing one manual reduction for tarifLigne_mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:sourcePath/><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. getInfosBonCommande to check reduction info" id="5a71f6dd-bab4-4073-b27d-dbd98c1c1983"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/getInfosBonCommande" methodName="getInfosBonCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. getInfosBonCommande to check reduction info" id="da0a0e74-02cb-495e-8eba-4888c52652d7" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/702001504/getInfosBonCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="97174708-d077-4fa2-a723-e880f44f6857" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="21c738f6-1b23-4529-99fa-d86e57746a32" name="Reduction is NOT empty"><con:configuration><token>"reductions":[{</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="dcaabd3e-1873-4fc2-9d11-ecf46e0272db" name="JsonPath Count - Reduction of ligne is only one"><con:configuration><path>$.lignes[0].reductions</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get promotion to check_MVNO" id="729506fb-1e05-4425-bd52-b28c04fe8b3b" disabled="true"><con:settings/><con:config service="/default/promo" resourcePath="/discount.qualifier.ws-1.0.x/promo/offer/{offerCode}/price/{priceCode}" methodName="getPromoByOfferCodeAndPrice" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get promotion to check_MVNO" id="25bf5c2e-533d-452b-85d5-5747b5a22479" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/discount.qualifier.ws-1.0.x/promo/offer/MVNO/price/1</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="71ad5e29-4db1-40be-8ec7-e6fefeed5e87" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="priceCode" value="1"/>
  <con:entry key="offerCode" value="MVNO"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">003001166</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9656f05-50b4-4b2d-956d-55da470d6084</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1849f0f6-6afd-49d6-8aeb-a030543973ac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f483b2a3-b9d2-4d36-b7b3-f6a8cfda47f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d8ac3efb-f813-4abb-b693-6cc410532311</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c2e366d-7905-447b-9f87-7e1270aae1be</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c509f4fc-6e5c-470e-96ec-9ebe79c55483</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>749c22a1-d3cb-4400-ab0a-792db7f86cbe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f772d6e4-d014-43be-a149-0d8c7bc7ca64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8c2b08f0-1f1d-48af-a27d-71b0fe64bff9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b830b115-99fa-4d01-9f96-76c767233059</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ddd93480-e0ae-4b75-93c5-cfc4c84a5a89</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>16c690c9-b918-4f82-9236-4290d37cd14f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="2803345c-262f-4491-b050-a4d46f14d084" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="05. Get validated command_All manual reductions TRUE_Return all manual reductions" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="23961cc1-0564-4585-95f6-f6abd286cbcc"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommand</con:name><con:value>006004519</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value>0312345</con:value></con:property><con:property><con:name>redDraft</con:name><con:value>0112345</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value>0212345</con:value></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="97bd4b8f-3968-4488-b6b0-b7be42eef120"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("1. Validate a command containing all supported manual reductions_mvnoConso").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Validate a command containing all supported manual reductions_mvnoConso" id="4ab74167-1484-4193-9925-0edaaed363b8"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>38a0392d-6346-49d1-843e-34b1094b9ec0</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>006004519</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>NbPassed</con:name></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property></con:properties><con:returnProperties><con:entry>RUM3</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="2eaa12c8-dd9c-43df-b2af-a043492b41db"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Validate a command containing all supported manual reductions_mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:sourcePath/><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. getInfosBonCommande to check reduction info" id="238db913-1f73-4dbf-b2bf-d3949844fb18"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/getInfosBonCommande" methodName="getInfosBonCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. getInfosBonCommande to check reduction info" id="da0a0e74-02cb-495e-8eba-4888c52652d7" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/702001504/getInfosBonCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="97174708-d077-4fa2-a723-e880f44f6857" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="f5fde18f-1cad-45e0-98b8-78cb361c3dcc" name="JsonPath Count - Reductions for Ligne is 3"><con:configuration><path>$.lignes[0].reductions</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="eb767e82-23ef-4222-94c7-9aee36bc0b34" name="JsonPath Count - Reduction for LigneDetail is only one"><con:configuration><path>$.lignes[0].details[0].reductions</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get promotion to check_MVNO" id="3f028d20-dfa6-474f-943c-0ef41e91c2ed" disabled="true"><con:settings/><con:config service="/default/promo" resourcePath="/discount.qualifier.ws-1.0.x/promo/offer/{offerCode}/price/{priceCode}" methodName="getPromoByOfferCodeAndPrice" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get promotion to check_MVNO" id="25bf5c2e-533d-452b-85d5-5747b5a22479" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/discount.qualifier.ws-1.0.x/promo/offer/MVNO/price/1</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="71ad5e29-4db1-40be-8ec7-e6fefeed5e87" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="priceCode" value="1"/>
  <con:entry key="offerCode" value="MVNO"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">006004519</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9656f05-50b4-4b2d-956d-55da470d6084</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1849f0f6-6afd-49d6-8aeb-a030543973ac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f483b2a3-b9d2-4d36-b7b3-f6a8cfda47f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d8ac3efb-f813-4abb-b693-6cc410532311</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c2e366d-7905-447b-9f87-7e1270aae1be</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c509f4fc-6e5c-470e-96ec-9ebe79c55483</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>749c22a1-d3cb-4400-ab0a-792db7f86cbe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f772d6e4-d014-43be-a149-0d8c7bc7ca64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8c2b08f0-1f1d-48af-a27d-71b0fe64bff9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b830b115-99fa-4d01-9f96-76c767233059</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ddd93480-e0ae-4b75-93c5-cfc4c84a5a89</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>16c690c9-b918-4f82-9236-4290d37cd14f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="2f8105ab-817a-4bd8-b32e-da7e9361c14c" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="06. Get new command_One reduction TRUE for draft and others are FALSE_Return Reduction empty" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="13e8da72-721a-466f-ba6f-1cc9821204f3"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommand</con:name><con:value>003001635</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>redDraft</con:name><con:value>0112345</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="ce51e079-a420-4164-bef4-683d4ca64393"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("redDraft",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("Promo1",null)
testRunner.testCase.getTestStepByName("1. Transform a draft to command manual reduction for draft_mvnoConso").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform a draft to command manual reduction for draft_mvnoConso" id="c0ea440f-67b8-436f-83f9-565570c01386"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>2f6dd230-4a67-48fc-b4d6-5baabba52c69</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>003001635</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>redDraft</con:name><con:value>0112345</con:value></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>redDraft</con:entry><con:entry>Promo1</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="8ace30c2-c277-4ee2-ad90-f72793071dfd"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform a draft to command manual reduction for draft_mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:sourcePath/><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>redDraft</con:name><con:sourceType>redDraft</con:sourceType><con:sourceStep>1. Transform a draft to command manual reduction for draft_mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>redDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo1</con:name><con:sourceType>Promo1</con:sourceType><con:sourceStep>1. Transform a draft to command manual reduction for draft_mvnoConso</con:sourceStep><con:targetType>Promo1</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. getInfosBonCommande to check reduction info" id="db9c6779-7c8b-4e53-82b2-0ac010720644"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/getInfosBonCommande" methodName="getInfosBonCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. getInfosBonCommande to check reduction info" id="da0a0e74-02cb-495e-8eba-4888c52652d7" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/702001504/getInfosBonCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="97174708-d077-4fa2-a723-e880f44f6857" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="21c738f6-1b23-4529-99fa-d86e57746a32" name="Reduction is empty"><con:configuration><token>"reductions":[]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get promotion to check_MVNO" id="feb594da-a5f9-4031-a8b9-ee935fd11e3b" disabled="true"><con:settings/><con:config service="/default/promo" resourcePath="/discount.qualifier.ws-1.0.x/promo/offer/{offerCode}/price/{priceCode}" methodName="getPromoByOfferCodeAndPrice" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get promotion to check_MVNO" id="25bf5c2e-533d-452b-85d5-5747b5a22479" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/discount.qualifier.ws-1.0.x/promo/offer/MVNO/price/1</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="71ad5e29-4db1-40be-8ec7-e6fefeed5e87" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="priceCode" value="1"/>
  <con:entry key="offerCode" value="MVNO"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">003001635</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9656f05-50b4-4b2d-956d-55da470d6084</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1849f0f6-6afd-49d6-8aeb-a030543973ac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f483b2a3-b9d2-4d36-b7b3-f6a8cfda47f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d8ac3efb-f813-4abb-b693-6cc410532311</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c2e366d-7905-447b-9f87-7e1270aae1be</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c509f4fc-6e5c-470e-96ec-9ebe79c55483</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>749c22a1-d3cb-4400-ab0a-792db7f86cbe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f772d6e4-d014-43be-a149-0d8c7bc7ca64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8c2b08f0-1f1d-48af-a27d-71b0fe64bff9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b830b115-99fa-4d01-9f96-76c767233059</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ddd93480-e0ae-4b75-93c5-cfc4c84a5a89</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>16c690c9-b918-4f82-9236-4290d37cd14f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="ff0381eb-8b6c-447e-b263-f671395b09aa" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="07. Get new command_One reduction TRUE for draftLigne and others are FALSE_Return Reduction empty" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="6e1e891a-dc45-4209-af12-bb8f47b5382b"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommand</con:name><con:value>006007516</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>redDraft</con:name><con:value>0112345</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value>0212345</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="78a43d9d-e3af-4b2a-a24c-d3aa69f54485"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigne",null)
testRunner.testCase.getTestStepByName("1. Transform a draft to command manual reduction for draftLigne_mvnoConso").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform a draft to command manual reduction for draftLigne_mvnoConso" id="ed87d6bb-d292-4525-976d-c8381de11a01"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>15500887-8965-4067-b149-599b21a73f58</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>006007516</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value>0212345</con:value></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>redDraftLigne</con:entry><con:entry>Promo1</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="81bc1302-6bd6-473e-a11f-1afc72da41ab"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform a draft to command manual reduction for draftLigne_mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:sourcePath/><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>redDraftLigne</con:name><con:sourceType>redDraftLigne</con:sourceType><con:sourceStep>1. Transform a draft to command manual reduction for draftLigne_mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>redDraftLigne</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo1</con:name><con:sourceType>Promo1</con:sourceType><con:sourceStep>1. Transform a draft to command manual reduction for draftLigne_mvnoConso</con:sourceStep><con:targetType>Promo1</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Make sure that there is an eligible TRUE" id="67b0a4ab-3457-47a0-a9d2-e39684730e98"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${commandInfo#refCommand}" order by codeCatalogueReduction ASC;</con:query><con:assertion type="XPath Match" id="8d46c5b8-3c49-44b4-8237-81eabebe3ba4" name="XPath Match - One Eligible TRUE"><con:configuration><path>//*:Row[1]/REDUCTION.ELIGIBLE</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>true</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. getInfosBonCommande to check reduction info" id="f95f10ff-a22d-499b-bd26-5eb3cd8a6740"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/getInfosBonCommande" methodName="getInfosBonCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. getInfosBonCommande to check reduction info" id="da0a0e74-02cb-495e-8eba-4888c52652d7" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/702001504/getInfosBonCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="97174708-d077-4fa2-a723-e880f44f6857" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="21c738f6-1b23-4529-99fa-d86e57746a32" name="Reduction is empty"><con:configuration><token>"reductions":[]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get promotion to check_MVNO" id="54c2d227-c518-4bb6-8f37-4dd485c0bb67" disabled="true"><con:settings/><con:config service="/default/promo" resourcePath="/discount.qualifier.ws-1.0.x/promo/offer/{offerCode}/price/{priceCode}" methodName="getPromoByOfferCodeAndPrice" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get promotion to check_MVNO" id="25bf5c2e-533d-452b-85d5-5747b5a22479" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/discount.qualifier.ws-1.0.x/promo/offer/MVNO/price/1</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="71ad5e29-4db1-40be-8ec7-e6fefeed5e87" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="priceCode" value="1"/>
  <con:entry key="offerCode" value="MVNO"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">006007516</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9656f05-50b4-4b2d-956d-55da470d6084</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1849f0f6-6afd-49d6-8aeb-a030543973ac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f483b2a3-b9d2-4d36-b7b3-f6a8cfda47f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d8ac3efb-f813-4abb-b693-6cc410532311</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c2e366d-7905-447b-9f87-7e1270aae1be</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c509f4fc-6e5c-470e-96ec-9ebe79c55483</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>749c22a1-d3cb-4400-ab0a-792db7f86cbe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f772d6e4-d014-43be-a149-0d8c7bc7ca64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8c2b08f0-1f1d-48af-a27d-71b0fe64bff9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b830b115-99fa-4d01-9f96-76c767233059</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ddd93480-e0ae-4b75-93c5-cfc4c84a5a89</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>16c690c9-b918-4f82-9236-4290d37cd14f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>67b0a4ab-3457-47a0-a9d2-e39684730e98</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="cdf874c5-18e2-43d7-8671-2c687640feac" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="08. Get new command_One reduction TRUE for draftLigneDetail and others are FALSE_Return Reduction empty" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="74b7e85a-448d-48cf-8954-d108f13d1f90"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommand</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="440068d0-ab50-4a3f-9670-b57f2eb0d2c0"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey4",'192112')
testRunner.testCase.setPropertyValue( "handleKey4",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("redDraftLigneDetail",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("Promo1",null)
testRunner.testCase.getTestStepByName("1. Transform a draft to command manual reduction for draftLigneDetail_mvnoPack").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform a draft to command manual reduction for draftLigneDetail_mvnoPack" id="e4d9ed06-e502-49f2-aacc-78c01ea8d45c"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>4023001f-206d-44e6-8a6f-08d119bb91ee</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>502001705</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value>0312345</con:value></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>customerKey4</con:entry><con:entry>handleKey4</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>redDraftLigneDetail</con:entry><con:entry>Promo1</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="ea9ea9b8-0157-484c-9083-d1d5dd69ad29"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform a draft to command manual reduction for draftLigneDetail_mvnoPack</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:sourcePath/><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>redDraftLigneDetail</con:name><con:sourceType>redDraftLigneDetail</con:sourceType><con:sourceStep>1. Transform a draft to command manual reduction for draftLigneDetail_mvnoPack</con:sourceStep><con:sourcePath/><con:targetType>redDraftLigneDetail</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo1</con:name><con:sourceType>Promo1</con:sourceType><con:sourceStep>1. Transform a draft to command manual reduction for draftLigneDetail_mvnoPack</con:sourceStep><con:targetType>Promo1</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. getInfosBonCommande to check reduction info" id="193428ec-8ae2-4761-afff-2fc52f3ed0c6"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/getInfosBonCommande" methodName="getInfosBonCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. getInfosBonCommande to check reduction info" id="da0a0e74-02cb-495e-8eba-4888c52652d7" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/702001504/getInfosBonCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="97174708-d077-4fa2-a723-e880f44f6857" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="21c738f6-1b23-4529-99fa-d86e57746a32" name="Reduction is empty"><con:configuration><token>"reductions":[]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get promotion to check_MVNO" id="1a68832e-28ec-4622-8f4e-d53cff8d3632" disabled="true"><con:settings/><con:config service="/default/promo" resourcePath="/discount.qualifier.ws-1.0.x/promo/offer/{offerCode}/price/{priceCode}" methodName="getPromoByOfferCodeAndPrice" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get promotion to check_MVNO" id="25bf5c2e-533d-452b-85d5-5747b5a22479" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/discount.qualifier.ws-1.0.x/promo/offer/MVNO/price/1</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="71ad5e29-4db1-40be-8ec7-e6fefeed5e87" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="priceCode" value="1"/>
  <con:entry key="offerCode" value="MVNO"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9656f05-50b4-4b2d-956d-55da470d6084</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1849f0f6-6afd-49d6-8aeb-a030543973ac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f483b2a3-b9d2-4d36-b7b3-f6a8cfda47f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d8ac3efb-f813-4abb-b693-6cc410532311</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c2e366d-7905-447b-9f87-7e1270aae1be</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c509f4fc-6e5c-470e-96ec-9ebe79c55483</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>749c22a1-d3cb-4400-ab0a-792db7f86cbe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f772d6e4-d014-43be-a149-0d8c7bc7ca64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8c2b08f0-1f1d-48af-a27d-71b0fe64bff9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b830b115-99fa-4d01-9f96-76c767233059</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ddd93480-e0ae-4b75-93c5-cfc4c84a5a89</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>16c690c9-b918-4f82-9236-4290d37cd14f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="0619e977-82cf-4c89-9f82-45dd08d24e29" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="09. Get new command_One reduction TRUE for tarifDraftLigne and others are FALSE_Return Reduction empty" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="3779d2ef-ff0d-4582-a6b2-8d0fc41b7db7"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommand</con:name><con:value>100000507</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>redDraft</con:name><con:value>0112345</con:value></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value>0612345</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="e14a3bf4-0cf4-461a-b564-c561b43f1c79"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("redTarifDraftLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("Promo1",null)
testRunner.testCase.getTestStepByName("1. Transform a draft to command manual reduction for tarifdraftLigne_mvnoConso").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform a draft to command manual reduction for tarifdraftLigne_mvnoConso" id="a80b19c7-2499-4446-a841-c1b5be8e6d8f"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5cebccc2-023b-4473-8ba1-223539a356ba</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>100000507</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value>0612345</con:value></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>Promo1</con:entry><con:entry>redTarifDraftLigne</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="8c6dc928-66be-4ffc-ac9d-1d4e3e58e430"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform a draft to command manual reduction for tarifdraftLigne_mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:sourcePath/><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>redTarifDraftLigne</con:name><con:sourceType>redTarifDraftLigne</con:sourceType><con:sourceStep>1. Transform a draft to command manual reduction for tarifdraftLigne_mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>redTarifDraftLigne</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo1</con:name><con:sourceType>Promo1</con:sourceType><con:sourceStep>1. Transform a draft to command manual reduction for tarifdraftLigne_mvnoConso</con:sourceStep><con:targetType>Promo1</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Make sure that there is an eligible TRUE" id="59f9ec6b-e280-4cee-bcc4-0b9fab02b676"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${commandInfo#refCommand}" order by codeCatalogueReduction ASC;</con:query><con:assertion type="XPath Match" id="8d46c5b8-3c49-44b4-8237-81eabebe3ba4" name="XPath Match - One Eligible TRUE"><con:configuration><path>//*:Row[1]/REDUCTION.ELIGIBLE</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>true</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. getInfosBonCommande to check reduction info" id="60ab586d-8a1a-405a-b2f8-74c855626bdf"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/getInfosBonCommande" methodName="getInfosBonCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. getInfosBonCommande to check reduction info" id="da0a0e74-02cb-495e-8eba-4888c52652d7" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/702001504/getInfosBonCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="97174708-d077-4fa2-a723-e880f44f6857" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="21c738f6-1b23-4529-99fa-d86e57746a32" name="Reduction is NOT empty"><con:configuration><token>"reductions":[{</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get promotion to check_MVNO" id="25d4e802-247b-479f-9e54-f97b1f7c7787" disabled="true"><con:settings/><con:config service="/default/promo" resourcePath="/discount.qualifier.ws-1.0.x/promo/offer/{offerCode}/price/{priceCode}" methodName="getPromoByOfferCodeAndPrice" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get promotion to check_MVNO" id="25bf5c2e-533d-452b-85d5-5747b5a22479" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/discount.qualifier.ws-1.0.x/promo/offer/MVNO/price/1</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="71ad5e29-4db1-40be-8ec7-e6fefeed5e87" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="priceCode" value="1"/>
  <con:entry key="offerCode" value="MVNO"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">100000507</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9656f05-50b4-4b2d-956d-55da470d6084</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1849f0f6-6afd-49d6-8aeb-a030543973ac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f483b2a3-b9d2-4d36-b7b3-f6a8cfda47f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d8ac3efb-f813-4abb-b693-6cc410532311</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c2e366d-7905-447b-9f87-7e1270aae1be</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c509f4fc-6e5c-470e-96ec-9ebe79c55483</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>749c22a1-d3cb-4400-ab0a-792db7f86cbe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f772d6e4-d014-43be-a149-0d8c7bc7ca64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8c2b08f0-1f1d-48af-a27d-71b0fe64bff9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b830b115-99fa-4d01-9f96-76c767233059</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ddd93480-e0ae-4b75-93c5-cfc4c84a5a89</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>16c690c9-b918-4f82-9236-4290d37cd14f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>67b0a4ab-3457-47a0-a9d2-e39684730e98</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="462e9626-7f73-4bfc-8ce4-cca29d153257" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="10. Get new command_All manual reductions TRUE_Return Reduction empty" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="d605e648-b2c8-498c-a7ab-a29063b767b3"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommand</con:name><con:value>471501000</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value>0312345</con:value></con:property><con:property><con:name>redDraft</con:name><con:value>0112345</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value>0212345</con:value></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="406e7833-ad78-43b0-8bd1-65d699476ded"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey4",'192112')
testRunner.testCase.setPropertyValue( "handleKey4",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("redDraft",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("redDraftLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("redDraftLigneDetail",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("redTarifDraftLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("Promo1",null)
testRunner.testCase.getTestStepByName("1. Transform a draft to command with all supported manual reductions_mvnoConso").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform a draft to command with all supported manual reductions_mvnoConso" id="b1d129b5-3cad-4b1d-a61d-256b886c1a46"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5758cc92-e1dd-406c-8f70-00188ee392f8</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>471501000</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value>0312345</con:value></con:property><con:property><con:name>redDraft</con:name><con:value>0112345</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value>0212345</con:value></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>Promo2</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refDraftGlobal</con:name></con:property><con:property><con:name>redFraiseDraftLigne</con:name></con:property><con:property><con:name>redFraiseDraftLigneDetail</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>redDraft</con:entry><con:entry>redDraftLigne</con:entry><con:entry>redDraftLigneDetail</con:entry><con:entry>redFraiseDraftLigne</con:entry><con:entry>redFraiseDraftLigneDetail</con:entry><con:entry>redTarifDraftLigne</con:entry><con:entry>redBasePromo1</con:entry><con:entry>redBasePromo2</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>refDraftGlobal</con:entry><con:entry>Promo1</con:entry><con:entry>Promo2</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="09cab849-9e36-401a-9dc3-ad72f62294b5"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform a draft to command with all supported manual reductions_mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:sourcePath/><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>redDraft</con:name><con:sourceType>redDraft</con:sourceType><con:sourceStep>1. Transform a draft to command with all supported manual reductions_mvnoConso</con:sourceStep><con:targetType>redDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>redDraftLigne</con:name><con:sourceType>redDraftLigne</con:sourceType><con:sourceStep>1. Transform a draft to command with all supported manual reductions_mvnoConso</con:sourceStep><con:targetType>redDraftLigne</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>redDraftLigneDetail</con:name><con:sourceType>redDraftLigneDetail</con:sourceType><con:sourceStep>1. Transform a draft to command with all supported manual reductions_mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>redDraftLigneDetail</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>redTarifDraftLigne</con:name><con:sourceType>redTarifDraftLigne</con:sourceType><con:sourceStep>1. Transform a draft to command with all supported manual reductions_mvnoConso</con:sourceStep><con:targetType>redTarifDraftLigne</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo1</con:name><con:sourceType>Promo1</con:sourceType><con:sourceStep>1. Transform a draft to command with all supported manual reductions_mvnoConso</con:sourceStep><con:targetType>Promo1</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Make sure that all manual reductions are TRUE" id="b04b92eb-e0a4-4a24-a82c-d587ff7190cb"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from reduction where referenceDraft = "${commandInfo#refCommand}"order by codeCatalogueReduction ASC;</con:query><con:assertion type="XPath Match" id="4bf28961-b85c-46bb-ae4c-373ce14e79d1" name="XPath Match - Reduction 1"><con:configuration><path>//*:Row[1]/REDUCTION.ELIGIBLE</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="373d9fc1-3477-4986-b4ef-cfbf03a65183" name="XPath Match - Reduction 2"><con:configuration><path>//*:Row[2]/REDUCTION.ELIGIBLE</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="373d9fc1-3477-4986-b4ef-cfbf03a65183" name="XPath Match - Reduction 3"><con:configuration><path>//*:Row[3]/REDUCTION.ELIGIBLE</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="373d9fc1-3477-4986-b4ef-cfbf03a65183" name="XPath Match - Reduction 4"><con:configuration><path>//*:Row[4]/REDUCTION.ELIGIBLE</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. getInfosBonCommande to check reduction info" id="1332ec01-1140-4a88-8de0-f8ccab0feb19"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/getInfosBonCommande" methodName="getInfosBonCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. getInfosBonCommande to check reduction info" id="da0a0e74-02cb-495e-8eba-4888c52652d7" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/702001504/getInfosBonCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="97174708-d077-4fa2-a723-e880f44f6857" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="21c738f6-1b23-4529-99fa-d86e57746a32" name="Reduction is empty"><con:configuration><token>"reductions":[]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get promotion to check_MVNO" id="f02c979e-bb1c-4b57-9e69-d32ad3ce56ab" disabled="true"><con:settings/><con:config service="/default/promo" resourcePath="/discount.qualifier.ws-1.0.x/promo/offer/{offerCode}/price/{priceCode}" methodName="getPromoByOfferCodeAndPrice" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get promotion to check_MVNO" id="25bf5c2e-533d-452b-85d5-5747b5a22479" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/discount.qualifier.ws-1.0.x/promo/offer/MVNO/price/1</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="71ad5e29-4db1-40be-8ec7-e6fefeed5e87" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="priceCode" value="1"/>
  <con:entry key="offerCode" value="MVNO"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">471501000</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9656f05-50b4-4b2d-956d-55da470d6084</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1849f0f6-6afd-49d6-8aeb-a030543973ac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f483b2a3-b9d2-4d36-b7b3-f6a8cfda47f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d8ac3efb-f813-4abb-b693-6cc410532311</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c2e366d-7905-447b-9f87-7e1270aae1be</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c509f4fc-6e5c-470e-96ec-9ebe79c55483</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>749c22a1-d3cb-4400-ab0a-792db7f86cbe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f772d6e4-d014-43be-a149-0d8c7bc7ca64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8c2b08f0-1f1d-48af-a27d-71b0fe64bff9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b830b115-99fa-4d01-9f96-76c767233059</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ddd93480-e0ae-4b75-93c5-cfc4c84a5a89</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>16c690c9-b918-4f82-9236-4290d37cd14f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="86b0aeb2-1cdb-490f-8c0f-f531cdc13419" name="initCommandeDocument"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="8c59bef9-fd79-4c53-b0b3-8df34d59a22e" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.01 Init failed_Autor not vaild" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="2e340e45-9b83-461a-9b85-2f386ec7c10b"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>43d44383-300d-4c3d-afa9-e2a219811f96</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a commande with one offer two choices" id="74f60fcf-ca3c-480b-9ad1-ff1198d667ca"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>b93b868a-13f5-479a-9046-5beb3a9f7314</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>43d44383-300d-4c3d-afa9-e2a219811f96</con:value></con:property><con:property><con:name>customerKey3</con:name></con:property><con:property><con:name>handleKey3</con:name></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>refCommandLigneGlobal</con:name></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="c43aea6e-4f52-4535-9728-1d760476da03"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a commande with one offer two choices</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Init document for the created command" id="816c7d51-c183-4b80-9a44-51aca1490ebc"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initDocument" methodName="initCommandeDocument" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Init document for the created command" id="f6d6415f-322a-47c4-a83c-f7c04e6266d1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "",
    "canal": "",
    "ip":null
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//initDocument</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="eea1bdec-1e1b-4808-97e1-e327410973ee" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="98151852-2a8e-4235-bbcb-c698e178d31e" name="Error code must be"><con:configuration><token>"errorCode":"0.1.4"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4fb16a7f-ee48-40b8-9b46-540a44739856" name="Autor can not be null"><con:configuration><token>"errorMessage":"Auteur.qui ne peut pas etre null."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="5f385771-a4bd-4410-be97-77c4c5e85434" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.02 Init failed_Command is not existed" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="restrequest" name="1. Let command not existed_Init failed" id="c7e49f2c-0052-499b-a528-b558e3d83af2"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initDocument" methodName="initCommandeDocument" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Let command not existed_Init failed" id="f6d6415f-322a-47c4-a83c-f7c04e6266d1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1457601536"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//initDocument</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="eea1bdec-1e1b-4808-97e1-e327410973ee" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="98151852-2a8e-4235-bbcb-c698e178d31e" name="Error code must be"><con:configuration><token>"errorCode":"0.1.2"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4fb16a7f-ee48-40b8-9b46-540a44739856" name="Command is not existed"><con:configuration><token>"errorMessage":"llement commande de rference abc nexiste pas."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="abc" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="51a696e1-862e-493b-b1c1-760514d8c4b8" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.03 Init failed_Command has already documentassociation (already initied)_mvnoConso and Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="88b73a10-3ef3-4a0e-897f-43fd496af727"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>67ab0366-1f15-4170-972f-c7a422df516c</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>4ae92569-c15d-4ccf-8ac8-cb95c08f6019</con:value></con:property><con:property><con:name>commandLigneDetailId</con:name><con:value>336</con:value></con:property><con:property><con:name>clientSouscripteurId</con:name><con:value>2550</con:value></con:property><con:property><con:name>clientALivrerId</con:name><con:value>2549</con:value></con:property><con:property><con:name>clientAFactureId</con:name><con:value/></con:property></con:properties></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvno_pack" id="0914c27c-4510-4fea-b96d-6a6765d422b3"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvno_pack" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "canal": "SoapUIPRO",
    "qui": "hientran",
    "ip": {
      "ts": 1455615028000,
      "ip": "10.190.29.140"
    }
  },
  "lignes": [
    {
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
"details":[{
"referenceSelection": "MVNO-SERVICE" ,
"referenceChoix": "mvno_pack",
"referenceTarif": "77"
},
{
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }]
      }
    }
  ],
  "souscripteur": {
      "clientId": "192112",
      "adresseId": "511708010"
    },

    "facturation": {
      "clientId": "192112",
      "adresseId": "511708010"
    }
    ,

    "livraison": {
      "clientId": "192112",
      "adresseId": "511708010"
    },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c918050e-5fc7-49ce-8e3f-11157f0790f9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refDraft" id="e227f078-f123-48c4-92bb-e27f6dbd86b7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_pack</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with params" id="73373dac-3cb8-467e-bb28-808558620875"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with params" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_pack",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_pack",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="30f940d7-8a4d-4d5c-97b3-e10f145d7995" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="05ebe4fe-ce94-431a-b961-5de7640f1d6b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with params</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="3. Init document for the created command_Init successfully" id="0904936c-01cc-4416-9f8a-82d74ba2c3b1"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initDocument" methodName="initCommandeDocument" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Init document for the created command_Init successfully" id="f6d6415f-322a-47c4-a83c-f7c04e6266d1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1457601536"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//initDocument</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="eea1bdec-1e1b-4808-97e1-e327410973ee" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4. Init again_Init failed_Check the exception" id="36b79686-acf7-4ba1-a77e-9387763640a6"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initDocument" methodName="initCommandeDocument" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Init again_Init failed_Check the exception" id="f6d6415f-322a-47c4-a83c-f7c04e6266d1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1457601536"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//initDocument</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="eea1bdec-1e1b-4808-97e1-e327410973ee" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes1" id="b1fc0140-7f1d-4f56-977a-03ff2f38f49d"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="errorCode must be" id="cc97a809-65ca-4b9f-8752-6cdc96d8a44d"><con:configuration><token>"errorCode":"2.1.30"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="errorMessage must be" id="00a206c4-a8ac-4551-a19d-df45d5b65c51"><con:configuration><token>"errorMessage":"La commande a t initie."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="5. Select the created signature to check signatureassociation info" id="5774cd47-fc22-47a2-b202-f53e089dda15"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `signatureassociation` where referenceCommande = "${commandInfo#refCommand}" and canal = 'SOAPUI';</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="3c3d3d09-00e8-4d49-b430-988d65e8eb69" name="refCommand must be"><con:configuration><token>&lt;SIGNATUREASSOCIATION.REFERENCECOMMANDE>${commandInfo#refCommand}&lt;/SIGNATUREASSOCIATION.REFERENCECOMMANDE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="10e5d460-06ba-492e-98c9-4385e3754236" name="mode must be null"><con:configuration><token>&lt;SIGNATUREASSOCIATION.MODE/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cfd46043-da47-4d79-a79a-769ec12dc66d" name="codeFolio must be null"><con:configuration><token> &lt;SIGNATUREASSOCIATION.CODEFOLIO/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="783da9f9-c05a-4bd7-8512-b8935643139a" name="besoinSignature must be false"><con:configuration><token>&lt;SIGNATUREASSOCIATION.BESOINSIGNATURE>0&lt;/SIGNATUREASSOCIATION.BESOINSIGNATURE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b1801946-8576-4208-a55e-b92e0ab90586" name="sign must be FALSE"><con:configuration><token>&lt;SIGNATUREASSOCIATION.SIGNE>0&lt;/SIGNATUREASSOCIATION.SIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="34105a92-4fe4-408b-a32a-7305a84ae62a" name="canal must be SOAPUI"><con:configuration><token>&lt;SIGNATUREASSOCIATION.CANAL>SOAPUI&lt;/SIGNATUREASSOCIATION.CANAL>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="13934154-cb93-4948-a9a3-15bca06e7adc" name="ip must be 10.190.29.140"><con:configuration><token>&lt;SIGNATUREASSOCIATION.IP>10.190.29.140&lt;/SIGNATUREASSOCIATION.IP>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e0a9a138-7e3f-40a9-b408-c73a2594341e" name="ts must be 14/02/2016"><con:configuration><token>&lt;SIGNATUREASSOCIATION.TS>2016-02-14</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="5bfdd3cb-0885-4cc5-a175-df3f8ec09e66" name="qui must be 'hientranInitAgain'"><con:configuration><token>&lt;SIGNATUREASSOCIATION.QUI>hientran&lt;/SIGNATUREASSOCIATION.QUI>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="delay" name="Delay" id="310d5f6e-5739-4b6e-a57a-b41ded8afbee"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="jdbc" name="6. Select the command to check dateSignatureInitialisation" id="a9be4382-21ca-4f9e-89e3-458c69548ac4"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commande` where reference = "${commandInfo#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89a2ee38-25f4-49f8-bbbc-094283c67f34" name="DateSignatureInitialization must be NOT NULL"><con:configuration><token>&lt;COMMANDE.DATESIGNATUREINITIALIZATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>customerKey1</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refLigneGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>71a22f1f-f772-4426-9bea-9a28cf2c3831</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>120919c4-fd3d-49d8-8212-989f558d8d6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0904936c-01cc-4416-9f8a-82d74ba2c3b1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>36b79686-acf7-4ba1-a77e-9387763640a6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="d057950b-dd22-48ae-88d6-5939777ecb35" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.01 Init successfully_customLabel is NOT TITULAIRE_Two types of document for soucripteur and livraison" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="e4cbf1af-36be-41aa-af45-edbd22bdd1ab"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>a3518905-3221-466e-ace0-9eef6324f751</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>0ff52f03-0f34-426f-8b68-1febce44f59f</con:value></con:property><con:property><con:name>commandLigneDetailId</con:name><con:value>1568</con:value></con:property><con:property><con:name>clientSouscripteurId</con:name><con:value>11212</con:value></con:property><con:property><con:name>clientALivrerId</con:name><con:value>11211</con:value></con:property><con:property><con:name>clientAFactureId</con:name><con:value/></con:property><con:property><con:name>refCommandGobal</con:name><con:value/></con:property></con:properties></con:config></con:testStep><con:testStep type="restrequest" name="0. Update handle with customLabel 'UTILISATEUR'_handle 102008617" id="cab179db-f59f-4443-8374-02da185894b4"><con:settings/><con:config service="BaseClient" resourcePath="/base-client-ws-1.0.x/services/BaseClientWS/updateHandle" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="0. Update handle with customLabel 'UTILISATEUR'_handle 102008617" id="6e0e3649-dd29-46fc-a206-e57a5fc98957" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request>{
    "address1": "adr1",
   "address2": "adr2",
   "city": "tunis",
   "civility": "M",
   "company": "Oxia",
   "country": "FR",
   "email": "htranthithu@pentalog.fr",
   "fax": null,
   "firstName": "Hien",
   "gsm": null,
   "handleKey": "102008617",
   "intraTVA": null,
   "enabled": true,
   "name": "Tran",
   "phone": "+33.766224599",
   "profileType": "PAR",
   "siren": null,
   "type": "USER_MVNO",
   "zipCode": "12456",
  
   "customLabel": "UTILISATEUR",
   "modifiable": true,
   "dateValidationEmail": null,
   "dateValidationGSM": null,
 
   "emailState": "CREATED",
   "pnd": false,
   "gsmState": null,
   "idBaseAdresse": "BA00077580",
   "profession": null,
   "voie": "adr1",
   "numVoie": null,
   "birthDate": "1111-11-11",
   "siret": null,
   "codeApe": null,
   "flagPresenceAnnuaireMVNO": false,
   "flagOnlyNomMVNO": false,
   "flagAdresseCompleteMVNO": false,
   "flagAntiprospectionMVNO": false,
   "flagPresenceAdresseEmail": false,
   "flagPresenceProfession": false,
   "flagReceptionCNI": null,
   "flagReceptionJD": null,
   "indicateurConservationNum": null,
   "flagAntiannuaireInverseMVNO": false
}</con:request><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/updateHandle</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e3bee35a-e289-4ea9-afd1-253eaf5054a1" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="user" value="{&quot;ip&quot;:&quot;10.190.29.140&quot;,&quot;userName&quot;:&quot;penta_vietnam&quot;,&quot;httpUserAgent&quot;:&quot;fa49891b783d3fc022009da14f74bd64&quot;}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvno_conso" id="a71a7167-45aa-4042-bf52-c79108768f92"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvno_conso" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "canal": "SoapUIPRO",
    "qui": "hientran",
    "ip": {
      "ts": 1455615028000,
      "ip": "10.190.29.140"
    }
  },
  "lignes": [
    {
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
"details":[{
"referenceSelection": "MVNO-SERVICE" ,
"referenceChoix": "mvno_conso",
"referenceTarif": "83"
}]
      }
    }
  ],
  "souscripteur": {
      "clientId": "192112",
      "adresseId": "511708010"
    },

    "facturation": {
      "clientId": "192112",
      "adresseId": "511708010"
    }
    ,

    "livraison": {
      "clientId": "192112",
      "adresseId": "102008617"
    },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c918050e-5fc7-49ce-8e3f-11157f0790f9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refDraft" id="f734a70c-e35d-4af1-a64f-2a71edf4cbd2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_conso</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande" id="eefa0895-0c7c-4297-9f13-00ec89e1a46e"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"102008617",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="30f940d7-8a4d-4d5c-97b3-e10f145d7995" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="378dc16b-ad4d-4eb6-8018-2cb8868de2d3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Select the created commande from DB" id="acc1a8a3-8a3c-4cea-8e0e-c8a865ea53ce"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commande` where reference = "${commandInfo#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer clientInfo" id="59010edc-3d22-4fdb-98ed-bd9f1f3bdf07"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>clientSouscripteurId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Select the created commande from DB</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/COMMANDE.CLIENTSOUSCRIPTEURID[1]</con:sourcePath><con:targetType>clientSouscripteurId</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>clientALivrerId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Select the created commande from DB</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/COMMANDE.CLIENTALIVRERID[1]</con:sourcePath><con:targetType>clientALivrerId</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Select the created commande ligne detail from DB" id="756f3652-9e39-4e62-b87a-19b874826f6d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM commandelignedetail where commandeLigneId = (SELECT id FROM commandeligne where commandeId = (SELECT id FROM `commande` where reference = '${commandInfo#refCommand}'));</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommandLigneDetail" id="65c2cd47-b116-4edf-bab3-4f75172e459a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>commandLigneDetailId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Select the created commande ligne detail from DB</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNEDETAIL.ID[1]</con:sourcePath><con:targetType>commandLigneDetailId</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="3. Init document for the created command_Init successfully" id="d1637e5d-a207-4e9f-969e-684e97c1c804"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initDocument" methodName="initCommandeDocument" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Init document for the created command_Init successfully" id="f6d6415f-322a-47c4-a83c-f7c04e6266d1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1457601536"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//initDocument</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="eea1bdec-1e1b-4808-97e1-e327410973ee" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Verify document info of TITULAIRE" id="838f861b-5a20-4c59-b46a-49da7ed6812c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}" and canal = 'SOAPUI' and clientId = '${commandInfo#clientSouscripteurId}';</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="10e5d460-06ba-492e-98c9-4385e3754236" name="clientId of TITULAIRE must be clientSouscripteurId"><con:configuration><token>&lt;DOCUMENTASSOCIATION.CLIENTID>${commandInfo#clientSouscripteurId}&lt;/DOCUMENTASSOCIATION.CLIENTID>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="3c3d3d09-00e8-4d49-b430-988d65e8eb69" name="documentDemande must be true "><con:configuration><token>&lt;DOCUMENTASSOCIATION.DOCUMENTDEMANDE>1&lt;/DOCUMENTASSOCIATION.DOCUMENTDEMANDE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cfd46043-da47-4d79-a79a-769ec12dc66d" name="documente must be false"><con:configuration><token>&lt;DOCUMENTASSOCIATION.DOCUMENTE>0&lt;/DOCUMENTASSOCIATION.DOCUMENTE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="783da9f9-c05a-4bd7-8512-b8935643139a" name="forceValide must be false"><con:configuration><token> &lt;DOCUMENTASSOCIATION.FORCEVALIDE>0&lt;/DOCUMENTASSOCIATION.FORCEVALIDE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b1801946-8576-4208-a55e-b92e0ab90586" name="commandLigneDetailId must be"><con:configuration><token>&lt;DOCUMENTASSOCIATION.COMMANDELIGNEDETAILID>${commandInfo#commandLigneDetailId}&lt;/DOCUMENTASSOCIATION.COMMANDELIGNEDETAILID></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="2.2 Verify document info of UTILISATEUR" id="38a016c1-585b-4780-9066-b2104a303e02"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}" and canal = 'SOAPUI' and clientId = '${commandInfo#clientALivrerId}';</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Only one record is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="1f56738d-ef92-4dc9-964e-6bd8fb4d020a" name="clientId of UTILISATEUR must be clientALivrerId"><con:configuration><token>&lt;DOCUMENTASSOCIATION.CLIENTID>${commandInfo#clientALivrerId}&lt;/DOCUMENTASSOCIATION.CLIENTID>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="3c3d3d09-00e8-4d49-b430-988d65e8eb69" name="documentDemande must be true "><con:configuration><token>&lt;DOCUMENTASSOCIATION.DOCUMENTDEMANDE>1&lt;/DOCUMENTASSOCIATION.DOCUMENTDEMANDE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cfd46043-da47-4d79-a79a-769ec12dc66d" name="documente must be false"><con:configuration><token>&lt;DOCUMENTASSOCIATION.DOCUMENTE>0&lt;/DOCUMENTASSOCIATION.DOCUMENTE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="3727bde3-413f-4510-a64e-1cb70101dcdd" name="forceValide must be false"><con:configuration><token> &lt;DOCUMENTASSOCIATION.FORCEVALIDE>0&lt;/DOCUMENTASSOCIATION.FORCEVALIDE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="43ba5749-36b3-48b7-a38a-f485400faa15" name="commandLigneDetailId must be"><con:configuration><token>&lt;DOCUMENTASSOCIATION.COMMANDELIGNEDETAILID>${commandInfo#commandLigneDetailId}&lt;/DOCUMENTASSOCIATION.COMMANDELIGNEDETAILID></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="3. Select the command to check dateDocumentInitialisation_It must be NOT NULL" id="200b1e0d-7bfe-4ef9-a111-25434a9d1e46"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commande` where reference = "${commandInfo#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89a2ee38-25f4-49f8-bbbc-094283c67f34" name="DateDocumentInitialization must be NOT NULL"><con:configuration><token>&lt;COMMANDE.DATEDOCUMENTINITIALIZATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="Get needed documents from catalog to check" id="65efe72b-2eac-4519-a856-72689690392b" disabled="true"><con:settings/><con:config service="CatalogBs" resourcePath="/catalog-ocbs-ws-1.0.x/services/CatalogBs/getService/{serviceItemCode}" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get needed documents from catalog to check" id="ef615962-c320-475f-a0f0-4cbb128062e1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/catalog-ocbs-ws-1.0.x/services/CatalogBs/getService/mvno_conso</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5a3a8cfb-620e-4ca0-a4bf-ed153efee7b8" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="serviceItemCode" value="mvno_conso" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>0ff52f03-0f34-426f-8b68-1febce44f59f</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>200b1e0d-7bfe-4ef9-a111-25434a9d1e46</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cab179db-f59f-4443-8374-02da185894b4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="7227b368-791b-4ab1-8ead-c5caccdbb237" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.02 Init successfully_customLabel is NULL_Two types of document for soucripteur and livraison" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="0519a406-7a7f-4895-bab4-609e483e182f"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>5f3120e9-e1cf-49bc-bbe4-8ededcc91fff</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>1300c821-c390-485b-bad0-9e54810ea6f3</con:value></con:property><con:property><con:name>commandLigneDetailId</con:name><con:value>1354</con:value></con:property><con:property><con:name>clientSouscripteurId</con:name><con:value>10084</con:value></con:property><con:property><con:name>clientALivrerId</con:name><con:value>10083</con:value></con:property><con:property><con:name>clientAFactureId</con:name><con:value/></con:property></con:properties></con:config></con:testStep><con:testStep type="restrequest" name="0. Update handle with customLabel null_handle 102008617" id="f7968aa7-a4a7-4ed0-ab5b-9935f7af8920"><con:settings/><con:config service="BaseClient" resourcePath="/base-client-ws-1.0.x/services/BaseClientWS/updateHandle" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="0. Update handle with customLabel null_handle 102008617" id="6e0e3649-dd29-46fc-a206-e57a5fc98957" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request>{
    "address1": "adr1",
   "address2": "adr2",
   "city": "tunis",
   "civility": "M",
   "company": "Oxia",
   "country": "FR",
   "email": "htranthithu@pentalog.fr",
   "fax": null,
   "firstName": "Hien",
   "gsm": null,
   "handleKey": "102008617",
   "intraTVA": null,
   "enabled": true,
   "name": "Tran",
   "phone": "+33.766224599",
   "profileType": "PAR",
   "siren": null,
   "type": "USER_MVNO",
   "zipCode": "12456",
  
   "customLabel": null,
   "modifiable": true,
   "dateValidationEmail": null,
   "dateValidationGSM": null,
 
   "emailState": "CREATED",
   "pnd": false,
   "gsmState": null,
   "idBaseAdresse": "BA00077580",
   "profession": null,
   "voie": "adr1",
   "numVoie": null,
   "birthDate": "1111-11-11",
   "siret": null,
   "codeApe": null,
   "flagPresenceAnnuaireMVNO": false,
   "flagOnlyNomMVNO": false,
   "flagAdresseCompleteMVNO": false,
   "flagAntiprospectionMVNO": false,
   "flagPresenceAdresseEmail": false,
   "flagPresenceProfession": false,
   "flagReceptionCNI": null,
   "flagReceptionJD": null,
   "indicateurConservationNum": null,
   "flagAntiannuaireInverseMVNO": false
}</con:request><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/updateHandle</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e3bee35a-e289-4ea9-afd1-253eaf5054a1" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="user" value="{&quot;ip&quot;:&quot;10.190.29.140&quot;,&quot;userName&quot;:&quot;penta_vietnam&quot;,&quot;httpUserAgent&quot;:&quot;fa49891b783d3fc022009da14f74bd64&quot;}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvno_pack" id="746f5f9d-b32e-455f-b046-9fac7c17b3c1"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvno_pack" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "canal": "SoapUIPRO",
    "qui": "hientran",
    "ip": {
      "ts": 1455615028000,
      "ip": "10.190.29.140"
    }
  },
  "lignes": [
    {
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
"details":[{
"referenceSelection": "MVNO-SERVICE" ,
"referenceChoix": "mvno_pack",
"referenceTarif": "77"
},
{
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }]
      }
    }
  ],
  "souscripteur": {
      "clientId": "192112",
      "adresseId": "511708010"
    },

    "facturation": {
      "clientId": "192112",
      "adresseId": "511708010"
    }
    ,

    "livraison": {
      "clientId": "192112",
      "adresseId": "102008617"
    },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c918050e-5fc7-49ce-8e3f-11157f0790f9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refDraft" id="c6d576a6-aecf-45cb-aa53-2023f042d01c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_pack</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with params" id="e10aa058-2e59-43cb-be5b-6c18be5f2e6f"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with params" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_pack",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_pack",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur": {
      "clientId": "192112",
      "adresseId": "511708010"
    },

    "facturation": {
      "clientId": "192112",
      "adresseId": "511708010"
    }
    ,

    "livraison": {
      "clientId": "192112",
      "adresseId": "102008617"
    }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="30f940d7-8a4d-4d5c-97b3-e10f145d7995" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="ee794c43-a81d-4422-9ca6-14d53441f20a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with params</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Select the created commande from DB" id="29f0fd6d-4b65-4781-a5bb-09aaff4fca0d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commande` where reference = "${commandInfo#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer clientInfo" id="a40b0837-c3c4-47df-97e2-4bd49fcff163"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>clientSouscripteurId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Select the created commande from DB</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/COMMANDE.CLIENTSOUSCRIPTEURID[1]</con:sourcePath><con:targetType>clientSouscripteurId</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>clientALivrerId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Select the created commande from DB</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/COMMANDE.CLIENTALIVRERID[1]</con:sourcePath><con:targetType>clientALivrerId</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Select the created commande ligne detail from DB" id="c39a7b6e-ae96-43e3-88bb-1150f8eff1a0"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM commandelignedetail where commandeLigneId = (SELECT id FROM commandeligne where commandeId = (SELECT id FROM `commande` where reference = '${commandInfo#refCommand}'));</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Two records is created"><con:configuration><path>count(//Row)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommandLigneDetail" id="0285caec-c67a-4124-bd05-35c72f779f4c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>commandLigneDetailId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Select the created commande ligne detail from DB</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNEDETAIL.ID[1]</con:sourcePath><con:targetType>commandLigneDetailId</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="3. Init document for the created command_Init successfully" id="6699027e-6513-455d-b3da-82b8ec294692"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initDocument" methodName="initCommandeDocument" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Init document for the created command_Init successfully" id="f6d6415f-322a-47c4-a83c-f7c04e6266d1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1457601536"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//initDocument</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="eea1bdec-1e1b-4808-97e1-e327410973ee" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Verify document info of TITULAIRE" id="048856d2-1346-46c0-8308-36520247fdfd"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}" and canal = 'SOAPUI' and clientId = '${commandInfo#clientSouscripteurId}';</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="10e5d460-06ba-492e-98c9-4385e3754236" name="clientId of TITULAIRE must be clientSouscripteurId"><con:configuration><token>&lt;DOCUMENTASSOCIATION.CLIENTID>${commandInfo#clientSouscripteurId}&lt;/DOCUMENTASSOCIATION.CLIENTID>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="3c3d3d09-00e8-4d49-b430-988d65e8eb69" name="documentDemande must be true "><con:configuration><token>&lt;DOCUMENTASSOCIATION.DOCUMENTDEMANDE>1&lt;/DOCUMENTASSOCIATION.DOCUMENTDEMANDE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cfd46043-da47-4d79-a79a-769ec12dc66d" name="documente must be false"><con:configuration><token>&lt;DOCUMENTASSOCIATION.DOCUMENTE>0&lt;/DOCUMENTASSOCIATION.DOCUMENTE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="783da9f9-c05a-4bd7-8512-b8935643139a" name="forceValide must be false"><con:configuration><token> &lt;DOCUMENTASSOCIATION.FORCEVALIDE>0&lt;/DOCUMENTASSOCIATION.FORCEVALIDE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b1801946-8576-4208-a55e-b92e0ab90586" name="commandLigneDetailId must be"><con:configuration><token>&lt;DOCUMENTASSOCIATION.COMMANDELIGNEDETAILID>${commandInfo#commandLigneDetailId}&lt;/DOCUMENTASSOCIATION.COMMANDELIGNEDETAILID></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="2.2 Verify document info of UTILISATEUR" id="63ea99f9-3a77-4717-bf56-664fd6e6ae91"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}" and canal = 'SOAPUI' and clientId = '${commandInfo#clientALivrerId}';</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Only one record is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="1f56738d-ef92-4dc9-964e-6bd8fb4d020a" name="clientId of UTILISATEUR must be clientALivrerId"><con:configuration><token>&lt;DOCUMENTASSOCIATION.CLIENTID>${commandInfo#clientALivrerId}&lt;/DOCUMENTASSOCIATION.CLIENTID>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="3c3d3d09-00e8-4d49-b430-988d65e8eb69" name="documentDemande must be true "><con:configuration><token>&lt;DOCUMENTASSOCIATION.DOCUMENTDEMANDE>1&lt;/DOCUMENTASSOCIATION.DOCUMENTDEMANDE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cfd46043-da47-4d79-a79a-769ec12dc66d" name="documente must be false"><con:configuration><token>&lt;DOCUMENTASSOCIATION.DOCUMENTE>0&lt;/DOCUMENTASSOCIATION.DOCUMENTE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="3727bde3-413f-4510-a64e-1cb70101dcdd" name="forceValide must be false"><con:configuration><token> &lt;DOCUMENTASSOCIATION.FORCEVALIDE>0&lt;/DOCUMENTASSOCIATION.FORCEVALIDE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="43ba5749-36b3-48b7-a38a-f485400faa15" name="commandLigneDetailId must be"><con:configuration><token>&lt;DOCUMENTASSOCIATION.COMMANDELIGNEDETAILID>${commandInfo#commandLigneDetailId}&lt;/DOCUMENTASSOCIATION.COMMANDELIGNEDETAILID></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="3. Select the command to check dateDocumentInitialisation_It must be NOT NULL" id="200b1e0d-7bfe-4ef9-a111-25434a9d1e46"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commande` where reference = "${commandInfo#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89a2ee38-25f4-49f8-bbbc-094283c67f34" name="DateDocumentInitialization must be NOT NULL"><con:configuration><token>&lt;COMMANDE.DATEDOCUMENTINITIALIZATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="Get needed documents from catalog to check" id="3e2c4ce4-e912-48e9-a6cd-768bca9bf588" disabled="true"><con:settings/><con:config service="CatalogBs" resourcePath="/catalog-ocbs-ws-1.0.x/services/CatalogBs/getService/{serviceItemCode}" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get needed documents from catalog to check" id="ef615962-c320-475f-a0f0-4cbb128062e1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/catalog-ocbs-ws-1.0.x/services/CatalogBs/getService/mvno_conso</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5a3a8cfb-620e-4ca0-a4bf-ed153efee7b8" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="serviceItemCode" value="mvno_pack" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>200b1e0d-7bfe-4ef9-a111-25434a9d1e46</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f7968aa7-a4a7-4ed0-ab5b-9935f7af8920</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="28eea78a-9a13-47b5-bd3d-b93825442ae4" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.03 Init successfully_customLabel is TITULAIRE_Only one documentassociation is generated for soucripteur" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="b8fcd4d4-1038-4c15-abcc-96e47cf40775"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>17752862-c383-4b5a-b97e-9df5feba3367</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>9dcb6f54-017e-4465-b23c-47a9fefdc48c</con:value></con:property><con:property><con:name>clientSouscripteurId</con:name><con:value>10093</con:value></con:property><con:property><con:name>clientALivrerId</con:name><con:value>10092</con:value></con:property><con:property><con:name>commandLigneDetailIdPostpaidMobile</con:name><con:value>1357</con:value></con:property><con:property><con:name>commandLigneDetailIdMvnoConso</con:name><con:value>1356</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="restrequest" name="0. Update handle with customLabel TITULAIRE_handle 102008617" id="dd9b4504-5aee-45fd-bfe5-36ea06c48224"><con:settings/><con:config service="BaseClient" resourcePath="/base-client-ws-1.0.x/services/BaseClientWS/updateHandle" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="0. Update handle with customLabel TITULAIRE_handle 102008617" id="6e0e3649-dd29-46fc-a206-e57a5fc98957" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request>{
    "address1": "adr1",
   "address2": "adr2",
   "city": "tunis",
   "civility": "M",
   "company": "Oxia",
   "country": "FR",
   "email": "htranthithu@pentalog.fr",
   "fax": null,
   "firstName": "Hien",
   "gsm": null,
   "handleKey": "102008617",
   "intraTVA": null,
   "enabled": true,
   "name": "Tran",
   "phone": "+33.766224599",
   "profileType": "PAR",
   "siren": null,
   "type": "USER_MVNO",
   "zipCode": "12456",
  
   "customLabel": "TITULAIRE",
   "modifiable": true,
   "dateValidationEmail": null,
   "dateValidationGSM": null,
 
   "emailState": "CREATED",
   "pnd": false,
   "gsmState": null,
   "idBaseAdresse": "BA00077580",
   "profession": null,
   "voie": "adr1",
   "numVoie": null,
   "birthDate": "1111-11-11",
   "siret": null,
   "codeApe": null,
   "flagPresenceAnnuaireMVNO": false,
   "flagOnlyNomMVNO": false,
   "flagAdresseCompleteMVNO": false,
   "flagAntiprospectionMVNO": false,
   "flagPresenceAdresseEmail": false,
   "flagPresenceProfession": false,
   "flagReceptionCNI": null,
   "flagReceptionJD": null,
   "indicateurConservationNum": null,
   "flagAntiannuaireInverseMVNO": false
}</con:request><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/updateHandle</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e3bee35a-e289-4ea9-afd1-253eaf5054a1" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="user" value="{&quot;ip&quot;:&quot;10.190.29.140&quot;,&quot;userName&quot;:&quot;penta_vietnam&quot;,&quot;httpUserAgent&quot;:&quot;fa49891b783d3fc022009da14f74bd64&quot;}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected" id="a28fe7ef-0aa6-473f-b85a-90e29a150319"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "Welcome",
    "ip": {
      "ip": "10.190.29.140",
      "ts": 1456370857000
    }
  },
  "lignes": [
    {
      "auteur": {
        "qui": "hientran",
        "canal": "Welcome",
        "ip": {
          "ip": "10.190.29.150",
          "ts": 1456370857000
        }
      },
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
        
      "details": [
         {
            "referenceSelection": "MVNO-SERVICE",
            "referenceChoix": "mvno_conso",
            "referenceTarif": "83"
          },
         		  {
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }
      ]
    }
  }
  ],
   "souscripteur": {
      "clientId": "192112",
      "adresseId": "511708010"
    },

    "facturation": {
      "clientId": "192112",
      "adresseId": "511708010"
    }
    ,

    "livraison": {
      "clientId": "192112",
      "adresseId": "102008617"
    },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c918050e-5fc7-49ce-8e3f-11157f0790f9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refDraft" id="dc8e8b70-0914-44d2-8595-7e15fd210c8b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande" id="0b816924-7d70-48d3-870d-c29118a30f80"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
     "souscripteur": {
      "clientId": "192112",
      "adresseId": "511708010"
    },

    "facturation": {
      "clientId": "192112",
      "adresseId": "511708010"
    }
    ,

    "livraison": {
      "clientId": "192112",
      "adresseId": "102008617"
    }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="30f940d7-8a4d-4d5c-97b3-e10f145d7995" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="030ede49-7b82-4fbd-8cf0-11c396a40d4b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Select the created commande from DB" id="3c6f4575-6547-475c-958c-3f83c05c20d6"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commande` where reference = "${commandInfo#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer clientInfo" id="44267405-6264-492b-a855-a164871dc332"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>clientSouscripteurId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Select the created commande from DB</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/COMMANDE.CLIENTSOUSCRIPTEURID[1]</con:sourcePath><con:targetType>clientSouscripteurId</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>clientALivrerId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Select the created commande from DB</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/COMMANDE.CLIENTALIVRERID[1]</con:sourcePath><con:targetType>clientALivrerId</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Select the commande ligne detail of mvno_conso" id="8c149dec-18dc-4692-ba50-42616be97a30"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM commandelignedetail where commandeLigneId = (SELECT id FROM commandeligne where commandeId = (SELECT id FROM `commande` where reference = '${commandInfo#refCommand}')) and referenceChoix = 'mvno_conso';</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer commandLigneDetailIdMvnoConso" id="660c9152-8763-454b-b3d8-6b2fa8723119"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>commandLigneDetailIdMvnoConso</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Select the commande ligne detail of mvno_conso</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNEDETAIL.ID[1]</con:sourcePath><con:targetType>commandLigneDetailIdMvnoConso</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Select the commande ligne detail Postpaid Mobile" id="4edc882c-c08a-4007-b221-ed013f349563"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM commandelignedetail where commandeLigneId = (SELECT id FROM commandeligne where commandeId = (SELECT id FROM `commande` where reference = '${commandInfo#refCommand}')) and referenceChoix = 'PACK-MVNO-POSTPAID-MOBILE';</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer commandLigneDetailIdPostpaidMobile" id="ca4d9310-be06-4636-9c8e-c38c68d500b2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>commandLigneDetailIdPostpaidMobile</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Select the commande ligne detail Postpaid Mobile</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNEDETAIL.ID[1]</con:sourcePath><con:targetType>commandLigneDetailIdPostpaidMobile</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="3. Init document for the created command_Init successfully" id="8b2b315c-fe89-454b-b04f-ee8f71bf31b7"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initDocument" methodName="initCommandeDocument" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Init document for the created command_Init successfully" id="f6d6415f-322a-47c4-a83c-f7c04e6266d1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1457601536"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//initDocument</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="eea1bdec-1e1b-4808-97e1-e327410973ee" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Verify document info of TITULAIRE mvno_conso" id="e3ef0a8c-c0f3-4840-8877-5182cde200d3"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}" and canal = 'SOAPUI' and clientId = '${commandInfo#clientSouscripteurId}';</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="10e5d460-06ba-492e-98c9-4385e3754236" name="clientId of TITULAIRE must be clientSouscripteurId"><con:configuration><token>&lt;DOCUMENTASSOCIATION.CLIENTID>${commandInfo#clientSouscripteurId}&lt;/DOCUMENTASSOCIATION.CLIENTID>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="3c3d3d09-00e8-4d49-b430-988d65e8eb69" name="documentDemande must be true "><con:configuration><token>&lt;DOCUMENTASSOCIATION.DOCUMENTDEMANDE>1&lt;/DOCUMENTASSOCIATION.DOCUMENTDEMANDE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cfd46043-da47-4d79-a79a-769ec12dc66d" name="documente must be false"><con:configuration><token>&lt;DOCUMENTASSOCIATION.DOCUMENTE>0&lt;/DOCUMENTASSOCIATION.DOCUMENTE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="783da9f9-c05a-4bd7-8512-b8935643139a" name="forceValide must be false"><con:configuration><token> &lt;DOCUMENTASSOCIATION.FORCEVALIDE>0&lt;/DOCUMENTASSOCIATION.FORCEVALIDE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b1801946-8576-4208-a55e-b92e0ab90586" name="commandLigneDetailId must be"><con:configuration><token>&lt;DOCUMENTASSOCIATION.COMMANDELIGNEDETAILID>${commandInfo#commandLigneDetailIdMvnoConso}&lt;/DOCUMENTASSOCIATION.COMMANDELIGNEDETAILID></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="2.2 No association is generated for UTILISATEUR mvno_conso" id="4ddaf4ac-cc5f-4a85-a14d-ce7482d8b4dc"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}" and canal = 'SOAPUI' and clientId = '${commandInfo#clientALivrerId}';</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="No record is found"><con:configuration><path>count(//Row)</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="2.3 Make sure no document is created for Postpaid Mobile" id="ef57f960-b373-4044-9bb2-5e801713d1f5"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}" and canal = 'SOAPUI' and commandeLigneDetailId = '${commandInfo#commandLigneDetailIdPostpaidMobile}';</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="No record is created"><con:configuration><path>count(//Row)</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="3. Select the command to check dateDocumentInitialisation_It must be NOT NULL" id="200b1e0d-7bfe-4ef9-a111-25434a9d1e46"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commande` where reference = "${commandInfo#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89a2ee38-25f4-49f8-bbbc-094283c67f34" name="DateDocumentInitialization must be NOT NULL"><con:configuration><token>&lt;COMMANDE.DATEDOCUMENTINITIALIZATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="Get needed documents from catalog to check" id="26707377-ce75-4607-a747-1fefd7e41f78" disabled="true"><con:settings/><con:config service="CatalogBs" resourcePath="/catalog-ocbs-ws-1.0.x/services/CatalogBs/getService/{serviceItemCode}" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get needed documents from catalog to check" id="ef615962-c320-475f-a0f0-4cbb128062e1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/catalog-ocbs-ws-1.0.x/services/CatalogBs/getService/mvno_conso</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5a3a8cfb-620e-4ca0-a4bf-ed153efee7b8" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="serviceItemCode" value="mvno_conso" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4edc882c-c08a-4007-b221-ed013f349563</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ca4d9310-be06-4636-9c8e-c38c68d500b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ef57f960-b373-4044-9bb2-5e801713d1f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>200b1e0d-7bfe-4ef9-a111-25434a9d1e46</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dd9b4504-5aee-45fd-bfe5-36ea06c48224</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="35e11cc5-d60d-4321-a3c2-ca7248293f3f" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03. Init successfully_No document is generated because the offer does not need any docs_avfw.essentiel" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>9ad6b9a1-867e-4617-b876-97ee6706298a</con:value></con:property><con:property><con:name>clientSouscripteurId</con:name><con:value>10102</con:value></con:property><con:property><con:name>clientALivrerId</con:name><con:value>10101</con:value></con:property><con:property><con:name>clientAFactureId</con:name><con:value/></con:property></con:properties></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a commande with one offer no detail" id="f3782634-64bf-4281-a4cb-4b9e4e16206e"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>0d51eb30-0a61-410c-9f6d-3c60240f37ae</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>9ad6b9a1-867e-4617-b876-97ee6706298a</con:value></con:property><con:property><con:name>customerKey1</con:name></con:property><con:property><con:name>handleKey1</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="1d5eea65-cffd-42f8-a309-2280dcc5e325"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a commande with one offer no detail</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Select the created commande from DB" id="da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commande` where reference = "${commandInfo#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer clientInfo" id="2636ba97-cfce-4ab6-828a-4fca2e4b0b4c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>clientSouscripteurId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Select the created commande from DB</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/COMMANDE.CLIENTSOUSCRIPTEURID[1]</con:sourcePath><con:targetType>clientSouscripteurId</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>clientALivrerId</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Select the created commande from DB</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/COMMANDE.CLIENTALIVRERID[1]</con:sourcePath><con:targetType>clientALivrerId</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Get needed documents from catalog to check" id="a907918a-f5b6-431a-9ad1-6e7d9cfa1db6"><con:settings/><con:config service="CatalogBs" resourcePath="/catalog-ocbs-ws-1.0.x/services/CatalogBs/getService/{serviceItemCode}" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get needed documents from catalog to check" id="ef615962-c320-475f-a0f0-4cbb128062e1" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/catalog-ocbs-ws-1.0.x/services/CatalogBs/getService/mvno_conso</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5a3a8cfb-620e-4ca0-a4bf-ed153efee7b8" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="serviceItemCode" value="avfw.essentiel" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2. Init document for the created command" id="c9797145-1373-422e-89ad-36e1949cb6d3"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initDocument" methodName="initCommandeDocument" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Init document for the created command" id="f6d6415f-322a-47c4-a83c-f7c04e6266d1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1457601536"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//initDocument</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="eea1bdec-1e1b-4808-97e1-e327410973ee" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Verify no document is created" id="12aef8eb-1421-4946-910d-8caadb2698c6"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}" and canal = 'SOAPUI';</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="No document is associted"><con:configuration><path>count(//Row)</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="3. Select the command to check dateDocumentInitialisation_It must be NOT NULL" id="200b1e0d-7bfe-4ef9-a111-25434a9d1e46"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commande` where reference = "${commandInfo#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89a2ee38-25f4-49f8-bbbc-094283c67f34" name="DateDocumentInitialization must be NOT NULL"><con:configuration><token>&lt;COMMANDE.DATEDOCUMENTINITIALIZATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="2645ffe2-279b-47db-bef3-14ffcfca5439" name="initCommandeSignature"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="b6846d78-5d4f-420f-85c6-373e0e154d0a" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.01 Init failed_Autor not vaild" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="ce1bc1dd-f30c-4bec-b594-5c8cbd748466"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>198debac-1486-4d3b-bcc7-1d37fd30ab5d</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="ed7aac11-a6b0-4820-b439-6b5ce8a0b77b"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)

</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform to commande with one offer two choices_mvnoConso and Bien" id="89bb8113-e2e2-4497-a91e-8b6b6e673279"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>b93b868a-13f5-479a-9046-5beb3a9f7314</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>198debac-1486-4d3b-bcc7-1d37fd30ab5d</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>refCommandLigneGlobal</con:name></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="a34fe4eb-201f-4fe6-9fcb-e9edd9311a56"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform to commande with one offer two choices_mvnoConso and Bien</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Let client info empty_Init failed_Check exception" id="5ff7e98f-c8ee-4562-baff-fc3df4472822"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Let client info empty_Init failed_Check exception" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "",
    "canal": "",
    "ip": {
      "ip": "",
      "ts": ""
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f6358ef1-7d02-4f10-b21b-434e83067613" name="errorCode must be"><con:configuration><token>"errorCode":"0.1.4"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="2bde219e-5227-4c1e-baea-8bdabfeade0a" name="errorMessage must be"><con:configuration><token>"errorMessage":"Auteur.qui ne peut pas etre null."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>customerKey1</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refLigneGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ed7aac11-a6b0-4820-b439-6b5ce8a0b77b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="17145895-b938-427a-9ab3-6131623083e2" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.02 Init failed_Command is not existed" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="restrequest" name="2. Let a command not existed_Init failed_Check exception" id="ef413929-a3e1-4c01-ba43-4a714b405692"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Let a command not existed_Init failed_Check exception" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1458633355"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes1" id="6fce4f24-1977-49d5-bdff-4927c0e13626"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Error code must be" id="56aa0602-80a8-4fa4-8918-44fffc15c226"><con:configuration><token>"errorCode":"0.1.2"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Command is not existed" id="620ea0b6-8d3d-414e-accf-85251f7c9dcd"><con:configuration><token>"errorMessage":"llement commande de rference abc123 nexiste pas."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="abc123" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>customerKey1</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refLigneGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="1a88e64d-8915-4e37-9eb4-07af099cbb14" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.03 Init failed_Command has already signatureassociation (already initied)_mvnoConso and Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="2036f278-661b-4efe-bb2e-b1c8c60ac0c3"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>3a82d145-838a-4797-8d55-4575f6b9d9d1</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>7b0b2d66-024e-414b-88bc-6888349c5615</con:value></con:property><con:property><con:name>commandLigneDetailId</con:name><con:value>336</con:value></con:property><con:property><con:name>clientSouscripteurId</con:name><con:value>2550</con:value></con:property><con:property><con:name>clientALivrerId</con:name><con:value>2549</con:value></con:property><con:property><con:name>clientAFactureId</con:name><con:value/></con:property></con:properties></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvno_pack" id="1edcdd89-07dd-4bba-8de4-67a3672f91aa"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvno_pack" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "canal": "SoapUIPRO",
    "qui": "hientran",
    "ip": {
      "ts": 1455615028000,
      "ip": "10.190.29.140"
    }
  },
  "lignes": [
    {
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
"details":[{
"referenceSelection": "MVNO-SERVICE" ,
"referenceChoix": "mvno_pack",
"referenceTarif": "77"
},
{
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }]
      }
    }
  ],
  "souscripteur": {
      "clientId": "192112",
      "adresseId": "511708010"
    },

    "facturation": {
      "clientId": "192112",
      "adresseId": "511708010"
    }
    ,

    "livraison": {
      "clientId": "192112",
      "adresseId": "511708010"
    },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c918050e-5fc7-49ce-8e3f-11157f0790f9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refDraft" id="42623417-274e-4196-b4c4-b6c0f1e19210"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_pack</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with params" id="33c951a5-99a0-4366-aef3-d0be481441de"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with params" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_pack",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_pack",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="30f940d7-8a4d-4d5c-97b3-e10f145d7995" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="195948c6-4ee7-4a1d-af70-3848ad3653e9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with params</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="3. Init signature for the created command_Init successfully" id="bc13b08c-4fd5-43b7-b023-a1644727f2c6"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Init signature for the created command_Init successfully" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4. Init again_Init failed_Check the exception" id="120919c4-fd3d-49d8-8212-989f558d8d6f"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Init again_Init failed_Check the exception" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInitAgain",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d79d1d18-074d-46c8-bc4a-1502448c0dd8" name="errorCode must be"><con:configuration><token>"errorCode":"2.1.30"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="5916230d-b40c-448a-97fb-3778dc4c89d0" name="errorMessage must be"><con:configuration><token>"errorMessage":"La commande a t initie."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="5. Select the created signature to check signatureassociation info" id="a2aa55d1-9347-48a9-a441-a46164fc498c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `signatureassociation` where referenceCommande = "${commandInfo#refCommand}" and canal = 'SOAPUI';</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="3c3d3d09-00e8-4d49-b430-988d65e8eb69" name="refCommand must be"><con:configuration><token>&lt;SIGNATUREASSOCIATION.REFERENCECOMMANDE>${commandInfo#refCommand}&lt;/SIGNATUREASSOCIATION.REFERENCECOMMANDE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="10e5d460-06ba-492e-98c9-4385e3754236" name="mode must be null"><con:configuration><token>&lt;SIGNATUREASSOCIATION.MODE/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cfd46043-da47-4d79-a79a-769ec12dc66d" name="codeFolio must be null"><con:configuration><token> &lt;SIGNATUREASSOCIATION.CODEFOLIO/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="783da9f9-c05a-4bd7-8512-b8935643139a" name="besoinSignature must be false"><con:configuration><token>&lt;SIGNATUREASSOCIATION.BESOINSIGNATURE>0&lt;/SIGNATUREASSOCIATION.BESOINSIGNATURE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b1801946-8576-4208-a55e-b92e0ab90586" name="sign must be FALSE"><con:configuration><token>&lt;SIGNATUREASSOCIATION.SIGNE>0&lt;/SIGNATUREASSOCIATION.SIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="34105a92-4fe4-408b-a32a-7305a84ae62a" name="canal must be SOAPUI"><con:configuration><token>&lt;SIGNATUREASSOCIATION.CANAL>SOAPUI&lt;/SIGNATUREASSOCIATION.CANAL>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="13934154-cb93-4948-a9a3-15bca06e7adc" name="ip must be 10.190.29.140"><con:configuration><token>&lt;SIGNATUREASSOCIATION.IP>10.190.29.140&lt;/SIGNATUREASSOCIATION.IP>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e0a9a138-7e3f-40a9-b408-c73a2594341e" name="ts must be 14/02/2016"><con:configuration><token>&lt;SIGNATUREASSOCIATION.TS>2016-02-14</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="5bfdd3cb-0885-4cc5-a175-df3f8ec09e66" name="qui must be 'hientranInitAgain'"><con:configuration><token>&lt;SIGNATUREASSOCIATION.QUI>hientran&lt;/SIGNATUREASSOCIATION.QUI>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="delay" name="Delay" id="71a22f1f-f772-4426-9bea-9a28cf2c3831"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="jdbc" name="6. Select the command to check dateSignatureInitialisation" id="532628a3-d7c6-4ff9-bd94-63218cf7617d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commande` where reference = "${commandInfo#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89a2ee38-25f4-49f8-bbbc-094283c67f34" name="DateSignatureInitialization must be NOT NULL"><con:configuration><token>&lt;COMMANDE.DATESIGNATUREINITIALIZATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>customerKey1</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refLigneGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>71a22f1f-f772-4426-9bea-9a28cf2c3831</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>120919c4-fd3d-49d8-8212-989f558d8d6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="6010064b-f534-4279-b3e0-74bad551cd3b" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.01 Init successfully_Command has not signatureassociation yet_mvnoConso" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="8e80d719-3abd-4122-b62a-49192618f0a3"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>9215fb19-1ec5-4336-a32d-33444a55ee52</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>3381cdb6-6670-4540-9cbb-cb04d2cc8060</con:value></con:property><con:property><con:name>commandLigneDetailId</con:name><con:value>488</con:value></con:property><con:property><con:name>clientSouscripteurId</con:name><con:value>3315</con:value></con:property><con:property><con:name>clientALivrerId</con:name><con:value>3314</con:value></con:property><con:property><con:name>clientAFactureId</con:name><con:value/></con:property><con:property><con:name>refLigne</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="5530ef48-31fe-49d4-b9b7-ba1888fdbbbf"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey1",'192112')
testRunner.testCase.setPropertyValue( "handleKey1",'511708010')
testRunner.testCase.setPropertyValue("refDraftGlobal",null)
testRunner.testCase.setPropertyValue("refLigneGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refLigne",null)
</script></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvno_conso" id="1496d8c0-52a7-4983-94c0-c23f7a908820"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvno_conso" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "canal": "SoapUIPRO",
    "qui": "hientran",
    "ip": {
      "ts": 1455615028000,
      "ip": "10.190.29.140"
    }
  },
  "lignes": [
    {
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
"details":[{
"referenceSelection": "MVNO-SERVICE" ,
"referenceChoix": "mvno_conso",
"referenceTarif": "83"
}]
      }
    }
  ],
  "souscripteur": {
      "clientId": "192112",
      "adresseId": "511708010"
    },

    "facturation": {
      "clientId": "192112",
      "adresseId": "511708010"
    }
    ,

    "livraison": {
      "clientId": "192112",
      "adresseId": "511708010"
    },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c918050e-5fc7-49ce-8e3f-11157f0790f9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refDraft" id="6e50ec4f-1e3c-43e3-bd30-f0ae3893aee2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_conso</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande" id="8b4b0c0a-3056-4a91-bbaf-e7a1733afeed"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="30f940d7-8a4d-4d5c-97b3-e10f145d7995" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="b1396201-1255-45cd-b68b-d05213aa10cb"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="delay" name="Waiting for initiation of documents" id="97aeffc2-6a1b-484a-b16c-5068d8cf3145"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="restrequest" name="3. Init signature for the created command_Init successfully" id="6a3440a5-5498-466e-a5e2-9bd32bf047a1"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Init signature for the created command_Init successfully" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455408000000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="4. Select the created signature to check" id="6ef54791-0fef-4c78-a707-f90e7481c4dc"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `signatureassociation` where referenceCommande = "${commandInfo#refCommand}" and canal = 'SOAPUI';</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="3c3d3d09-00e8-4d49-b430-988d65e8eb69" name="refCommand must be"><con:configuration><token>&lt;SIGNATUREASSOCIATION.REFERENCECOMMANDE>${commandInfo#refCommand}&lt;/SIGNATUREASSOCIATION.REFERENCECOMMANDE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="10e5d460-06ba-492e-98c9-4385e3754236" name="mode must be null"><con:configuration><token>&lt;SIGNATUREASSOCIATION.MODE/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cfd46043-da47-4d79-a79a-769ec12dc66d" name="codeFolio must be null"><con:configuration><token> &lt;SIGNATUREASSOCIATION.CODEFOLIO/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="783da9f9-c05a-4bd7-8512-b8935643139a" name="besoinSignature must be true"><con:configuration><token>&lt;SIGNATUREASSOCIATION.BESOINSIGNATURE>0&lt;/SIGNATUREASSOCIATION.BESOINSIGNATURE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b1801946-8576-4208-a55e-b92e0ab90586" name="sign must be false"><con:configuration><token>&lt;SIGNATUREASSOCIATION.SIGNE>0&lt;/SIGNATUREASSOCIATION.SIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="34105a92-4fe4-408b-a32a-7305a84ae62a" name="canal must be SOAPUI"><con:configuration><token>&lt;SIGNATUREASSOCIATION.CANAL>SOAPUI&lt;/SIGNATUREASSOCIATION.CANAL>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="13934154-cb93-4948-a9a3-15bca06e7adc" name="ip must be 10.190.29.140"><con:configuration><token>&lt;SIGNATUREASSOCIATION.IP>10.190.29.140&lt;/SIGNATUREASSOCIATION.IP>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e0a9a138-7e3f-40a9-b408-c73a2594341e" name="ts must be 14/02/2016"><con:configuration><token>&lt;SIGNATUREASSOCIATION.TS>2016-02-14</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="200213bb-f44d-4f71-a7bf-1732bb4949f3" name="qui must be 'hientran'"><con:configuration><token>&lt;SIGNATUREASSOCIATION.QUI>hientran&lt;/SIGNATUREASSOCIATION.QUI>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="delay" name="Delay" id="f5141c65-f8e5-47f4-9925-e96f6189024e"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="jdbc" name="5. Select the command to check dateSignatureInitialisation" id="e4c9f6f3-999e-4740-af8e-04ef353a7368"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commande` where reference = "${commandInfo#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89a2ee38-25f4-49f8-bbbc-094283c67f34" name="DateSignatureInitialization must be NOT NULL"><con:configuration><token>&lt;COMMANDE.DATESIGNATUREINITIALIZATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>customerKey1</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refLigneGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6a3440a5-5498-466e-a5e2-9bd32bf047a1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f5141c65-f8e5-47f4-9925-e96f6189024e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>97aeffc2-6a1b-484a-b16c-5068d8cf3145</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5530ef48-31fe-49d4-b9b7-ba1888fdbbbf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="2d45a1c6-1667-44a2-9ee5-a4413a4e834f" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.02 Init successfully_Command has already signatureassociation (already signed)_mvnoPack and Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="318ad8df-5d40-4883-94c9-1e3ecb40a71b"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>3a91f445-e033-4716-aed9-21e2e4932f45</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>d7e58f09-2a74-4114-a4e5-3eaae9d27beb</con:value></con:property><con:property><con:name>clientSouscripteurId</con:name><con:value>2559</con:value></con:property><con:property><con:name>clientALivrerId</con:name><con:value>2558</con:value></con:property><con:property><con:name>commandLigneDetailIdPostpaidMobile</con:name><con:value>339</con:value></con:property><con:property><con:name>commandLigneDetailIdMvnoConso</con:name><con:value>338</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected" id="4d72f4a4-907a-45e9-9037-007e2a4eaa2b"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "Welcome",
    "ip": {
      "ip": "10.190.29.140",
      "ts": 1456370857000
    }
  },
  "lignes": [
    {
      "auteur": {
        "qui": "hientran",
        "canal": "Welcome",
        "ip": {
          "ip": "10.190.29.150",
          "ts": 1456370857000
        }
      },
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
        
      "details": [
         {
            "referenceSelection": "MVNO-SERVICE",
            "referenceChoix": "mvno_conso",
            "referenceTarif": "83"
          },
         		  {
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }
      ]
    }
  }
  ],
  "souscripteur": {
    "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "livraison": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "facturation": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c918050e-5fc7-49ce-8e3f-11157f0790f9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refDraft" id="a76c2732-533c-494c-b626-b24f1f858aff"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande" id="dce5a66f-8bb2-41cb-9d34-ceab23b2b8d4"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="30f940d7-8a4d-4d5c-97b3-e10f145d7995" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="a95e4aa4-ecd9-47c9-ad22-dbd511ebaac4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="3. Sign the created command_Successfully" id="e0805237-9155-4488-ad2d-25f5953baed7"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Sign the created command_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4. Init again a signature for the created command_Init successfully_The old signature is updated with new info" id="1f408692-658d-4f78-8a01-6740142bad3e"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Init again a signature for the created command_Init successfully_The old signature is updated with new info" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInitAfterSignature",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="5. Select the created signature to check" id="f8f9a986-7771-4581-871f-d863b4d11da4"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `signatureassociation` where referenceCommande = "${commandInfo#refCommand}" and canal = 'SOAPUI';</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="3c3d3d09-00e8-4d49-b430-988d65e8eb69" name="refCommand must be"><con:configuration><token>&lt;SIGNATUREASSOCIATION.REFERENCECOMMANDE>${commandInfo#refCommand}&lt;/SIGNATUREASSOCIATION.REFERENCECOMMANDE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="10e5d460-06ba-492e-98c9-4385e3754236" name="mode must be OPEN_TRUST"><con:configuration><token>&lt;SIGNATUREASSOCIATION.MODE>OPEN_TRUST&lt;/SIGNATUREASSOCIATION.MODE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cfd46043-da47-4d79-a79a-769ec12dc66d" name="codeFolio must be 9CBEBAWGE2"><con:configuration><token>&lt;SIGNATUREASSOCIATION.CODEFOLIO>9CBEBAWGE2&lt;/SIGNATUREASSOCIATION.CODEFOLIO></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="783da9f9-c05a-4bd7-8512-b8935643139a" name="besoinSignature must be false"><con:configuration><token>&lt;SIGNATUREASSOCIATION.BESOINSIGNATURE>0&lt;/SIGNATUREASSOCIATION.BESOINSIGNATURE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b1801946-8576-4208-a55e-b92e0ab90586" name="sign must be TRUE"><con:configuration><token>&lt;SIGNATUREASSOCIATION.SIGNE>1&lt;/SIGNATUREASSOCIATION.SIGNE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="34105a92-4fe4-408b-a32a-7305a84ae62a" name="canal must be SOAPUI"><con:configuration><token>&lt;SIGNATUREASSOCIATION.CANAL>SOAPUI&lt;/SIGNATUREASSOCIATION.CANAL>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="13934154-cb93-4948-a9a3-15bca06e7adc" name="ip must be 10.190.29.140"><con:configuration><token>&lt;SIGNATUREASSOCIATION.IP>10.190.29.140&lt;/SIGNATUREASSOCIATION.IP>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e0a9a138-7e3f-40a9-b408-c73a2594341e" name="ts must be 15/02/2016"><con:configuration><token>&lt;SIGNATUREASSOCIATION.TS>2016-02-15</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="554a9685-ded7-4678-9e17-f530dc528b8b" name="Qui must be hientranInitAfterSignature"><con:configuration><token>&lt;SIGNATUREASSOCIATION.QUI>hientranInitAfterSignature&lt;/SIGNATUREASSOCIATION.QUI>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="delay" name="Delay" id="8d21975f-820b-42d8-9b08-074cf231746d"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="jdbc" name="6. Select the command to check dateSignatureInitialisation" id="950ab76c-55c3-459d-9068-2a018578aa26"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commande` where reference = "${commandInfo#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89a2ee38-25f4-49f8-bbbc-094283c67f34" name="DateSignatureInitialization must be NOT NULL"><con:configuration><token>&lt;COMMANDE.DATESIGNATUREINITIALIZATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>customerKey1</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refLigneGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4edc882c-c08a-4007-b221-ed013f349563</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ca4d9310-be06-4636-9c8e-c38c68d500b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ef57f960-b373-4044-9bb2-5e801713d1f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0805237-9155-4488-ad2d-25f5953baed7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1f408692-658d-4f78-8a01-6740142bad3e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8d21975f-820b-42d8-9b08-074cf231746d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="178bb408-20a9-4fe1-90ad-2a71393fa88f" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03 Init successfully_No signature is generated because the offer does not need any signature_avfw.essentiel" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="c77baee6-e07f-449f-abc9-afe2d7a80cbf"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>67413adc-3bb8-45ee-8083-c5819331cfd3</con:value></con:property><con:property><con:name>clientSouscripteurId</con:name><con:value>2568</con:value></con:property><con:property><con:name>clientALivrerId</con:name><con:value>2567</con:value></con:property><con:property><con:name>clientAFactureId</con:name><con:value/></con:property></con:properties></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform to command with one offer no detail_antivirus" id="96a0a7b6-f410-49b1-9eae-2436197587e3"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>0d51eb30-0a61-410c-9f6d-3c60240f37ae</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>67413adc-3bb8-45ee-8083-c5819331cfd3</con:value></con:property><con:property><con:name>customerKey1</con:name></con:property><con:property><con:name>handleKey1</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="73001fa8-bd90-4a4b-b069-62528aab943f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform to command with one offer no detail_antivirus</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="3. Init signature for the created command_Init successfully" id="e8cf3b2a-ba99-4402-9a9c-490da27cfcfa"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Init signature for the created command_Init successfully" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455408000000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="4. Select the created signature to check_besoinSignature must be FALSE" id="9ca38057-4f81-43de-9e6c-21227137d6a4"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `signatureassociation` where referenceCommande = "${commandInfo#refCommand}" and canal = 'SOAPUI';</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="3c3d3d09-00e8-4d49-b430-988d65e8eb69" name="refCommand must be"><con:configuration><token>&lt;SIGNATUREASSOCIATION.REFERENCECOMMANDE>${commandInfo#refCommand}&lt;/SIGNATUREASSOCIATION.REFERENCECOMMANDE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="10e5d460-06ba-492e-98c9-4385e3754236" name="mode must be null"><con:configuration><token>&lt;SIGNATUREASSOCIATION.MODE/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cfd46043-da47-4d79-a79a-769ec12dc66d" name="codeFolio must be null"><con:configuration><token> &lt;SIGNATUREASSOCIATION.CODEFOLIO/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="783da9f9-c05a-4bd7-8512-b8935643139a" name="besoinSignature must be FALSE"><con:configuration><token>&lt;SIGNATUREASSOCIATION.BESOINSIGNATURE>0&lt;/SIGNATUREASSOCIATION.BESOINSIGNATURE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b1801946-8576-4208-a55e-b92e0ab90586" name="sign must be false"><con:configuration><token>&lt;SIGNATUREASSOCIATION.SIGNE>0&lt;/SIGNATUREASSOCIATION.SIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="34105a92-4fe4-408b-a32a-7305a84ae62a" name="canal must be SOAPUI"><con:configuration><token>&lt;SIGNATUREASSOCIATION.CANAL>SOAPUI&lt;/SIGNATUREASSOCIATION.CANAL>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="13934154-cb93-4948-a9a3-15bca06e7adc" name="ip must be 10.190.29.140"><con:configuration><token>&lt;SIGNATUREASSOCIATION.IP>10.190.29.140&lt;/SIGNATUREASSOCIATION.IP>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e0a9a138-7e3f-40a9-b408-c73a2594341e" name="ts must be 14/02/2016"><con:configuration><token>&lt;SIGNATUREASSOCIATION.TS>2016-02-14</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="delay" name="Delay" id="0ab85138-0040-4e15-b978-8ddf381ab78c"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="jdbc" name="5. Select the command to check dateSignatureInitialisation" id="d825a5fd-b9aa-47dc-b112-1720f254a808"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commande` where reference = "${commandInfo#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89a2ee38-25f4-49f8-bbbc-094283c67f34" name="DateSignatureInitialization must be NOT NULL"><con:configuration><token>&lt;COMMANDE.DATESIGNATUREINITIALIZATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>customerKey1</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refLigneGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0ab85138-0040-4e15-b978-8ddf381ab78c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="1c6dab49-08ab-4f40-bffc-99a1a24b28e4" name="transformerEnCommande"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="78c71f90-ebfd-4f11-8283-81d4bc4c5b42" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.01 Transform failed_referenceChoix empty" searchProperties="true" maxResults="0" disabled="true"><con:settings/><con:testStep type="calltestcase" name="1.createDraftOneOfferOneChoice" id="302cc2df-f49d-4997-b51b-4bd07da114a3"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>de4f846c-30c6-4009-99fa-1d548af5c9a0</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003049</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003064</con:value></con:property><con:property><con:name>customerKey3</con:name></con:property><con:property><con:name>handleKey3</con:name></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform to command failed_Check exception" id="7093e72e-c565-4893-811b-b92a8471a7a8"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform to command failed_Check exception" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
         "ip":{"ip":"190.10.29.140"}
   },
      "parametres": [ 
       {
          "referenceChoix" : "",
          "cle": "Rio",
          "valeur": "42E123456789"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0712345678"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestSuite#customerKey}",
         "adresseId":"${#TestSuite#handleKey}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestSuite#customerKey}",
         "adresseId":"${#TestSuite#handleKey}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestSuite#customerKey}",
         "adresseId":"${#TestSuite#handleKey}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Simple Contains" id="279c5641-7dbb-4f91-beac-f12fa348780e" name="Error must be"><con:configuration><token>"reasons":[{"source":"parametre[0].referenceChoix","error":"1.1.58","errorMessage":"La reference de choix ne doit pas etre null ou vide.","values":[""]}]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${1.createDraftOneOfferOneChoice#refDraftGlobal}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>094d7ca7-b020-4c59-b1f4-1b29e058a2c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9f90252-a48a-45cf-9bdc-a47cb1ad763f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="59a26a12-fc1a-4f20-9675-aef902fda6fa" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.02 Transform failed_Key empty" searchProperties="true" maxResults="0" disabled="true"><con:settings/><con:testStep type="calltestcase" name="1.createDraftOneOfferOneChoice" id="b096a1ec-1cbc-4608-a247-402827259faf"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>cad4bf66-e332-405d-bdda-284d84df1017</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003003</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003018</con:value></con:property><con:property><con:name>customerKey2</con:name></con:property><con:property><con:name>handleKey2</con:name></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform to command failed_Check exception" id="e88fab2c-5986-4746-afc1-34a889e96570"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform to command failed_Check exception" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
     "ip":{"ip":"190.10.29.140"}
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestSuite#customerKey}",
         "adresseId":"${#TestSuite#handleKey}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestSuite#customerKey}",
         "adresseId":"${#TestSuite#handleKey}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestSuite#customerKey}",
         "adresseId":"${#TestSuite#handleKey}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Simple Contains" id="46f92f4d-491d-4877-b3a7-76328371f0d5" name="Error must be"><con:configuration><token>{"reasons":[{"source":"parametre[0].cle","error":"1.1.59","errorMessage":"La cl ne doit pas etre null ou vide.","values":["mvno_conso"]}]}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${1.createDraftOneOfferOneChoice#refDraftGlobal}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">ec706675-00bc-483e-81d5-7f172266908b</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>094d7ca7-b020-4c59-b1f4-1b29e058a2c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9f90252-a48a-45cf-9bdc-a47cb1ad763f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="852c4eed-7f25-479c-9996-454d4291a18f" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.03 Transform failed_Rio in invalid regex" searchProperties="true" maxResults="0" disabled="true"><con:description>[\d]{2}[P|E][A-Z0-9+]{9}</con:description><con:settings/><con:testStep type="calltestcase" name="1.createDraftOneOfferOneChoice" id="e9e10778-dcef-4002-abce-83ae997d7c34"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>cad4bf66-e332-405d-bdda-284d84df1017</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002991</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003006</con:value></con:property><con:property><con:name>customerKey2</con:name></con:property><con:property><con:name>handleKey2</con:name></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with params" id="a0de35d7-81ca-4b4a-8b39-63bc60d174c1"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with params" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
     "ip":{"ip":"190.10.29.140"}
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "0612345678"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestSuite#customerKey}",
         "adresseId":"${#TestSuite#handleKey}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestSuite#customerKey}",
         "adresseId":"${#TestSuite#handleKey}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestSuite#customerKey}",
         "adresseId":"${#TestSuite#handleKey}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Simple Contains" id="d12be6d3-4d9e-48ce-a035-f495150d02b0" name="Error returned must be"><con:configuration><token>"reasons":[{"source":"parametre[0].valeur","error":"1.1.57","errorMessage":"Format Rio invalide.","values":["mvno_conso"]}]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${1.createDraftOneOfferOneChoice#refDraftGlobal}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">7d8c62b6-b24c-4749-a87d-9896dfab2514</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>094d7ca7-b020-4c59-b1f4-1b29e058a2c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9f90252-a48a-45cf-9bdc-a47cb1ad763f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="ca221b9e-1177-4211-a591-840ffbfb0f0a" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.04 Transform failed_MSISDN in invalid regex" searchProperties="true" maxResults="0" disabled="true"><con:description> [\d] {2}
[P|E][A-Z0-9+]
{9}</con:description><con:settings/><con:testStep type="calltestcase" name="1.createDraftOneOfferOneChoice" id="bfaa1997-2653-411f-a4d2-2817c1ec8d79"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>cad4bf66-e332-405d-bdda-284d84df1017</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002992</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003007</con:value></con:property><con:property><con:name>customerKey2</con:name></con:property><con:property><con:name>handleKey2</con:name></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with params" id="9324561b-5b23-45c7-8bca-8dde267ae699"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with params" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
      "ip":{"ip":"10.190.29.140"}
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0800112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestSuite#customerKey}",
         "adresseId":"${#TestSuite#handleKey}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestSuite#customerKey}",
         "adresseId":"${#TestSuite#handleKey}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestSuite#customerKey}",
         "adresseId":"${#TestSuite#handleKey}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Simple Contains" id="d12be6d3-4d9e-48ce-a035-f495150d02b0" name="Error returned must be"><con:configuration><token>"reasons":[{"source":"parametre[1].valeur","error":"1.1.57","errorMessage":"Format MSISDN invalide.","values":["mvno_conso"]}]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${1.createDraftOneOfferOneChoice#refDraftGlobal}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">7d8c62b6-b24c-4749-a87d-9896dfab2514</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>094d7ca7-b020-4c59-b1f4-1b29e058a2c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9f90252-a48a-45cf-9bdc-a47cb1ad763f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="2b3f8412-1e97-4206-8f53-cf8df31263ee" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.05 Transform failed_referenceChoix not existed" searchProperties="true" maxResults="0" disabled="true"><con:settings/><con:testStep type="calltestcase" name="1.createDraftOneOfferOneChoice" id="97e2eb7d-62cc-4944-a32a-f30cc3e57335"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>cad4bf66-e332-405d-bdda-284d84df1017</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002993</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003008</con:value></con:property><con:property><con:name>customerKey2</con:name></con:property><con:property><con:name>handleKey2</con:name></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform to command failed_Check exception" id="c1e62e8a-c5ae-447e-90d5-4eb1cebd760e"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform to command failed_Check exception" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
     "ip":{"ip":"190.10.29.140"}
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "abc",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "abc",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestSuite#customerKey}",
         "adresseId":"${#TestSuite#handleKey}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestSuite#customerKey}",
         "adresseId":"${#TestSuite#handleKey}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestSuite#customerKey}",
         "adresseId":"${#TestSuite#handleKey}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Simple Contains" id="279c5641-7dbb-4f91-beac-f12fa348780e" name="Contains"><con:configuration><token>{"reasons":[{"source":"parametre[0].referenceChoix","error":"1.1.29","errorMessage":"La rfrence abc nexiste pas parmi les choix.","values":["abc"]},{"source":"parametre[1].referenceChoix","error":"1.1.29","errorMessage":"La rfrence abc nexiste pas parmi les choix.","values":["abc"]}]}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${1.createDraftOneOfferOneChoice#refDraftGlobal}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>094d7ca7-b020-4c59-b1f4-1b29e058a2c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9f90252-a48a-45cf-9bdc-a47cb1ad763f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="0d51eb30-0a61-410c-9f6d-3c60240f37ae" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02. Transform successfully with no param_avfwEssentiel" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="bdc72714-071e-4e9a-8f16-a4b7d21e5dcb"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>003002922</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value>LIC-00002296</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="7394b360-add5-4d59-8c9b-4aca4ef61e8a"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey1",'6002367491')
testRunner.testCase.setPropertyValue( "handleKey1",'00001006956')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigne",null)
testRunner.testCase.getTestStepByName("1.createDraftOneOfferOneChoice").setPropertyValue("refDraftGlobal",null)
testRunner.testCase.getTestStepByName("1.createDraftOneOfferOneChoice").setPropertyValue("refLigneGlobal",null)


</script></con:config></con:testStep><con:testStep type="calltestcase" name="1.createDraftOneOfferOneChoice" id="4eababfd-60b6-4044-b3e1-1621bd2b2d43"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>c5c7140a-49c8-4c3e-8b68-8cfdd2c3eda3</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003216</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>6587392d-af0f-432d-afee-af299654b696</con:value></con:property><con:property><con:name>customerKey1</con:name></con:property><con:property><con:name>handleKey1</con:name></con:property><con:property><con:name>refLigneGlobal</con:name><con:value xsi:nil="true"/></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refLigneGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande without params" id="2cdfd508-e342-4a9f-9a35-df51243cf52c"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande without params" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ts": 1411654933,
      "ip": "10.190.29.140"
    }
  },
     "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey1}",
         "adresseId":"${#TestCase#handleKey1}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey1}",
         "adresseId":"${#TestCase#handleKey1}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey1}",
         "adresseId":"${#TestCase#handleKey1}",
         "tva":"00"
      }
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="de120654-314f-499a-b88a-bad7fadefd53" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="1827bc99-dea5-4df0-867b-69e4829a80a7" name="Contains"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${1.createDraftOneOfferOneChoice#refDraftGlobal}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="2e64fdc5-d2cc-46a9-af45-e21a5aa8f276"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommande</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande without params</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande without params</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="3. Check the draft is transferred to commande_Transfer successfully" id="14dff98f-5b1a-4afc-9b9e-24ab5a27d6ff"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from commande where reference = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="reference of Commande must be1"><con:configuration><token>&lt;COMMANDE.REFERENCE>${commandInfo#refCommand}&lt;/COMMANDE.REFERENCE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="2dd6df19-6a11-44ac-9ddd-094a84bf5348" name="reference of Draft transferred to Commande must be"><con:configuration><token>&lt;COMMANDE.REFERENCEDRAFT>${refDraftGlobal}&lt;/COMMANDE.REFERENCEDRAFT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="4. Check the commandLigne is created successfully" id="5b287eaf-ebfa-45ae-9276-1574dfcfbf2c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commandeligne` where commandeId = (select id from commande where reference = "${commandInfo#refCommand}");</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Only one commandLigne is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="397c1681-3bd5-412b-a58a-61038d910f20" name="Reference Selection must be"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNE.REFERENCEOFFRE[1]</path><content>avfw.essentiel</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommandLigne" id="81d5be04-7851-4ca5-a472-220de2fb31e9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>4. Check the commandLigne is created successfully</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNE.REFERENCE[1]</con:sourcePath><con:targetType>refCommandLigne</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="5. Check no commandLigneDetail is created" id="da6a114b-dffd-4f04-aac9-233af15243dc"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commandelignedetail` where commandeLigneId = (SELECT id FROM `commandeligne` where commandeId = (select id from commande where reference = "${commandInfo#refCommand}"));</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="NO commandLigneDetail is created"><con:configuration><path>count(//Row)</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">003002922</con:value></con:property><con:property><con:name>customerKey1</con:name><con:value>6002367491</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>00001006956</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>094d7ca7-b020-4c59-b1f4-1b29e058a2c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9f90252-a48a-45cf-9bdc-a47cb1ad763f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>81d5be04-7851-4ca5-a472-220de2fb31e9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bdc72714-071e-4e9a-8f16-a4b7d21e5dcb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7394b360-add5-4d59-8c9b-4aca4ef61e8a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="26159fd4-99e5-43cd-b2e6-d5f52b49a5c2" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03. Transform successfully with no params_mvnoConso with Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="d4322d6c-bfab-498f-8dc3-1910e49f4caa"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>200009204</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value>LIC-00002253</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="838a997e-8b61-4fe9-9415-0bab1e0cc744"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey2",'192112')
testRunner.testCase.setPropertyValue( "handleKey2",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.setPropertyValue("refCommandLigneGlobal",null)
testRunner.testCase.setPropertyValue("Promo1",null)
testRunner.testCase.setPropertyValue("Promo2",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigne",null)
testRunner.testCase.getTestStepByName("1.createDraftOneOfferOneChoice").setPropertyValue("refDraftGlobal",null)
testRunner.testCase.getTestStepByName("1.createDraftOneOfferOneChoice").setPropertyValue("refDraftLigneGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1.createDraftOneOfferOneChoice" id="5fd9cc77-108c-4d22-a9ea-33cc404d43a6"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>de4f846c-30c6-4009-99fa-1d548af5c9a0</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003174</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003194</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with params" id="c19ea678-b74e-4f47-9978-8c9602712092"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with params" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
      "ip":{"ip":"190.10.29.140"}
   },
    "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"102008617",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey2}",
         "adresseId":"${#TestCase#handleKey2}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="30f940d7-8a4d-4d5c-97b3-e10f145d7995" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refDraft" value="${1.createDraftOneOfferOneChoice#refDraftGlobal}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommande" id="2b4049ad-6b7e-4a8e-b991-a97a6bbe460f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommande</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with params</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with params</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="3. Check the draft is transferred to commande_Transfer successfully" id="3ba9c9c1-7237-4a38-81d1-0c1d018ca530"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from commande where reference = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="reference of Commande must be1"><con:configuration><token>&lt;COMMANDE.REFERENCE>${commandInfo#refCommand}&lt;/COMMANDE.REFERENCE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="2dd6df19-6a11-44ac-9ddd-094a84bf5348" name="reference of Draft transferred to Commande must be"><con:configuration><token>&lt;COMMANDE.REFERENCEDRAFT>${refDraftGlobal}&lt;/COMMANDE.REFERENCEDRAFT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="4. Check the commandLigne is created successfully" id="e13256d4-cb41-40a2-a409-5546f861494e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commandeligne` where commandeId = (select id from commande where reference = "${commandInfo#refCommand}");</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Only one commandLigne is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="397c1681-3bd5-412b-a58a-61038d910f20" name="Reference Selection must be"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNE.REFERENCEOFFRE[1]</path><content>MVNO</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommandLigne" id="b6d6dd3a-a32c-46dc-90d1-3933616562cc"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>4. Check the commandLigne is created successfully</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNE.REFERENCE[1]</con:sourcePath><con:targetType>refCommandLigne</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigneGlobal</con:name><con:sourceType>refCommandLigne</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:targetType>refCommandLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="5. Check the commandLigneDetail is created successfully" id="6275db54-4bbd-4c1f-954a-fd37e9e7b972"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commandelignedetail` where commandeLigneId = (SELECT id FROM `commandeligne` where commandeId = (select id from commande where reference = "${commandInfo#refCommand}"));</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Two commandLigneDetail is created"><con:configuration><path>count(//Row)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4ee6e65a-6fbc-447d-8185-c4362807905c" name="Reference Choice must be"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNEDETAIL.REFERENCECHOIX[1]</path><content>mvno_conso</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="189912cd-7a45-4188-b8d6-8c8147721802" name="Reference command ligne detail must be"><con:configuration><token>&lt;COMMANDELIGNEDETAIL.REFERENCECOMMANDELIGNEDETAIL>${commandInfo#refCommandLigne}-1&lt;/COMMANDELIGNEDETAIL.REFERENCECOMMANDELIGNEDETAIL></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Select reduction to check_Eligible must be FALSE" id="10479912-2a27-4203-95d6-fd72058bd919" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM reduction where referenceDraft = "${commandInfo#refCommand}" order by codeCatalogueReduction ASC;</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - Three reductions are found" disabled="true"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9d5af93a-1166-4ad4-bb26-d7b16a923b43" name="Reference draft must be refCommand"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${commandInfo#refCommand}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="5dfae0ad-d71a-4326-ad77-9a842065cf4b" name="Not Contains"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer code reduction" id="9594e59d-18e1-4c76-851e-26fe1aa3bc5d" disabled="true"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo1</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Select reduction to check_Eligible must be FALSE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>Promo1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo2</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Select reduction to check_Eligible must be FALSE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[2]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>Promo2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">200009204</con:value></con:property><con:property><con:name>customerKey2</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey2</con:name><con:value>511708010</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Promo2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refCommandLigneGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LIC-00002253</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>094d7ca7-b020-4c59-b1f4-1b29e058a2c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9f90252-a48a-45cf-9bdc-a47cb1ad763f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4322d6c-bfab-498f-8dc3-1910e49f4caa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b6d6dd3a-a32c-46dc-90d1-3933616562cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>838a997e-8b61-4fe9-9415-0bab1e0cc744</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="b93b868a-13f5-479a-9046-5beb3a9f7314" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="04. Transform successfully a draft one offer multi choices_mvnoConso with Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="17410c6c-0c24-4cb9-aa0f-568fc28fb838"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>004700236</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value>LIC-00002380</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="7eb34575-7517-4556-9b6f-c911812b8f64"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.setPropertyValue("refCommandLigneGlobal",null)
testRunner.testCase.setPropertyValue("Promo1",null)
testRunner.testCase.setPropertyValue("Promo2",null)
testRunner.testCase.setPropertyValue("Promo3",null)
testRunner.testCase.setPropertyValue("Promo4",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("1.createDraftOneOfferMultiChoices").setPropertyValue("refDraftGlobal",null)
testRunner.testCase.getTestStepByName("1.createDraftOneOfferMultiChoices").setPropertyValue("refDraftLigneGlobal",null)

</script></con:config></con:testStep><con:testStep type="calltestcase" name="1.createDraftOneOfferMultiChoices" id="3f35e8d9-7869-4557-9cea-b441761c5930"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>de4f846c-30c6-4009-99fa-1d548af5c9a0</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003307</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003328</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with params" id="c4b3a070-ef86-4757-842e-a4edd4aa8697"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with params" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
      "ip":{"ip":"10.190.29.140"}
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42E123456789"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0712345678"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42P123456789"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0612345678"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"${#TestCase#handleKey3}",
         "tva":"11"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"102008617",
         "tva":"11"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"${#TestCase#handleKey3}",
         "tva":"11"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="31bab8b5-267a-4c3d-bd93-c8cbc300cbe5" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${1.createDraftOneOfferMultiChoices#refDraftGlobal}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="8321b8c3-5c6e-4c6b-be2c-d34e1269e4b7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommande</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with params</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with params</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="3. Check the draft is transferred to commande_Transfer successfully" id="f23d734f-2ed0-4b7c-845b-f25334564c08"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from commande where reference = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="reference of Commande must be1"><con:configuration><token>&lt;COMMANDE.REFERENCE>${commandInfo#refCommand}&lt;/COMMANDE.REFERENCE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="2dd6df19-6a11-44ac-9ddd-094a84bf5348" name="reference of Draft transferred to Commande must be"><con:configuration><token>&lt;COMMANDE.REFERENCEDRAFT>${refDraftGlobal}&lt;/COMMANDE.REFERENCEDRAFT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="4. Check the commandLigne is created successfully" id="4b285e20-abc4-4bc0-8f21-1d93393542df"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commandeligne` where commandeId = (select id from commande where reference = "${commandInfo#refCommand}");</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Only one commandLigne is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="397c1681-3bd5-412b-a58a-61038d910f20" name="Reference Selection must be"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNE.REFERENCEOFFRE[1]</path><content>MVNO</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommandLigne" id="f6866457-2f94-425b-9726-14fc3512952c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>4. Check the commandLigne is created successfully</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNE.REFERENCE[1]</con:sourcePath><con:targetType>refCommandLigne</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigneGlobal</con:name><con:sourceType>refCommandLigne</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:sourcePath/><con:targetType>refCommandLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="5. Check the commandLigneDetail is created successfully" id="bffc08b3-e5cb-44e7-93f9-ae72135646d8"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commandelignedetail` where commandeLigneId = (SELECT id FROM `commandeligne` where commandeId = (select id from commande where reference = "${commandInfo#refCommand}"));</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Two commandLigneDetails is created"><con:configuration><path>count(//Row)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4ee6e65a-6fbc-447d-8185-c4362807905c" name="Reference Choice must be"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNEDETAIL.REFERENCECHOIX[1]</path><content>mvno_conso</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a8451a4f-0ab3-4cd3-a9d0-61344731c4fd" name="Reference command ligne detail 1 must be"><con:configuration><token>&lt;COMMANDELIGNEDETAIL.REFERENCECOMMANDELIGNEDETAIL>${commandInfo#refCommandLigne}-1&lt;/COMMANDELIGNEDETAIL.REFERENCECOMMANDELIGNEDETAIL></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a8451a4f-0ab3-4cd3-a9d0-61344731c4fd" name="Reference command ligne detail 2 must be"><con:configuration><token>&lt;COMMANDELIGNEDETAIL.REFERENCECOMMANDELIGNEDETAIL>${commandInfo#refCommandLigne}-2&lt;/COMMANDELIGNEDETAIL.REFERENCECOMMANDELIGNEDETAIL></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Select reduction to check_Eligible must be FALSE" id="aee534fa-5e0f-460a-80c4-2474db8c3d39" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM reduction where referenceDraft = "${commandInfo#refCommand}" order by codeCatalogueReduction ASC;</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - Three reductions are found" disabled="true"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9d5af93a-1166-4ad4-bb26-d7b16a923b43" name="Reference draft must be refCommand"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${commandInfo#refCommand}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="5dfae0ad-d71a-4326-ad77-9a842065cf4b" name="Not Contains"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer code reduction" id="29ff81fc-c812-487f-9671-f434e6704426"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo1</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Select reduction to check_Eligible must be FALSE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>Promo1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo2</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Select reduction to check_Eligible must be FALSE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[2]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>Promo2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>Promo3</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Select reduction to check_Eligible must be FALSE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[3]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>Promo3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>Promo4</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Select reduction to check_Eligible must be FALSE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[4]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>Promo4</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">004700236</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Promo2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refCommandLigneGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LIC-00002380</con:value></con:property><con:property><con:name>Promo3</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Promo4</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="1727ab8b-9657-4e07-b4db-cef3539c93ee" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="05. Transform successfully a draft one offer multi choices_mvnoPack with Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="954147d5-8674-4558-b1be-290a7d74969b"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>502002102</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value>LIC-00002255</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="aacd27f8-4913-4765-a95a-27ace49d51af"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey4",'192112')
testRunner.testCase.setPropertyValue( "handleKey4",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.setPropertyValue("refCommandLigneGlobal",null)
testRunner.testCase.setPropertyValue("Promo1",null)
testRunner.testCase.setPropertyValue("Promo2",null)
testRunner.testCase.setPropertyValue("Promo3",null)
testRunner.testCase.setPropertyValue("Promo4",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("1.createDraftOneOfferMultiChoices").setPropertyValue("refDraftGlobal",null)
testRunner.testCase.getTestStepByName("1.createDraftOneOfferMultiChoices").setPropertyValue("refDraftLigneGlobal",null)

</script></con:config></con:testStep><con:testStep type="calltestcase" name="1.createDraftOneOfferMultiChoices" id="5343e05a-ada9-4981-81bc-a0c6c6a6a6a7"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>cf053310-7ebc-4c65-b3da-1a01ead5b478</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003176</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003196</con:value></con:property><con:property><con:name>customerKey4</con:name></con:property><con:property><con:name>handleKey4</con:name></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with params" id="0f373398-31ec-41e7-a594-3f507f9d8af2"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with params" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
           "ip": {
      "ip": "10.190.29.140",
      "ts": "1461033718"
    }
   },
    "parametres": [ 
       {
          "referenceChoix" : "mvno_pack",
          "cle": "Rio",
          "valeur": "42P123456789"
       },
       {
          "referenceChoix" : "mvno_pack",
          "cle": "MSISDN",
          "valeur": "0912345678"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey4}",
         "adresseId":"${#TestCase#handleKey4}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey4}",
         "adresseId":"102008617",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey4}",
         "adresseId":"${#TestCase#handleKey4}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="31bab8b5-267a-4c3d-bd93-c8cbc300cbe5" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${1.createDraftOneOfferMultiChoices#refDraftGlobal}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="47899414-d452-4c6d-a010-41aab8432d66"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommande</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with params</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with params</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="3. Check the draft is transferred to commande_Transfer successfully" id="2c26018a-e352-420c-a356-86604de732eb"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from commande where reference = "${commandInfo#refCommand}";</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="reference of Commande must be1"><con:configuration><token>&lt;COMMANDE.REFERENCE>${commandInfo#refCommand}&lt;/COMMANDE.REFERENCE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="2dd6df19-6a11-44ac-9ddd-094a84bf5348" name="reference of Draft transferred to Commande must be"><con:configuration><token>&lt;COMMANDE.REFERENCEDRAFT>${refDraftGlobal}&lt;/COMMANDE.REFERENCEDRAFT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="4. Check the commandLigne is created successfully" id="5a2176e7-0721-4ade-a9cd-7a3d314784c7"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commandeligne` where commandeId = (select id from commande where reference = "${commandInfo#refCommand}");</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Only one commandLigne is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="397c1681-3bd5-412b-a58a-61038d910f20" name="Reference Selection must be"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNE.REFERENCEOFFRE[1]</path><content>MVNO</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommandLigne" id="94273d8e-6226-4d3a-9bb6-51275b5ee21b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>4. Check the commandLigne is created successfully</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNE.REFERENCE[1]</con:sourcePath><con:targetType>refCommandLigne</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigneGlobal</con:name><con:sourceType>refCommandLigne</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:targetType>refCommandLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="5. Check the commandLigneDetail is created successfully" id="14dcb09d-6c09-4005-8c71-0056dc630ace"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commandelignedetail` where commandeLigneId = (SELECT id FROM `commandeligne` where commandeId = (select id from commande where reference = "${commandInfo#refCommand}"));</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Two commandLigneDetails is created"><con:configuration><path>count(//Row)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4ee6e65a-6fbc-447d-8185-c4362807905c" name="Reference Choice must be"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNEDETAIL.REFERENCECHOIX[1]</path><content>mvno_pack</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a8451a4f-0ab3-4cd3-a9d0-61344731c4fd" name="Reference command ligne detail 1 must be"><con:configuration><token>&lt;COMMANDELIGNEDETAIL.REFERENCECOMMANDELIGNEDETAIL>${commandInfo#refCommandLigne}-1&lt;/COMMANDELIGNEDETAIL.REFERENCECOMMANDELIGNEDETAIL></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a8451a4f-0ab3-4cd3-a9d0-61344731c4fd" name="Reference command ligne detail 2 must be"><con:configuration><token>&lt;COMMANDELIGNEDETAIL.REFERENCECOMMANDELIGNEDETAIL>${commandInfo#refCommandLigne}-2&lt;/COMMANDELIGNEDETAIL.REFERENCECOMMANDELIGNEDETAIL></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Select reduction to check_Eligible must be FALSE" id="c570c15c-bace-4b0c-ba9e-5c4869d33ee0"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM reduction where referenceDraft = "${commandInfo#refCommand}" order by codeCatalogueReduction ASC;</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - Three reductions are found" disabled="true"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9d5af93a-1166-4ad4-bb26-d7b16a923b43" name="Reference draft must be refCommand"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${commandInfo#refCommand}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="5dfae0ad-d71a-4326-ad77-9a842065cf4b" name="Not Contains" disabled="true"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer code reduction" id="bb96c8e0-8153-46e8-a010-0f21991d92c0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo1</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Select reduction to check_Eligible must be FALSE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>Promo1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo2</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Select reduction to check_Eligible must be FALSE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[2]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>Promo2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>Promo3</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Select reduction to check_Eligible must be FALSE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[3]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>Promo3</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>Promo4</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Select reduction to check_Eligible must be FALSE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[4]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>Promo4</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath xsi:nil="true"/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">502002102</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">REM_MVNO_ISP</con:value></con:property><con:property><con:name>Promo2</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">REM_MVNO_ISP_ELITE</con:value></con:property><con:property><con:name>refCommandLigneGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">LIC-00002255</con:value></con:property><con:property><con:name>Promo3</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">REM_MVNO_SIM</con:value></con:property><con:property><con:name>Promo4</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">REM_MVNO_SIM_ELITE</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="b331b432-34d3-4d50-ba3b-f82514799af9" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="06.01 Transform successfully_A draft with reduction_avfw.essentiel" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="6b13ecf9-a5a2-41eb-ac40-69448cc8ec96"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003177</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>006002225</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="5c699c9c-2a71-4876-af3f-6cb6386a1823"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey1",'6002367491')
testRunner.testCase.setPropertyValue( "handleKey1",'00001006956')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.setPropertyValue("redDraft",null)
testRunner.testCase.setPropertyValue("Promo1",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("1. Create a draft with reduction of draft_Antivirus").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with reduction of draft_Antivirus" id="4cd7896f-a1ac-4121-b68b-c7881ac9d3b0"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>98ed5239-fb07-4f44-9498-d6707da2cd13</con:targetTestCase><con:properties><con:property><con:name>customerKey1</con:name><con:value>6002367491</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>00001006956</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003177</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003197</con:value></con:property></con:properties><con:returnProperties><con:entry>customerKey1</con:entry><con:entry>handleKey1</con:entry><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to commandInfo" id="3b00504a-c80d-4177-8cbd-cf582e1530ed"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with reduction of draft_Antivirus</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with reduction" id="7ac3a708-d906-498e-82b0-2b6a08bd8abd"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with reduction" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ts": 1411654933,
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="31bab8b5-267a-4c3d-bd93-c8cbc300cbe5" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a4e26616-452c-4a7e-80fb-3f27b6389eda" name="Contains"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="8b5c5c34-5eb0-48a9-875f-403f6150e73f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommande</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with reduction</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with reduction</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Select reduction to check_Eligible must be TRUE" id="12449225-5549-4c36-9d04-b5a2d732c7fc"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM reduction where referenceDraft = "${commandInfo#refCommand}" order by codeCatalogueReduction ASC;</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - One reduction is found" disabled="true"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="feabb239-c7a6-4bed-ad42-4271dcddb6a0" name="code catalog reduction must be"><con:configuration><token>&lt;REDUCTION.CODECATALOGUEREDUCTION>0012345&lt;/REDUCTION.CODECATALOGUEREDUCTION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="06f9cc6d-932f-4808-8bed-4622c904693c" name="referenceDraft must be refCommand"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${commandInfo#refCommand}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b3ed1327-e3a6-40e7-bd94-1c6623249b0d" name="Reference Ligne must be null"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNE/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="67fe79cd-bde6-4f8c-a524-1483035db714" name="Reference ligne detail must be null"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNEDETAIL/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8f1d6bf-424a-4bd1-a81e-bfe084780bbb" name="Reduction fraise must be null"><con:configuration><token>&lt;REDUCTION.REFERENCEFRAIS/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="676fb18e-e3eb-4d7f-bec4-4e05c06f153a" name="Reference tarif must be null"><con:configuration><token>&lt;REDUCTION.REFERENCETARIF/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="f3bb10cc-c3de-474f-b44c-5e1e9f57945e" name="Not Contains Eligible FALSE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>0&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer code reduction" id="13ead507-c3ec-4421-8353-09e595078072"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>redDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2.1 Select reduction to check_Eligible must be TRUE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>redDraft</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>Promo1</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2.1 Select reduction to check_Eligible must be TRUE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[2]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>Promo1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Get promotion to check_avfw.essentiel" id="7de4ae34-fe91-4382-8ba6-f3ee83f9fdcf" disabled="true"><con:settings/><con:config service="/default/promo" resourcePath="/discount.qualifier.ws-1.0.x/promo/offer/{offerCode}/price/{priceCode}" methodName="getPromoByOfferCodeAndPrice" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get promotion to check_avfw.essentiel" id="25bf5c2e-533d-452b-85d5-5747b5a22479" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/discount.qualifier.ws-1.0.x/promo/offer/avfw.essentiel/price/1</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="6e5935a7-280c-48c1-97e3-dcb9e61e2dc5" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="priceCode" value="1"/>
  <con:entry key="offerCode" value="avfw.essentiel"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">006002225</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>handleKey4</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>customerKey1</con:name><con:value>6002367491</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>00001006956</con:value></con:property><con:property><con:name>redDraft</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0012345</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Promo2</con:name><con:value>INTYSOOESS2M2013</con:value></con:property><con:property><con:name>Promo3</con:name><con:value>MOBSOO2M2014</con:value></con:property><con:property><con:name>Promo4</con:name><con:value>REM10PC</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>12449225-5549-4c36-9d04-b5a2d732c7fc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>13ead507-c3ec-4421-8353-09e595078072</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="2f6dd230-4a67-48fc-b4d6-5baabba52c69" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="06.02 Transform successfully_A draft with reduction_mvnoConso" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="6d89ad1d-0061-487f-a80b-5dc995169f66"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003206</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>181202000</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="322d14c2-739b-4616-baa2-ec7f0eeef493"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.setPropertyValue("redDraft",null)
testRunner.testCase.setPropertyValue("Promo1",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("1. Create a draft with reduction of draft_mvnoConso").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with reduction of draft_mvnoConso" id="aeffaa08-5252-434c-908f-f2bfce3a05b1"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>eeac9de4-e3ba-43ca-b26d-64d5977bd5f5</con:targetTestCase><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003206</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003226</con:value></con:property></con:properties><con:returnProperties><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to commandInfo" id="f300fbe8-7142-4b1f-b898-3d96e06ae021"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with reduction of draft_mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with reduction" id="057e8e0f-fb35-4864-ae6b-0b0365f7e9d3"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with reduction" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
           "ip": {
      "ip": "10.190.29.140",
      "ts": "1461033718"
    }
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"${#TestCase#handleKey3}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"${#TestCase#handleKey3}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"${#TestCase#handleKey3}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="31bab8b5-267a-4c3d-bd93-c8cbc300cbe5" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a4e26616-452c-4a7e-80fb-3f27b6389eda" name="Contains"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="70fb9231-2b00-49ec-bee8-9eff07f0ee9f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommande</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with reduction</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with reduction</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Select reduction to check_Eligible must be TRUE" id="f9656f05-50b4-4b2d-956d-55da470d6084"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM reduction where referenceDraft = "${commandInfo#refCommand}" order by codeCatalogueReduction ASC;</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - Three reduction are found" disabled="true"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="feabb239-c7a6-4bed-ad42-4271dcddb6a0" name="Code catalog reduction must be"><con:configuration><token>&lt;REDUCTION.CODECATALOGUEREDUCTION>0112345&lt;/REDUCTION.CODECATALOGUEREDUCTION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="06f9cc6d-932f-4808-8bed-4622c904693c" name="referenceDraft must be refCommand"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${commandInfo#refCommand}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b3ed1327-e3a6-40e7-bd94-1c6623249b0d" name="Reference Ligne must be null"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNE/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="67fe79cd-bde6-4f8c-a524-1483035db714" name="Reference ligne detail must be null"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNEDETAIL/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8f1d6bf-424a-4bd1-a81e-bfe084780bbb" name="Reduction fraise must be null"><con:configuration><token>&lt;REDUCTION.REFERENCEFRAIS/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="676fb18e-e3eb-4d7f-bec4-4e05c06f153a" name="Reference tarif must be null"><con:configuration><token>&lt;REDUCTION.REFERENCETARIF/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a52ac1a8-c3c1-4eb7-8a12-8a9ced5bd29a" name="Not Contains Eligible FALSE" disabled="true"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>0&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer code reduction" id="fd825cc3-709d-4d06-ba76-84e34320cad9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>redDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2.1 Select reduction to check_Eligible must be TRUE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>redDraft</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>Promo1</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2.1 Select reduction to check_Eligible must be TRUE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[2]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>Promo1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Get promotion to check_MVNO" id="ac36f435-1e2f-47a4-8dd8-5c69dccdbee1" disabled="true"><con:settings/><con:config service="/default/promo" resourcePath="/discount.qualifier.ws-1.0.x/promo/offer/{offerCode}/price/{priceCode}" methodName="getPromoByOfferCodeAndPrice" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get promotion to check_MVNO" id="25bf5c2e-533d-452b-85d5-5747b5a22479" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/discount.qualifier.ws-1.0.x/promo/offer/MVNO/price/1</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="71ad5e29-4db1-40be-8ec7-e6fefeed5e87" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="priceCode" value="1"/>
  <con:entry key="offerCode" value="MVNO"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">181202000</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>redDraft</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0112345</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">REM_MVNO_ISP</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9656f05-50b4-4b2d-956d-55da470d6084</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fd825cc3-709d-4d06-ba76-84e34320cad9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="15500887-8965-4067-b149-599b21a73f58" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="07. Transform successfully_A draft with reduction of draftLigne_mvnoConso" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="e781c1dd-e445-4861-a967-96dad40e119d"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003308</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>003002773</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="0d2978e8-c30f-4641-a2e5-184e412ee0f7"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.setPropertyValue("redDraftLigne",null)
testRunner.testCase.setPropertyValue("Promo1",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("1. Create a draft with reduction of draftLigne_mvnoConso").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with reduction of draftLigne_mvnoConso" id="70fba63c-ab0c-42c7-8e88-3c1616bfe0ae"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>700fe54f-d074-4c7c-92eb-1b93203065b3</con:targetTestCase><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003308</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003329</con:value></con:property></con:properties><con:returnProperties><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to commandInfo" id="d3e17ac4-55b2-4ae9-ad22-8e77f424989e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with reduction of draftLigne_mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with reduction" id="2d4e0260-848c-4b5b-ab71-7e6bd9b6949a"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with reduction" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
           "ip": {
      "ip": "10.190.29.140",
      "ts": "1461033718"
    }
   },
      "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"${#TestCase#handleKey3}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"${#TestCase#handleKey3}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"${#TestCase#handleKey3}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="31bab8b5-267a-4c3d-bd93-c8cbc300cbe5" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a4e26616-452c-4a7e-80fb-3f27b6389eda" name="Contains"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="50887874-3ea0-42bd-b6c8-b733f5f7c86e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommande</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with reduction</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with reduction</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Select reduction to check_Eligible must be TRUE" id="3ad6b2ae-972b-4286-971a-cf7cb79a80f4"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM reduction where referenceDraft = "${commandInfo#refCommand}" order by codeCatalogueReduction ASC;</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - Three reduction is found" disabled="true"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="feabb239-c7a6-4bed-ad42-4271dcddb6a0" name="Code catalog reduction must be"><con:configuration><token>&lt;REDUCTION.CODECATALOGUEREDUCTION>0212345&lt;/REDUCTION.CODECATALOGUEREDUCTION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="06f9cc6d-932f-4808-8bed-4622c904693c" name="Reference draft must be refCommand"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${commandInfo#refCommand}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b3ed1327-e3a6-40e7-bd94-1c6623249b0d" name="Reference Ligne must be refCommandLigne" disabled="true"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNE>${commandInfo#refCommandLigne}&lt;/REDUCTION.REFERENCELIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="67fe79cd-bde6-4f8c-a524-1483035db714" name="Reference ligne detail must be null"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNEDETAIL/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8f1d6bf-424a-4bd1-a81e-bfe084780bbb" name="Reduction fraise must be null"><con:configuration><token>&lt;REDUCTION.REFERENCEFRAIS/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="676fb18e-e3eb-4d7f-bec4-4e05c06f153a" name="Reference tarif must be null"><con:configuration><token>&lt;REDUCTION.REFERENCETARIF/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="b8c9e3c7-4028-4d2d-950b-fe1362b1f263" name="Not Contains" disabled="true"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>0&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer code reduction" id="6a6de6f5-454c-40ab-b7c6-3498721aded5"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>redDraftLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2.1 Select reduction to check_Eligible must be TRUE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>redDraftLigne</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>Promo1</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2.1 Select reduction to check_Eligible must be TRUE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[2]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>Promo1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Get promotion to check" id="b12ffd95-dc99-49fa-93c4-7f55993ffa29" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PromoWSImplServiceSoapBinding</con:interface><con:operation>getPromoByOfferCodeAndPriceCode</con:operation><con:request name="Get promotion to check" id="070dacda-ed3d-4df9-8f4c-df83bd092206" defaultOutgoingWss="" defaultIncomingWss=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.119.11:8080/promos-management-ws-1.0.x/services/promo</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://www.nordnet.com/promo/schemas">
   <soapenv:Header/>
   <soapenv:Body>
      <sch:getPromoByCodeAndPriceRequest>
         <offerCode>MVNO</offerCode>
      </sch:getPromoByCodeAndPriceRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="4f5785ab-4093-4b94-a5b6-f1828b6aa610"/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">003002773</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0212345</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">REM_MVNO_ISP</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3ad6b2ae-972b-4286-971a-cf7cb79a80f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6a6de6f5-454c-40ab-b7c6-3498721aded5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="4023001f-206d-44e6-8a6f-08d119bb91ee" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="08. Transform successfully_A draft with reduction of draftLigneDetail_mvnoPack" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="3a8fa0cb-7e6d-41e8-989e-8b020221462d"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003306</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>702002403</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="ce1144e0-1c00-434e-a31e-a17a7f32dcbf"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.setPropertyValue("redDraftLigneDetail",null)
testRunner.testCase.setPropertyValue("Promo1",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("1. Create a draft with reduction of draftLigneDetail_mvnoPack").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with reduction of draftLigneDetail_mvnoPack" id="ac83b7b1-b4c6-488c-9bed-e2eebccea648"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>3aee6d58-f49d-4209-914e-3e58445dc822</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003306</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003327</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property></con:properties><con:returnProperties><con:entry>customerKey4</con:entry><con:entry>handleKey4</con:entry><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to commandInfo" id="e043713d-d46b-4105-a4ed-55fdeeef1d77"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with reduction of draftLigneDetail_mvnoPack</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with reduction" id="2bb2e57e-efcd-4fab-b0b4-050c367dc139"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with reduction" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
           "ip": {
      "ip": "10.190.29.140",
      "ts": "1461033718"
    }      
    }
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_pack",
          "cle": "Rio",
          "valeur": "42E123456789"
       },
       {
          "referenceChoix" : "mvno_pack",
          "cle": "MSISDN",
          "valeur": "0712345678"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey4}",
         "adresseId":"${#TestCase#handleKey4}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey4}",
         "adresseId":"${#TestCase#handleKey4}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey4}",
         "adresseId":"${#TestCase#handleKey4}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="31bab8b5-267a-4c3d-bd93-c8cbc300cbe5" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a4e26616-452c-4a7e-80fb-3f27b6389eda" name="Contains"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="f66fb481-920f-43c3-8a13-5a656f4f60e6"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommande</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with reduction</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with reduction</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Select reduction to check_Eligible must be TRUE" id="96ce9319-1510-4a83-bdb7-d44f3da331fc"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM reduction where referenceDraft = "${commandInfo#refCommand}" order by codeCatalogueReduction ASC;</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - Three reductions are found" disabled="true"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="feabb239-c7a6-4bed-ad42-4271dcddb6a0" name="Code catalog reduction must be"><con:configuration><token>&lt;REDUCTION.CODECATALOGUEREDUCTION>0312345&lt;/REDUCTION.CODECATALOGUEREDUCTION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="06f9cc6d-932f-4808-8bed-4622c904693c" name="Reference draft must be refCommand"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${commandInfo#refCommand}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b3ed1327-e3a6-40e7-bd94-1c6623249b0d" name="Reference Ligne must be" disabled="true"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNE>${commandInfo#refCommandLigne}&lt;/REDUCTION.REFERENCELIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="67fe79cd-bde6-4f8c-a524-1483035db714" name="Reference ligne detail must be mvno_pack"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNEDETAIL>mvno_pack&lt;/REDUCTION.REFERENCELIGNEDETAIL>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8f1d6bf-424a-4bd1-a81e-bfe084780bbb" name="Reduction fraise must be null"><con:configuration><token>&lt;REDUCTION.REFERENCEFRAIS/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="676fb18e-e3eb-4d7f-bec4-4e05c06f153a" name="Reference tarif must be null"><con:configuration><token>&lt;REDUCTION.REFERENCETARIF/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="d8bf86f4-ce08-4338-933e-ba4517068033" name="Not Contains" disabled="true"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>0&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer code reduction" id="edf0e19a-0ae3-4459-ad89-094a0b56639f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>redDraftLigneDetail</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2.1 Select reduction to check_Eligible must be TRUE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>redDraftLigneDetail</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>Promo1</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2.1 Select reduction to check_Eligible must be TRUE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[5]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>Promo1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Get promotion to check" id="38d6891d-3cb4-44d5-8e7a-35dc0982a4ac" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PromoWSImplServiceSoapBinding</con:interface><con:operation>getPromoByOfferCodeAndPriceCode</con:operation><con:request name="Get promotion to check" id="070dacda-ed3d-4df9-8f4c-df83bd092206" defaultOutgoingWss="" defaultIncomingWss=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.119.11:8080/promos-management-ws-1.0.x/services/promo</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://www.nordnet.com/promo/schemas">
   <soapenv:Header/>
   <soapenv:Body>
      <sch:getPromoByCodeAndPriceRequest>
         <offerCode>MVNO</offerCode>
      </sch:getPromoByCodeAndPriceRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="4f5785ab-4093-4b94-a5b6-f1828b6aa610"/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">702002403</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>handleKey4</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0312345</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">REM_MVNO_SIM</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>96ce9319-1510-4a83-bdb7-d44f3da331fc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>edf0e19a-0ae3-4459-ad89-094a0b56639f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="5cebccc2-023b-4473-8ba1-223539a356ba" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="09. Transform successfully_A draft with reduction for Tarif of draftLigne_mvnoConso" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="1648bcce-9272-4c9e-9c55-7b5ea4b67925"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003262</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00003283</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>325000032</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="094d38ab-ce85-47b6-88a2-0df57c3c24df"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.setPropertyValue("redTarifDraftLigne",null)
testRunner.testCase.setPropertyValue("Promo1",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("1. Create a draft with reduction for Tarif of draftLigne_mvnoConso").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with reduction for Tarif of draftLigne_mvnoConso" id="95a2f2eb-01f8-430a-a29a-37074fe5d865"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>e5059340-00a6-4363-b072-773c13ee96c8</con:targetTestCase><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003262</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003283</con:value></con:property></con:properties><con:returnProperties><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to commandInfo" id="05bd26bc-98a8-4c96-bc60-91c22dbd0038"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with reduction for Tarif of draftLigne_mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigne</con:name><con:sourceType>refDraftLigneGlobal</con:sourceType><con:sourceStep>1. Create a draft with reduction for Tarif of draftLigne_mvnoConso</con:sourceStep><con:targetType>refDraftLigne</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with reduction" id="2d35f0a5-2d2c-4f7e-b968-3709914d9264"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with reduction" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
           "ip": {
      "ip": "10.190.29.140",
      "ts": "1461033718"
    }
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"${#TestCase#handleKey3}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"${#TestCase#handleKey3}",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"${#TestCase#handleKey3}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="31bab8b5-267a-4c3d-bd93-c8cbc300cbe5" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a4e26616-452c-4a7e-80fb-3f27b6389eda" name="Contains"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="a951e6f6-67c8-40ad-a1b5-4a8a06ef9378"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommande</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with reduction</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with reduction</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Select reduction to check_Eligible must be TRUE" id="71603cb0-0e0e-4522-8553-77cfcdcb5f03"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM reduction where referenceDraft = "${commandInfo#refCommand}" order by codeCatalogueReduction ASC;</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - Three reductions are found" disabled="true"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="feabb239-c7a6-4bed-ad42-4271dcddb6a0" name="Code catalog reduction must be"><con:configuration><token>&lt;REDUCTION.CODECATALOGUEREDUCTION>0612345&lt;/REDUCTION.CODECATALOGUEREDUCTION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="06f9cc6d-932f-4808-8bed-4622c904693c" name="Reference draft must be refCommand"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${commandInfo#refCommand}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b3ed1327-e3a6-40e7-bd94-1c6623249b0d" name="Reference Ligne must be" disabled="true"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNE>${commandInfo#refCommandLigne}&lt;/REDUCTION.REFERENCELIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="67fe79cd-bde6-4f8c-a524-1483035db714" name="Reference ligne detail must be null"><con:configuration><token>&lt;REDUCTION.REFERENCELIGNEDETAIL/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8f1d6bf-424a-4bd1-a81e-bfe084780bbb" name="Reduction fraise must be NULL"><con:configuration><token>&lt;REDUCTION.REFERENCEFRAIS/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="676fb18e-e3eb-4d7f-bec4-4e05c06f153a" name="Reference tarif must be"><con:configuration><token>&lt;REDUCTION.REFERENCETARIF>79&lt;/REDUCTION.REFERENCETARIF>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="10e852d3-3fdc-4fae-94e5-22d7e6005011" name="Not Contains" disabled="true"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>0&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="344e7a62-8d95-4558-8eeb-f63e9d1beb3f" name="XPath Match - Eligible of basePromo1 must be FALSE" disabled="true"><con:configuration><path>//Results[1]/ResultSet[1]/Row[2]/REDUCTION.ELIGIBLE</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4500db88-79ca-4161-9fec-00164316a0f5" name="XPath Match - Eligible of basePromo2 must be FALSE" disabled="true"><con:configuration><path>//Results[1]/ResultSet[1]/Row[3]/REDUCTION.ELIGIBLE</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer code reduction" id="900fe272-2eae-4bc6-a4c5-b8b93b7fd0a2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>redTarifDraftLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2.1 Select reduction to check_Eligible must be TRUE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>redTarifDraftLigne</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>Promo1</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2.1 Select reduction to check_Eligible must be TRUE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[2]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>Promo1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="request" name="Get promotion to check" id="a78fa846-fc5d-49a7-b476-916c8d6a74d3" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>PromoWSImplServiceSoapBinding</con:interface><con:operation>getPromoByOfferCodeAndPriceCode</con:operation><con:request name="Get promotion to check" id="070dacda-ed3d-4df9-8f4c-df83bd092206" defaultOutgoingWss="" defaultIncomingWss=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.119.11:8080/promos-management-ws-1.0.x/services/promo</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://www.nordnet.com/promo/schemas">
   <soapenv:Header/>
   <soapenv:Body>
      <sch:getPromoByCodeAndPriceRequest>
         <offerCode>MVNO</offerCode>
      </sch:getPromoByCodeAndPriceRequest>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="4f5785ab-4093-4b94-a5b6-f1828b6aa610"/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">325000032</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">REM_MVNO_ISP</con:value></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0612345</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>71603cb0-0e0e-4522-8553-77cfcdcb5f03</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>900fe272-2eae-4bc6-a4c5-b8b93b7fd0a2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="5758cc92-e1dd-406c-8f70-00188ee392f8" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="10. Transform successfully_A draft with many reductions no fraise_mvnoConso" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="10994931-8d0e-4ca3-b30c-3d31095e71a2"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003210</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>200005208</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="2e818359-7fea-4698-b809-2960d6f12ddc"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.setPropertyValue("refDraftGlobal",null)
testRunner.testCase.setPropertyValue("redDraft",null)
testRunner.testCase.setPropertyValue("redDraftLigne",null)
testRunner.testCase.setPropertyValue("redDraftLigneDetail",null)
testRunner.testCase.setPropertyValue("redFraiseDraftLigne",null)
testRunner.testCase.setPropertyValue("redFraiseDraftLigneDetail",null)
testRunner.testCase.setPropertyValue("redTarifDraftLigne",null)
testRunner.testCase.setPropertyValue("Promo1",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("1. Create a draft with many reductions without fraise_mvnoConso").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with many reductions without fraise_mvnoConso" id="c93028e4-76f5-4174-88c8-ecb92383d7c0"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>2441c4b3-1e36-4de3-8e72-75538437416f</con:targetTestCase><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003210</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003230</con:value></con:property></con:properties><con:returnProperties><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer draftInfo" id="a8e23222-4b2c-453d-bbf6-94f1c07c660d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with many reductions without fraise_mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>refDraft</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with reduction" id="d1ee4d4a-cb15-4d21-9da0-38800b66c32a"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with reduction" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
                "ip": {
      "ip": "10.190.29.140",
      "ts": "1461033718"
    }
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"${#TestCase#handleKey3}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"102008617",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey3}",
         "adresseId":"${#TestCase#handleKey3}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="31bab8b5-267a-4c3d-bd93-c8cbc300cbe5" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a4e26616-452c-4a7e-80fb-3f27b6389eda" name="Contains"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer commandInfo" id="da5d8fcb-6bae-4949-b7b9-5ec2129b665b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommande</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with reduction</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:sourcePath/><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Select reduction to check_Eligible must be TRUE" id="73565487-8fa6-478f-9353-b6d628e0c835"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM reduction where referenceDraft = "${commandInfo#refCommand}" order by codeCatalogueReduction ASC;</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - Eight reductions are found" disabled="true"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>8</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9d5af93a-1166-4ad4-bb26-d7b16a923b43" name="Reference draft must be refCommand"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${commandInfo#refCommand}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="1dfee63e-e7aa-4814-b539-655a2cb706ea" name="Not Contains" disabled="true"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>0&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="1e75da21-106f-4ffe-b1b9-c72480f226e3" name="XPath Match - Eligible of basePromo1 must be FALSE" disabled="true"><con:configuration><path>//Results[1]/ResultSet[1]/Row[5]/REDUCTION.ELIGIBLE</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="227abe90-e368-4946-aa55-c54510881adf" name="XPath Match - Eligible of basePromo2 must be FALSE" disabled="true"><con:configuration><path>//Results[1]/ResultSet[1]/Row[6]/REDUCTION.ELIGIBLE</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer code reduction" id="72bc3d2f-11ef-4c68-b8a7-ee9083f82249"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>redDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2.1 Select reduction to check_Eligible must be TRUE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>redDraft</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>redDraftLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2.1 Select reduction to check_Eligible must be TRUE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[2]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>redDraftLigne</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>redDraftLigneDetail</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2.1 Select reduction to check_Eligible must be TRUE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[3]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>redDraftLigneDetail</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>redTarifDraftLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2.1 Select reduction to check_Eligible must be TRUE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[4]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>redTarifDraftLigne</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>Promo1</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2.1 Select reduction to check_Eligible must be TRUE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[5]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>Promo1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>Promo2</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2.1 Select reduction to check_Eligible must be TRUE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[6]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>Promo2</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Get promotion for MVNO" id="b0a250f5-6a92-44ac-b728-ec281565f37f" disabled="true"><con:settings/><con:config service="/default/promo" methodName="getPromoByOfferCodeAndPrice" resourcePath="/discount.qualifier.ws-1.0.x/promo/offer/{offerCode}/price/{priceCode}" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get promotion for MVNO" id="1ac55ae0-2702-4549-9614-e324181dbcb3" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/discount.qualifier.ws-1.0.x/promo/offer/MVNO/price/</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="priceCode" value="1"/>
  <con:entry key="offerCode" value="MVNO"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">200005208</con:value></con:property><con:property><con:name>redDraft</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0112345</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0212345</con:value></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0312345</con:value></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0412345</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">REM_MVNO_ISP</con:value></con:property><con:property><con:name>Promo2</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">REM_MVNO_ISP_ELITE</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">DRA-00003210</con:value></con:property><con:property><con:name>redFraiseDraftLigne</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redFraiseDraftLigneDetail</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f7b20dff-1c0f-45d8-8430-81c05d619591</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2a1ed267-924a-451e-be0e-b7b00ab9d480</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="aace372d-7d97-492d-a946-0e8e5aa59f66" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="11. Transform successfully_A draft with many reductions no fraise_mvnoPack" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="a188414c-2351-4ec9-aa26-61272731fcf9"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003211</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>003002862</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="ce960de6-8f1d-4fc5-a8f8-f14674c7c073"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.setPropertyValue("refDraftGlobal",null)
testRunner.testCase.setPropertyValue("redDraft",null)
testRunner.testCase.setPropertyValue("redDraftLigne",null)
testRunner.testCase.setPropertyValue("redDraftLigneDetailService",null)
testRunner.testCase.setPropertyValue("redDraftLigneDetailBien",null)
testRunner.testCase.setPropertyValue("redTarifDraftLigne",null)
testRunner.testCase.setPropertyValue("Promo1",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("1. Create a draft with many reductions without fraise_mvnoPack").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with many reductions without fraise_mvnoPack" id="9ef065e6-084d-4fad-83dd-ad5a1701d2c5"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>bec8d97e-2763-4cc4-9a19-e7dbb061bff0</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003211</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003231</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry><con:entry>customerKey4</con:entry><con:entry>handleKey4</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer draftInfo" id="071763de-c244-4fe5-b2f6-853153641cbd"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with many reductions without fraise_mvnoPack</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>refDraft</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with reduction" id="9f768a87-4392-4837-b0b9-e07086cb6151"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with reduction" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
           "ip": {
      "ip": "10.190.29.140",
      "ts": "1461033718"
    }
      
    }
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO",
            "typeProduit":"SERVICE"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_pack",
          "cle": "Rio",
          "valeur": "42E123456789"
       },
       {
          "referenceChoix" : "mvno_pack",
          "cle": "MSISDN",
          "valeur": "0712345678"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"${#TestCase#customerKey4}",
         "adresseId":"${#TestCase#handleKey4}",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"${#TestCase#customerKey4}",
         "adresseId":"102008617",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"${#TestCase#customerKey4}",
         "adresseId":"${#TestCase#handleKey4}",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="31bab8b5-267a-4c3d-bd93-c8cbc300cbe5" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a4e26616-452c-4a7e-80fb-3f27b6389eda" name="Contains"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer commandInfo" id="e230c6e7-a5a0-4898-8a06-af6e0eab20d4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommande</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with reduction</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:sourcePath/><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Select reduction to check_Eligible must be TRUE" id="0232c485-7d7d-4ee3-b5c0-8299ea5a5862"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM reduction where referenceDraft = "${commandInfo#refCommand}" order by codeCatalogueReduction ASC;</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - Eight reductions are found" disabled="true"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>8</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9d5af93a-1166-4ad4-bb26-d7b16a923b43" name="Reference draft must be refCommand"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${commandInfo#refCommand}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="1dfee63e-e7aa-4814-b539-655a2cb706ea" name="Not Contains" disabled="true"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>0&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="1e75da21-106f-4ffe-b1b9-c72480f226e3" name="XPath Match - Eligible of basePromo1 must be FALSE" disabled="true"><con:configuration><path>//Results[1]/ResultSet[1]/Row[5]/REDUCTION.ELIGIBLE</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="227abe90-e368-4946-aa55-c54510881adf" name="XPath Match - Eligible of basePromo2 must be FALSE" disabled="true"><con:configuration><path>//Results[1]/ResultSet[1]/Row[6]/REDUCTION.ELIGIBLE</path><content>0</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer code reduction" id="d35f7c70-0ce4-4eee-932b-3a0aa93d0797"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>redDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2.1 Select reduction to check_Eligible must be TRUE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>redDraft</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>redDraftLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2.1 Select reduction to check_Eligible must be TRUE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[2]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>redDraftLigne</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>redDraftLigneDetailService</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2.1 Select reduction to check_Eligible must be TRUE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[3]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>redDraftLigneDetailService</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>redDraftLigneDetailBien</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2.1 Select reduction to check_Eligible must be TRUE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[4]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>redDraftLigneDetailBien</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>redTarifDraftLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2.1 Select reduction to check_Eligible must be TRUE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[5]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>redTarifDraftLigne</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>Promo1</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2.1 Select reduction to check_Eligible must be TRUE</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[6]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>redBasePromo1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Get promotion for MVNO" id="48aa3171-9592-4aab-91e2-fe5dbe636f2b" disabled="true"><con:settings/><con:config service="/default/promo" methodName="getPromoByOfferCodeAndPrice" resourcePath="/discount.qualifier.ws-1.0.x/promo/offer/{offerCode}/price/{priceCode}" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get promotion for MVNO" id="1ac55ae0-2702-4549-9614-e324181dbcb3" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/discount.qualifier.ws-1.0.x/promo/offer/MVNO/price/</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="priceCode" value="1"/>
  <con:entry key="offerCode" value="MVNO"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">003002862</con:value></con:property><con:property><con:name>redDraft</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0112345</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0212345</con:value></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0412345</con:value></con:property><con:property><con:name>redBasePromo1</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">REM_MVNO_ISP</con:value></con:property><con:property><con:name>redBasePromo2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">DRA-00003211</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Promo2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>redDraftLigneDetailService</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0312345</con:value></con:property><con:property><con:name>redDraftLigneDetailBien</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0312345</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f7b20dff-1c0f-45d8-8430-81c05d619591</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2a1ed267-924a-451e-be0e-b7b00ab9d480</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="48fd983f-b5cc-421c-a9e6-1651da8c1851" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="12. Transform successfully_A draft with many reductions no detail ligne_avfw.essentiel" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="e5a51bca-6ddf-4534-b3e4-ff83fc875385"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003212</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>225000087</con:value></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="c58415eb-cb31-4557-9aeb-7255528f955c"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey1",'6002367491')
testRunner.testCase.setPropertyValue( "handleKey1",'00001006956')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.setPropertyValue("refDraftGlobal",null)
testRunner.testCase.setPropertyValue("redDraft",null)
testRunner.testCase.setPropertyValue("redDraftLigne",null)
testRunner.testCase.setPropertyValue("redDraftLigneDetail",null)
testRunner.testCase.setPropertyValue("redFraiseDraftLigne",null)
testRunner.testCase.setPropertyValue("redFraiseDraftLigneDetail",null)
testRunner.testCase.setPropertyValue("redTarifDraftLigne",null)
testRunner.testCase.setPropertyValue("Promo1",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommandLigne",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("1. Create a draft with many reductions_avfw.essentiel").setPropertyValue("refDraftGlobal",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft with many reductions_avfw.essentiel" id="4365f451-ae34-48c4-823b-f5d7ce587c04"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>93dee895-a293-45d8-87b3-c9e54bf08cb3</con:targetTestCase><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003212</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003232</con:value></con:property><con:property><con:name>customerKey1</con:name><con:value>6002367491</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>00001006956</con:value></con:property></con:properties><con:returnProperties><con:entry>refDraftGlobal</con:entry><con:entry>refDraftLigneGlobal</con:entry><con:entry>customerKey1</con:entry><con:entry>handleKey1</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer draftInfo" id="43132795-dc98-4c25-bd5b-c731a75e35b0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>refDraftGlobal</con:sourceType><con:sourceStep>1. Create a draft with many reductions_avfw.essentiel</con:sourceStep><con:sourcePath/><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>refDraft</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with reduction" id="8fed9635-a95a-40fd-b4be-82090e21e8c6"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with reduction" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ts": 1411654933,
      "ip": "10.190.29.140"
    }
  },
  "trameCatalogue": {
    "offres": [
      {
        "reference": "avfw.essentiel",
        "label": "Securitoo Integral",
        "gamme": "Antivirus",
        "secteur": "Securite",
        "modeFacturation": "DATE_ANNIVERSAIRE",
        "type": "SERVICE",
        "tarifs": [
          {
            "idTarif": "23",
            "prix": "5",
            "frequence": "1",
            "tva": "R"
          }
        ]
      }
    ]
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="31bab8b5-267a-4c3d-bd93-c8cbc300cbe5" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a4e26616-452c-4a7e-80fb-3f27b6389eda" name="Contains"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer commandInfo" id="b13f6c65-4acf-40ba-ba1c-d041ea198baa"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommande</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with reduction</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:sourcePath/><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Select reduction to check_Eligible must be TRUE 2" id="f7b20dff-1c0f-45d8-8430-81c05d619591"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM reduction where referenceDraft = "${commandInfo#refCommand}" order by codeCatalogueReduction ASC;</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - Three reductions are found" disabled="true"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9d5af93a-1166-4ad4-bb26-d7b16a923b43" name="Reference draft must be refCommand"><con:configuration><token>&lt;REDUCTION.REFERENCEDRAFT>${commandInfo#refCommand}&lt;/REDUCTION.REFERENCEDRAFT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="5dfae0ad-d71a-4326-ad77-9a842065cf4b" name="Not Contains"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>0&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer code reduction" id="2a1ed267-924a-451e-be0e-b7b00ab9d480"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>redDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2.1 Select reduction to check_Eligible must be TRUE 2</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>redDraft</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>redDraftLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2.1 Select reduction to check_Eligible must be TRUE 2</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[2]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>redDraftLigne</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>redTarifDraftLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2.1 Select reduction to check_Eligible must be TRUE 2</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[3]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>redTarifDraftLigne</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="false" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo1</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2.1 Select reduction to check_Eligible must be TRUE 2</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[4]/REDUCTION.CODECATALOGUEREDUCTION[1]</con:sourcePath><con:targetType>Promo1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Get promotion for avfw.essentiel" id="28ed6968-b1ac-4f87-addb-31c1e2c9ba91" disabled="true"><con:settings/><con:config service="/default/promo" methodName="getPromoByOfferCodeAndPrice" resourcePath="/discount.qualifier.ws-1.0.x/promo/offer/{offerCode}/price/{priceCode}" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get promotion for avfw.essentiel" id="1ac55ae0-2702-4549-9614-e324181dbcb3" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/discount.qualifier.ws-1.0.x/promo/offer/MVNO/price/</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="priceCode" value="1"/>
  <con:entry key="offerCode" value="avfw.essentiel"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">225000087</con:value></con:property><con:property><con:name>redDraft</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0112345</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0212345</con:value></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redFraiseDraftLigne</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redFraiseDraftLigneDetail</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">0312345</con:value></con:property><con:property><con:name>redBasePromo1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redBasePromo2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">DRA-00003212</con:value></con:property><con:property><con:name>customerKey1</con:name><con:value>6002367491</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>00001006956</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Promo2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Promo3</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Promo4</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6459c401-4ecf-4d1b-8cd4-71b766d452cc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>77dfdd71-c588-4d75-ae9c-559da79611f4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>276a96db-2388-4d33-90f4-a64b9030630a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>17410c6c-0c24-4cb9-aa0f-568fc28fb838</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7eb34575-7517-4556-9b6f-c911812b8f64</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4b285e20-abc4-4bc0-8f21-1d93393542df</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3b00504a-c80d-4177-8cbd-cf582e1530ed</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4cd7896f-a1ac-4121-b68b-c7881ac9d3b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f7b20dff-1c0f-45d8-8430-81c05d619591</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2a1ed267-924a-451e-be0e-b7b00ab9d480</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties><con:property><con:name>customerKey</con:name><con:value>6002367491</con:value></con:property><con:property><con:name>handleKey</con:name><con:value>00001006956</con:value></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite id="5686e70d-b3a6-4716-982d-b735557b7fc0" name="transformerEnContrat"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="6e7b5143-eec5-4653-a8e5-1118928f462b" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.01 Transform failed_Command containing reduction with eligible null" searchProperties="true" disabled="true" maxResults="0"><con:settings/><con:testStep type="properties" name="Properties" id="68d531c5-a827-45d4-abf0-d47155356f0a"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>200000206</con:value></con:property><con:property><con:name>refContract</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Clear all propertie values" id="7ec15a2a-f9da-4ed7-844d-11e856ff9322"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refContract",null)
testRunner.testCase.setPropertyValue("refContractGlobal",null)
testRunner.testCase.getTestStepByName("1. Validate a command with draft reduction_mvnoConso and Bien").setPropertyValue("refCommandGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Validate a command with draft reduction_mvnoConso and Bien" id="5a68619a-6d08-41cf-b95b-f3db2350db22"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>2c9a1116-65c8-4488-b5ca-d4e8d7b64915</con:targetTestCase><con:properties><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refCommandGlobal</con:name><con:value>200000206</con:value></con:property><con:property><con:name>redDraftLigne</con:name></con:property><con:property><con:name>Promo1</con:name></con:property></con:properties><con:returnProperties><con:entry>NbPassed</con:entry><con:entry>RUM3</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="9034a832-bb66-4223-82a7-4ccd98c0b07e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Validate a command with draft reduction_mvnoConso and Bien</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="1.1 Update Eligible to null" id="cdac3c5b-ea8e-4ab2-9bb0-839994585330"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = null where referenceDraft = "${Properties#refCommand}";</con:query><con:assertion type="Simple Contains" id="0ccc6d1c-21a7-440f-af74-5e08305ce544" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform the created command to contract_Failed_Check exception" id="74030e60-d18b-4af1-9f9b-2f25c775abac"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/transformerEnContrat" methodName="transformeEnContrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform the created command to contract_Failed_Check exception" id="38cfe906-f82c-4482-b7cd-eb621557d7f2" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request> {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ts": "1456817611",
      "ip": "10.190.29.140"
    }
  }</con:request><con:originalUri>http://10.190.29.131/opale-api-1.2.x/commande//transformerEnContrat</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f17de882-a958-4dea-916e-ed7f2c72d8af" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cdca5a8c-ee90-4327-9275-11ca603050ba" name="Response is not null"><con:configuration><token>"errorCode": "0.1.1"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7387c40c-5c24-4583-b483-8b582bc14d78" name="Contains"><con:configuration><token>"errorMessage":"un des parametres est mal formate : Reduction.eligible"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refContractGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>5ea925a1-cf05-45ea-96a9-da6e9cea61cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e855bac4-da93-490c-a083-4d3582253166</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>66171c94-3533-4a48-97b1-520c721ef6c0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b1b214c1-8825-4977-9818-36c0caac19aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9de1e74a-9732-41bf-b6f0-bda43115bdc3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>70d73b99-26ed-4bf6-927a-6401c7d62260</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>01314d7a-2c4f-4491-afa1-fd29dc47360c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>61247117-c0ed-44f5-8660-1e41381bb4bf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c2b85783-86af-47de-8b74-50f921e2de4d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2815d476-4009-4239-9de4-1ee9bed6a70e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>32f433ec-5dbf-4eaa-b67c-e00c84c51e66</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="f01de711-4471-4b72-b6e5-979841dbbc3b" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.02 Transform successfully_Command containing reduction with dateEligibleModification empty" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="Properties" id="eeefa738-9a6c-4826-b8fd-0dde49d03352"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>018002206</con:value></con:property><con:property><con:name>refContract</con:name><con:value>00103988</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Clear all propertie values" id="81ade30c-536f-47a3-bd46-cae33fea0a96"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refContract",null)
testRunner.testCase.setPropertyValue("refContractGlobal",null)
testRunner.testCase.getTestStepByName("1. Validate a command with draft reduction_mvnoConso and Bien").setPropertyValue("refCommandGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Validate a command with draft reduction_mvnoConso and Bien" id="c22b5186-9be2-4b69-98e8-5e34ebbeaf6b"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>2c9a1116-65c8-4488-b5ca-d4e8d7b64915</con:targetTestCase><con:properties><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refCommandGlobal</con:name><con:value>018002206</con:value></con:property><con:property><con:name>redDraftLigne</con:name></con:property><con:property><con:name>Promo1</con:name></con:property></con:properties><con:returnProperties><con:entry>NbPassed</con:entry><con:entry>RUM3</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="f0064472-32e9-4592-8f0d-70939bf62c88"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Validate a command with draft reduction_mvnoConso and Bien</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="1.1 Update dateEligibleModification to null" id="a3b2a945-650a-4b89-ac7b-5a06f5a16ef4"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set dateEligibleDerniereModification = null where referenceDraft = "${Properties#refCommand}";</con:query><con:assertion type="Simple Contains" id="0ccc6d1c-21a7-440f-af74-5e08305ce544" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform the created command to contract_Successfully" id="168767f4-02ae-4781-8c55-473de79286a9"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/transformerEnContrat" methodName="transformeEnContrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform the created command to contract_Successfully" id="38cfe906-f82c-4482-b7cd-eb621557d7f2" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request> {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ts": "1456817611",
      "ip": "10.190.29.140"
    }
  }</con:request><con:originalUri>http://10.190.29.131/opale-api-1.2.x/commande//transformerEnContrat</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f17de882-a958-4dea-916e-ed7f2c72d8af" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7387c40c-5c24-4583-b483-8b582bc14d78" name="Contains"><con:configuration><token>"referencesContrats"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="a7da4915-88f2-459c-8063-3fe8700d7748"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="transfer" name="Transfer refContract" id="d7bc438b-501a-44e7-b501-efe9104a62c3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refContract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>2. Transform the created command to contract_Successfully</con:sourceStep><con:sourcePath>$.referencesContrats[0]</con:sourcePath><con:targetType>refContract</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refContractGlobal</con:name><con:sourceType>refContract</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:sourcePath/><con:targetType>refContractGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Check three sub contracts are created" id="22a97107-e0c7-4d70-ad75-f74ada95a56c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM elementcontractuel where numeroCommande = "${Properties#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Three records are created"><con:configuration><path>count(//Row)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b0286b96-e80f-4a47-8cfb-c65cb0d16ad1" name="Main sub contract must be MVNO"><con:configuration><token>&lt;ELEMENTCONTRACTUEL.REFERENCEPRODUIT>MVNO&lt;/ELEMENTCONTRACTUEL.REFERENCEPRODUIT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="692b0bfb-4e7c-41d2-906d-4c0fa9d8ec5c" name="Sub contract 1 must be mvno_conso"><con:configuration><token>&lt;ELEMENTCONTRACTUEL.REFERENCEPRODUIT>mvno_conso&lt;/ELEMENTCONTRACTUEL.REFERENCEPRODUIT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="692b0bfb-4e7c-41d2-906d-4c0fa9d8ec5c" name="Sub contract 2 must be PACK-MVNO-POSTPAID-MOBILE"><con:configuration><token>&lt;ELEMENTCONTRACTUEL.REFERENCEPRODUIT>PACK-MVNO-POSTPAID-MOBILE&lt;/ELEMENTCONTRACTUEL.REFERENCEPRODUIT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="2.2 Check transformed reductions" id="4f61de87-47e5-41bf-978a-59264fe09cca"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM reduction where referenceContrat = "${Properties#refContract}" order by codeCatalogueReduction ASC;</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - Six reductions are found" disabled="true"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>6</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9d5af93a-1166-4ad4-bb26-d7b16a923b43" name="Reference contract must be"><con:configuration><token>&lt;REDUCTION.REFERENCECONTRAT>${Properties#refContract}&lt;/REDUCTION.REFERENCECONTRAT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="f008beaa-75d6-4a28-a7db-dbd0b871ccb1" name="Not Contains Eligible FALSE" disabled="true"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>0&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refContractGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">00103988</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>5ea925a1-cf05-45ea-96a9-da6e9cea61cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e855bac4-da93-490c-a083-4d3582253166</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>66171c94-3533-4a48-97b1-520c721ef6c0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b1b214c1-8825-4977-9818-36c0caac19aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9de1e74a-9732-41bf-b6f0-bda43115bdc3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>70d73b99-26ed-4bf6-927a-6401c7d62260</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>01314d7a-2c4f-4491-afa1-fd29dc47360c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>61247117-c0ed-44f5-8660-1e41381bb4bf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c2b85783-86af-47de-8b74-50f921e2de4d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2815d476-4009-4239-9de4-1ee9bed6a70e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>32f433ec-5dbf-4eaa-b67c-e00c84c51e66</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="7799a726-5c60-4fd3-b0ed-0f558adb975b" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.01 Transform successfully_A validated command created via creerCommande_mvnoConso and Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="Properties" id="9de1e74a-9732-41bf-b6f0-bda43115bdc3"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>200009209</con:value></con:property><con:property><con:name>refContract</con:name><con:value>00103993</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Clear all propertie values" id="70d73b99-26ed-4bf6-927a-6401c7d62260"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refContract",null)
testRunner.testCase.getTestStepByName("1. Validate a command with two choice_mvnoConso and Bien").setPropertyValue("refCommandGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Validate a command with two choice_mvnoConso and Bien" id="8daba688-ea65-4d13-b4ac-904a798a68bf"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>99e077a5-48e9-4bcc-bfd4-069a985449ea</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>200009209</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>NbPassed</con:entry><con:entry>RUM3</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="01314d7a-2c4f-4491-afa1-fd29dc47360c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Validate a command with two choice_mvnoConso and Bien</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform the created command to contract" id="bae0aab9-63a1-4cf0-9233-2da098306892"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/transformerEnContrat" methodName="transformeEnContrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform the created command to contract" id="38cfe906-f82c-4482-b7cd-eb621557d7f2" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request> {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ts": "1456817611",
      "ip": "10.190.29.140"
    }
  }</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//transformerEnContrat</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f17de882-a958-4dea-916e-ed7f2c72d8af" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cdca5a8c-ee90-4327-9275-11ca603050ba" name="Response is not null"><con:configuration><token>"referencesContrats"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Delay" id="060cbde6-1a0e-4fef-985c-732a1c64e846"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="transfer" name="Transfer refContract" id="67993caf-b1eb-4329-9427-61bcf076e003"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refContract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>2. Transform the created command to contract</con:sourceStep><con:sourcePath>$.referencesContrats[0]</con:sourcePath><con:targetType>refContract</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Check three sub contracts are created" id="0fd0ccf3-5095-4c87-b116-7a2e261b6791"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM elementcontractuel where numeroCommande = "${Properties#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Three records are created"><con:configuration><path>count(//Row)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b0286b96-e80f-4a47-8cfb-c65cb0d16ad1" name="Main sub contract must be MVNO"><con:configuration><token>&lt;ELEMENTCONTRACTUEL.REFERENCEPRODUIT>MVNO&lt;/ELEMENTCONTRACTUEL.REFERENCEPRODUIT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="692b0bfb-4e7c-41d2-906d-4c0fa9d8ec5c" name="Sub contract 1 must be mvno_conso"><con:configuration><token>&lt;ELEMENTCONTRACTUEL.REFERENCEPRODUIT>mvno_conso&lt;/ELEMENTCONTRACTUEL.REFERENCEPRODUIT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="692b0bfb-4e7c-41d2-906d-4c0fa9d8ec5c" name="Sub contract 2 must be PACK-MVNO-POSTPAID-MOBILE"><con:configuration><token>&lt;ELEMENTCONTRACTUEL.REFERENCEPRODUIT>PACK-MVNO-POSTPAID-MOBILE&lt;/ELEMENTCONTRACTUEL.REFERENCEPRODUIT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="2.2 Check transformed reductions" id="d5e25849-9e7f-4802-a4bb-6ea42c17415d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM reduction where referenceContrat = "${Properties#refContract}" order by codeCatalogueReduction ASC;</con:query><con:assertion type="Simple NotContains" id="5fecc05c-c42d-48ce-a83c-7c3aad64f0f9" name="Not Contains eligible TRUE"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>5ea925a1-cf05-45ea-96a9-da6e9cea61cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e855bac4-da93-490c-a083-4d3582253166</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>66171c94-3533-4a48-97b1-520c721ef6c0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b1b214c1-8825-4977-9818-36c0caac19aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9de1e74a-9732-41bf-b6f0-bda43115bdc3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>70d73b99-26ed-4bf6-927a-6401c7d62260</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>01314d7a-2c4f-4491-afa1-fd29dc47360c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>060cbde6-1a0e-4fef-985c-732a1c64e846</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>67993caf-b1eb-4329-9427-61bcf076e003</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="aa81606a-9c35-46f8-9035-6b685cb3c83a" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.02 Transform successfully_A validated command transformed from draft_mvnoPack and Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="Properties" id="0e8725b4-de6c-474a-8dda-96bfee91cf2b"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>309320060</con:value></con:property><con:property><con:name>refContract</con:name><con:value>00104113</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Clear all propertie values" id="4c162a60-9e21-443b-962a-b622868a7274"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refContract",null)
testRunner.testCase.setPropertyValue("refCommand",null)


</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform to command with two choices_mvnoPack and Bien" id="d4f29ca4-b38f-468e-8e90-7aa272295fec"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>3f7a149f-89c5-4f3b-9acf-9fc1b15af777</con:targetTestCase><con:properties><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refCommandGlobal</con:name><con:value>309320060</con:value></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>handleKey3</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="5e8f02cc-33c0-4412-b2dd-4893530e4492"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="false" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform to command with two choices_mvnoPack and Bien</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform the created command to contract" id="e47184ae-a434-48d5-9c55-35ffb04f8667"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/transformerEnContrat" methodName="transformeEnContrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform the created command to contract" id="38cfe906-f82c-4482-b7cd-eb621557d7f2" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request> {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ts": "1456817611",
      "ip": "10.190.29.140"
    }
  }</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//transformerEnContrat</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f17de882-a958-4dea-916e-ed7f2c72d8af" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cdca5a8c-ee90-4327-9275-11ca603050ba" name="Response is not null"><con:configuration><token>"referencesContrats"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Extract refContract from DB" id="6eb67d78-7159-4418-94b5-fa47ba93f94e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select reference from contrat as c
left join elementcontractuel as ec on
ec.contratparent = c.id where 
ec.numeroCommande = "${Properties#refCommand}";
</con:query><con:assertion type="XQuery Match" name="exist refContrat" id="b78c8feb-fa25-464a-85d3-5bb06cf240ed"><con:configuration><path>exists(//*:CONTRAT.REFERENCE/text())</path><content>&lt;xml-fragment>true&lt;/xml-fragment></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="delay" name="Delay" id="4523e248-5cd3-4250-93ba-f0e943113f91"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="transfer" name="Transfer refContract" id="74877c6e-760c-4496-9198-7d3351cae1db"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refContract</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Extract refContract from DB</con:sourceStep><con:sourcePath>//*:Row/*:CONTRAT.REFERENCE/text()</con:sourcePath><con:targetType>refContract</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refContractGlobal</con:name><con:sourceType>refContract</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:sourcePath/><con:targetType>refContract</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Check three sub contracts are created" id="2e443383-c3d6-430a-b313-5f1a4db1f721"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM elementcontractuel where numeroCommande = "${Properties#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Three records are created"><con:configuration><path>count(//Row)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b0286b96-e80f-4a47-8cfb-c65cb0d16ad1" name="Main sub contract must be MVNO"><con:configuration><token>&lt;ELEMENTCONTRACTUEL.REFERENCEPRODUIT>MVNO&lt;/ELEMENTCONTRACTUEL.REFERENCEPRODUIT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="692b0bfb-4e7c-41d2-906d-4c0fa9d8ec5c" name="Sub contract 1 must be mvno_pack"><con:configuration><token>&lt;ELEMENTCONTRACTUEL.REFERENCEPRODUIT>mvno_pack&lt;/ELEMENTCONTRACTUEL.REFERENCEPRODUIT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="692b0bfb-4e7c-41d2-906d-4c0fa9d8ec5c" name="Sub contract 2 must be PACK-MVNO-POSTPAID"><con:configuration><token>&lt;ELEMENTCONTRACTUEL.REFERENCEPRODUIT>PACK-MVNO-POSTPAID&lt;/ELEMENTCONTRACTUEL.REFERENCEPRODUIT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="2.2 Check transformed reductions_Only auto reductions" id="bd668485-3e39-4aee-9b2f-61c3bffb255b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM reduction where referenceContrat = "${Properties#refContract}" order by codeCatalogueReduction ASC;</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - Six reductions are found" disabled="true"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>6</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9d5af93a-1166-4ad4-bb26-d7b16a923b43" name="Reference contract must be"><con:configuration><token>&lt;REDUCTION.REFERENCECONTRAT>${Properties#refContract}&lt;/REDUCTION.REFERENCECONTRAT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="02042a96-9aea-4c8b-805a-b6bbf10ca738" name="Not Contains Eligible TRUE"><con:configuration><token/><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refCommand</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">309320060</con:value></con:property><con:property><con:name>refContract</con:name><con:value>00104113</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>5ea925a1-cf05-45ea-96a9-da6e9cea61cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e855bac4-da93-490c-a083-4d3582253166</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>66171c94-3533-4a48-97b1-520c721ef6c0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b1b214c1-8825-4977-9818-36c0caac19aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e8725b4-de6c-474a-8dda-96bfee91cf2b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4c162a60-9e21-443b-962a-b622868a7274</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5e8f02cc-33c0-4412-b2dd-4893530e4492</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6eb67d78-7159-4418-94b5-fa47ba93f94e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4523e248-5cd3-4250-93ba-f0e943113f91</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>74877c6e-760c-4496-9198-7d3351cae1db</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="99347dc7-1812-419e-ac47-a9ae08e68e98" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03.00 Transform successfully_A validated command with draft reduction_mvnoConso and Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="Properties" id="26ffa338-1d59-4e90-aaa0-d10d43a34db6"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>602002302</con:value></con:property><con:property><con:name>refContract</con:name><con:value>00103990</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Clear all propertie values" id="8db84aac-622e-4362-9be0-c7c520d7a1e5"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refContract",null)
testRunner.testCase.setPropertyValue("refContractGlobal",null)
testRunner.testCase.getTestStepByName("1. Validate a command with draft reduction_mvnoConso and Bien").setPropertyValue("refCommandGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Validate a command with draft reduction_mvnoConso and Bien" id="35527052-7dd7-44ba-b17d-a8d4b854c08e"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>2c9a1116-65c8-4488-b5ca-d4e8d7b64915</con:targetTestCase><con:properties><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refCommandGlobal</con:name><con:value>602002302</con:value></con:property><con:property><con:name>redDraftLigne</con:name></con:property><con:property><con:name>Promo1</con:name></con:property></con:properties><con:returnProperties><con:entry>NbPassed</con:entry><con:entry>RUM3</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="1bc24cd8-1241-402d-b18c-46b4c25242ad"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Validate a command with draft reduction_mvnoConso and Bien</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform the created command to contract" id="870c23f3-3c99-45e9-b579-90154fbe5c7f"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/transformerEnContrat" methodName="transformeEnContrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform the created command to contract" id="38cfe906-f82c-4482-b7cd-eb621557d7f2" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request> {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ts": "1456817611",
      "ip": "10.190.29.140"
    }
  }</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//transformerEnContrat</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f17de882-a958-4dea-916e-ed7f2c72d8af" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cdca5a8c-ee90-4327-9275-11ca603050ba" name="Response is not null"><con:configuration><token>"referencesContrats"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Extract refContract from DB" id="4bb70e5b-97a5-4b00-9bce-a9d0e2a6146b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select reference from contrat as c
left join elementcontractuel as ec on
ec.contratparent = c.id where 
ec.numeroCommande = "${Properties#refCommand}";
</con:query><con:assertion type="XQuery Match" name="exist refContrat" id="b78c8feb-fa25-464a-85d3-5bb06cf240ed"><con:configuration><path>exists(//*:CONTRAT.REFERENCE/text())</path><content>&lt;xml-fragment>true&lt;/xml-fragment></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="delay" name="Delay" id="3ddbed0f-26d7-4fc8-94c8-f42aa151c83c"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="transfer" name="Transfer refContract" id="1d3ef725-ad70-4b88-9d06-875b39a8e0a8"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refContract</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Extract refContract from DB</con:sourceStep><con:sourcePath>//*:Row/*:CONTRAT.REFERENCE/text()</con:sourcePath><con:targetType>refContract</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refContractGlobal</con:name><con:sourceType>refContract</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:sourcePath/><con:targetType>refContractGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Check three sub contracts are created" id="58a9fb6e-7aa2-43f1-b393-6f270e22d603"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM elementcontractuel where numeroCommande = "${Properties#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Three records are created"><con:configuration><path>count(//Row)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b0286b96-e80f-4a47-8cfb-c65cb0d16ad1" name="Main sub contract must be MVNO"><con:configuration><token>&lt;ELEMENTCONTRACTUEL.REFERENCEPRODUIT>MVNO&lt;/ELEMENTCONTRACTUEL.REFERENCEPRODUIT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="692b0bfb-4e7c-41d2-906d-4c0fa9d8ec5c" name="Sub contract 1 must be mvno_conso"><con:configuration><token>&lt;ELEMENTCONTRACTUEL.REFERENCEPRODUIT>mvno_conso&lt;/ELEMENTCONTRACTUEL.REFERENCEPRODUIT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="692b0bfb-4e7c-41d2-906d-4c0fa9d8ec5c" name="Sub contract 2 must be PACK-MVNO-POSTPAID-MOBILE"><con:configuration><token>&lt;ELEMENTCONTRACTUEL.REFERENCEPRODUIT>PACK-MVNO-POSTPAID-MOBILE&lt;/ELEMENTCONTRACTUEL.REFERENCEPRODUIT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="2.2 Check transformed reductions_Including auto and manual reductions" id="a7098fcf-eb90-437e-8c17-203634c33dfb"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM reduction where referenceContrat = "${Properties#refContract}" order by codeCatalogueReduction ASC;</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - Six reductions are found" disabled="true"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>6</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9d5af93a-1166-4ad4-bb26-d7b16a923b43" name="Reference contract must be"><con:configuration><token>&lt;REDUCTION.REFERENCECONTRAT>${Properties#refContract}&lt;/REDUCTION.REFERENCECONTRAT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="e60479e4-d661-4aeb-993e-1c86b4246cee" name="Manual reduction having eligible TRUE"><con:configuration><path>//*:Row[1]/REDUCTION.ELIGIBLE[1]</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="e60479e4-d661-4aeb-993e-1c86b4246cee" name="Manual reduction having eligible TRUE"><con:configuration><path>//*:Row[1]/REDUCTION.ELIGIBLE[1]</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refContractGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">00103990</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>5ea925a1-cf05-45ea-96a9-da6e9cea61cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e855bac4-da93-490c-a083-4d3582253166</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>66171c94-3533-4a48-97b1-520c721ef6c0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b1b214c1-8825-4977-9818-36c0caac19aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9de1e74a-9732-41bf-b6f0-bda43115bdc3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>70d73b99-26ed-4bf6-927a-6401c7d62260</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>01314d7a-2c4f-4491-afa1-fd29dc47360c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>61247117-c0ed-44f5-8660-1e41381bb4bf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c2b85783-86af-47de-8b74-50f921e2de4d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3ddbed0f-26d7-4fc8-94c8-f42aa151c83c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="95d1eca2-dae2-45e2-b160-40c231ec90c1" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03.01 Transform successfully_A validated command with all reductions without fraise reduction_mvnoConso and Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="Properties" id="9d826eb3-c215-44d5-9f54-cdba4b643b38"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>006004226</con:value></con:property><con:property><con:name>refContract</con:name><con:value>00103991</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Clear all propertie values" id="919f4ee2-ac65-4442-bb3f-6fed5bf32759"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refContract",null)
testRunner.testCase.setPropertyValue("refContractGlobal",null)
testRunner.testCase.getTestStepByName("1. Validate a command with many reductions_mvnoConso and Bien").setPropertyValue("refCommandGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Validate a command with many reductions_mvnoConso and Bien" id="e6efd284-635d-4506-9ad6-fa09694a71f5"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>38a0392d-6346-49d1-843e-34b1094b9ec0</con:targetTestCase><con:properties><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refCommandGlobal</con:name><con:value>006004226</con:value></con:property></con:properties><con:returnProperties><con:entry>NbPassed</con:entry><con:entry>RUM3</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="13cf5a8c-506a-4f2a-b2a7-9cf6e789d35b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Validate a command with many reductions_mvnoConso and Bien</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform the created command to contract" id="ed7301e7-2572-45c4-8804-2b97acccc9e4"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/transformerEnContrat" methodName="transformeEnContrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform the created command to contract" id="38cfe906-f82c-4482-b7cd-eb621557d7f2" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request> {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ts": "1456817611",
      "ip": "10.190.29.140"
    }
  }</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//transformerEnContrat</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f17de882-a958-4dea-916e-ed7f2c72d8af" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cdca5a8c-ee90-4327-9275-11ca603050ba" name="Response is not null"><con:configuration><token>"referencesContrats"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Extract refContract from DB" id="61247117-c0ed-44f5-8660-1e41381bb4bf"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select reference from contrat as c
left join elementcontractuel as ec on
ec.contratparent = c.id where 
ec.numeroCommande = "${Properties#refCommand}";
</con:query><con:assertion type="XQuery Match" name="exist refContrat" id="b78c8feb-fa25-464a-85d3-5bb06cf240ed"><con:configuration><path>exists(//*:CONTRAT.REFERENCE/text())</path><content>&lt;xml-fragment>true&lt;/xml-fragment></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="delay" name="Delay" id="7ac90dde-7a0d-4001-a3b6-30d6caa6c7c2"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="transfer" name="Transfer refContract" id="c2b85783-86af-47de-8b74-50f921e2de4d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refContract</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Extract refContract from DB</con:sourceStep><con:sourcePath>//*:Row/*:CONTRAT.REFERENCE/text()</con:sourcePath><con:targetType>refContract</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refContractGlobal</con:name><con:sourceType>refContract</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:sourcePath/><con:targetType>refContractGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Check three sub contracts are created" id="1c178be7-9503-4f40-968b-ab94339f4fcc"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM elementcontractuel where numeroCommande = "${Properties#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Three records are created"><con:configuration><path>count(//Row)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b0286b96-e80f-4a47-8cfb-c65cb0d16ad1" name="Main sub contract must be MVNO"><con:configuration><token>&lt;ELEMENTCONTRACTUEL.REFERENCEPRODUIT>MVNO&lt;/ELEMENTCONTRACTUEL.REFERENCEPRODUIT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="692b0bfb-4e7c-41d2-906d-4c0fa9d8ec5c" name="Sub contract 1 must be mvno_conso"><con:configuration><token>&lt;ELEMENTCONTRACTUEL.REFERENCEPRODUIT>mvno_conso&lt;/ELEMENTCONTRACTUEL.REFERENCEPRODUIT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="692b0bfb-4e7c-41d2-906d-4c0fa9d8ec5c" name="Sub contract 2 must be PACK-MVNO-POSTPAID-MOBILE"><con:configuration><token>&lt;ELEMENTCONTRACTUEL.REFERENCEPRODUIT>PACK-MVNO-POSTPAID-MOBILE&lt;/ELEMENTCONTRACTUEL.REFERENCEPRODUIT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="2.2 Check transformed reductions" id="6d9353ea-2e10-4c3d-8980-abb412e8d37e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM reduction where referenceContrat = "${Properties#refContract}" order by codeCatalogueReduction ASC;</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - Six reductions are found" disabled="true"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>6</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9d5af93a-1166-4ad4-bb26-d7b16a923b43" name="Reference contract must be"><con:configuration><token>&lt;REDUCTION.REFERENCECONTRAT>${Properties#refContract}&lt;/REDUCTION.REFERENCECONTRAT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refContractGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">00103991</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>5ea925a1-cf05-45ea-96a9-da6e9cea61cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e855bac4-da93-490c-a083-4d3582253166</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>66171c94-3533-4a48-97b1-520c721ef6c0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b1b214c1-8825-4977-9818-36c0caac19aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9de1e74a-9732-41bf-b6f0-bda43115bdc3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>70d73b99-26ed-4bf6-927a-6401c7d62260</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>01314d7a-2c4f-4491-afa1-fd29dc47360c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>61247117-c0ed-44f5-8660-1e41381bb4bf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c2b85783-86af-47de-8b74-50f921e2de4d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7ac90dde-7a0d-4001-a3b6-30d6caa6c7c2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="42374248-0025-421b-8950-5bf55f4d4431" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03.02 Transform successfully_A validated command with all reductions without detail ligne reduction_avfw.essentiel" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="Properties" id="8be138b7-19be-499c-9e44-63a91c908194"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>561202000</con:value></con:property><con:property><con:name>refContract</con:name><con:value>00103992</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Clear all propertie values" id="593b9eea-c241-475d-9d21-f5136554dbfd"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refContract",null)
testRunner.testCase.setPropertyValue("refContractGlobal",null)
testRunner.testCase.getTestStepByName("1. Validate a command with many reductions_avfw.essentiel").setPropertyValue("refCommandGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Validate a command with many reductions_avfw.essentiel" id="f7a06434-337b-4dc4-912f-b65e5303bcad"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>2283b840-9412-47db-b2d9-96d1f4037970</con:targetTestCase><con:properties><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM1</con:name><con:value>R2C4V5CB</con:value></con:property><con:property><con:name>refCommandGlobal</con:name><con:value>561202000</con:value></con:property><con:property><con:name>customerKey1</con:name><con:value>6002367491</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>00001006956</con:value></con:property></con:properties><con:returnProperties><con:entry>NbPassed</con:entry><con:entry>RUM1</con:entry><con:entry>refCommandGlobal</con:entry><con:entry>customerKey1</con:entry><con:entry>handleKey1</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="02ec6e50-1737-4146-9dd0-486ddc1a9222"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Validate a command with many reductions_avfw.essentiel</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform the created command to contract" id="b2445a68-e562-4e77-bda4-a75d1a1b918d"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/transformerEnContrat" methodName="transformeEnContrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform the created command to contract" id="38cfe906-f82c-4482-b7cd-eb621557d7f2" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request> {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ts": "1456817611",
      "ip": "10.190.29.140"
    }
  }</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//transformerEnContrat</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f17de882-a958-4dea-916e-ed7f2c72d8af" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cdca5a8c-ee90-4327-9275-11ca603050ba" name="Response is not null"><con:configuration><token>"referencesContrats"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Extract refContract from DB" id="354bdc90-c4f5-4532-8e18-e1ada9584915"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select reference from contrat as c
left join elementcontractuel as ec on
ec.contratparent = c.id where 
ec.numeroCommande = "${Properties#refCommand}";
</con:query><con:assertion type="XQuery Match" name="exist refContrat" id="b78c8feb-fa25-464a-85d3-5bb06cf240ed"><con:configuration><path>exists(//*:CONTRAT.REFERENCE/text())</path><content>&lt;xml-fragment>true&lt;/xml-fragment></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="delay" name="Delay" id="dd425a1b-d30d-43f6-b9b0-e442fdfbcbc4"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="transfer" name="Transfer refContract" id="46088b8f-0977-4301-a11e-69219194a89c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refContract</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Extract refContract from DB</con:sourceStep><con:sourcePath>//*:Row/*:CONTRAT.REFERENCE/text()</con:sourcePath><con:targetType>refContract</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refContractGlobal</con:name><con:sourceType>refContract</con:sourceType><con:sourceStep>Properties</con:sourceStep><con:sourcePath/><con:targetType>refContractGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Check three sub contracts are created" id="4964314b-b9b7-4fc3-a7a0-b5a80f7ff9a0"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM elementcontractuel where numeroCommande = "${Properties#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records are created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="2.2 Check transformed reductions" id="ba84f763-1842-4a97-8d24-35614dfb5198"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM reduction where referenceContrat = "${Properties#refContract}" order by codeCatalogueReduction ASC;</con:query><con:assertion type="XPath Match" id="e2a081c2-f508-41e9-8494-1925dbca513e" name="XPath Match - Six reductions are found" disabled="true"><con:configuration><path>count(/Results/ResultSet/Row)</path><content>6</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9d5af93a-1166-4ad4-bb26-d7b16a923b43" name="Reference contract must be"><con:configuration><token>&lt;REDUCTION.REFERENCECONTRAT>${Properties#refContract}&lt;/REDUCTION.REFERENCECONTRAT>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="f008beaa-75d6-4a28-a7db-dbd0b871ccb1" name="Not Contains"><con:configuration><token>&lt;REDUCTION.ELIGIBLE>0&lt;/REDUCTION.ELIGIBLE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8bae182-fcea-4e1e-95f4-5423d8d87436" name="dateEligibleDerniereModification must be NOT NULL"><con:configuration><token> &lt;REDUCTION.DATEELIGIBLEDERNIEREMODIFICATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refContractGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">00103992</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>5ea925a1-cf05-45ea-96a9-da6e9cea61cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e855bac4-da93-490c-a083-4d3582253166</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>66171c94-3533-4a48-97b1-520c721ef6c0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b1b214c1-8825-4977-9818-36c0caac19aa</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9de1e74a-9732-41bf-b6f0-bda43115bdc3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>70d73b99-26ed-4bf6-927a-6401c7d62260</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>01314d7a-2c4f-4491-afa1-fd29dc47360c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>354bdc90-c4f5-4532-8e18-e1ada9584915</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>46088b8f-0977-4301-a11e-69219194a89c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dd425a1b-d30d-43f6-b9b0-e442fdfbcbc4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="1a357bc0-d855-4563-8ebc-6facf625845d" name="signer"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="4b2a2fba-acd8-4cde-aef5-f419aae870b7" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.01 Sign failed_Autor not vaild" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="779b45e2-6205-48c4-bd75-b62e888c97d3"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003011</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>302002001</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="6d2cfc23-fc8e-4574-ade5-0974f5d580b0"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
</script></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected" id="f4dd2746-336e-4efe-a713-57ec74e83a7d"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "Welcome",
    "ip": {
      "ip": "10.190.29.140",
      "ts": 1456370857000
    }
  },
  "lignes": [
    {
      "auteur": {
        "qui": "hientran",
        "canal": "Welcome",
        "ip": {
          "ip": "10.190.29.150",
          "ts": 1456370857000
        }
      },
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
        
      "details": [
         {
            "referenceSelection": "MVNO-SERVICE",
            "referenceChoix": "mvno_conso",
            "referenceTarif": "83"
          },
         		  {
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }
      ]
    }
  }
  ],
  "souscripteur": {
    "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "livraison": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "facturation": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c918050e-5fc7-49ce-8e3f-11157f0790f9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refDraft" id="fa4ecf45-a3e0-4f13-a342-78484d498391"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande" id="6d45cd27-3a29-446e-a0ee-838734aa0360"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="30f940d7-8a4d-4d5c-97b3-e10f145d7995" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="11d8daa5-207e-49a9-b2c3-bfcb4e5518dc"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="3. Sign the created command_Successfully" id="a2040e8c-842d-4719-96be-e084a7ffc141"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Sign the created command_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "",
    "canal": "",
    "ip": {
      "ip": "",
      "ts": ""
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="errorCode must be"><con:configuration><token>"errorCode":"0.1.4"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="70f3de05-861c-4917-9b3d-ac1efb45160d" name="errorMessage must be"><con:configuration><token>"errorMessage":"Auteur.qui ne peut pas etre null."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>customerKey1</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refLigneGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4edc882c-c08a-4007-b221-ed013f349563</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ca4d9310-be06-4636-9c8e-c38c68d500b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ef57f960-b373-4044-9bb2-5e801713d1f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0805237-9155-4488-ad2d-25f5953baed7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1f408692-658d-4f78-8a01-6740142bad3e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8d21975f-820b-42d8-9b08-074cf231746d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6d2cfc23-fc8e-4574-ade5-0974f5d580b0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="b0fbbb67-1604-411a-b286-79c0c10a46b0" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.02 Sign failed_Command is not existed" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="restrequest" name="1. Let a command not existed_Sign failed_Check exception" id="99688281-5c8e-480b-bcb0-8997774030bb"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Let a command not existed_Sign failed_Check exception" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="912bc146-6af2-406e-a8db-2b9e5e5c94d0" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4d9a099e-4c57-40b3-a36c-f4124f62486b" name="errorCode"><con:configuration><token>"errorCode":"0.1.2"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Command is not existed" id="799f21f3-8953-4511-9129-0d98f0b35c82"><con:configuration><token>"errorMessage":"llement commande de rference abcdef nexiste pas."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="abcdef" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>customerKey1</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refLigneGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="95657e86-fe3f-478b-b68f-078ef59f2da2" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.03 Sign failed_Signature mode is empty" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="24b8b09b-8d9e-426e-8e38-1cba57b139a5"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003012</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>131102000</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="cfe62559-1297-4142-9b99-1f4d83c2cb0f"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
</script></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected" id="965d330b-c99f-4a76-8f96-cc266b727c31"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "Welcome",
    "ip": {
      "ip": "10.190.29.140",
      "ts": 1456370857000
    }
  },
  "lignes": [
    {
      "auteur": {
        "qui": "hientran",
        "canal": "Welcome",
        "ip": {
          "ip": "10.190.29.150",
          "ts": 1456370857000
        }
      },
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
        
      "details": [
         {
            "referenceSelection": "MVNO-SERVICE",
            "referenceChoix": "mvno_conso",
            "referenceTarif": "83"
          },
         		  {
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }
      ]
    }
  }
  ],
  "souscripteur": {
    "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "livraison": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "facturation": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c918050e-5fc7-49ce-8e3f-11157f0790f9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refDraft" id="f98ce05a-2530-42e2-a71b-fd377484f99f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande" id="1c35e2a1-4ba8-4362-849a-859187b9dd90"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="30f940d7-8a4d-4d5c-97b3-e10f145d7995" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="3bff178e-b151-4669-b4d6-6024e205838a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="3. Let signature mode empty_Sign failed_Check exception" id="7f854ff1-cf72-4331-bba0-1a36626317d5"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Let signature mode empty_Sign failed_Check exception" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
   "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
  },
  "mode": "",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="errorCode must be" disabled="true"><con:configuration><token>"errorCode":"0.1.4"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="70f3de05-861c-4917-9b3d-ac1efb45160d" name="errorMessage must be" disabled="true"><con:configuration><token>"errorMessage":"Auteur.qui ne peut pas etre null."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4edc882c-c08a-4007-b221-ed013f349563</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ca4d9310-be06-4636-9c8e-c38c68d500b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ef57f960-b373-4044-9bb2-5e801713d1f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0805237-9155-4488-ad2d-25f5953baed7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1f408692-658d-4f78-8a01-6740142bad3e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8d21975f-820b-42d8-9b08-074cf231746d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cfe62559-1297-4142-9b99-1f4d83c2cb0f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="8c2bef6b-b9ee-428b-a54b-6a4221a16bbc" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.04 Sign failed_codeFolio is empty" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="79ab048d-1aa6-4750-8940-5ee1491b6e8c"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003013</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>037220010</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="4a5e6c29-2972-47c9-aa79-38f759220fab"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
</script></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected" id="a1aa2afd-3cfc-402f-b0b2-c0ca86ce8319"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "Welcome",
    "ip": {
      "ip": "10.190.29.140",
      "ts": 1456370857000
    }
  },
  "lignes": [
    {
      "auteur": {
        "qui": "hientran",
        "canal": "Welcome",
        "ip": {
          "ip": "10.190.29.150",
          "ts": 1456370857000
        }
      },
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
        
      "details": [
         {
            "referenceSelection": "MVNO-SERVICE",
            "referenceChoix": "mvno_conso",
            "referenceTarif": "83"
          },
         		  {
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }
      ]
    }
  }
  ],
  "souscripteur": {
    "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "livraison": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "facturation": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c918050e-5fc7-49ce-8e3f-11157f0790f9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refDraft" id="977c1aae-0d98-4a7e-8d2d-736be8d120b7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande" id="850f2bfd-ec40-4e4d-bcbc-a175d2b03cc1"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="30f940d7-8a4d-4d5c-97b3-e10f145d7995" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="e6decbb2-edb1-40ad-b2ef-929529035b1c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="3. Let signature mode empty_Sign failed_Check exception" id="436e690b-a7f0-4712-90d7-478381c9ffe0"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Let signature mode empty_Sign failed_Check exception" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
   "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": ""  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="errorCode must be"><con:configuration><token>"errorCode":"1.1.61"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="70f3de05-861c-4917-9b3d-ac1efb45160d" name="errorMessage must be"><con:configuration><token>"errorMessage":"Le codeFolio de signature ne doit pas etre null ou vide."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>customerKey1</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refLigneGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4edc882c-c08a-4007-b221-ed013f349563</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ca4d9310-be06-4636-9c8e-c38c68d500b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ef57f960-b373-4044-9bb2-5e801713d1f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0805237-9155-4488-ad2d-25f5953baed7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1f408692-658d-4f78-8a01-6740142bad3e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8d21975f-820b-42d8-9b08-074cf231746d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4a5e6c29-2972-47c9-aa79-38f759220fab</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="55e2ca00-2db8-4f9b-96db-dfa84fd63d42" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.05 Sign failed_codeFolio is not existed" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="3d78a99c-2b0e-4287-88da-cab6345d4229"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003014</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>004300213</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="5d8bcfbb-d5b1-4495-a70f-da849b4a80bc"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
</script></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected" id="21dd9fca-f007-45d9-955c-7da8453935ef"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "Welcome",
    "ip": {
      "ip": "10.190.29.140",
      "ts": 1456370857000
    }
  },
  "lignes": [
    {
      "auteur": {
        "qui": "hientran",
        "canal": "Welcome",
        "ip": {
          "ip": "10.190.29.150",
          "ts": 1456370857000
        }
      },
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
        
      "details": [
         {
            "referenceSelection": "MVNO-SERVICE",
            "referenceChoix": "mvno_conso",
            "referenceTarif": "83"
          },
         		  {
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }
      ]
    }
  }
  ],
  "souscripteur": {
    "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "livraison": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "facturation": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c918050e-5fc7-49ce-8e3f-11157f0790f9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refDraft" id="f973e7ed-a97d-472d-824d-c9cd45311b04"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande" id="2b029ed1-cad2-4b81-b494-1667f80242da"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="30f940d7-8a4d-4d5c-97b3-e10f145d7995" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="19e238f9-6427-4b77-8581-b50e1f719830"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="3. Let codeFolio not existed in Panda_Sign failed_Check exception" id="3229cac5-4fac-4d60-8043-acf7d6bd2bac"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Let codeFolio not existed in Panda_Sign failed_Check exception" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
   "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "testCodeNotExisted"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="errorCode must be"><con:configuration><token>"errorCode":"1.1.62"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="70f3de05-861c-4917-9b3d-ac1efb45160d" name="errorMessage must be"><con:configuration><token>"errorMessage":"Le code folio testCodeNotExisted nexiste pas  Panda."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4edc882c-c08a-4007-b221-ed013f349563</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ca4d9310-be06-4636-9c8e-c38c68d500b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ef57f960-b373-4044-9bb2-5e801713d1f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0805237-9155-4488-ad2d-25f5953baed7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1f408692-658d-4f78-8a01-6740142bad3e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8d21975f-820b-42d8-9b08-074cf231746d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5d8bcfbb-d5b1-4495-a70f-da849b4a80bc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="94fddf06-c4a5-4b1b-86e3-8fae633aafd2" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.01 Sign successfully_Command has already signatureassociation (already init successfully)_Update the old one_mvnoConso and Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="f767cb95-2ee1-46cf-b005-c2dc22a82f58"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003015</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>431102000</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="6a3338f6-6ee1-4dff-beb7-d900365a63f7"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
</script></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected" id="bd1bbdbd-6da9-4be9-874a-f1c43f26f7db"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "Welcome",
    "ip": {
      "ip": "10.190.29.140",
      "ts": 1456370857000
    }
  },
  "lignes": [
    {
      "auteur": {
        "qui": "hientran",
        "canal": "Welcome",
        "ip": {
          "ip": "10.190.29.150",
          "ts": 1456370857000
        }
      },
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
        
      "details": [
         {
            "referenceSelection": "MVNO-SERVICE",
            "referenceChoix": "mvno_conso",
            "referenceTarif": "83"
          },
         		  {
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }
      ]
    }
  }
  ],
  "souscripteur": {
    "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "livraison": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "facturation": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c918050e-5fc7-49ce-8e3f-11157f0790f9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refDraft" id="f1c26e18-b114-46e5-87d9-c3ef061a5bb8"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande" id="f002c308-3075-464e-bd6e-152467fcec92"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="30f940d7-8a4d-4d5c-97b3-e10f145d7995" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="36a7d501-76fb-4acc-b676-c01c19cb7f45"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="delay" name="Waiting for initiation of documents" id="d206a272-69a5-4692-b03b-c05e91e3f43e"><con:settings/><con:config><delay>5000</delay></con:config></con:testStep><con:testStep type="restrequest" name="3. Init signature successfully" id="664d4ccc-b76c-4629-8e73-b4b38c366784"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Init signature successfully" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInitAfterSignature",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4. Sign the created command_Successfully" id="c7b43f5a-18c4-47ca-80cf-73f1dd4cf436"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Sign the created command_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="5. Select the created signature to check" id="a417c2c6-c451-420b-a344-e83fe9e8e1bd"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `signatureassociation` where referenceCommande = "${commandInfo#refCommand}" and canal = 'SOAPUI';</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="3c3d3d09-00e8-4d49-b430-988d65e8eb69" name="refCommand must be"><con:configuration><token>&lt;SIGNATUREASSOCIATION.REFERENCECOMMANDE>${commandInfo#refCommand}&lt;/SIGNATUREASSOCIATION.REFERENCECOMMANDE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="10e5d460-06ba-492e-98c9-4385e3754236" name="mode must be OPEN_TRUST"><con:configuration><token>&lt;SIGNATUREASSOCIATION.MODE>OPEN_TRUST&lt;/SIGNATUREASSOCIATION.MODE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cfd46043-da47-4d79-a79a-769ec12dc66d" name="codeFolio must be "><con:configuration><token>&lt;SIGNATUREASSOCIATION.CODEFOLIO>9CBEBAWGE2&lt;/SIGNATUREASSOCIATION.CODEFOLIO></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="783da9f9-c05a-4bd7-8512-b8935643139a" name="besoinSignature must be TRUE"><con:configuration><token>&lt;SIGNATUREASSOCIATION.BESOINSIGNATURE>1&lt;/SIGNATUREASSOCIATION.BESOINSIGNATURE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b1801946-8576-4208-a55e-b92e0ab90586" name="sign must be TRUE"><con:configuration><token>&lt;SIGNATUREASSOCIATION.SIGNE>1&lt;/SIGNATUREASSOCIATION.SIGNE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="34105a92-4fe4-408b-a32a-7305a84ae62a" name="canal must be SOAPUI"><con:configuration><token>&lt;SIGNATUREASSOCIATION.CANAL>SOAPUI&lt;/SIGNATUREASSOCIATION.CANAL>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="13934154-cb93-4948-a9a3-15bca06e7adc" name="ip must be 10.190.29.140"><con:configuration><token>&lt;SIGNATUREASSOCIATION.IP>10.190.29.140&lt;/SIGNATUREASSOCIATION.IP>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e0a9a138-7e3f-40a9-b408-c73a2594341e" name="ts must be 15/02/2016"><con:configuration><token>&lt;SIGNATUREASSOCIATION.TS>2016-02-15</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="554a9685-ded7-4678-9e17-f530dc528b8b" name="Qui must be hientranInitAfterSignature"><con:configuration><token>&lt;SIGNATUREASSOCIATION.QUI>hientranSigned&lt;/SIGNATUREASSOCIATION.QUI>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="delay" name="Wait for previous selection finished" id="092a9e99-d279-41f2-8365-08d36b6816ed"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="jdbc" name="6. Select the command to check dateSignatureInitialisation" id="92fb16f7-0534-4573-bb0e-d980c1d83afc"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commande` where reference = "${commandInfo#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89a2ee38-25f4-49f8-bbbc-094283c67f34" name="DateSignatureInitialization must be NOT NULL"><con:configuration><token>&lt;COMMANDE.DATESIGNATUREINITIALIZATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>customerKey1</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refLigneGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4edc882c-c08a-4007-b221-ed013f349563</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ca4d9310-be06-4636-9c8e-c38c68d500b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ef57f960-b373-4044-9bb2-5e801713d1f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0805237-9155-4488-ad2d-25f5953baed7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1f408692-658d-4f78-8a01-6740142bad3e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8d21975f-820b-42d8-9b08-074cf231746d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7b43f5a-18c4-47ca-80cf-73f1dd4cf436</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d206a272-69a5-4692-b03b-c05e91e3f43e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6a3338f6-6ee1-4dff-beb7-d900365a63f7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="6f85b2ed-5dc8-4ea5-bb59-c6ddba10c51c" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03. Sign successfully_besoinSignature is still FALSE_avfw.essentiel" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="4b3835e3-da3b-4fe8-8efc-2509caad8b6c"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="29ba547c-c6de-497e-9d42-df40ed7adbc3"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform to command with one offer no detail_antivirus" id="7c11ad67-5a73-43d4-b6ac-b6332499d6be"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>0d51eb30-0a61-410c-9f6d-3c60240f37ae</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>customerKey1</con:name></con:property><con:property><con:name>handleKey1</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="f04e2a9d-2c04-4d91-b7ce-9892c32540cf"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform to command with one offer no detail_antivirus</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="delay" name="Waiting for initiation of documents" id="da815b87-33c4-42e0-b3d8-69c14400ffc9"><con:settings/><con:config><delay>5000</delay></con:config></con:testStep><con:testStep type="restrequest" name="3. Init signature for the created command_Init successfully" id="fdc3cb30-072b-4c04-9ea4-632775585edf"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Init signature for the created command_Init successfully" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455408000000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4. Sign doc_Successfully" id="e6f88a5d-065f-4eda-9e88-3f509954e9a4"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Sign doc_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "HVREBAW3E2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="4. Select the created signature to check_besoinSignature must be FALSE" id="0e5ddcfd-03fe-42cb-83f0-5e16a3ce6a3f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `signatureassociation` where referenceCommande = "${commandInfo#refCommand}" and canal = 'SOAPUI';</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="3c3d3d09-00e8-4d49-b430-988d65e8eb69" name="refCommand must be"><con:configuration><token>&lt;SIGNATUREASSOCIATION.REFERENCECOMMANDE>${commandInfo#refCommand}&lt;/SIGNATUREASSOCIATION.REFERENCECOMMANDE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="10e5d460-06ba-492e-98c9-4385e3754236" name="mode must be null"><con:configuration><token>&lt;SIGNATUREASSOCIATION.MODE>OPEN_TRUST&lt;/SIGNATUREASSOCIATION.MODE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cfd46043-da47-4d79-a79a-769ec12dc66d" name="codeFolio must be "><con:configuration><token>&lt;SIGNATUREASSOCIATION.CODEFOLIO>HVREBAW3E2&lt;/SIGNATUREASSOCIATION.CODEFOLIO>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="783da9f9-c05a-4bd7-8512-b8935643139a" name="besoinSignature IS STILL FALSE"><con:configuration><token>&lt;SIGNATUREASSOCIATION.BESOINSIGNATURE>0&lt;/SIGNATUREASSOCIATION.BESOINSIGNATURE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b1801946-8576-4208-a55e-b92e0ab90586" name="sign must be TRUE"><con:configuration><token>&lt;SIGNATUREASSOCIATION.SIGNE>1&lt;/SIGNATUREASSOCIATION.SIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="34105a92-4fe4-408b-a32a-7305a84ae62a" name="canal must be SOAPUI"><con:configuration><token>&lt;SIGNATUREASSOCIATION.CANAL>SOAPUI&lt;/SIGNATUREASSOCIATION.CANAL>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="13934154-cb93-4948-a9a3-15bca06e7adc" name="ip must be 10.190.29.140"><con:configuration><token>&lt;SIGNATUREASSOCIATION.IP>10.190.29.140&lt;/SIGNATUREASSOCIATION.IP>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e0a9a138-7e3f-40a9-b408-c73a2594341e" name="ts must be 15/02/2016"><con:configuration><token>&lt;SIGNATUREASSOCIATION.TS>2016-02-15</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="5ea2f79e-6d03-4239-a814-45a94e7d1335" name="qui must be"><con:configuration><token> &lt;SIGNATUREASSOCIATION.QUI>hientranSigned&lt;/SIGNATUREASSOCIATION.QUI></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="delay" name="Wait for previous selection finished" id="29360ec1-57a4-4007-bb15-dd328527ddf9"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="jdbc" name="5. Select the command to check dateSignatureInitialisation" id="f59af0b7-1f81-422f-9080-0d30c2b94bc5"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commande` where reference = "${commandInfo#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89a2ee38-25f4-49f8-bbbc-094283c67f34" name="DateSignatureInitialization must be NOT NULL"><con:configuration><token>&lt;COMMANDE.DATESIGNATUREINITIALIZATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>customerKey1</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refLigneGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0ab85138-0040-4e15-b978-8ddf381ab78c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e6f88a5d-065f-4eda-9e88-3f509954e9a4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da815b87-33c4-42e0-b3d8-69c14400ffc9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29ba547c-c6de-497e-9d42-df40ed7adbc3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="fc4f5d4b-6af6-4196-82bf-d509ce67104d" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.02 Sign successfully_Command has not signatureassociation yet_Insert new record_mvnoPack and Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="bc155e60-bee6-45a1-83b8-19aec4d28441"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003016</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>003002351</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="d877c02b-8a6e-4ad9-8bfa-310ab11d5b1f"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
</script></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvno_pack" id="8d5a5272-01eb-4d29-81df-d3c59e895ebc"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvno_pack" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "canal": "SoapUIPRO",
    "qui": "hientran",
    "ip": {
      "ts": 1455615028000,
      "ip": "10.190.29.140"
    }
  },
  "lignes": [
    {
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
"details":[{
"referenceSelection": "MVNO-SERVICE" ,
"referenceChoix": "mvno_pack",
"referenceTarif": "77"
},
{
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }]
      }
    }
  ],
  "souscripteur": {
      "clientId": "192112",
      "adresseId": "511708010"
    },

    "facturation": {
      "clientId": "192112",
      "adresseId": "511708010"
    }
    ,

    "livraison": {
      "clientId": "192112",
      "adresseId": "511708010"
    },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c918050e-5fc7-49ce-8e3f-11157f0790f9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refDraft" id="8889b4b2-06c2-46b9-8ec9-349d4f357049"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_pack</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with params" id="4c14fbea-dc65-42b6-827f-c7b41d1686ec"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with params" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_pack",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_pack",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="30f940d7-8a4d-4d5c-97b3-e10f145d7995" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="061ed534-032d-489d-951a-7379bd1aa5b8"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with params</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="delay" name="Waiting for initiation of docs" id="6b162970-5de2-470b-b68d-86cbefdb6a44"><con:settings/><con:config><delay>5000</delay></con:config></con:testStep><con:testStep type="restrequest" name="3. Sign the created command_Successfully" id="7a494c9c-a8c4-42c6-9aa2-46d5837b9d82"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Sign the created command_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "HVREBAW3E2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="4. Select the created signature to check signatureassociation info" id="b5e9cd77-de5a-46bd-97c2-5b187042b2bf"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `signatureassociation` where referenceCommande = "${commandInfo#refCommand}" and canal = 'SOAPUI';</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="3c3d3d09-00e8-4d49-b430-988d65e8eb69" name="refCommand must be"><con:configuration><token>&lt;SIGNATUREASSOCIATION.REFERENCECOMMANDE>${commandInfo#refCommand}&lt;/SIGNATUREASSOCIATION.REFERENCECOMMANDE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="10e5d460-06ba-492e-98c9-4385e3754236" name="mode must be "><con:configuration><token>&lt;SIGNATUREASSOCIATION.MODE>OPEN_TRUST&lt;/SIGNATUREASSOCIATION.MODE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cfd46043-da47-4d79-a79a-769ec12dc66d" name="codeFolio must be"><con:configuration><token>&lt;SIGNATUREASSOCIATION.CODEFOLIO>HVREBAW3E2&lt;/SIGNATUREASSOCIATION.CODEFOLIO>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="783da9f9-c05a-4bd7-8512-b8935643139a" name="besoinSignature must be NULL"><con:configuration><token>&lt;SIGNATUREASSOCIATION.BESOINSIGNATURE/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b1801946-8576-4208-a55e-b92e0ab90586" name="sign must be TRUE"><con:configuration><token>&lt;SIGNATUREASSOCIATION.SIGNE>1&lt;/SIGNATUREASSOCIATION.SIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="34105a92-4fe4-408b-a32a-7305a84ae62a" name="canal must be SOAPUI"><con:configuration><token>&lt;SIGNATUREASSOCIATION.CANAL>SOAPUI&lt;/SIGNATUREASSOCIATION.CANAL>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="13934154-cb93-4948-a9a3-15bca06e7adc" name="ip must be 10.190.29.140"><con:configuration><token>&lt;SIGNATUREASSOCIATION.IP>10.190.29.140&lt;/SIGNATUREASSOCIATION.IP>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e0a9a138-7e3f-40a9-b408-c73a2594341e" name="ts must be 14/02/2016"><con:configuration><token>&lt;SIGNATUREASSOCIATION.TS>2016-02-14</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="5bfdd3cb-0885-4cc5-a175-df3f8ec09e66" name="qui must be 'hientranInitAgain'"><con:configuration><token>&lt;SIGNATUREASSOCIATION.QUI>hientranSigned&lt;/SIGNATUREASSOCIATION.QUI>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="delay" name="Wait for previous selection finished" id="bef25b9a-5b41-42b2-9633-07ab37355bb1"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="jdbc" name="5. Select the command to check dateSignatureInitialisation" id="8c693cd5-cf19-4f2e-8334-5494d2178bc0"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commande` where reference = "${commandInfo#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89a2ee38-25f4-49f8-bbbc-094283c67f34" name="DateSignatureInitialization must be NULL"><con:configuration><token>&lt;COMMANDE.DATESIGNATUREINITIALIZATION/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>customerKey1</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refLigneGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>71a22f1f-f772-4426-9bea-9a28cf2c3831</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>120919c4-fd3d-49d8-8212-989f558d8d6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6b162970-5de2-470b-b68d-86cbefdb6a44</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7a494c9c-a8c4-42c6-9aa2-46d5837b9d82</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d877c02b-8a6e-4ad9-8bfa-310ab11d5b1f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="c4d813ea-90ee-454c-aba6-ae22da42e51a" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.03 Sign successfully_Sign the same codeFolio_Update the old one_mvnoPack and Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="c5e5f28c-736d-41f6-947d-880cd2b045e5"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003017</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>302002601</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="b48dd51b-9219-4451-bdee-cbfca2b45e9a"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
</script></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvno_pack" id="4c271852-2ec5-4979-8731-c9da105ddc41"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvno_pack" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "canal": "SoapUIPRO",
    "qui": "hientran",
    "ip": {
      "ts": 1455615028000,
      "ip": "10.190.29.140"
    }
  },
  "lignes": [
    {
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
"details":[{
"referenceSelection": "MVNO-SERVICE" ,
"referenceChoix": "mvno_pack",
"referenceTarif": "77"
},
{
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }]
      }
    }
  ],
  "souscripteur": {
      "clientId": "192112",
      "adresseId": "511708010"
    },

    "facturation": {
      "clientId": "192112",
      "adresseId": "511708010"
    }
    ,

    "livraison": {
      "clientId": "192112",
      "adresseId": "511708010"
    },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c918050e-5fc7-49ce-8e3f-11157f0790f9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refDraft" id="57971032-445c-4460-97c2-a6336f4538b3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_pack</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with params" id="c3069190-d740-456e-b377-da51c53d98dd"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with params" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_pack",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_pack",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="30f940d7-8a4d-4d5c-97b3-e10f145d7995" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="715e92d4-24bf-4f92-8927-bfa081f33b39"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with params</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="delay" name="Waiting for initiation of docs" id="26b40066-6194-4465-b8f3-52b5cd16e123"><con:settings/><con:config><delay>5000</delay></con:config></con:testStep><con:testStep type="restrequest" name="3. Sign Identite doc of command_Successfully" id="86ff7f7d-ca8e-4f52-bd76-9797c4f9a7ed"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Sign Identite doc of command_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "HVREBAW3E2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="Waiting for the previous signature" id="e728bdf2-9a3f-4302-a2d0-e8ee33f57953"><con:settings/><con:config><delay>5000</delay></con:config></con:testStep><con:testStep type="restrequest" name="4. Sign once more time the same codeFolio_Successfully" id="e2f01ff7-e21d-4ce3-9152-74889241706c"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Sign once more time the same codeFolio_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSignAgain",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "HVREBAW3E2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="5. Select the created signature to check signatureassociation info" id="d8453dab-1f28-4aff-b01c-26b0fd5f46ca"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `signatureassociation` where referenceCommande = "${commandInfo#refCommand}" and canal = 'SOAPUI';</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="3c3d3d09-00e8-4d49-b430-988d65e8eb69" name="refCommand must be"><con:configuration><token>&lt;SIGNATUREASSOCIATION.REFERENCECOMMANDE>${commandInfo#refCommand}&lt;/SIGNATUREASSOCIATION.REFERENCECOMMANDE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="10e5d460-06ba-492e-98c9-4385e3754236" name="mode must be "><con:configuration><token>&lt;SIGNATUREASSOCIATION.MODE>OPEN_TRUST&lt;/SIGNATUREASSOCIATION.MODE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cfd46043-da47-4d79-a79a-769ec12dc66d" name="codeFolio must be"><con:configuration><token>&lt;SIGNATUREASSOCIATION.CODEFOLIO>HVREBAW3E2&lt;/SIGNATUREASSOCIATION.CODEFOLIO>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="783da9f9-c05a-4bd7-8512-b8935643139a" name="besoinSignature must be NULL"><con:configuration><token>&lt;SIGNATUREASSOCIATION.BESOINSIGNATURE/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b1801946-8576-4208-a55e-b92e0ab90586" name="sign must be TRUE"><con:configuration><token>&lt;SIGNATUREASSOCIATION.SIGNE>1&lt;/SIGNATUREASSOCIATION.SIGNE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="34105a92-4fe4-408b-a32a-7305a84ae62a" name="canal must be SOAPUI"><con:configuration><token>&lt;SIGNATUREASSOCIATION.CANAL>SOAPUI&lt;/SIGNATUREASSOCIATION.CANAL>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="13934154-cb93-4948-a9a3-15bca06e7adc" name="ip must be 10.190.29.140"><con:configuration><token>&lt;SIGNATUREASSOCIATION.IP>10.190.29.140&lt;/SIGNATUREASSOCIATION.IP>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e0a9a138-7e3f-40a9-b408-c73a2594341e" name="ts must be 15/02/2016"><con:configuration><token>&lt;SIGNATUREASSOCIATION.TS>2016-02-15</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="5bfdd3cb-0885-4cc5-a175-df3f8ec09e66" name="qui must be 'hientranSignAgain'"><con:configuration><token>&lt;SIGNATUREASSOCIATION.QUI>hientranSignAgain&lt;/SIGNATUREASSOCIATION.QUI>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="delay" name="Wait for previous selection finished" id="e7a6e469-2185-4883-a6e8-cedcfcb202b7"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="jdbc" name="6. Select the command to check dateSignatureInitialisation" id="d5cbfe21-682d-4643-bdb4-7a9252b4b185"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commande` where reference = "${commandInfo#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89a2ee38-25f4-49f8-bbbc-094283c67f34" name="DateSignatureInitialization must be NULL"><con:configuration><token>&lt;COMMANDE.DATESIGNATUREINITIALIZATION/></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>71a22f1f-f772-4426-9bea-9a28cf2c3831</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>120919c4-fd3d-49d8-8212-989f558d8d6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6b162970-5de2-470b-b68d-86cbefdb6a44</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7a494c9c-a8c4-42c6-9aa2-46d5837b9d82</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e2f01ff7-e21d-4ce3-9152-74889241706c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e728bdf2-9a3f-4302-a2d0-e8ee33f57953</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b48dd51b-9219-4451-bdee-cbfca2b45e9a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="7c818987-c6b6-4faa-b341-33c7d00665d2" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.04 Sign successfully_Sign many docs with new codeFolio_Insert new ones_mvnoConso and Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="commandInfo" id="d9563089-769f-415c-9903-a83bd5ff4628"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003018</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>731102000</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="74ed64df-8e97-40df-a037-e1438a508865"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
</script></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected" id="051e46e0-669c-4725-a49c-c69e7c13a027"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "Welcome",
    "ip": {
      "ip": "10.190.29.140",
      "ts": 1456370857000
    }
  },
  "lignes": [
    {
      "auteur": {
        "qui": "hientran",
        "canal": "Welcome",
        "ip": {
          "ip": "10.190.29.150",
          "ts": 1456370857000
        }
      },
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
        
      "details": [
         {
            "referenceSelection": "MVNO-SERVICE",
            "referenceChoix": "mvno_conso",
            "referenceTarif": "83"
          },
         		  {
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }
      ]
    }
  }
  ],
  "souscripteur": {
    "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "livraison": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "facturation": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c918050e-5fc7-49ce-8e3f-11157f0790f9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refDraft" id="321eb2a6-def9-45c8-a6c2-5ff36ffac4f0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande" id="7d682a29-32ee-4541-9cab-7c892c808f7a"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI"
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="30f940d7-8a4d-4d5c-97b3-e10f145d7995" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="e915b084-45c9-4599-a297-64986464f73c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="delay" name="Waiting for initiation of documents" id="8da3e03e-601e-4322-a8dc-6f9b6b672571"><con:settings/><con:config><delay>5000</delay></con:config></con:testStep><con:testStep type="restrequest" name="3. Init signature successfully" id="d2399ae5-656c-4e31-b8bc-68b57c97d6ab"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Init signature successfully" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInit",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4. Sign doc 1_Successfully" id="4f9f86a9-6f57-4384-afd6-b5ae04522414"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Sign doc 1_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSignDoc1",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "HVREBAW3E2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="5. Sign Doc 2_Successfully" id="25a4f1c5-4432-41c3-9577-b05bf84bccfc"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5. Sign Doc 2_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSignDoc2",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455584461000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "TVDEBAW3E2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="6. Sign Doc 3_Successfully" id="7d44a60f-8ea0-46f1-9662-e2f675d5797f"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="6. Sign Doc 3_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSignDoc3",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455670861000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "5VXEBAW4E2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="5. Select the created signature to check" id="3acf0af6-1a1c-4563-abdc-aebc91986e24"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `signatureassociation` where referenceCommande = "${commandInfo#refCommand}" and canal = 'SOAPUI';</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Three records is created"><con:configuration><path>count(//Row)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="3c3d3d09-00e8-4d49-b430-988d65e8eb69" name="refCommand must be"><con:configuration><token>&lt;SIGNATUREASSOCIATION.REFERENCECOMMANDE>${commandInfo#refCommand}&lt;/SIGNATUREASSOCIATION.REFERENCECOMMANDE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="10e5d460-06ba-492e-98c9-4385e3754236" name="mode must be OPEN_TRUST"><con:configuration><token>&lt;SIGNATUREASSOCIATION.MODE>OPEN_TRUST&lt;/SIGNATUREASSOCIATION.MODE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cfd46043-da47-4d79-a79a-769ec12dc66d" name="codeFolio1 must be "><con:configuration><token>&lt;SIGNATUREASSOCIATION.CODEFOLIO>HVREBAW3E2&lt;/SIGNATUREASSOCIATION.CODEFOLIO></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cfd46043-da47-4d79-a79a-769ec12dc66d" name="codeFolio2 must be "><con:configuration><token>&lt;SIGNATUREASSOCIATION.CODEFOLIO>TVDEBAW3E2&lt;/SIGNATUREASSOCIATION.CODEFOLIO></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cfd46043-da47-4d79-a79a-769ec12dc66d" name="codeFolio3 must be "><con:configuration><token>&lt;SIGNATUREASSOCIATION.CODEFOLIO>5VXEBAW4E2&lt;/SIGNATUREASSOCIATION.CODEFOLIO></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="783da9f9-c05a-4bd7-8512-b8935643139a" name="besoinSignature must be false"><con:configuration><token>&lt;SIGNATUREASSOCIATION.BESOINSIGNATURE>0&lt;/SIGNATUREASSOCIATION.BESOINSIGNATURE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b1801946-8576-4208-a55e-b92e0ab90586" name="sign must be TRUE"><con:configuration><token>&lt;SIGNATUREASSOCIATION.SIGNE>1&lt;/SIGNATUREASSOCIATION.SIGNE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="34105a92-4fe4-408b-a32a-7305a84ae62a" name="canal must be SOAPUI"><con:configuration><token>&lt;SIGNATUREASSOCIATION.CANAL>SOAPUI&lt;/SIGNATUREASSOCIATION.CANAL>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="13934154-cb93-4948-a9a3-15bca06e7adc" name="ip must be 10.190.29.140"><con:configuration><token>&lt;SIGNATUREASSOCIATION.IP>10.190.29.140&lt;/SIGNATUREASSOCIATION.IP>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e0a9a138-7e3f-40a9-b408-c73a2594341e" name="ts1 must be 15/02/2016"><con:configuration><token>&lt;SIGNATUREASSOCIATION.TS>2016-02-15</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e0a9a138-7e3f-40a9-b408-c73a2594341e" name="ts2 must be 16/02/2016"><con:configuration><token>&lt;SIGNATUREASSOCIATION.TS>2016-02-16</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e0a9a138-7e3f-40a9-b408-c73a2594341e" name="ts3 must be 17/02/2016"><con:configuration><token>&lt;SIGNATUREASSOCIATION.TS>2016-02-17</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="554a9685-ded7-4678-9e17-f530dc528b8b" name="Qui 1 must be hientranSignDoc1"><con:configuration><token>&lt;SIGNATUREASSOCIATION.QUI>hientranSignDoc1&lt;/SIGNATUREASSOCIATION.QUI>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="554a9685-ded7-4678-9e17-f530dc528b8b" name="Qui 2 must be hientranSignDoc2"><con:configuration><token>&lt;SIGNATUREASSOCIATION.QUI>hientranSignDoc2&lt;/SIGNATUREASSOCIATION.QUI>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="554a9685-ded7-4678-9e17-f530dc528b8b" name="Qui 3 must be hientranSignDoc3"><con:configuration><token>&lt;SIGNATUREASSOCIATION.QUI>hientranSignDoc3&lt;/SIGNATUREASSOCIATION.QUI>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="delay" name="Wait for previous selection finished" id="765c9e38-0944-4eca-aec9-e6f8347884d3"><con:settings/><con:config><delay>1000</delay></con:config></con:testStep><con:testStep type="jdbc" name="6. Select the command to check dateSignatureInitialisation" id="d7538735-e3b2-4819-9768-372165af1625"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commande` where reference = "${commandInfo#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89a2ee38-25f4-49f8-bbbc-094283c67f34" name="DateSignatureInitialization must be NOT NULL"><con:configuration><token>&lt;COMMANDE.DATESIGNATUREINITIALIZATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>customerKey1</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refLigneGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4edc882c-c08a-4007-b221-ed013f349563</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ca4d9310-be06-4636-9c8e-c38c68d500b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ef57f960-b373-4044-9bb2-5e801713d1f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0805237-9155-4488-ad2d-25f5953baed7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1f408692-658d-4f78-8a01-6740142bad3e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8d21975f-820b-42d8-9b08-074cf231746d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7b43f5a-18c4-47ca-80cf-73f1dd4cf436</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d206a272-69a5-4692-b03b-c05e91e3f43e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>25a4f1c5-4432-41c3-9577-b05bf84bccfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7d44a60f-8ea0-46f1-9662-e2f675d5797f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>74ed64df-8e97-40df-a037-e1438a508865</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="be72f92f-4fac-428f-a471-f44cc3049e67" name="validerCommande"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="a6b574bd-bd75-4385-b402-0fdfed8e2227" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.02 Validate failed_documente FALSE and documentDemande TRUE_mvnoConso" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="efaccf5f-e699-4a29-a724-8460c27ce8d0">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="e4e8517e-d033-4b98-a972-ec32b49dab38"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>209620060</con:value></con:property><con:property><con:name>refSignature</con:name><con:value>00000019</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="32ff8729-8139-4c25-8198-602f284be96f"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.setPropertyValue( "RUM2",'RRE4F5CB')
testRunner.testCase.setPropertyValue( "customerKey2",'192112')
testRunner.testCase.setPropertyValue( "handleKey2",'511708010')</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft then transform to command_mvno_conso" id="286f1335-549c-4351-b3b7-684cd8ea922c"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>26159fd4-99e5-43cd-b2e6-d5f52b49a5c2</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>209620060</con:value></con:property><con:property><con:name>customerKey2</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey2</con:name><con:value>511708010</con:value></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>refCommandLigneGlobal</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>customerKey2</con:entry><con:entry>handleKey2</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="eca1f156-7e54-4104-979e-6781e5301b91"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a draft then transform to command_mvno_conso</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a draft then transform to command_mvno_conso</con:sourceStep><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2 Pay RECURRENT for the created command" id="1badadfc-aebc-4102-9f76-284b6c25d261"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2 Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM2}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="2eb46671-3317-41ad-b4e0-d8b223903981">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Waiting for initiation of documents" id="be423ce7-d8d0-40ae-bf6e-ebf9e096a181"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="ab0e7f98-99c3-4f54-92e1-cf94a59c6661"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="9e2f07b8-12ed-4cf1-95a5-b7e80fbfe639"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="3. Init signature successfully" id="07f166fe-4eaf-4462-a530-a6862baff628" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Init signature successfully" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInitAfterSignature",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4. Sign doc of created command_Successfully" id="6018bb6e-8e25-4e5e-b516-9bc5719695b5"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Sign doc of created command_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="5. Update DB_Set documentDemande = 1 and documente = 0" id="2daa533e-eefd-41a0-a393-ae3bcdfb90e4"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 1, documente = 0 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="6. Validate the completed command_Validate failed" id="bef504a1-d314-4933-943d-dba4a0f649eb"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="6. Validate the completed command_Validate failed" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Simple Contains" name="Validation must be false" id="20c1dc7f-29f0-4818-987d-5791bbb7dc48"><con:configuration><token>"valide":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="3ca86dd2-537d-4986-9a8c-9230bd90c3cc" name="source must be"><con:configuration><token>"source":"Document"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="481c69f7-53a2-4352-86fd-6e94c1c161d7" name="errorCode must be"><con:configuration><token>"error":"2.1.25"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="47e36a73-846d-453f-b43c-db8503c80ee1" name="errorDescription must be" disabled="true"><con:configuration><token>"errorMessage":"La commande possde les documents du client 511708010 qui ne sont pas valides..  "</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="f8eee6ae-172b-446d-ae72-56f7f5598beb" name="XPath Match_Two errors are returned"><con:configuration><path>count(//*:reasons/*:e)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="5be636f9-4436-41e9-b8fb-71587f366dcf" name="Valid false"><con:configuration><token>"valide":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">209620060</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>customerKey2</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey2</con:name><con:value>511708010</con:value></con:property><con:property><con:name>RUM2</con:name><con:value>RRE4F5CB</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>286f1335-549c-4351-b3b7-684cd8ea922c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e4e8517e-d033-4b98-a972-ec32b49dab38</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eca1f156-7e54-4104-979e-6781e5301b91</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bef504a1-d314-4933-943d-dba4a0f649eb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1badadfc-aebc-4102-9f76-284b6c25d261</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>32ff8729-8139-4c25-8198-602f284be96f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2daa533e-eefd-41a0-a393-ae3bcdfb90e4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>07f166fe-4eaf-4462-a530-a6862baff628</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6018bb6e-8e25-4e5e-b516-9bc5719695b5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>be423ce7-d8d0-40ae-bf6e-ebf9e096a181</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9e2f07b8-12ed-4cf1-95a5-b7e80fbfe639</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ab0e7f98-99c3-4f54-92e1-cf94a59c6661</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>efaccf5f-e699-4a29-a724-8460c27ce8d0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2eb46671-3317-41ad-b4e0-d8b223903981</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="a9352b70-5311-4da3-aada-e00dcfff3a6c" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.02 Validate failed_documente null and documentDemande TRUE_mvnoConso and Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="b38bd864-63eb-4176-ac23-6557627a407c">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="1a7426d0-e466-4c99-9b58-93d44de1d2d9"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>006007226</con:value></con:property><con:property><con:name>refSignature</con:name><con:value>00000020</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="c0a0a2a8-2a1f-4cee-849f-7e9d6f553c2c"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.setPropertyValue( "RUM3",'RRE4F5CB')
testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft then transform to command_mvno_conso and Bien" id="dbea7a58-51d0-46e3-b42e-34de0d0448d2"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>b93b868a-13f5-479a-9046-5beb3a9f7314</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>006007226</con:value></con:property><con:property><con:name>customerKey3</con:name></con:property><con:property><con:name>handleKey3</con:name></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>refCommandLigneGlobal</con:name></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="c3877355-370a-48ba-894f-17ba778ddf8a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a draft then transform to command_mvno_conso and Bien</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a draft then transform to command_mvno_conso and Bien</con:sourceStep><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2 Pay RECURRENT for the created command" id="08f07dbf-ebdf-45d3-a5fe-295dd1272dc9"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2 Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Pay COMPTANT for the created command" id="a6f6cd13-a601-4ec8-925e-02eed5b135d7" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "5",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R0000000",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c" disabled="true"><con:configuration><token>"signatureReference":"${Properties#refPayment}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="3c31bcca-ff4b-4a7c-999a-1a1917071748">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait for initiation of associated documents" id="17c0cc29-3123-4be2-886a-76e4e2a3ac5e"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="43f8a3f0-6253-43cd-b563-0720ff0d2d28"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="81421c15-8ee2-4684-ac74-5be94f100ae6"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="3. Init signature successfully" id="40d148b7-e4e4-4e07-abd8-bce71a64bc20" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Init signature successfully" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInitAfterSignature",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4. Sign doc of created command_Successfully" id="09d4188f-76bf-46e3-9809-a402e64305e8"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Sign doc of created command_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="5. Update DB_Set documentDemande = 1 and documente = null" id="d13908e9-7b5d-4cca-94a6-0fd252823eef"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 1, documente = null where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="6. Validate the completed command_Validate failed" id="0dad5138-68cc-4403-9900-ee4553e69346"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="6. Validate the completed command_Validate failed" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Simple Contains" name="Validation must be false" id="20c1dc7f-29f0-4818-987d-5791bbb7dc48"><con:configuration><token>"valide":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="481c69f7-53a2-4352-86fd-6e94c1c161d7" name="errorCode must be"><con:configuration><token>"error":"2.1.25"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="47e36a73-846d-453f-b43c-db8503c80ee1" name="errorDescription must be" disabled="true"><con:configuration><token>"errorMessage":"La commande possde les documents du client 511708010 qui ne sont pas valides..  "</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="f8eee6ae-172b-446d-ae72-56f7f5598beb" name="XPath Match_Two errors are returned"><con:configuration><path>count(//*:reasons/*:e)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cda82abe-f032-4d93-910d-a5d6f145a183" name="Valid false"><con:configuration><token>"valide":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>006007226</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>286f1335-549c-4351-b3b7-684cd8ea922c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4e58e072-8c16-4b64-afcf-8913880acf5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0fbec94c-bb27-4c91-80d2-910102fb0d41</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e4e8517e-d033-4b98-a972-ec32b49dab38</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eca1f156-7e54-4104-979e-6781e5301b91</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bef504a1-d314-4933-943d-dba4a0f649eb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e738c3f-8f68-40b2-8037-38c3af497361</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1badadfc-aebc-4102-9f76-284b6c25d261</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f33cb3a3-2e46-4b2b-bbd3-28e65a8c8d5b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c5d670d3-a2cc-4328-a54b-ef9a730731d9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b38bd864-63eb-4176-ac23-6557627a407c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3c31bcca-ff4b-4a7c-999a-1a1917071748</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>81421c15-8ee2-4684-ac74-5be94f100ae6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>43f8a3f0-6253-43cd-b563-0720ff0d2d28</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a6f6cd13-a601-4ec8-925e-02eed5b135d7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c0a0a2a8-2a1f-4cee-849f-7e9d6f553c2c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>40d148b7-e4e4-4e07-abd8-bce71a64bc20</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09d4188f-76bf-46e3-9809-a402e64305e8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d13908e9-7b5d-4cca-94a6-0fd252823eef</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="1079bff3-dbd6-4189-88d3-d69e30daa204" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.03 Validate failed_Not all documente TRUE_mvnoConso and Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="c1193beb-9824-4588-b950-7a565ad71c05">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="ab32b261-e7ee-41ef-a074-b3d0b6df9490"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>003002682</con:value></con:property><con:property><con:name>refSignature</con:name><con:value>00000020</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="78b95abd-ba81-4833-9eaf-9c174ec10cb2"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.setPropertyValue( "RUM3",'RRE4F5CB')
testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft then transform to command_mvno_conso and Bien" id="b73fc054-5c8c-496f-b69a-eec09b92c60a"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>b93b868a-13f5-479a-9046-5beb3a9f7314</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>003002682</con:value></con:property><con:property><con:name>customerKey3</con:name></con:property><con:property><con:name>handleKey3</con:name></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>refCommandLigneGlobal</con:name></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="76fb052a-64ff-407c-ad84-e024528bb1a9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a draft then transform to command_mvno_conso and Bien</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a draft then transform to command_mvno_conso and Bien</con:sourceStep><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2 Pay RECURRENT for the created command" id="0b645006-93fd-41b4-a5ca-23fb67d0848c"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2 Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Pay COMPTANT for the created command" id="557e6e36-960f-4201-8c8e-db3fc8fd0429" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "5",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R0000000",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c" disabled="true"><con:configuration><token>"signatureReference":"${Properties#refPayment}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="888b9b4a-c825-4ef4-abaf-230d05677a4a">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait for initiation of associated documents" id="e1419699-f91b-4347-b421-3937777acea8"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="aa80d249-0967-417a-b320-92b88d40268c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="c60287fc-6d6a-413e-80fb-72b12768f1af"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="3. Init signature successfully" id="0af8660a-f96d-4f58-964a-d9ad195390b5" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Init signature successfully" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInitAfterSignature",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4. Sign doc of created command_Successfully" id="33154e44-e5e0-4a25-8f8d-1be393e94a81"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Sign doc of created command_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="5. Update DB_Set documentDemande = 1 and documente = null" id="42bbe776-173e-4ebd-85e4-826c31f44c71"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 1, documente = null where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="6. Validate the completed command_Validate failed" id="4fd627d9-dbb2-4115-b8c4-ee2cab02ec13"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="6. Validate the completed command_Validate failed" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Simple Contains" name="Validation must be false" id="20c1dc7f-29f0-4818-987d-5791bbb7dc48"><con:configuration><token>"valide":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="481c69f7-53a2-4352-86fd-6e94c1c161d7" name="errorCode must be"><con:configuration><token>"error":"2.1.25"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="47e36a73-846d-453f-b43c-db8503c80ee1" name="errorDescription must be" disabled="true"><con:configuration><token>"errorMessage":"La commande possde les documents du client 511708010 qui ne sont pas valides..  "</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="f8eee6ae-172b-446d-ae72-56f7f5598beb" name="XPath Match_Two errors are returned"><con:configuration><path>count(//*:reasons/*:e)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="fc1e3274-bf58-45b6-820f-022939a07838" name="Valid false"><con:configuration><token>"valide":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>003002682</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>286f1335-549c-4351-b3b7-684cd8ea922c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4e58e072-8c16-4b64-afcf-8913880acf5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0fbec94c-bb27-4c91-80d2-910102fb0d41</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e4e8517e-d033-4b98-a972-ec32b49dab38</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eca1f156-7e54-4104-979e-6781e5301b91</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bef504a1-d314-4933-943d-dba4a0f649eb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e738c3f-8f68-40b2-8037-38c3af497361</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1badadfc-aebc-4102-9f76-284b6c25d261</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f33cb3a3-2e46-4b2b-bbd3-28e65a8c8d5b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c5d670d3-a2cc-4328-a54b-ef9a730731d9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b38bd864-63eb-4176-ac23-6557627a407c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3c31bcca-ff4b-4a7c-999a-1a1917071748</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>81421c15-8ee2-4684-ac74-5be94f100ae6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>43f8a3f0-6253-43cd-b563-0720ff0d2d28</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a6f6cd13-a601-4ec8-925e-02eed5b135d7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c0a0a2a8-2a1f-4cee-849f-7e9d6f553c2c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>40d148b7-e4e4-4e07-abd8-bce71a64bc20</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09d4188f-76bf-46e3-9809-a402e64305e8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d13908e9-7b5d-4cca-94a6-0fd252823eef</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="a71d7467-8521-4053-b945-f89847c97154" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.04 Validate failed_dateDocumentInitialization null_mvnoConso and Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="79ffc9c8-e709-4d55-a375-c5ea98a833bd">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="98c3fe2b-89c1-4b43-bf2f-632202c1d435"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>209920060</con:value></con:property><con:property><con:name>refSignature</con:name><con:value>00000020</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="ad679ba4-f900-4e0b-885d-6b5a7817bcf6"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.setPropertyValue( "RUM3",'RRE4F5CB')
testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft then transform to command_mvno_conso and Bien" id="f98f6397-e9b6-4ea4-9f76-8a93bd2e742e"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>b93b868a-13f5-479a-9046-5beb3a9f7314</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>209920060</con:value></con:property><con:property><con:name>customerKey3</con:name></con:property><con:property><con:name>handleKey3</con:name></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>refCommandLigneGlobal</con:name></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="c34131ab-35d2-433b-8693-a8c5ec5f8ce9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a draft then transform to command_mvno_conso and Bien</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a draft then transform to command_mvno_conso and Bien</con:sourceStep><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2 Pay RECURRENT for the created command" id="48baba88-060d-4020-9873-a803a31a007a"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2 Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Pay COMPTANT for the created command" id="58c6c0d9-f83e-47d6-8525-42a1295b6ef7" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "5",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R0000000",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c" disabled="true"><con:configuration><token>"signatureReference":"${Properties#refPayment}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="c0462d27-3978-4c6b-9b67-2e51d2d4ec07">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="3.1 Wait for initiation of associated documents" id="2c3820f7-477e-4966-b08d-8c1ef876c9f6"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="dee0b754-5c8f-4e62-a48a-b8d9f2f007fc"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="925dbf26-3e2d-406e-bc69-174ddc049088"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="3.2 Update DB_Set documentDemande = 1 and documente = 1" id="e35e5db2-1634-404f-b74d-08bf0bc842da"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 1, documente = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="4.1 Init signature successfully" id="37335075-3969-475d-b964-731b31848da8" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4.1 Init signature successfully" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInitAfterSignature",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4.2 Sign doc of created command_Successfully" id="0e42cf95-fe6b-40fd-b122-a769203b6ebf"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4.2 Sign doc of created command_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="5. Update DB_Set dateDocumentInitialization to null" id="a9152877-aa83-4ec6-b1d9-64858b409498"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE commande SET dateDocumentInitialization = null where reference = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="6. Validate the completed command_Validate failed" id="dc9cd64e-316d-4da7-98ff-2df098f52e64"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="6. Validate the completed command_Validate failed" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Simple Contains" name="Validation must be false" id="20c1dc7f-29f0-4818-987d-5791bbb7dc48"><con:configuration><token>"valide":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7d47e382-d5f2-4682-b3a6-ba58f7f6d08e" name="Source must be"><con:configuration><token>"source":"initCommandeDocument"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="481c69f7-53a2-4352-86fd-6e94c1c161d7" name="errorCode must be"><con:configuration><token>"error":"2.1.27"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="47e36a73-846d-453f-b43c-db8503c80ee1" name="errorDescription must be"><con:configuration><token>"errorMessage":"La commande n'est pas encore initie succs. Merci de re-demander dans quelques secondes."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cda82abe-f032-4d93-910d-a5d6f145a183" name="Valid false"><con:configuration><token>"valide":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>209920060</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>286f1335-549c-4351-b3b7-684cd8ea922c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4e58e072-8c16-4b64-afcf-8913880acf5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0fbec94c-bb27-4c91-80d2-910102fb0d41</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e4e8517e-d033-4b98-a972-ec32b49dab38</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eca1f156-7e54-4104-979e-6781e5301b91</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bef504a1-d314-4933-943d-dba4a0f649eb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e738c3f-8f68-40b2-8037-38c3af497361</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1badadfc-aebc-4102-9f76-284b6c25d261</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f33cb3a3-2e46-4b2b-bbd3-28e65a8c8d5b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c5d670d3-a2cc-4328-a54b-ef9a730731d9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b38bd864-63eb-4176-ac23-6557627a407c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3c31bcca-ff4b-4a7c-999a-1a1917071748</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>81421c15-8ee2-4684-ac74-5be94f100ae6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>43f8a3f0-6253-43cd-b563-0720ff0d2d28</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a6f6cd13-a601-4ec8-925e-02eed5b135d7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c0a0a2a8-2a1f-4cee-849f-7e9d6f553c2c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>40d148b7-e4e4-4e07-abd8-bce71a64bc20</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09d4188f-76bf-46e3-9809-a402e64305e8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d13908e9-7b5d-4cca-94a6-0fd252823eef</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e35e5db2-1634-404f-b74d-08bf0bc842da</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a9152877-aa83-4ec6-b1d9-64858b409498</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="05c96857-1197-4062-b0d3-16e4e619d7f5" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.05 Validate failed_dateSignatureInitialization null (not init yet)_mvnoConso and Bien_Cannot test" searchProperties="true" disabled="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="35c86a94-febe-4418-b8e9-e7cd4a91a157">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="063c5e6f-c899-467a-8d81-56aee21dbb9f"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>088002209</con:value></con:property><con:property><con:name>refSignature</con:name><con:value>00000014</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="6d391c9f-a3e9-4715-beb4-0d3bb76f54aa"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.setPropertyValue( "RUM3",'RRE4F5CB')
testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a command_One offer_Two choice_mvnoConso and Bien" id="9ea26933-55ea-4dba-a4b4-2c45e72a7a0c"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>6480b3ef-c7b1-44d2-b94f-b962d23bd271</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>088002209</con:value></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="40d2b5af-4ee7-462c-9127-14425af5f223"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a command_One offer_Two choice_mvnoConso and Bien</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a command_One offer_Two choice_mvnoConso and Bien</con:sourceStep><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Pay COMPTANT for the created command" id="d236f822-e205-4980-93ac-ef33b39d8902"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "5",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R0000000",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c" disabled="true"><con:configuration><token>"signatureReference":"${Properties#refPayment}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2 Pay RECURRENT for the created command" id="8913993c-ccfd-4bf0-9593-9a405b119336"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2 Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="af7906d1-614e-48f2-b290-80c092064771">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="3. Wait for initiation of documents" id="03471da1-ae39-4439-8312-0869dcfa724f"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="a2d42eed-49ef-4525-b38a-c39182e5ea31"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="6f3328ad-44c1-4755-8fc0-4eac7042a035"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="3.1 Update DB_Set documentDemande = 1 and documente = 1" id="2a66f87f-483b-48fb-b699-b536ee415a16"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 1, documente = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="4. Don't init signature_Validate command_Validate failed_Check exception" id="8ad5543d-754c-437c-aeb7-3d1fb5e0234f"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Don't init signature_Validate command_Validate failed_Check exception" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Simple Contains" name="Validation must be false" id="20c1dc7f-29f0-4818-987d-5791bbb7dc48"><con:configuration><token>"valide":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="24df6e04-cfca-4466-b6e3-3d2bcd5bf068" name="Source must be"><con:configuration><token>"source":"initCommandeSignature"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8e00bbf-b1ee-48ad-8e12-8d8859ba5793" name="errorCode must be"><con:configuration><token>"error":"2.1.27"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="1e9fd962-032a-4919-be17-ca2c612a3b22" name="errorMessage must be"><con:configuration><token>"errorMessage":"La commande n'est pas encore initie succs. Merci de re-demander dans quelques secondes."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">088002209</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>286f1335-549c-4351-b3b7-684cd8ea922c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4e58e072-8c16-4b64-afcf-8913880acf5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0fbec94c-bb27-4c91-80d2-910102fb0d41</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e4e8517e-d033-4b98-a972-ec32b49dab38</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eca1f156-7e54-4104-979e-6781e5301b91</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bef504a1-d314-4933-943d-dba4a0f649eb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e738c3f-8f68-40b2-8037-38c3af497361</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1badadfc-aebc-4102-9f76-284b6c25d261</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f33cb3a3-2e46-4b2b-bbd3-28e65a8c8d5b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>206d52d1-8b4c-4e7b-b360-205e71fbfabf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c227c93f-6044-4609-b132-ac947717de93</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>53575c87-80f8-4c6a-976f-2e636d417496</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9f17d94-672e-4345-8758-78ca923b8b9f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dc5b2c4a-7bcd-4424-a3ef-4bf0fdfe1a49</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4e87dd5b-70d4-468d-af23-4a756b97a9ea</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>55c08819-99b8-42d1-b098-efa1ed96fc53</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8fbfc25e-8dcb-4f6e-b06b-a44e4be57629</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dffabb58-4179-43bc-9435-8fde40f9fc6e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7038a64a-cf1c-4254-90f1-73bdca3892ca</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="c12ba317-bcbf-4459-ab38-83904a48448c" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.06 Validate failed_signe FALSE and besoinSign TRUE_mvnoConso and Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="e5e0e225-d74d-4488-a06e-5549f3c6acfe">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="beae5c88-90df-4474-b274-080c758fc6d0"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>702002102</con:value></con:property><con:property><con:name>refSignature</con:name><con:value>00000014</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="9437f795-d3fe-4c46-ba9e-94c3c6128607"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.setPropertyValue( "RUM3",'RRE4F5CB')
testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a command_One offer_Two choice_mvnoConso and Bien" id="c1d9650c-0158-4051-8d1d-fe36caa718b5"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>6480b3ef-c7b1-44d2-b94f-b962d23bd271</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>702002102</con:value></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="8ddf0bc1-96f2-4e8d-8c6f-6ff797372be6"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a command_One offer_Two choice_mvnoConso and Bien</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a command_One offer_Two choice_mvnoConso and Bien</con:sourceStep><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Pay COMPTANT for the created command" id="024927bb-8236-442e-9de9-c521c57c13df" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "5",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R0000000",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c" disabled="true"><con:configuration><token>"signatureReference":"${Properties#refPayment}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2 Pay RECURRENT for the created command" id="c1e7f271-7938-4f3d-bcd9-a7097c9351bf"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2 Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="5efb9262-0d5a-4c01-9343-bde4f34fbf04">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="3.1 Wait for initiation of documents" id="b4a8f505-751a-4042-9a11-49428c259f86"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="e7a4e92f-5608-469a-8614-480251d7b8de"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="724fc769-6f05-4a91-b40e-c95a64d49af7"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="3.2 Update DB_Set documentDemande = 1 and documente = 1" id="68cc768b-0dea-4549-b182-c998e2f07dad"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 1, documente = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="4. Init signature for MVNO" id="c2b94aca-a323-4f69-a27a-7023fadc580e" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Init signature for MVNO" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInitAfterSignature",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="4.1 Update DB_Set besoinSignature = 1 and signe = 0" id="bf791104-5e3c-406f-9653-4e2455807c37"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE signatureassociation SET besoinSignature = 1, signe = 0 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="5. Validate command_Validate failed_Check exception" id="3590312f-bae5-4a21-beec-c9222630eff0"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5. Validate command_Validate failed_Check exception" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Simple Contains" name="Validation must be false" id="20c1dc7f-29f0-4818-987d-5791bbb7dc48"><con:configuration><token>"valide":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="24df6e04-cfca-4466-b6e3-3d2bcd5bf068" name="Source must be"><con:configuration><token>"source":"Signature"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e8e00bbf-b1ee-48ad-8e12-8d8859ba5793" name="errorCode must be"><con:configuration><token>"error":"2.1.26"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="1e9fd962-032a-4919-be17-ca2c612a3b22" name="errorMessage must be"><con:configuration><token>"errorMessage":"La commande n'a pas encore signe"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">702002102</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>286f1335-549c-4351-b3b7-684cd8ea922c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4e58e072-8c16-4b64-afcf-8913880acf5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0fbec94c-bb27-4c91-80d2-910102fb0d41</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e4e8517e-d033-4b98-a972-ec32b49dab38</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eca1f156-7e54-4104-979e-6781e5301b91</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bef504a1-d314-4933-943d-dba4a0f649eb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e738c3f-8f68-40b2-8037-38c3af497361</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1badadfc-aebc-4102-9f76-284b6c25d261</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f33cb3a3-2e46-4b2b-bbd3-28e65a8c8d5b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>206d52d1-8b4c-4e7b-b360-205e71fbfabf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c227c93f-6044-4609-b132-ac947717de93</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>53575c87-80f8-4c6a-976f-2e636d417496</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9f17d94-672e-4345-8758-78ca923b8b9f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dc5b2c4a-7bcd-4424-a3ef-4bf0fdfe1a49</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4e87dd5b-70d4-468d-af23-4a756b97a9ea</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>55c08819-99b8-42d1-b098-efa1ed96fc53</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8fbfc25e-8dcb-4f6e-b06b-a44e4be57629</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dffabb58-4179-43bc-9435-8fde40f9fc6e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7038a64a-cf1c-4254-90f1-73bdca3892ca</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>68cc768b-0dea-4549-b182-c998e2f07dad</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bf791104-5e3c-406f-9653-4e2455807c37</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="5977727d-38d2-4a1d-b56d-48ee6c924287" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.07 Validate failed_Not all signe TRUE_mvnoConso and Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="f048d1bd-e46d-417f-b95b-e9aad00713f0">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="88338fe3-3fbc-4c7e-8424-aa65f3e71366"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003213</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>003002892</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="f2213678-d85e-4ef5-bf61-2c03e7494558"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.setPropertyValue( "RUM3",'RRE4F5CB')
testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')</script></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected" id="71e47f1d-d6a1-451f-a927-4cb14cd98710"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "Welcome",
    "ip": {
      "ip": "10.190.29.140",
      "ts": 1456370857000
    }
  },
  "lignes": [
    {
      "auteur": {
        "qui": "hientran",
        "canal": "Welcome",
        "ip": {
          "ip": "10.190.29.150",
          "ts": 1456370857000
        }
      },
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
        
      "details": [
         {
            "referenceSelection": "MVNO-SERVICE",
            "referenceChoix": "mvno_conso",
            "referenceTarif": "83"
          },
         		  {
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }
      ]
    }
  }
  ],
  "souscripteur": {
    "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "livraison": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "facturation": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c918050e-5fc7-49ce-8e3f-11157f0790f9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refDraft" id="b598207d-1e92-411d-9b89-dae87243197f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande" id="ee8afb22-5a97-4389-9c8a-a5a6d1dca012"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
      "ip":{"ip":"10.190.29.140"}
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="30f940d7-8a4d-4d5c-97b3-e10f145d7995" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="ccca7479-123b-4aa2-80bc-7fcc045feeaa"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="3. Pay RECURRENT for the created command" id="f1e6fc7e-50d4-4cac-aa40-d7c6f830dd6d"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1 2" id="09ad6ab4-7193-4c04-b89f-53d9e9f113bf">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="4.1 Wait for initiation of documents" id="d5b693e1-1a3e-44ac-a899-dba5b53e93eb"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="4d9933b1-c225-41ed-9c84-ee357da1c590"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="aafe79db-5f5b-465a-af1f-e731f1ae1412"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="4.2 Update DB_Set documentDemande = 1 and documente = 1" id="76b8e526-87b4-4522-9150-afe11a3028f5"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 1, documente = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="5.1 Init signature successfully" id="c0820de4-5e24-4c54-90a6-211dd501a6c7" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5.1 Init signature successfully" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInit",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="5.2 Sign doc 1_Successfully" id="9e1cf4ec-e5f8-43df-9dfd-75273d983047"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5.2 Sign doc 1_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSignDoc1",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "HVREBAW3E2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="5.3 Sign Doc 2_Successfully" id="0a431837-5acb-49e5-a14d-10671db519f5"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5.3 Sign Doc 2_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSignDoc2",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455584461000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "TVDEBAW3E2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="5.4 Sign Doc 3_Successfully" id="f38b536f-918d-4842-b36b-09e5ad0142cf"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5.4 Sign Doc 3_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSignDoc3",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455670861000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "5VXEBAW4E2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="5.5 Update DB_Set signe 2 = FALSE" id="b66d4b24-2d81-454f-8eca-875cb055fe3e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE signatureassociation SET signe = 0, besoinSignature = 1 where referenceCommande = '${commandInfo#refCommand}' and codeFolio = 'TVDEBAW3E2';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="6. Validate command_Validate failed" id="1c4018b2-90e6-4654-a589-5c8588b705de"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="6. Validate command_Validate failed" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Simple Contains" name="Validation must be true" id="20c1dc7f-29f0-4818-987d-5791bbb7dc48"><con:configuration><token>"valide":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9ee40a1a-2c45-4e2a-8517-9949f47692d8" name="Source must be"><con:configuration><token>"source":"Signature"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="0dde8fb8-6e95-4110-8ff8-542952e7a0ad" name="errorCode must be "><con:configuration><token>"error":"2.1.26"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="1807c883-a11a-41f4-9926-ef7d8dece715" name="errorMessage must be"><con:configuration><token>"errorMessage":"La commande n'a pas encore signe"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>customerKey1</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refLigneGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4edc882c-c08a-4007-b221-ed013f349563</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ca4d9310-be06-4636-9c8e-c38c68d500b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ef57f960-b373-4044-9bb2-5e801713d1f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0805237-9155-4488-ad2d-25f5953baed7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1f408692-658d-4f78-8a01-6740142bad3e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8d21975f-820b-42d8-9b08-074cf231746d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7b43f5a-18c4-47ca-80cf-73f1dd4cf436</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d206a272-69a5-4692-b03b-c05e91e3f43e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>25a4f1c5-4432-41c3-9577-b05bf84bccfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7d44a60f-8ea0-46f1-9662-e2f675d5797f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>74ed64df-8e97-40df-a037-e1438a508865</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f048d1bd-e46d-417f-b95b-e9aad00713f0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09ad6ab4-7193-4c04-b89f-53d9e9f113bf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d5b693e1-1a3e-44ac-a899-dba5b53e93eb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4d9933b1-c225-41ed-9c84-ee357da1c590</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>aafe79db-5f5b-465a-af1f-e731f1ae1412</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>76b8e526-87b4-4522-9150-afe11a3028f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f1e6fc7e-50d4-4cac-aa40-d7c6f830dd6d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b66d4b24-2d81-454f-8eca-875cb055fe3e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="74e9d868-da79-482f-8934-3e74350d67b5" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.08.00 Validate failed_Command is canncelled" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Reset variables to null" id="7562c538-895d-4879-b175-559c365b49b0"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "refCommand",null)
testRunner.testCase.setPropertyValue( "coutComptantReduitTTC",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Command transformed with one reduction in draftLigne" id="4c8584f6-36a8-42dd-b902-18f2e0398777"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>cb591d95-20d8-4dbb-969b-86e4f8da98fc</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>006000327</con:value></con:property><con:property><con:name>customerKey3</con:name></con:property><con:property><con:name>handleKey3</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="9d1603bb-38f4-4394-980d-2c145027637e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Command transformed with one reduction in draftLigne</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Set Nb Passes = 0" id="9f3c4bcd-49d2-4404-9c56-2ca56f7d8351">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="bead91d9-a271-441b-ae4f-3873438a4ebb">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="2. Wait for initiation of documents" id="ff6e4b9d-b0c3-4ed9-99e3-87612a491f59"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="c134b9eb-8f4f-4f81-8bb9-7a9626005276"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${#TestCase#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="f5dea5ab-e4ec-409f-a71d-89f3a3e88a4b"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Update DB_Set documentDemande = 1 and documente = 1" id="dab71cee-5454-4e4a-8aac-592150fd48e4"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 1, documente = 1 where referenceCommande = '${#TestCase#refCommand}';</con:query><con:assertion type="Simple NotContains" id="812cad04-553b-4ba9-90e5-f2490f8f2faa" name="Not Contains"><con:configuration><token>&lt;UpdateCount>0</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="3. Sign the created command" id="30b36b88-dfeb-4e4f-bb8a-066bae5b7603"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Sign the created command" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="4. Update dateAnnulation of command" id="4e198588-2f7a-4a00-a52e-d33cf1a544cc"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>update  commande
set dateAnnulation =  CURRENT_TIMESTAMP  
where reference = "${#TestCase#refCommand}";</con:query><con:assertion type="Simple Contains" id="60df9745-ec33-499c-8626-ae360a6ea90c" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="5. Validate that command_Validate failed" id="8cb514ac-4bff-4965-9aa1-6d5c5bf58bee"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5. Validate that command_Validate failed" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/004100236/valider</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f11b09e-cca7-4efc-a334-b7e0a86d3663" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="17d26bd2-c83f-4909-85e8-c3729024f87d" name="errorMessage must be"><con:configuration><token>"errorMessage":"la commande de reference ${#TestCase#refCommand} est annul."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="96312693-171d-4bba-9dac-e5cd4b78a602" name="valide false"><con:configuration><token>"valide":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommand</con:name><con:value>006000327</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>coutComptantReduitTTC</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>35e79528-8b16-4280-8bcd-d2df334dcb0a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bcf34af3-38d0-465b-b0d0-d6d63a93228a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4459213e-ea39-4722-8468-18a9bd70014f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ba2934c-e2e4-4996-b0c8-5ded63fbb86c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7e37061-a393-48d8-9642-5a54e8693e5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d57dce0e-a75d-44a8-89ea-e7385f821349</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>49b2c1f8-887e-4f2f-b0f0-393e81d60149</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>898ad6d0-c435-4472-bab0-563d8c462d7f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4a114e62-c912-4e9a-a0c9-b817186e06b3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="00dfeb65-36b4-4aad-a776-b0cbf62a6f57" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.08.01 Validate failed_Command is not paied" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Reset variables to null" id="a495c0f8-90ef-4ef1-b21f-4d5f2816f7e8"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "refCommand",null)
testRunner.testCase.setPropertyValue( "coutComptantReduitTTC",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Command transformed with one reduction in draftLigne" id="e5c54381-1e09-426d-84b6-eacb1cd082f1"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>cb591d95-20d8-4dbb-969b-86e4f8da98fc</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>602002803</con:value></con:property><con:property><con:name>customerKey3</con:name></con:property><con:property><con:name>handleKey3</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="6b753a68-6850-4dd4-a02b-05db50c89bb1"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Command transformed with one reduction in draftLigne</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Set Nb Passes = 0" id="898ad6d0-c435-4472-bab0-563d8c462d7f">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="31c95db0-cbd9-4989-9e38-eaecdfd8f7f4">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="2. Wait for initiation of documents" id="0d0d906f-869c-4c22-9ece-9376ed145255"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="3c57a662-ecc6-4c74-84f8-26de68b26c0e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${#TestCase#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="557895f4-09f5-43b8-953a-db2c4487d2d5"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Update DB_Set documentDemande = 1 and documente = 1" id="2bcd2104-022f-414c-b388-7f2de89f6278"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 1, documente = 1 where referenceCommande = '${#TestCase#refCommand}';</con:query><con:assertion type="Simple NotContains" id="812cad04-553b-4ba9-90e5-f2490f8f2faa" name="Not Contains"><con:configuration><token>&lt;UpdateCount>0</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="3. Sign the created command" id="2ce19e96-114a-4b6a-8174-30b852b866cb"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Sign the created command" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="6. Validate that command_Validate failed" id="49b2c1f8-887e-4f2f-b0f0-393e81d60149"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="6. Validate that command_Validate failed" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/004100236/valider</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f11b09e-cca7-4efc-a334-b7e0a86d3663" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="17d26bd2-c83f-4909-85e8-c3729024f87d" name="errorMessage must be"><con:configuration><token>"errorMessage":"La commande nest pas totalement pay."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommand</con:name><con:value>602002803</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>coutComptantReduitTTC</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>35e79528-8b16-4280-8bcd-d2df334dcb0a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bcf34af3-38d0-465b-b0d0-d6d63a93228a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4459213e-ea39-4722-8468-18a9bd70014f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ba2934c-e2e4-4996-b0c8-5ded63fbb86c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7e37061-a393-48d8-9642-5a54e8693e5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d57dce0e-a75d-44a8-89ea-e7385f821349</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>49b2c1f8-887e-4f2f-b0f0-393e81d60149</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>898ad6d0-c435-4472-bab0-563d8c462d7f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="f2355f80-4d12-4f13-8972-df3f6b593bca" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.08.02 Validate failed_Command is paied not enough" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Reset variables to null" id="61391d52-6dbc-47ab-9689-96223f02966f"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "refCommand",null)
testRunner.testCase.setPropertyValue( "coutComptantReduitTTC",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Command transformed with one reduction in draftLigne" id="d9ffc296-d036-423f-af9a-07cd7c765662"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>cb591d95-20d8-4dbb-969b-86e4f8da98fc</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>325000069</con:value></con:property><con:property><con:name>customerKey3</con:name></con:property><con:property><con:name>handleKey3</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="c0fbc07c-4ad1-4007-8afa-f5378ba6aaed"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Command transformed with one reduction in draftLigne</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Set Nb Passes = 0" id="d56e3c64-135a-44e6-b7b0-810cd8a1bdb8">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="df79994c-68b5-4ee3-bedc-d117c0e5b1d8">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="2. Wait for initiation of documents" id="c7cf463c-0346-4be0-87ea-1b76985537e1"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="b4b69296-b6c0-4ad6-a260-64c0772952d3"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${#TestCase#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="91a0af44-e47a-4904-ac78-d3695170076e"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Update DB_Set documentDemande = 1 and documente = 1" id="0e9fb1a8-d1a6-4b8d-b984-2f37c5fb938e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 1, documente = 1 where referenceCommande = '${#TestCase#refCommand}';</con:query><con:assertion type="Simple NotContains" id="812cad04-553b-4ba9-90e5-f2490f8f2faa" name="Not Contains"><con:configuration><token>&lt;UpdateCount>0</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="3. Sign the created command" id="bdb683fc-9592-4fda-8c1b-2149cab982e6"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Sign the created command" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4. Calculate the price needed to pay via enhancedCalculerCout" id="ecf83e01-8735-411e-894f-79bcdd818388"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/enhancedCostCalculation" methodName="enhancedCalculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Calculate the price needed to pay via enhancedCalculerCout" id="7e95406e-677d-4399-a713-cfe7f94c4aab" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/309620060/enhancedCostCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="81c04bec-db76-4dd6-99c3-1cd8acae9fef" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer coutComptantReduitTTC" id="9f56f964-bd80-4168-b93e-1c1ef744b382"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>coutComptantReduitTTC</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>4. Calculate the price needed to pay via enhancedCalculerCout</con:sourceStep><con:sourcePath>//*:coutComptantGlobale[1]/*:coutComptantReduitTTC[1]</con:sourcePath><con:targetType>coutComptantReduitTTC</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="5. Pay 23.99 = Price to be paied" id="43f4d145-279d-442d-81b2-57b0b6867975"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5. Pay 23.99 = Price to be paied" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "1",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R123456",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="6. Validate that command_It must be validated" id="a81ff3bd-fe39-49c2-b606-92af5127e1ff"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="6. Validate that command_It must be validated" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/004100236/valider</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f11b09e-cca7-4efc-a334-b7e0a86d3663" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="17d26bd2-c83f-4909-85e8-c3729024f87d" name="errorMessage must be"><con:configuration><token>"errorMessage":"La commande nest pas totalement pay."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommand</con:name><con:value>325000069</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>coutComptantReduitTTC</con:name><con:value>23.99</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>35e79528-8b16-4280-8bcd-d2df334dcb0a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bcf34af3-38d0-465b-b0d0-d6d63a93228a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4459213e-ea39-4722-8468-18a9bd70014f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ba2934c-e2e4-4996-b0c8-5ded63fbb86c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7e37061-a393-48d8-9642-5a54e8693e5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d57dce0e-a75d-44a8-89ea-e7385f821349</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>49b2c1f8-887e-4f2f-b0f0-393e81d60149</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3421ef65-b76b-48da-93eb-571ace7fd01a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>898ad6d0-c435-4472-bab0-563d8c462d7f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>11ea528d-aeb2-43a9-9380-92244d70257a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>aabfdfc2-24d5-4b0f-af8d-3f15086890fb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="99e077a5-48e9-4bcc-bfd4-069a985449ea" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.01 Validate successfully_All documente TRUE_mvnoConso and Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="53575c87-80f8-4c6a-976f-2e636d417496">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="6c3beac3-844c-423d-97c4-d013edb11a19"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>003002363</con:value></con:property><con:property><con:name>refSignature</con:name><con:value>00000014</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="55c08819-99b8-42d1-b098-efa1ed96fc53"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.setPropertyValue( "RUM3",'RRE4F5CB')
testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')</script></con:config></con:testStep><con:testStep type="restrequest" name="0. Update document status of customer to TRUE" id="c227c93f-6044-4609-b132-ac947717de93" disabled="true"><con:settings/><con:config service="BaseClient" resourcePath="/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="0. Update document status of customer to TRUE" id="ab52b71c-646d-4c0b-8a2e-5cb09269b6b9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="c0d2e59f-076b-4bc2-b918-ec96fc13814d"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionCNI is true" id="78efdf77-5b5e-4a40-a3cd-e5ff382e9d68"><con:configuration><token>"flagReceptionCNI":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionJD is true" id="45830ed8-8d1b-4e2a-9ea2-73918bede086"><con:configuration><token>"flagReceptionJD":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="updateReceptionDocRequest" value="{&quot;handleKey&quot;:&quot;${#TestCase#handleKey3}&quot;, &quot;flagReceptionCNI&quot;:&quot;false&quot;, &quot;flagReceptionJD&quot;:&quot;false&quot;}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transfom to command_One offer_Two choices_mvnoConso and Bien" id="a4b01466-a313-4117-a109-5211536992d6"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>b93b868a-13f5-479a-9046-5beb3a9f7314</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>003002363</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>refCommandLigneGlobal</con:name><con:value>LIC-00002340</con:value></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>refCommandLigneGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="62eb885e-d941-4d4f-af33-2fe903423ad1"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transfom to command_One offer_Two choices_mvnoConso and Bien</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transfom to command_One offer_Two choices_mvnoConso and Bien</con:sourceStep><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Pay COMPTANT for the created command" id="a9248307-ebf8-40b1-9d1c-1242e7ca2804" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "1",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R0000000",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c" disabled="true"><con:configuration><token>"signatureReference":"${Properties#refPayment}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2 Pay RECURRENT for the created command" id="bf0d568c-6309-4149-8037-da59b366ae47"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2 Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="4e87dd5b-70d4-468d-af23-4a756b97a9ea">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="3. Wait for initiation of documents" id="f9f17d94-672e-4345-8758-78ca923b8b9f"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="206d52d1-8b4c-4e7b-b360-205e71fbfabf"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="dc5b2c4a-7bcd-4424-a3ef-4bf0fdfe1a49"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="3.1 Update DB_Set documentDemande = 1 and documente = 1" id="7038a64a-cf1c-4254-90f1-73bdca3892ca"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 1, documente = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="4. Init signature for the created command" id="8fbfc25e-8dcb-4f6e-b06b-a44e4be57629" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Init signature for the created command" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInitAfterSignature",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4.1 Sign the created command" id="dffabb58-4179-43bc-9435-8fde40f9fc6e"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4.1 Sign the created command" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="5. Validate the completed command" id="a75149b5-6832-4ad0-9309-e5bb93223c62"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5. Validate the completed command" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Simple Contains" name="Validation must be true" id="20c1dc7f-29f0-4818-987d-5791bbb7dc48"><con:configuration><token>"valide":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="0792a017-79be-43e0-8cd0-87b208dad4d5" name="Reasons is empty"><con:configuration><token>"reasons":[]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">003002363</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>286f1335-549c-4351-b3b7-684cd8ea922c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4e58e072-8c16-4b64-afcf-8913880acf5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0fbec94c-bb27-4c91-80d2-910102fb0d41</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e4e8517e-d033-4b98-a972-ec32b49dab38</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eca1f156-7e54-4104-979e-6781e5301b91</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bef504a1-d314-4933-943d-dba4a0f649eb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e738c3f-8f68-40b2-8037-38c3af497361</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1badadfc-aebc-4102-9f76-284b6c25d261</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f33cb3a3-2e46-4b2b-bbd3-28e65a8c8d5b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>206d52d1-8b4c-4e7b-b360-205e71fbfabf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c227c93f-6044-4609-b132-ac947717de93</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>53575c87-80f8-4c6a-976f-2e636d417496</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9f17d94-672e-4345-8758-78ca923b8b9f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dc5b2c4a-7bcd-4424-a3ef-4bf0fdfe1a49</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4e87dd5b-70d4-468d-af23-4a756b97a9ea</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>55c08819-99b8-42d1-b098-efa1ed96fc53</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8fbfc25e-8dcb-4f6e-b06b-a44e4be57629</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dffabb58-4179-43bc-9435-8fde40f9fc6e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7038a64a-cf1c-4254-90f1-73bdca3892ca</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="9fbd6dc6-b429-4adc-9ea4-30f0fb98be3e" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.02 Validate successfully_documente TRUE and documentDemande FALSE_mvnoPack and Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="94052a83-2a39-477a-a748-976330434a1d">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="d31b4fae-9802-4337-86ad-23c06dc58895"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>006003227</con:value></con:property><con:property><con:name>refSignature</con:name><con:value>00000016</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="59f0ef3d-11b9-4ccc-88ff-912dae38e01c"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.setPropertyValue( "customerKey4",'192112')
testRunner.testCase.setPropertyValue( "handleKey4",'511708010')
testRunner.testCase.setPropertyValue( "RUM4",'RRE4F5CB')</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform a draft to command_mvnoConso and Bien" id="684d74a0-3eca-445d-aa01-802c7b8da74c"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1727ab8b-9657-4e07-b4db-cef3539c93ee</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>006003227</con:value></con:property><con:property><con:name>customerKey4</con:name></con:property><con:property><con:name>handleKey4</con:name></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>refCommandLigneGlobal</con:name></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="83426dc4-de1d-4767-bde1-18c68f12aff1"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform a draft to command_mvnoConso and Bien</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform a draft to command_mvnoConso and Bien</con:sourceStep><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Pay COMPTANT for the created command" id="d475c6d9-9c4a-4ed5-a283-96c2759a634f" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "5",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R0000000",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c" disabled="true"><con:configuration><token>"signatureReference":"${Properties#refPayment}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay RECURRENT for the created command" id="f07f3cc2-f5c3-48dc-a8ba-1c412bf4dd9f"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM4}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="0d3b716b-5471-4b8e-b280-5af0c278bc70">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait for initiation of documents" id="51eacfa8-bc59-490c-a9c4-c6022c9db665"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="5fbd3bf5-91f6-4aa7-8e3e-34cf10bf22cf"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="10740b70-08cd-4b7b-8287-51d888cf8add"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="3 Init signature for the created command" id="31d2b2f8-1264-45e0-8049-3c056972d8bc" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3 Init signature for the created command" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInitAfterSignature",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4 Sign the created command_Successfully" id="a0d78bcb-7021-4b3a-8a36-06e5652f16f0"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4 Sign the created command_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="5. Update DB_Set documentDemande = 0 and documente = 1" id="7750e325-d8fe-4065-8acb-37289cb16d42"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 0, documente = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="6. Validate the completed command" id="6970849b-c9c7-4653-b7ef-1e239020bfe7"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="6. Validate the completed command" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Simple Contains" name="Validation must be true" id="20c1dc7f-29f0-4818-987d-5791bbb7dc48"><con:configuration><token>"valide":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="0792a017-79be-43e0-8cd0-87b208dad4d5" name="Reasons is empty"><con:configuration><token>"reasons":[]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>006003227</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property><con:property><con:name>RUM4</con:name><con:value>RRE4F5CB</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>286f1335-549c-4351-b3b7-684cd8ea922c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4e58e072-8c16-4b64-afcf-8913880acf5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0fbec94c-bb27-4c91-80d2-910102fb0d41</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e4e8517e-d033-4b98-a972-ec32b49dab38</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eca1f156-7e54-4104-979e-6781e5301b91</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bef504a1-d314-4933-943d-dba4a0f649eb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e738c3f-8f68-40b2-8037-38c3af497361</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1badadfc-aebc-4102-9f76-284b6c25d261</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f33cb3a3-2e46-4b2b-bbd3-28e65a8c8d5b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>552bfcea-8075-4b32-a168-6ad85bbacc7f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>206d52d1-8b4c-4e7b-b360-205e71fbfabf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>54452c2c-17ea-4c7e-998f-7ae92bb3375b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c227c93f-6044-4609-b132-ac947717de93</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>94052a83-2a39-477a-a748-976330434a1d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6970849b-c9c7-4653-b7ef-1e239020bfe7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>59f0ef3d-11b9-4ccc-88ff-912dae38e01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>31d2b2f8-1264-45e0-8049-3c056972d8bc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a0d78bcb-7021-4b3a-8a36-06e5652f16f0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7750e325-d8fe-4065-8acb-37289cb16d42</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="a0540870-1f5b-46ff-b492-99b04fae7ea5" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.03 Validate successfully_documente FALSE and documentDemande FALSE_mvnoPack and Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="a8d57242-c2f8-4b4a-8bbf-ee83772c98ef">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="68bec85c-4708-4026-99b5-2fe9808402f9"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>200004207</con:value></con:property><con:property><con:name>refSignature</con:name><con:value>00000016</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="0c4bbf19-b03d-4d0d-9dfa-9adb40a6a556"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.setPropertyValue( "customerKey4",'192112')
testRunner.testCase.setPropertyValue( "handleKey4",'511708010')
testRunner.testCase.setPropertyValue( "RUM4",'RRE4F5CB')</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform a draft to command_mvnoConso and Bien" id="ab12c28f-6f5a-4c4a-913e-e28c1233c6ad"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1727ab8b-9657-4e07-b4db-cef3539c93ee</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>200004207</con:value></con:property><con:property><con:name>customerKey4</con:name></con:property><con:property><con:name>handleKey4</con:name></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>refCommandLigneGlobal</con:name></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="de2b3efe-5517-4051-960d-86a668d44691"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform a draft to command_mvnoConso and Bien</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform a draft to command_mvnoConso and Bien</con:sourceStep><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Pay COMPTANT for the created command" id="e1225818-09ad-40f7-a891-e3a33c829d0c" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "5",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R0000000",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c" disabled="true"><con:configuration><token>"signatureReference":"${Properties#refPayment}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay RECURRENT for the created command" id="b27fa671-f32e-44d0-a8ef-42763013a32d"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM4}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="0c9eb58a-3570-45bb-8ef0-94fba282dc2d">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="3. Wait for initiation of documents" id="bd8102f6-6889-4283-be41-9812de5cb6df"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="6ac4e1e9-6399-4f98-9d08-413ed9e05660"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="f4c651a9-f2fd-42f3-8f1d-315461901f4e"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="3.1 Update DB_Set documentDemande = 0 and documente = 0" id="62c5bdde-2486-4647-85dc-0f54b1b07ff7"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 0, documente = 0 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="4. Init signature for the created command" id="b45176c1-7c7c-4575-a2f3-28429ffbf531" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Init signature for the created command" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInitAfterSignature",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4.1 Sign the created command_Successfully" id="08b6133d-9660-4c97-91d3-b384c6e855cf"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4.1 Sign the created command_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="5. Validate the completed command" id="0425d250-9270-48c8-a79d-604e98f43870"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5. Validate the completed command" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Simple Contains" name="Validation must be true" id="20c1dc7f-29f0-4818-987d-5791bbb7dc48"><con:configuration><token>"valide":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="0792a017-79be-43e0-8cd0-87b208dad4d5" name="Reasons is empty"><con:configuration><token>"reasons":[]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>200004207</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property><con:property><con:name>RUM4</con:name><con:value>RRE4F5CB</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>286f1335-549c-4351-b3b7-684cd8ea922c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4e58e072-8c16-4b64-afcf-8913880acf5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0fbec94c-bb27-4c91-80d2-910102fb0d41</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e4e8517e-d033-4b98-a972-ec32b49dab38</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eca1f156-7e54-4104-979e-6781e5301b91</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bef504a1-d314-4933-943d-dba4a0f649eb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e738c3f-8f68-40b2-8037-38c3af497361</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1badadfc-aebc-4102-9f76-284b6c25d261</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f33cb3a3-2e46-4b2b-bbd3-28e65a8c8d5b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>552bfcea-8075-4b32-a168-6ad85bbacc7f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>206d52d1-8b4c-4e7b-b360-205e71fbfabf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>54452c2c-17ea-4c7e-998f-7ae92bb3375b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c227c93f-6044-4609-b132-ac947717de93</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>94052a83-2a39-477a-a748-976330434a1d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6970849b-c9c7-4653-b7ef-1e239020bfe7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>59f0ef3d-11b9-4ccc-88ff-912dae38e01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>31d2b2f8-1264-45e0-8049-3c056972d8bc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a0d78bcb-7021-4b3a-8a36-06e5652f16f0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7750e325-d8fe-4065-8acb-37289cb16d42</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>62c5bdde-2486-4647-85dc-0f54b1b07ff7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="e403b8cc-6c57-4e88-8e7e-0954b55b9c9f" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.04 Validate successfully_documente NULL and documentDemande FALSE_mvnoPack and Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="259ee927-fccb-4965-9b49-70c70892a5bb">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="e481c2c1-57b1-45d3-b42b-257a2106c9ea"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>225000075</con:value></con:property><con:property><con:name>refSignature</con:name><con:value>00000016</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="2a5a13d9-fd3f-47c3-9021-b52a7403c510"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.setPropertyValue( "customerKey4",'192112')
testRunner.testCase.setPropertyValue( "handleKey4",'511708010')
testRunner.testCase.setPropertyValue( "RUM4",'RRE4F5CB')</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform a draft to command_mvnoConso and Bien" id="d3be2bb2-f48d-4479-80a4-a884e0045319"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1727ab8b-9657-4e07-b4db-cef3539c93ee</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>225000075</con:value></con:property><con:property><con:name>customerKey4</con:name></con:property><con:property><con:name>handleKey4</con:name></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>refCommandLigneGlobal</con:name></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="35e76b73-bf6c-4f6c-96b9-c5a005e63e04"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform a draft to command_mvnoConso and Bien</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform a draft to command_mvnoConso and Bien</con:sourceStep><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Pay COMPTANT for the created command" id="b5eb8f02-4ec1-4e1d-a176-17ea3d10b628" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "5",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R0000000",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c" disabled="true"><con:configuration><token>"signatureReference":"${Properties#refPayment}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay RECURRENT for the created command" id="f6641ab7-8588-42d8-933a-776c1ba168c2"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM4}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="428df8ab-731e-491a-90ab-3be8bac42fae">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait for initiation of documents" id="50f8121d-ee31-454b-b08d-833bcdae2d28"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="eeb02a77-588e-4b94-894e-824155e620a6"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="3 Init signature for the created command" id="3a876bc6-e51b-4002-8522-ad817984f3a5" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3 Init signature for the created command" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInitAfterSignature",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="823bc9c1-fac2-414b-affa-dab119a68c58"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="4 Sign the created command_Successfully" id="d61a509b-8ba6-43d4-a26b-d21854b4a4b3"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4 Sign the created command_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="5. Update DB_Set documentDemande = 0 and documente =null" id="00971075-696d-44a2-a82c-9ac9246caf94"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 0, documente = null where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="6. Validate the completed command" id="58a72d37-1050-4c06-882f-b406b65f292d"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="6. Validate the completed command" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Simple Contains" name="Validation must be true" id="20c1dc7f-29f0-4818-987d-5791bbb7dc48"><con:configuration><token>"valide":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="0792a017-79be-43e0-8cd0-87b208dad4d5" name="Reasons is empty"><con:configuration><token>"reasons":[]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>225000075</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property><con:property><con:name>RUM4</con:name><con:value>RRE4F5CB</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>286f1335-549c-4351-b3b7-684cd8ea922c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4e58e072-8c16-4b64-afcf-8913880acf5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0fbec94c-bb27-4c91-80d2-910102fb0d41</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e4e8517e-d033-4b98-a972-ec32b49dab38</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eca1f156-7e54-4104-979e-6781e5301b91</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bef504a1-d314-4933-943d-dba4a0f649eb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e738c3f-8f68-40b2-8037-38c3af497361</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1badadfc-aebc-4102-9f76-284b6c25d261</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f33cb3a3-2e46-4b2b-bbd3-28e65a8c8d5b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>552bfcea-8075-4b32-a168-6ad85bbacc7f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>206d52d1-8b4c-4e7b-b360-205e71fbfabf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>54452c2c-17ea-4c7e-998f-7ae92bb3375b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c227c93f-6044-4609-b132-ac947717de93</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>94052a83-2a39-477a-a748-976330434a1d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6970849b-c9c7-4653-b7ef-1e239020bfe7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>59f0ef3d-11b9-4ccc-88ff-912dae38e01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>31d2b2f8-1264-45e0-8049-3c056972d8bc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a0d78bcb-7021-4b3a-8a36-06e5652f16f0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7750e325-d8fe-4065-8acb-37289cb16d42</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3a876bc6-e51b-4002-8522-ad817984f3a5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="4fc2880e-56bb-4ae6-88b7-c0e28ba4b9a0" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.05 Validate successfully_No document is needed to validate_avfw.essentiel" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="cf8d7a5f-29ce-43eb-9d82-65aca58f533e">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="edb76b88-fdd7-4c9b-96ed-39da19f50e7f"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>003002922</con:value></con:property><con:property><con:name>refSignature</con:name><con:value>00000017</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="be1cbff5-cb19-4fb6-b284-1fe13e307d3d"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey1",'6002367491')
testRunner.testCase.setPropertyValue( "handleKey1",'00001006956')
testRunner.testCase.setPropertyValue( "RUM1",'R2C4V5CB')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a draft then transform to command_avfw_essentiel" id="904b84d0-fe93-45fb-9f1c-306b2067c616"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>0d51eb30-0a61-410c-9f6d-3c60240f37ae</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>003002922</con:value></con:property><con:property><con:name>customerKey1</con:name></con:property><con:property><con:name>handleKey1</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="e42c9698-3e50-4011-a419-5137b677181e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a draft then transform to command_avfw_essentiel</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a draft then transform to command_avfw_essentiel</con:sourceStep><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Pay COMPTANT for the created command" id="c681e2fe-2249-43ef-863c-d62e9eb5466a" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "5",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R0000000",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c" disabled="true"><con:configuration><token>"signatureReference":"${Properties#refPayment}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2 Pay RECURRENT for the created command" id="1bff297c-47ea-442d-bcde-12159b98ac7e"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2 Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM1}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="3fcaf40f-d551-408c-a161-efcf2098ae6b">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait for initiation of documents" id="7910260f-d8d5-48c1-8a3e-dd99efcfd9a8"><con:settings/><con:config><delay>30000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="4626c90b-4ab1-4d2a-a893-b8a5162a95a3"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="a8f48875-9be9-4207-bb84-f63c20713dde"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="3. Synchronize document status manually" id="12c9521e-3f60-401b-9886-7633c3f6099b"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/synchronizeDocument" methodName="synchronizerCommandeDocument" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Synchronize document status manually" id="e141dcab-7f31-49fb-a4cc-9ef3729638c9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "qui": "hientran",
  "canal": "SOAPUI",
  "ip": {
    "ip": "10.190.29.140",
    "ts": "1458274922"
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/605000013/synchronizeDocument</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Get the document status in documentassociation" id="93563309-8468-45eb-9135-a2927ed6039f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto step synchronization of documents" id="cb5cb564-4f52-4ebf-8088-2c4e57676768"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()="0"</con:expression><con:targetStep>3. Synchronize document status manually</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="4.1 Init signature for the created command" id="ddf2356e-d876-4f49-81ae-a63b52847773" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4.1 Init signature for the created command" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInitAfterSignature",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4.2 Sign the created command_Successfully" id="e841ebc2-ea43-4761-97d5-b0e41360b584"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4.2 Sign the created command_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="5. Validate the completed command" id="ac0ac8eb-a3c6-4d90-8f2f-60d851887909"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5. Validate the completed command" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Simple Contains" name="Validation must be false" id="20c1dc7f-29f0-4818-987d-5791bbb7dc48"><con:configuration><token>"valide":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6a29b94-7486-4e1b-aa7c-2993df5ff536" name="No reason to failed"><con:configuration><token>"reasons":[]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">003002922</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>customerKey1</con:name><con:value>6002367491</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>00001006956</con:value></con:property><con:property><con:name>RUM1</con:name><con:value>R2C4V5CB</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>286f1335-549c-4351-b3b7-684cd8ea922c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4e58e072-8c16-4b64-afcf-8913880acf5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0fbec94c-bb27-4c91-80d2-910102fb0d41</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e4e8517e-d033-4b98-a972-ec32b49dab38</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eca1f156-7e54-4104-979e-6781e5301b91</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bef504a1-d314-4933-943d-dba4a0f649eb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e738c3f-8f68-40b2-8037-38c3af497361</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1badadfc-aebc-4102-9f76-284b6c25d261</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f33cb3a3-2e46-4b2b-bbd3-28e65a8c8d5b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c5d670d3-a2cc-4328-a54b-ef9a730731d9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>cf8d7a5f-29ce-43eb-9d82-65aca58f533e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ac0ac8eb-a3c6-4d90-8f2f-60d851887909</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>be1cbff5-cb19-4fb6-b284-1fe13e307d3d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ddf2356e-d876-4f49-81ae-a63b52847773</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e841ebc2-ea43-4761-97d5-b0e41360b584</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="e8768e6f-e649-412f-9c72-7e0bb75fee16" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03.00 Validate successfully_All signe TRUE_mvnoConso and Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="ead61146-4212-474c-9223-ac24aea06c14">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="e9eea02f-e575-4f34-8d84-3c80bd487ab3"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003217</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>006004229</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="c5da06d7-0bff-4156-8523-24ef699b023e"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.setPropertyValue( "RUM3",'RRE4F5CB')
testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')</script></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected" id="857ea8be-9d03-4857-8779-4e6d9b5b2ebd"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "Welcome",
    "ip": {
      "ip": "10.190.29.140",
      "ts": 1456370857000
    }
  },
  "lignes": [
    {
      "auteur": {
        "qui": "hientran",
        "canal": "Welcome",
        "ip": {
          "ip": "10.190.29.150",
          "ts": 1456370857000
        }
      },
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
        
      "details": [
         {
            "referenceSelection": "MVNO-SERVICE",
            "referenceChoix": "mvno_conso",
            "referenceTarif": "83"
          },
         		  {
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }
      ]
    }
  }
  ],
  "souscripteur": {
    "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "livraison": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "facturation": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="c918050e-5fc7-49ce-8e3f-11157f0790f9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refDraft" id="20b96130-a0c4-4cdb-b2bc-358b5b0ff722"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_conso and PACK-MVNO-POSTPAID-MOBILE selected</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande" id="69eb4917-6035-4721-a9ae-f2fe49a1cd2f"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
      "ip":{"ip":"10.190.29.140"}
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="30f940d7-8a4d-4d5c-97b3-e10f145d7995" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${commandInfo#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="0c416650-4f1c-4643-8153-7a4db65a1260"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="false" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="3. Pay RECURRENT for the created command" id="dc2db052-4d91-47fc-a938-65197ab53d53"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1 2" id="06b296f0-51e9-4e00-9452-8a613e42c16e">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="4.1 Wait for initiation of documents" id="f24d8199-cdf0-47eb-bf32-8e4ae5d1ce9e"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="5c8526b9-f704-4ff1-b562-02abdfbe576e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="bed66be3-d59b-4918-985b-d50c1c9d5f11"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="4.2 Update DB_Set documentDemande = 1 and documente = 1" id="54900c4f-1f40-40e8-bd7a-f202eac4147f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 1, documente = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="5.  Init signature successfully" id="42195665-cded-4564-bc0c-be858d9d73a2" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5.  Init signature successfully" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInit",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="5.1 Update DB_Set besoinSignature = 1" id="c004a7cd-9cfe-4fd6-aa5f-c2664ebdd8d9"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE signatureassociation SET besoinSignature = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="5.2 Sign doc 1_Successfully" id="b8bd3b84-d50c-48d5-97ae-0b44fb22addc"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5.2 Sign doc 1_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSignDoc1",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "HVREBAW3E2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="5.3 Sign Doc 2_Successfully" id="b873fb22-de34-4893-b47d-1be4c226391b"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5.3 Sign Doc 2_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSignDoc2",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455584461000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "TVDEBAW3E2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="5.4 Sign Doc 3_Successfully" id="a5f883a4-b9d0-45e2-8adf-7b91be80c894"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5.4 Sign Doc 3_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSignDoc3",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455670861000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "5VXEBAW4E2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="6. Validate command_Validate successfully 2" id="1d092f3c-f436-4496-a5f5-894e555d6c5d"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="6. Validate command_Validate successfully 2" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Simple Contains" name="Validation must be true" id="20c1dc7f-29f0-4818-987d-5791bbb7dc48"><con:configuration><token>"valide":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9ee40a1a-2c45-4e2a-8517-9949f47692d8" name="Reason empty"><con:configuration><token>"reasons":[]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refCommandGlobal</con:name><con:value>&lt;reference xmlns="http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande">006004229&lt;/reference></con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4edc882c-c08a-4007-b221-ed013f349563</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ca4d9310-be06-4636-9c8e-c38c68d500b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ef57f960-b373-4044-9bb2-5e801713d1f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0805237-9155-4488-ad2d-25f5953baed7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1f408692-658d-4f78-8a01-6740142bad3e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8d21975f-820b-42d8-9b08-074cf231746d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7b43f5a-18c4-47ca-80cf-73f1dd4cf436</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d206a272-69a5-4692-b03b-c05e91e3f43e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>25a4f1c5-4432-41c3-9577-b05bf84bccfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7d44a60f-8ea0-46f1-9662-e2f675d5797f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>74ed64df-8e97-40df-a037-e1438a508865</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f048d1bd-e46d-417f-b95b-e9aad00713f0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09ad6ab4-7193-4c04-b89f-53d9e9f113bf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d5b693e1-1a3e-44ac-a899-dba5b53e93eb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4d9933b1-c225-41ed-9c84-ee357da1c590</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>aafe79db-5f5b-465a-af1f-e731f1ae1412</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>76b8e526-87b4-4522-9150-afe11a3028f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f1e6fc7e-50d4-4cac-aa40-d7c6f830dd6d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c004a7cd-9cfe-4fd6-aa5f-c2664ebdd8d9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="1f0f62f3-40e2-4d9c-8a87-dbd6b88a0753" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03.01 Validate successfully_signe TRUE and dateSignatureInitialization null_mvnoConso and Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="20f1183c-5631-4660-b726-7c470c9e514d">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="2a7636aa-f630-4124-94bd-ceec9355108d"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>003002952</con:value></con:property><con:property><con:name>refSignature</con:name><con:value>00000014</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="3217ede7-6ed9-4232-9f15-6f08f880dcd0"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.setPropertyValue( "RUM3",'RRE4F5CB')
testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a command_One offer_Two choice_mvnoConso and Bien" id="a67731e3-5b5c-4f6d-8d76-169db7e89970"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>6480b3ef-c7b1-44d2-b94f-b962d23bd271</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>003002952</con:value></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="c6e4a73c-4c00-4d5d-9efa-51051e583ffd"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a command_One offer_Two choice_mvnoConso and Bien</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a command_One offer_Two choice_mvnoConso and Bien</con:sourceStep><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Pay COMPTANT for the created command" id="8eca897e-8b15-4fb3-98f3-ae87d9137fcb" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "5",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R0000000",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c" disabled="true"><con:configuration><token>"signatureReference":"${Properties#refPayment}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2 Pay RECURRENT for the created command" id="b4d60a74-8d29-4059-8e33-58dd1e0e1f56"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2 Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="69fac9c1-7bcb-4bff-8ecc-30368956fdbc">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait for initiation of documents" id="bdcea0b8-c0da-4aba-940f-d0a62693df4e"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="b61dad94-f32f-42b6-b476-7508bb0653e1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="6bfbde3b-e415-4769-8905-e5d3b8646871"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="3. Update DB_Set documentDemande = 1 and documente = 1" id="2cdb340c-8ae2-4719-b80c-ec49d29bd1ae"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 1, documente = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="4. Sign the created command_Signe = TRUE" id="57f5c512-a0ec-4f48-8e9c-18e76cf2e4a9"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Sign the created command_Signe = TRUE" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="5. Validate command_Validate failed_Check exception" id="c192038b-a09e-4c1e-84f6-8b756d65984c"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5. Validate command_Validate failed_Check exception" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="61109930-7b64-4dc4-910a-2ba2d5c9b935" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Validation must be false" id="20c1dc7f-29f0-4818-987d-5791bbb7dc48"><con:configuration><token>"valide":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">003002952</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>286f1335-549c-4351-b3b7-684cd8ea922c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4e58e072-8c16-4b64-afcf-8913880acf5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0fbec94c-bb27-4c91-80d2-910102fb0d41</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e4e8517e-d033-4b98-a972-ec32b49dab38</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eca1f156-7e54-4104-979e-6781e5301b91</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bef504a1-d314-4933-943d-dba4a0f649eb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e738c3f-8f68-40b2-8037-38c3af497361</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1badadfc-aebc-4102-9f76-284b6c25d261</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f33cb3a3-2e46-4b2b-bbd3-28e65a8c8d5b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>206d52d1-8b4c-4e7b-b360-205e71fbfabf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c227c93f-6044-4609-b132-ac947717de93</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>53575c87-80f8-4c6a-976f-2e636d417496</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9f17d94-672e-4345-8758-78ca923b8b9f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dc5b2c4a-7bcd-4424-a3ef-4bf0fdfe1a49</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4e87dd5b-70d4-468d-af23-4a756b97a9ea</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>55c08819-99b8-42d1-b098-efa1ed96fc53</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8fbfc25e-8dcb-4f6e-b06b-a44e4be57629</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dffabb58-4179-43bc-9435-8fde40f9fc6e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7038a64a-cf1c-4254-90f1-73bdca3892ca</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>57f5c512-a0ec-4f48-8e9c-18e76cf2e4a9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="3f7a149f-89c5-4f3b-9acf-9fc1b15af777" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03.02 Validate successfully_signe TRUE and besoinSign TRUE_mvnoPack and Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="bcdb2307-fa2d-4687-8763-42bb22f269de">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="a6836448-e522-48c8-906b-6d277730df80"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>309320060</con:value></con:property><con:property><con:name>refSignature</con:name><con:value>00000014</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="f0f5fe0b-e262-4e3f-8774-34ccf0622807"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.setPropertyValue( "RUM3",'RRE4F5CB')
testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform to command_One offer_Two choice_mvnoPack and Bien" id="af287483-cb1c-4d09-9a15-91a1c616ce84"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1727ab8b-9657-4e07-b4db-cef3539c93ee</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>309320060</con:value></con:property><con:property><con:name>customerKey4</con:name></con:property><con:property><con:name>handleKey4</con:name></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>refCommandLigneGlobal</con:name></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="5f308659-151a-48c6-8def-8a58a734a7f0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform to command_One offer_Two choice_mvnoPack and Bien</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform to command_One offer_Two choice_mvnoPack and Bien</con:sourceStep><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Pay COMPTANT for the created command" id="39f3ba75-13bd-4754-82be-781356e6d45c" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "5",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R0000000",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c" disabled="true"><con:configuration><token>"signatureReference":"${Properties#refPayment}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2 Pay RECURRENT for the created command" id="6aa82537-c917-48ac-9842-a19a8846d8a5"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2 Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="3.1 Wait for initiation of documents" id="bfeb0866-a526-41c1-a33d-ef3194d7a72c"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="6c1abe54-4ac6-478d-a3a5-76b3c2d852b1">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="e46b1141-f704-4205-bad1-e98cac5d40c5"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="cc044911-66cd-4435-a691-c626350772d1"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="3.2 Update DB_Set documentDemande = 1 and documente = 1" id="4eb5486c-cbac-497a-a6ee-a317ccb741e8"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 1, documente = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="4.1 Init signature for MVNO" id="8027b819-0a45-4052-be1e-76d3cb562718" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4.1 Init signature for MVNO" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInitAfterSignature",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="4.2 Update DB_Set besoinSignature = 1" id="d6824cbd-10bd-4e2b-a5b7-6cc18ae77b3f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE signatureassociation SET besoinSignature = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="4.3 Sign the created command_Signe = TRUE" id="c4d88e96-a3e0-442e-8d98-e7872f6d66bc"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4.3 Sign the created command_Signe = TRUE" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="5. Validate command_Validate successfully" id="7a43f2e5-13fd-45c3-9caf-14b2d8b6b742"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5. Validate command_Validate successfully" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Simple Contains" name="Validation must be true" id="20c1dc7f-29f0-4818-987d-5791bbb7dc48"><con:configuration><token>"valide":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9ee40a1a-2c45-4e2a-8517-9949f47692d8" name="Reason empty"><con:configuration><token>"reasons":[]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">309320060</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>286f1335-549c-4351-b3b7-684cd8ea922c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4e58e072-8c16-4b64-afcf-8913880acf5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0fbec94c-bb27-4c91-80d2-910102fb0d41</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e4e8517e-d033-4b98-a972-ec32b49dab38</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eca1f156-7e54-4104-979e-6781e5301b91</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bef504a1-d314-4933-943d-dba4a0f649eb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e738c3f-8f68-40b2-8037-38c3af497361</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1badadfc-aebc-4102-9f76-284b6c25d261</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f33cb3a3-2e46-4b2b-bbd3-28e65a8c8d5b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>206d52d1-8b4c-4e7b-b360-205e71fbfabf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c227c93f-6044-4609-b132-ac947717de93</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>53575c87-80f8-4c6a-976f-2e636d417496</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9f17d94-672e-4345-8758-78ca923b8b9f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dc5b2c4a-7bcd-4424-a3ef-4bf0fdfe1a49</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4e87dd5b-70d4-468d-af23-4a756b97a9ea</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>55c08819-99b8-42d1-b098-efa1ed96fc53</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8fbfc25e-8dcb-4f6e-b06b-a44e4be57629</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dffabb58-4179-43bc-9435-8fde40f9fc6e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7038a64a-cf1c-4254-90f1-73bdca3892ca</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>68cc768b-0dea-4549-b182-c998e2f07dad</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bfeb0866-a526-41c1-a33d-ef3194d7a72c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d6824cbd-10bd-4e2b-a5b7-6cc18ae77b3f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c4d88e96-a3e0-442e-8d98-e7872f6d66bc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="f8f41efb-a00b-4549-a9d7-3ed2c1966abc" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03.03 Validate successfully_signe TRUE and besoinSignature FALSE_avfw.essentiel" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="9ac1df20-371c-4e27-bbab-5919c1ee9796">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="46124834-15b4-4681-8f52-6b89754a992c"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>200006209</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="a835d0a8-243b-49c0-b376-fa71adb3ed3c"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.setPropertyValue( "customerKey1",'6002367491')
testRunner.testCase.setPropertyValue( "handleKey1",'00001006956')
testRunner.testCase.setPropertyValue( "RUM1",'R2C4V5CB')</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform to command with one offer no detail_antivirus" id="9382248a-b3fa-4460-8025-59173fd6f26b"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>0d51eb30-0a61-410c-9f6d-3c60240f37ae</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>200006209</con:value></con:property><con:property><con:name>customerKey1</con:name></con:property><con:property><con:name>handleKey1</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="e1d9b050-8e78-4461-99b5-3a74d25b8186"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform to command with one offer no detail_antivirus</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay RECURRENT for the created command" id="d999604a-eed7-48ba-8252-62f726726acb"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM1}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="6d29cc3e-f710-4a29-b150-c3087dd46317">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="3.1 Wait for initiation of documents" id="c3253480-d9c5-4e72-b816-33281cb7f918"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="d287c76c-06a0-4c0c-bc69-093d67ef43e9"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="3f50b49a-987f-4777-85bd-8a163a885a69"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="4.1. Init signature for the created command_besoinSign = FALSE and signe = FALSE" id="0d403f0f-c07c-4341-ae4d-40c8a4a0a1c2" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4.1. Init signature for the created command_besoinSign = FALSE and signe = FALSE" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455408000000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4.2 Sign doc_Successfully" id="a7950ca1-2e7a-40cd-bad2-853ac2be3314"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4.2 Sign doc_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "HVREBAW3E2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="5. Validate command_Validate successfully" id="f792d09e-89da-4e7c-a558-e3ba874566bf"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5. Validate command_Validate successfully" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Simple Contains" name="Validation must be true" id="20c1dc7f-29f0-4818-987d-5791bbb7dc48"><con:configuration><token>"valide":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9ee40a1a-2c45-4e2a-8517-9949f47692d8" name="Reason empty"><con:configuration><token>"reasons":[]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>customerKey1</con:name><con:value>6002367491</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>00001006956</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refLigneGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM1</con:name><con:value>R2C4V5CB</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0ab85138-0040-4e15-b978-8ddf381ab78c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e6f88a5d-065f-4eda-9e88-3f509954e9a4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da815b87-33c4-42e0-b3d8-69c14400ffc9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29ba547c-c6de-497e-9d42-df40ed7adbc3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>43698965-c735-4fbb-ac11-f667660d0d07</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5778c9f7-8df9-4ca9-a5de-00235f072f38</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2a5e565d-a12b-4bf5-a6cc-4f3f993fcc0e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>48a74367-8ae2-4191-8524-67d6a9556582</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>90f39032-2f7e-4478-adf6-86fd9aa84847</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dd71efed-c1d1-4431-a2ea-c27a3e1b4ffc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="d727be77-193d-48f0-bf26-b1a3bcc27f47" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03.04 Validate successfully_signe FALSE and besoinSignature FALSE_avfw.essentiel" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="dd71efed-c1d1-4431-a2ea-c27a3e1b4ffc">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="d727e9d8-f8e9-4916-87ef-221619f0d19c"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>004900227</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="4c84f049-65d6-4d4d-bbdc-e518151b4468"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.setPropertyValue( "customerKey1",'6002367491')
testRunner.testCase.setPropertyValue( "handleKey1",'00001006956')
testRunner.testCase.setPropertyValue( "RUM1",'R2C4V5CB')</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform to command with one offer no detail_antivirus" id="4429c31c-6fdf-46cd-ab51-e74aa8c29209"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>0d51eb30-0a61-410c-9f6d-3c60240f37ae</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>004900227</con:value></con:property><con:property><con:name>customerKey1</con:name></con:property><con:property><con:name>handleKey1</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="9c66d469-1e89-49a5-a2f0-de72d22c5eb4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform to command with one offer no detail_antivirus</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay RECURRENT for the created command" id="43698965-c735-4fbb-ac11-f667660d0d07"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM1}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="90f39032-2f7e-4478-adf6-86fd9aa84847">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="3. Wait for initiation of documents" id="5778c9f7-8df9-4ca9-a5de-00235f072f38"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="2a5e565d-a12b-4bf5-a6cc-4f3f993fcc0e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="48a74367-8ae2-4191-8524-67d6a9556582"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="4. Init signature for the created command_besoinSign = FALSE and signe = FALSE" id="6207352f-37aa-4c6a-a597-8a9425e995ca" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Init signature for the created command_besoinSign = FALSE and signe = FALSE" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455408000000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="5. Validate command_Validate successfully" id="b49c3c29-19cd-4bce-9216-67379e710643"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5. Validate command_Validate successfully" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Simple Contains" name="Validation must be true" id="20c1dc7f-29f0-4818-987d-5791bbb7dc48"><con:configuration><token>"valide":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9ee40a1a-2c45-4e2a-8517-9949f47692d8" name="Reason empty"><con:configuration><token>"reasons":[]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>customerKey1</con:name><con:value>6002367491</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>00001006956</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refLigneGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM1</con:name><con:value>R2C4V5CB</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0ab85138-0040-4e15-b978-8ddf381ab78c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e6f88a5d-065f-4eda-9e88-3f509954e9a4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da815b87-33c4-42e0-b3d8-69c14400ffc9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>29ba547c-c6de-497e-9d42-df40ed7adbc3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>43698965-c735-4fbb-ac11-f667660d0d07</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5778c9f7-8df9-4ca9-a5de-00235f072f38</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2a5e565d-a12b-4bf5-a6cc-4f3f993fcc0e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>48a74367-8ae2-4191-8524-67d6a9556582</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>90f39032-2f7e-4478-adf6-86fd9aa84847</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dd71efed-c1d1-4431-a2ea-c27a3e1b4ffc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="fd48f28d-125d-41e5-8042-f049d16fc580" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03.05 Validate successfully_signe = NULL and besoinSign = TRUE_mvnoPack and Bien (To be considered)" searchProperties="true" disabled="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="6edbecd7-5433-4f31-8e6f-2ddb0018946b">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="8b4bfe0d-5242-4dc4-81dc-86fafab3efc0"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>004800205</con:value></con:property><con:property><con:name>refSignature</con:name><con:value>00000014</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="f57da99b-f2e1-44e3-abf3-570f363b86a2"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.setPropertyValue( "RUM3",'RRE4F5CB')
testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform to command_One offer_Two choice_mvnoPack and Bien" id="417bdf46-5a98-4cdb-a1ff-428af5235c94"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>1727ab8b-9657-4e07-b4db-cef3539c93ee</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>004800205</con:value></con:property><con:property><con:name>customerKey4</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey4</con:name><con:value>511708010</con:value></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>refCommandLigneGlobal</con:name></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>customerKey4</con:entry><con:entry>handleKey4</con:entry></con:returnProperties><con:runMode>PARALLELL</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="e7336871-db15-4340-b078-dc5d0802e3e6"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform to command_One offer_Two choice_mvnoPack and Bien</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform to command_One offer_Two choice_mvnoPack and Bien</con:sourceStep><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Pay COMPTANT for the created command" id="52c0d175-8a1e-4204-9396-d0fe102e19f2" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "5",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R0000000",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c" disabled="true"><con:configuration><token>"signatureReference":"${Properties#refPayment}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2 Pay RECURRENT for the created command" id="04f249b4-6163-41bf-b319-e1345e1a55b9"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2 Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="8380171f-67bb-4eb2-bce2-d028b2fd707f">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="3.1 Wait for initiation of documents" id="49a18774-b634-4f3c-b860-6158e9b40de8"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="69175dc4-291f-470c-8c3d-8cf8bf4bc018"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="49973dfb-f60a-49ac-bd18-768478bcb9ff"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="3.2 Update DB_Set documentDemande = 1 and documente = 1" id="a0dc8821-6dc0-4d26-a817-d7aedb33d346"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 1, documente = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="4.1 Init signature for MVNO_besoinSign = TRUE" id="ca73954a-9ea9-4a3c-8fdc-3742d76c881e" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4.1 Init signature for MVNO_besoinSign = TRUE" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInitAfterSignature",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="4.2 Update DB_Set signe = NULL and besoinSingature = TRUE" id="b0bc7450-89ba-4418-86a6-ef4e65a1a304"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE signatureassociation SET signe = null where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="5. Validate command_Validate successfully" id="d443127e-7742-4001-9a6e-955ce8f88c10"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5. Validate command_Validate successfully" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Simple Contains" name="Validation must be true" id="20c1dc7f-29f0-4818-987d-5791bbb7dc48"><con:configuration><token>"valide":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9ee40a1a-2c45-4e2a-8517-9949f47692d8" name="Reason empty"><con:configuration><token>"reasons":[]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">004800205</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>286f1335-549c-4351-b3b7-684cd8ea922c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4e58e072-8c16-4b64-afcf-8913880acf5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0fbec94c-bb27-4c91-80d2-910102fb0d41</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e4e8517e-d033-4b98-a972-ec32b49dab38</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eca1f156-7e54-4104-979e-6781e5301b91</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bef504a1-d314-4933-943d-dba4a0f649eb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e738c3f-8f68-40b2-8037-38c3af497361</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1badadfc-aebc-4102-9f76-284b6c25d261</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f33cb3a3-2e46-4b2b-bbd3-28e65a8c8d5b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>206d52d1-8b4c-4e7b-b360-205e71fbfabf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c227c93f-6044-4609-b132-ac947717de93</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>53575c87-80f8-4c6a-976f-2e636d417496</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9f17d94-672e-4345-8758-78ca923b8b9f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dc5b2c4a-7bcd-4424-a3ef-4bf0fdfe1a49</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4e87dd5b-70d4-468d-af23-4a756b97a9ea</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>55c08819-99b8-42d1-b098-efa1ed96fc53</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8fbfc25e-8dcb-4f6e-b06b-a44e4be57629</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dffabb58-4179-43bc-9435-8fde40f9fc6e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7038a64a-cf1c-4254-90f1-73bdca3892ca</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>68cc768b-0dea-4549-b182-c998e2f07dad</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b0bc7450-89ba-4418-86a6-ef4e65a1a304</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="9e074393-85f7-4533-8e4d-1cf77aa46b27" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="04.01 Validate successfully_Command created via creerCommande_mvnoConso" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="ab997698-64d8-4775-a165-31114dcc72e7">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="e8c06e42-752d-4d88-8901-0e53c96c395b"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>003002802</con:value></con:property><con:property><con:name>refSignature</con:name><con:value>00000014</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="fee3329d-770e-4d34-af3d-a94ca5cecfce"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.setPropertyValue( "RUM3",'RRE4F5CB')
testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')</script></con:config></con:testStep><con:testStep type="restrequest" name="0. Update document status of customer to TRUE" id="54c347ec-0783-482f-b1dc-b20a71b8a0a4" disabled="true"><con:settings/><con:config service="BaseClient" resourcePath="/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="0. Update document status of customer to TRUE" id="ab52b71c-646d-4c0b-8a2e-5cb09269b6b9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="c0d2e59f-076b-4bc2-b918-ec96fc13814d"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionCNI is true" id="78efdf77-5b5e-4a40-a3cd-e5ff382e9d68"><con:configuration><token>"flagReceptionCNI":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionJD is true" id="45830ed8-8d1b-4e2a-9ea2-73918bede086"><con:configuration><token>"flagReceptionJD":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="updateReceptionDocRequest" value="{&quot;handleKey&quot;:&quot;${#TestCase#handleKey3}&quot;, &quot;flagReceptionCNI&quot;:&quot;false&quot;, &quot;flagReceptionJD&quot;:&quot;false&quot;}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="calltestcase" name="1. Create a command_One offer_Two choice_mvnoConso and Bien" id="67a7b870-84fc-4d98-8582-dd4c1deee6fc"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>6480b3ef-c7b1-44d2-b94f-b962d23bd271</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>003002802</con:value></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="ec9fe33c-7ce8-4a06-8cb4-e3eb14314386"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a command_One offer_Two choice_mvnoConso and Bien</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Create a command_One offer_Two choice_mvnoConso and Bien</con:sourceStep><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="Pay COMPTANT for the created command" id="97608ca3-d87c-4409-bcec-5b078e74fbb3"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "1",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R0000000",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c" disabled="true"><con:configuration><token>"signatureReference":"${Properties#refPayment}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="2 Pay RECURRENT for the created command" id="f6f97f7f-56dc-48c4-b2c9-8359717b4615" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2 Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="9417718b-faa8-4edf-b4c9-3de75ecfc844">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="3. Wait for initiation of documents" id="4e75f38f-707e-47fb-a0ed-c9bb55b29564"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="3d24a1ce-1b7e-4c3e-9f07-a70fa57c503d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="1cb661c9-99a3-43f4-86bf-094b9f94ef4f"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="3.1 Update DB_Set documentDemande = 1 and documente = 1" id="4eb7a362-f5cc-4dc6-9aca-6464fb153fa9"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 1, documente = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="4. Init signature for the created command" id="aad1827e-b6c9-4bca-baec-e2167ab0f24f" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Init signature for the created command" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInitAfterSignature",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4.1 Sign the created command" id="693cc89b-3807-4004-8b38-4b66f04ca9c2"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4.1 Sign the created command" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="5. Validate the completed command" id="b8a22305-9c12-4851-af3b-b37aa2c20c97"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5. Validate the completed command" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Simple Contains" name="Validation must be true" id="20c1dc7f-29f0-4818-987d-5791bbb7dc48"><con:configuration><token>"valide":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="0792a017-79be-43e0-8cd0-87b208dad4d5" name="Reasons is empty"><con:configuration><token>"reasons":[]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">003002802</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>286f1335-549c-4351-b3b7-684cd8ea922c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4e58e072-8c16-4b64-afcf-8913880acf5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0fbec94c-bb27-4c91-80d2-910102fb0d41</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e4e8517e-d033-4b98-a972-ec32b49dab38</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eca1f156-7e54-4104-979e-6781e5301b91</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bef504a1-d314-4933-943d-dba4a0f649eb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0e738c3f-8f68-40b2-8037-38c3af497361</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1badadfc-aebc-4102-9f76-284b6c25d261</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f33cb3a3-2e46-4b2b-bbd3-28e65a8c8d5b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>206d52d1-8b4c-4e7b-b360-205e71fbfabf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c227c93f-6044-4609-b132-ac947717de93</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>53575c87-80f8-4c6a-976f-2e636d417496</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9f17d94-672e-4345-8758-78ca923b8b9f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dc5b2c4a-7bcd-4424-a3ef-4bf0fdfe1a49</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4e87dd5b-70d4-468d-af23-4a756b97a9ea</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>55c08819-99b8-42d1-b098-efa1ed96fc53</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8fbfc25e-8dcb-4f6e-b06b-a44e4be57629</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dffabb58-4179-43bc-9435-8fde40f9fc6e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7038a64a-cf1c-4254-90f1-73bdca3892ca</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="8927c214-38d9-46a1-9750-49e69cf3fb15" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="05.01 Validate successfully_Command with draft reduction_mvnoConso" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="96da854e-a0d6-4aaf-a8e2-2ba5537b307c">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="a4e0f69b-20b6-48bb-ab09-b3f704df92dc"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>181202000</con:value></con:property><con:property><con:name>redDraft</con:name><con:value>0112345</con:value></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="04a77e40-da02-4770-a904-280bb1abb536"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.setPropertyValue("redDraft",null)
testRunner.testCase.setPropertyValue("Promo1",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("1.TransformCommandWithDraftReduction").setPropertyValue("refCommandGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1.TransformCommandWithDraftReduction" id="407d54b1-8ab4-4c73-b08b-a167d2aad056"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>2f6dd230-4a67-48fc-b4d6-5baabba52c69</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>181202000</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>redDraft</con:name><con:value>0112345</con:value></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>redDraft</con:entry><con:entry>Promo1</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to commandInfo" id="c8b667a2-4d0c-4b85-b82e-d3350df05a81"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1.TransformCommandWithDraftReduction</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>redDraft</con:name><con:sourceType>redDraft</con:sourceType><con:sourceStep>1.TransformCommandWithDraftReduction</con:sourceStep><con:targetType>redDraft</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo1</con:name><con:sourceType>Promo1</con:sourceType><con:sourceStep>1.TransformCommandWithDraftReduction</con:sourceStep><con:targetType>Promo1</con:targetType><con:targetStep>commandInfo</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1 2" id="3ae98055-93e0-4721-b533-a58d46128c1d">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="restrequest" name="2. Pay RECURRENT for the created command" id="3906f58d-5ab5-4968-be60-6cb2304c78ac"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="3 Wait for initiation of documents" id="ab791758-6cbb-4cfa-b9a8-339edb636f1d"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="3497a4f4-31b7-4668-a3f1-c63dc685ac0d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="c63280da-a99f-42b3-93de-e629192c07d4"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="4.2 Update DB_Set documentDemande = 1 and documente = 1" id="a722cddf-84cc-4dcb-9a6c-3c8cbb56ec8e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 1, documente = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="5.  Init signature successfully" id="71cd3931-a6bf-4c9d-883a-10d90626cd2a" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5.  Init signature successfully" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInit",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="5.1 Update DB_Set besoinSignature = 1" id="ea25b55b-778a-4b11-8869-b7f1c8f0357f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE signatureassociation SET besoinSignature = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="5.2 Sign doc_Successfully" id="f319feea-7023-416a-b8df-7c77bf24ae95"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5.2 Sign doc_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSignDoc1",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "HVREBAW3E2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="6. Validate command_Validate successfully" id="081437c0-2893-42fd-8148-ac1944309a07"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="6. Validate command_Validate successfully" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Simple Contains" name="Validation must be true" id="20c1dc7f-29f0-4818-987d-5791bbb7dc48"><con:configuration><token>"valide":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9ee40a1a-2c45-4e2a-8517-9949f47692d8" name="Reason empty"><con:configuration><token>"reasons":[]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">181202000</con:value></con:property><con:property><con:name>redDraft</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4edc882c-c08a-4007-b221-ed013f349563</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ca4d9310-be06-4636-9c8e-c38c68d500b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ef57f960-b373-4044-9bb2-5e801713d1f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0805237-9155-4488-ad2d-25f5953baed7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1f408692-658d-4f78-8a01-6740142bad3e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8d21975f-820b-42d8-9b08-074cf231746d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7b43f5a-18c4-47ca-80cf-73f1dd4cf436</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d206a272-69a5-4692-b03b-c05e91e3f43e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>25a4f1c5-4432-41c3-9577-b05bf84bccfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7d44a60f-8ea0-46f1-9662-e2f675d5797f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>74ed64df-8e97-40df-a037-e1438a508865</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f048d1bd-e46d-417f-b95b-e9aad00713f0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09ad6ab4-7193-4c04-b89f-53d9e9f113bf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d5b693e1-1a3e-44ac-a899-dba5b53e93eb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4d9933b1-c225-41ed-9c84-ee357da1c590</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>aafe79db-5f5b-465a-af1f-e731f1ae1412</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>76b8e526-87b4-4522-9150-afe11a3028f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f1e6fc7e-50d4-4cac-aa40-d7c6f830dd6d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c004a7cd-9cfe-4fd6-aa5f-c2664ebdd8d9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>471f5db0-eb1f-4d9e-afbf-3561fffad9b4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3a5ccf30-c3fb-49c5-8136-1dcb1e72b8e3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d51836da-bf27-4e35-8e01-cb1cfc375e3b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>052a0111-07fd-40e9-a933-f99d18a1ce7f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f8fc4ea1-21e4-43cd-a6f4-49602aa49b3d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>96da854e-a0d6-4aaf-a8e2-2ba5537b307c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="2c9a1116-65c8-4488-b5ca-d4e8d7b64915" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="05.02 Validate successfully_Command with draftLigne reduction_mvnoConso" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="ceac7488-482e-4284-b591-9d3c4ad9b371">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="d40242e9-10b1-492d-8654-d8f615704e84"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>006007326</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="95f63d67-91c5-4e5c-998c-e4e4f44bf663"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.setPropertyValue("redDraftLigne",null)
testRunner.testCase.setPropertyValue("Promo1",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("1.TransformCommandWithDraftLigneReduction").setPropertyValue("refCommandGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1.TransformCommandWithDraftLigneReduction" id="102f6497-a04d-4050-a23d-2522d565fbae"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>15500887-8965-4067-b149-599b21a73f58</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>006007326</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value>0212345</con:value></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>redDraftLigne</con:entry><con:entry>Promo1</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to commandInfo" id="41e33e16-8a9e-4e3f-9048-49d5b0445294"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1.TransformCommandWithDraftLigneReduction</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1 2" id="5d916823-90bd-4c01-9c9a-43abf4589feb">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="restrequest" name="2. Pay RECURRENT for the created command" id="f8fc4ea1-21e4-43cd-a6f4-49602aa49b3d"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="3 Wait for initiation of documents" id="4ef2420a-3711-4718-80a1-07c9af510f31"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="5ca3e173-2221-438c-8c99-2789ee6600d5"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="f7e21344-282f-4131-8605-3932588d0450"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="4.2 Update DB_Set documentDemande = 1 and documente = 1" id="7c1a30a1-9f9e-4f76-8b5a-cb46f4b8c66c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 1, documente = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="5.  Init signature successfully" id="4f631d26-aa72-43d9-81eb-594092953619" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5.  Init signature successfully" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInit",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="5.1 Update DB_Set besoinSignature = 1" id="9359955b-14a9-42c8-897f-e77ada6b2f02"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE signatureassociation SET besoinSignature = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="5.2 Sign doc_Successfully" id="94677ff1-c776-4d63-b07d-7b7d687b0b8f"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5.2 Sign doc_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSignDoc1",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "HVREBAW3E2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="6. Validate command_Validate successfully" id="2b838255-345e-4351-ad51-37eaae6b2805"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="6. Validate command_Validate successfully" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Simple Contains" name="Validation must be true" id="20c1dc7f-29f0-4818-987d-5791bbb7dc48"><con:configuration><token>"valide":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9ee40a1a-2c45-4e2a-8517-9949f47692d8" name="Reason empty"><con:configuration><token>"reasons":[]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM3</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">RRE4F5CB</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">006007326</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4edc882c-c08a-4007-b221-ed013f349563</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ca4d9310-be06-4636-9c8e-c38c68d500b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ef57f960-b373-4044-9bb2-5e801713d1f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0805237-9155-4488-ad2d-25f5953baed7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1f408692-658d-4f78-8a01-6740142bad3e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8d21975f-820b-42d8-9b08-074cf231746d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7b43f5a-18c4-47ca-80cf-73f1dd4cf436</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d206a272-69a5-4692-b03b-c05e91e3f43e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>25a4f1c5-4432-41c3-9577-b05bf84bccfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7d44a60f-8ea0-46f1-9662-e2f675d5797f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>74ed64df-8e97-40df-a037-e1438a508865</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f048d1bd-e46d-417f-b95b-e9aad00713f0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09ad6ab4-7193-4c04-b89f-53d9e9f113bf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d5b693e1-1a3e-44ac-a899-dba5b53e93eb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4d9933b1-c225-41ed-9c84-ee357da1c590</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>aafe79db-5f5b-465a-af1f-e731f1ae1412</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>76b8e526-87b4-4522-9150-afe11a3028f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f1e6fc7e-50d4-4cac-aa40-d7c6f830dd6d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c004a7cd-9cfe-4fd6-aa5f-c2664ebdd8d9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>471f5db0-eb1f-4d9e-afbf-3561fffad9b4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3a5ccf30-c3fb-49c5-8136-1dcb1e72b8e3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d51836da-bf27-4e35-8e01-cb1cfc375e3b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>052a0111-07fd-40e9-a933-f99d18a1ce7f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f8fc4ea1-21e4-43cd-a6f4-49602aa49b3d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ceac7488-482e-4284-b591-9d3c4ad9b371</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="a23e0d43-cb02-4cf0-b068-9514d5b98b6d" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="05.03 Validate successfully_Command with draftLigneDetail reduction_mvnoPack" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="46d8fc1f-be3b-4195-b86b-4fb09d192cc3">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="0ed405b0-44bf-4d18-9faf-52fa6805e0df"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>381202000</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="86fd3c36-2f0a-4e4f-be9f-b1c94e903be8"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("1.TransformCommandWithDraftLigneDetailReduction").setPropertyValue("refCommandGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1.TransformCommandWithDraftLigneDetailReduction" id="8bd24b23-260d-4102-b4a5-0b911bf5e0c5"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>4023001f-206d-44e6-8a6f-08d119bb91ee</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>381202000</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>customerKey4</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>handleKey4</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redDraftLigneDetail</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>customerKey4</con:entry><con:entry>handleKey4</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to commandInfo" id="dcd39dd3-8e42-4834-94af-b7a1088ab237"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1.TransformCommandWithDraftLigneDetailReduction</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1 2" id="55e6becc-1cb0-4df8-b513-9471e9a92174">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="restrequest" name="2. Pay RECURRENT for the created command" id="a4546853-2a3c-465e-91a9-d181c5a4f3a8"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM4}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="3 Wait for initiation of documents" id="3d6fc03c-3912-48c5-867e-99a3a0a51839"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="eabd4d88-9c53-4438-9e99-4e7ee12fd393"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="46f856cd-e2dc-4bd1-8556-c4ce47d9b0a1"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="4.2 Update DB_Set documentDemande = 1 and documente = 1" id="e2177c01-dff7-46da-983f-b0a2606026f4"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 1, documente = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="5.  Init signature successfully" id="f0f8941c-fe2d-46b0-b047-95cc1c09c3db" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5.  Init signature successfully" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInit",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="5.1 Update DB_Set besoinSignature = 1" id="1199fb9b-e970-42b8-9956-115016ebc277"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE signatureassociation SET besoinSignature = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="5.2 Sign doc_Successfully" id="c84dd702-c8d0-42a0-9a58-08bb9a71b726"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5.2 Sign doc_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSignDoc1",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "HVREBAW3E2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="6. Validate command_Validate successfully" id="f2196869-f25b-4eed-8673-d85eb7a4431e"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="6. Validate command_Validate successfully" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Simple Contains" name="Validation must be true" id="20c1dc7f-29f0-4818-987d-5791bbb7dc48"><con:configuration><token>"valide":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9ee40a1a-2c45-4e2a-8517-9949f47692d8" name="Reason empty"><con:configuration><token>"reasons":[]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM4</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">381202000</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4edc882c-c08a-4007-b221-ed013f349563</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ca4d9310-be06-4636-9c8e-c38c68d500b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ef57f960-b373-4044-9bb2-5e801713d1f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0805237-9155-4488-ad2d-25f5953baed7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1f408692-658d-4f78-8a01-6740142bad3e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8d21975f-820b-42d8-9b08-074cf231746d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7b43f5a-18c4-47ca-80cf-73f1dd4cf436</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d206a272-69a5-4692-b03b-c05e91e3f43e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>25a4f1c5-4432-41c3-9577-b05bf84bccfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7d44a60f-8ea0-46f1-9662-e2f675d5797f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>74ed64df-8e97-40df-a037-e1438a508865</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f048d1bd-e46d-417f-b95b-e9aad00713f0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09ad6ab4-7193-4c04-b89f-53d9e9f113bf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d5b693e1-1a3e-44ac-a899-dba5b53e93eb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4d9933b1-c225-41ed-9c84-ee357da1c590</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>aafe79db-5f5b-465a-af1f-e731f1ae1412</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>76b8e526-87b4-4522-9150-afe11a3028f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f1e6fc7e-50d4-4cac-aa40-d7c6f830dd6d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c004a7cd-9cfe-4fd6-aa5f-c2664ebdd8d9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>471f5db0-eb1f-4d9e-afbf-3561fffad9b4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3a5ccf30-c3fb-49c5-8136-1dcb1e72b8e3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d51836da-bf27-4e35-8e01-cb1cfc375e3b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>052a0111-07fd-40e9-a933-f99d18a1ce7f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f8fc4ea1-21e4-43cd-a6f4-49602aa49b3d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ceac7488-482e-4284-b591-9d3c4ad9b371</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="7ee7897c-7d67-406d-95c3-39cfd6f3b2d0" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="05.04 Validate successfully_Command with tarifLigne reduction_mvnoConso" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="a6b24da9-708c-4ca7-a6b1-5556f1d0bd59">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="54653871-beb0-4c21-8252-2d54bd68ebd1"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>225000084</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="2361e0c8-3b4a-4afc-8365-8a7b1d39a656"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("1.TransformCommandWithTarifLigneReduction").setPropertyValue("refCommandGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1.TransformCommandWithTarifLigneReduction" id="73f254f2-be5f-4016-9390-4644f4b42c6a"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5cebccc2-023b-4473-8ba1-223539a356ba</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>225000084</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redTarifDraftLigne</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to commandInfo" id="71aa353e-f612-45b4-8a85-bbd67ace63ef"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1.TransformCommandWithTarifLigneReduction</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1 2" id="057071e7-d049-4039-b322-14708d78ccb9">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="restrequest" name="2. Pay RECURRENT for the created command" id="8e8f3921-4189-4e4a-bc5e-4cda5b2007ec"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="delay" name="3 Wait for initiation of documents" id="27eaa47b-1c05-4661-baa3-7a68aaf80695"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="328f1ffc-b17f-482a-80fc-fb8333bd9ce0"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="b63d2cf0-a4da-4241-a090-3bbaeef1fb5a"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="4.2 Update DB_Set documentDemande = 1 and documente = 1" id="0b40f44c-e663-4a61-99d1-8273a54c56a4"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 1, documente = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="5.  Init signature successfully" id="d78789a4-50e8-43da-87af-5560e92091de" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5.  Init signature successfully" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInit",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="5.1 Update DB_Set besoinSignature = 1" id="048e693a-cc8e-489a-854c-bc1cb979df3e"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE signatureassociation SET besoinSignature = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="5.2 Sign doc_Successfully" id="7e5cb84a-e0f5-40bf-8e99-5967ee582388"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5.2 Sign doc_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSignDoc1",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "HVREBAW3E2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="6. Validate command_Validate successfully" id="2008c19c-a49a-4e36-a4be-99486f51cee1"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="6. Validate command_Validate successfully" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Simple Contains" name="Validation must be true" id="20c1dc7f-29f0-4818-987d-5791bbb7dc48"><con:configuration><token>"valide":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9ee40a1a-2c45-4e2a-8517-9949f47692d8" name="Reason empty"><con:configuration><token>"reasons":[]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">225000084</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4edc882c-c08a-4007-b221-ed013f349563</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ca4d9310-be06-4636-9c8e-c38c68d500b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ef57f960-b373-4044-9bb2-5e801713d1f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0805237-9155-4488-ad2d-25f5953baed7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1f408692-658d-4f78-8a01-6740142bad3e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8d21975f-820b-42d8-9b08-074cf231746d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7b43f5a-18c4-47ca-80cf-73f1dd4cf436</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d206a272-69a5-4692-b03b-c05e91e3f43e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>25a4f1c5-4432-41c3-9577-b05bf84bccfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7d44a60f-8ea0-46f1-9662-e2f675d5797f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>74ed64df-8e97-40df-a037-e1438a508865</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f048d1bd-e46d-417f-b95b-e9aad00713f0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09ad6ab4-7193-4c04-b89f-53d9e9f113bf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d5b693e1-1a3e-44ac-a899-dba5b53e93eb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4d9933b1-c225-41ed-9c84-ee357da1c590</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>aafe79db-5f5b-465a-af1f-e731f1ae1412</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>76b8e526-87b4-4522-9150-afe11a3028f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f1e6fc7e-50d4-4cac-aa40-d7c6f830dd6d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c004a7cd-9cfe-4fd6-aa5f-c2664ebdd8d9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>471f5db0-eb1f-4d9e-afbf-3561fffad9b4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3a5ccf30-c3fb-49c5-8136-1dcb1e72b8e3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d51836da-bf27-4e35-8e01-cb1cfc375e3b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>052a0111-07fd-40e9-a933-f99d18a1ce7f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f8fc4ea1-21e4-43cd-a6f4-49602aa49b3d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ceac7488-482e-4284-b591-9d3c4ad9b371</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="38a0392d-6346-49d1-843e-34b1094b9ec0" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="05.05 Validate successfully_Command with all reductions without fraise_mvnoConso and Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="a4c2b9af-412e-44e4-b589-bfddd1277cbd">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="4c4245d2-4f26-4ef4-8e4d-04617f64f515"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>200005208</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="3301cdd9-61ca-4303-8453-080975fb7d29"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("1.TransformCommandWithManyReductions").setPropertyValue("refCommandGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1.TransformCommandWithManyReductions" id="cbee96d6-e506-4e1a-a117-d44eda4ceb51"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5758cc92-e1dd-406c-8f70-00188ee392f8</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>200005208</con:value></con:property><con:property><con:name>redDraft</con:name><con:value>0112345</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value>0212345</con:value></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value>0312345</con:value></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value>0412345</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003210</con:value></con:property><con:property><con:name>redFraiseDraftLigne</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redFraiseDraftLigneDetail</con:name><con:value xsi:nil="true"/></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>redDraft</con:entry><con:entry>redDraftLigne</con:entry><con:entry>redDraftLigneDetail</con:entry><con:entry>redFraiseDraftLigne</con:entry><con:entry>redFraiseDraftLigneDetail</con:entry><con:entry>redTarifDraftLigne</con:entry><con:entry>redBasePromo1</con:entry><con:entry>redBasePromo2</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>refDraftGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to commandInfo" id="d0306526-2afd-4ef2-9a73-d2592da6ecbe"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1.TransformCommandWithManyReductions</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay RECURRENT for the created command" id="0f92de87-b19c-4e4f-be93-07f408e49ba1"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1 2" id="9f8772e1-d8b8-43a7-a6e3-2b690084662e">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="3 Wait for initiation of documents" id="3d31d126-02b7-4d2f-a8ec-5f161fa6a867"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="f62f482e-0016-496f-b584-407f161e227a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="142534a2-87b1-48b3-8828-6aff247388c9"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="4.2 Update DB_Set documentDemande = 1 and documente = 1" id="9edcef2e-24ca-4edd-a584-3c7c59015b43"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 1, documente = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="5.  Init signature successfully" id="a3bc7708-0ec6-47f6-8032-b3e558aa1d63" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5.  Init signature successfully" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInit",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="5.1 Update DB_Set besoinSignature = 1" id="9f966eee-4ccc-48f7-b4bf-e281b4a59a50"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE signatureassociation SET besoinSignature = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="5.2 Sign doc_Successfully" id="1b4a5c9b-1084-47c0-8b1a-ee8c933c0562"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5.2 Sign doc_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSignDoc1",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "HVREBAW3E2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="6. Validate command_Validate successfully" id="b6101c01-5119-4526-8520-04653113f0d8"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="6. Validate command_Validate successfully" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Simple Contains" name="Validation must be true" id="20c1dc7f-29f0-4818-987d-5791bbb7dc48"><con:configuration><token>"valide":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9ee40a1a-2c45-4e2a-8517-9949f47692d8" name="Reason empty"><con:configuration><token>"reasons":[]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">200005208</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4edc882c-c08a-4007-b221-ed013f349563</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ca4d9310-be06-4636-9c8e-c38c68d500b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ef57f960-b373-4044-9bb2-5e801713d1f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0805237-9155-4488-ad2d-25f5953baed7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1f408692-658d-4f78-8a01-6740142bad3e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8d21975f-820b-42d8-9b08-074cf231746d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7b43f5a-18c4-47ca-80cf-73f1dd4cf436</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d206a272-69a5-4692-b03b-c05e91e3f43e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>25a4f1c5-4432-41c3-9577-b05bf84bccfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7d44a60f-8ea0-46f1-9662-e2f675d5797f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>74ed64df-8e97-40df-a037-e1438a508865</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f048d1bd-e46d-417f-b95b-e9aad00713f0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09ad6ab4-7193-4c04-b89f-53d9e9f113bf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d5b693e1-1a3e-44ac-a899-dba5b53e93eb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4d9933b1-c225-41ed-9c84-ee357da1c590</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>aafe79db-5f5b-465a-af1f-e731f1ae1412</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>76b8e526-87b4-4522-9150-afe11a3028f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f1e6fc7e-50d4-4cac-aa40-d7c6f830dd6d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c004a7cd-9cfe-4fd6-aa5f-c2664ebdd8d9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>471f5db0-eb1f-4d9e-afbf-3561fffad9b4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3a5ccf30-c3fb-49c5-8136-1dcb1e72b8e3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d51836da-bf27-4e35-8e01-cb1cfc375e3b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>052a0111-07fd-40e9-a933-f99d18a1ce7f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a4c2b9af-412e-44e4-b589-bfddd1277cbd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="c0b4f3ee-d9f7-45c2-b413-bd33f626a8d0" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="05.06 Validate successfully_Command with all reductions without fraise_mvnoPack and Bien" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="067a6e3c-a95b-4e6a-ad92-4f464104d53a">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="51c2d132-1be1-48b6-a988-6f21ec1e2178"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>003002862</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="82485820-9ee3-4dca-8502-c188719cd6f0"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("1.TransformCommandWithManyReductions").setPropertyValue("refCommandGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1.TransformCommandWithManyReductions" id="e29a6c89-262e-45d2-905c-b8c432477a52"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>aace372d-7d97-492d-a946-0e8e5aa59f66</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>003002862</con:value></con:property><con:property><con:name>redDraft</con:name><con:value>0112345</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value>0212345</con:value></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value>0412345</con:value></con:property><con:property><con:name>redBasePromo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>redBasePromo2</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003211</con:value></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>Promo2</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redDraftLigneDetailService</con:name><con:value>0312345</con:value></con:property><con:property><con:name>redDraftLigneDetailBien</con:name><con:value>0312345</con:value></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>redDraft</con:entry><con:entry>redDraftLigne</con:entry><con:entry>redDraftLigneDetail</con:entry><con:entry>redTarifDraftLigne</con:entry><con:entry>redBasePromo1</con:entry><con:entry>redBasePromo2</con:entry><con:entry>refDraftGlobal</con:entry><con:entry>Promo1</con:entry><con:entry>Promo2</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>redDraftLigneDetailService</con:entry><con:entry>redDraftLigneDetailBien</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to commandInfo" id="7e503cdc-fdb1-4649-b843-b6b49e16eacf"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1.TransformCommandWithManyReductions</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay RECURRENT for the created command" id="daf21469-83f1-4dd7-bf6d-567297bf11fc"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM3}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1 2" id="e1f47f1c-0d82-4a3c-9c36-b7e5c23f620d">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="3 Wait for initiation of documents" id="0c1dc280-c289-4b54-b476-40aefad0cea0"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="f95c69da-bdb2-445c-8e87-dc661e7e002f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="0d6a145e-ea64-4aad-84fb-50f84eecade5"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="4.2 Update DB_Set documentDemande = 1 and documente = 1" id="923b2a58-1e54-44de-aef4-3810e865b8a0"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 1, documente = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="5.  Init signature successfully" id="cf0b2544-c9aa-46f0-b98a-f6f5ecbe8358" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5.  Init signature successfully" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInit",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="5.1 Update DB_Set besoinSignature = 1" id="910ffa8c-1e9c-4a78-b91c-72b37b2686fc"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE signatureassociation SET besoinSignature = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="5.2 Sign doc_Successfully" id="d475d0f5-0844-45c9-9295-d262a1cdcc80"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5.2 Sign doc_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSignDoc1",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "HVREBAW3E2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="6. Validate command_Validate successfully" id="2e902b88-5ccc-43eb-bd76-65f98a48495b"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="6. Validate command_Validate successfully" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Simple Contains" name="Validation must be true" id="20c1dc7f-29f0-4818-987d-5791bbb7dc48"><con:configuration><token>"valide":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9ee40a1a-2c45-4e2a-8517-9949f47692d8" name="Reason empty"><con:configuration><token>"reasons":[]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM3</con:name><con:value>RRE4F5CB</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">003002862</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4edc882c-c08a-4007-b221-ed013f349563</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ca4d9310-be06-4636-9c8e-c38c68d500b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ef57f960-b373-4044-9bb2-5e801713d1f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0805237-9155-4488-ad2d-25f5953baed7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1f408692-658d-4f78-8a01-6740142bad3e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8d21975f-820b-42d8-9b08-074cf231746d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7b43f5a-18c4-47ca-80cf-73f1dd4cf436</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d206a272-69a5-4692-b03b-c05e91e3f43e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>25a4f1c5-4432-41c3-9577-b05bf84bccfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7d44a60f-8ea0-46f1-9662-e2f675d5797f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>74ed64df-8e97-40df-a037-e1438a508865</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f048d1bd-e46d-417f-b95b-e9aad00713f0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09ad6ab4-7193-4c04-b89f-53d9e9f113bf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d5b693e1-1a3e-44ac-a899-dba5b53e93eb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4d9933b1-c225-41ed-9c84-ee357da1c590</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>aafe79db-5f5b-465a-af1f-e731f1ae1412</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>76b8e526-87b4-4522-9150-afe11a3028f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f1e6fc7e-50d4-4cac-aa40-d7c6f830dd6d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c004a7cd-9cfe-4fd6-aa5f-c2664ebdd8d9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>471f5db0-eb1f-4d9e-afbf-3561fffad9b4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3a5ccf30-c3fb-49c5-8136-1dcb1e72b8e3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d51836da-bf27-4e35-8e01-cb1cfc375e3b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>052a0111-07fd-40e9-a933-f99d18a1ce7f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a4c2b9af-412e-44e4-b589-bfddd1277cbd</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="2283b840-9412-47db-b2d9-96d1f4037970" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="05.07 Validate successfully_Command with many reductions without detail ligne_avfw.essentiel" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="eac30213-0a27-4ec2-8468-c640a57f886e">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="commandInfo" id="3a5ccf30-c3fb-49c5-8136-1dcb1e72b8e3"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refCommand</con:name><con:value>225000087</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="d51836da-bf27-4e35-8e01-cb1cfc375e3b"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey1",'6002367491')
testRunner.testCase.setPropertyValue( "handleKey1",'00001006956')
testRunner.testCase.setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("commandInfo").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("1.TransformCommandWithManyReductions").setPropertyValue("refCommandGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1.TransformCommandWithManyReductions" id="471f5db0-eb1f-4d9e-afbf-3561fffad9b4"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>48fd983f-b5cc-421c-a9e6-1651da8c1851</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>225000087</con:value></con:property><con:property><con:name>redDraft</con:name><con:value>0112345</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value>0212345</con:value></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redFraiseDraftLigne</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redFraiseDraftLigneDetail</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value>0312345</con:value></con:property><con:property><con:name>redBasePromo1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redBasePromo2</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003212</con:value></con:property><con:property><con:name>customerKey1</con:name><con:value>6002367491</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>00001006956</con:value></con:property><con:property><con:name>Promo1</con:name></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>redDraft</con:entry><con:entry>redDraftLigne</con:entry><con:entry>redDraftLigneDetail</con:entry><con:entry>redFraiseDraftLigne</con:entry><con:entry>redFraiseDraftLigneDetail</con:entry><con:entry>redTarifDraftLigne</con:entry><con:entry>redBasePromo1</con:entry><con:entry>redBasePromo2</con:entry><con:entry>refDraftGlobal</con:entry><con:entry>customerKey1</con:entry><con:entry>handleKey1</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to commandInfo" id="052a0111-07fd-40e9-a933-f99d18a1ce7f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1.TransformCommandWithManyReductions</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>commandInfo</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>commandInfo</con:sourceStep><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Pay RECURRENT for the created command" id="1dd58771-2373-4f9c-9c12-001863e3ce88"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "SEPA",
  "montant": "0",
  "timestampPaiement": "1456737183",
  "rum": "${#TestCase#RUM1}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1 2" id="0bc89999-4ff2-41c0-86be-de1cca7204fb">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="3 Wait for initiation of documents" id="77fc5dc0-991a-440e-8d9d-9acfa01ba75f"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="2bfd833b-7b13-40a1-a6bf-d425c7303f5c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${commandInfo#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="5129392e-a7b0-4fa4-b5d8-e4e435f7b5a3"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="4.2 Update DB_Set documentDemande = 1 and documente = 1" id="8b109933-2da1-46fd-a2dc-a75c4005d627"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 1, documente = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="5.  Init signature successfully" id="f419b614-46c1-40fa-8519-b31c7faccbb0" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5.  Init signature successfully" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInit",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="5.1 Update DB_Set besoinSignature = 1" id="e9273a14-f4b6-4fd2-947b-a899175475d5"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE signatureassociation SET besoinSignature = 1 where referenceCommande = '${commandInfo#refCommand}';</con:query><con:assertion type="Simple Contains" id="4371f23e-1ab2-46e4-a10a-a16ce0a8d9b4" name="Contains"><con:configuration><token>&lt;UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="5.2 Sign doc_Successfully" id="bf12c636-651f-4b73-9812-65d78cd5f729"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5.2 Sign doc_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSignDoc1",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "HVREBAW3E2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="6. Validate command_Validate successfully" id="c5c6314b-3f11-450d-b42c-e54f26d5c187"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="6. Validate command_Validate successfully" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Simple Contains" name="Validation must be true" id="20c1dc7f-29f0-4818-987d-5791bbb7dc48"><con:configuration><token>"valide":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9ee40a1a-2c45-4e2a-8517-9949f47692d8" name="Reason empty"><con:configuration><token>"reasons":[]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${commandInfo#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>RUM1</con:name><con:value>R2C4V5CB</con:value></con:property><con:property><con:name>refCommandGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">225000087</con:value></con:property><con:property><con:name>customerKey1</con:name><con:value>6002367491</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>00001006956</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>f3782634-64bf-4281-a4cb-4b9e4e16206e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f949575-1dce-4fa6-bf4b-8ca7ff3cdbb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1d5eea65-cffd-42f8-a309-2280dcc5e325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>da7eb5b4-6a78-4f3a-a71f-f6bbc2082a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2636ba97-cfce-4ab6-828a-4fca2e4b0b4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a907918a-f5b6-431a-9ad1-6e7d9cfa1db6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>746f5f9d-b32e-455f-b046-9fac7c17b3c1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e10aa058-2e59-43cb-be5b-6c18be5f2e6f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c6d576a6-aecf-45cb-aa53-2023f042d01c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3e2c4ce4-e912-48e9-a6cd-768bca9bf588</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c39a7b6e-ae96-43e3-88bb-1150f8eff1a0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0285caec-c67a-4124-bd05-35c72f779f4c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4edc882c-c08a-4007-b221-ed013f349563</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ca4d9310-be06-4636-9c8e-c38c68d500b2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ef57f960-b373-4044-9bb2-5e801713d1f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e0805237-9155-4488-ad2d-25f5953baed7</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1f408692-658d-4f78-8a01-6740142bad3e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8d21975f-820b-42d8-9b08-074cf231746d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7b43f5a-18c4-47ca-80cf-73f1dd4cf436</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d206a272-69a5-4692-b03b-c05e91e3f43e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>25a4f1c5-4432-41c3-9577-b05bf84bccfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>7d44a60f-8ea0-46f1-9662-e2f675d5797f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>74ed64df-8e97-40df-a037-e1438a508865</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f048d1bd-e46d-417f-b95b-e9aad00713f0</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>09ad6ab4-7193-4c04-b89f-53d9e9f113bf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d5b693e1-1a3e-44ac-a899-dba5b53e93eb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4d9933b1-c225-41ed-9c84-ee357da1c590</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>aafe79db-5f5b-465a-af1f-e731f1ae1412</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>76b8e526-87b4-4522-9150-afe11a3028f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f1e6fc7e-50d4-4cac-aa40-d7c6f830dd6d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c004a7cd-9cfe-4fd6-aa5f-c2664ebdd8d9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>471f5db0-eb1f-4d9e-afbf-3561fffad9b4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3a5ccf30-c3fb-49c5-8136-1dcb1e72b8e3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d51836da-bf27-4e35-8e01-cb1cfc375e3b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>052a0111-07fd-40e9-a933-f99d18a1ce7f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eac30213-0a27-4ec2-8468-c640a57f886e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="ff41277b-31aa-49e6-aa99-43f239f08d64" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="06.01 Validate successfully_Command is paied enough" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Reset variables to null" id="518f6dd7-d8f4-4e79-be1e-636c1e9423e5"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "refCommand",null)
testRunner.testCase.setPropertyValue( "coutComptantReduitTTC",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Command transformed with one reduction in draftLigne" id="b32a0083-b4a2-420d-8aff-c34b831fae4c"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>cb591d95-20d8-4dbb-969b-86e4f8da98fc</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>003002773</con:value></con:property><con:property><con:name>customerKey3</con:name></con:property><con:property><con:name>handleKey3</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="74a87521-8664-4c04-9835-590669a1badc"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Command transformed with one reduction in draftLigne</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Set Nb Passes = 0" id="c0c44fce-5244-44e7-86ff-699efc906739">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="6072864f-878c-4d7a-a57c-7404f2ff125f">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="2. Wait for initiation of documents" id="e48d5944-9665-47ed-94a2-9e8c00ab5473"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="c03db15f-017b-410b-83b3-2cff8ca9f478"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${#TestCase#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="33c71b2f-7575-4076-bc67-a3b6a0c0f996"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="2.1 Update DB_Set documentDemande = 1 and documente = 1" id="77a537b0-30e7-429b-9c5a-44ee51a84fad"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>UPDATE documentassociation SET documentDemande = 1, documente = 1 where referenceCommande = '${#TestCase#refCommand}';</con:query><con:assertion type="Simple NotContains" id="812cad04-553b-4ba9-90e5-f2490f8f2faa" name="Not Contains"><con:configuration><token>&lt;UpdateCount>0</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="3. Sign the created command" id="8da8a5dc-3115-42c7-b8ae-a8613a0390f5"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Sign the created command" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4. Calculate the price needed to pay via enhancedCalculerCout" id="88e193df-2f70-4055-a716-c11497420cdd"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/enhancedCostCalculation" methodName="enhancedCalculerCout" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Calculate the price needed to pay via enhancedCalculerCout" id="7e95406e-677d-4399-a713-cfe7f94c4aab" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/309620060/enhancedCostCalculation</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="81c04bec-db76-4dd6-99c3-1cd8acae9fef" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer coutComptantReduitTTC" id="96b981ce-a750-4d77-9f2d-516d0ec3399c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>coutComptantReduitTTC</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>4. Calculate the price needed to pay via enhancedCalculerCout</con:sourceStep><con:sourcePath>//*:coutComptantGlobale[1]/*:coutComptantReduitTTC[1]</con:sourcePath><con:targetType>coutComptantReduitTTC</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="5. Pay a price needed to be paied" id="2435d875-102a-4854-8c37-56bf921e6a4d"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5. Pay a price needed to be paied" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "${#TestCase#coutComptantReduitTTC}",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R123456",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Simple Contains" name="refPayment must be" id="b1e85a97-9bc8-4681-bd8b-b73a5c3a240c"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="6. Validate that command_It must be validated" id="c994492e-88cd-45c3-b27f-682929e35fc4"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="6. Validate that command_It must be validated" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/004100236/valider</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="5f11b09e-cca7-4efc-a334-b7e0a86d3663" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="17d26bd2-c83f-4909-85e8-c3729024f87d" name="valid true"><con:configuration><token>"valide":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refCommand</con:name><con:value>003002773</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property><con:property><con:name>coutComptantReduitTTC</con:name><con:value>23.99</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>35e79528-8b16-4280-8bcd-d2df334dcb0a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bcf34af3-38d0-465b-b0d0-d6d63a93228a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4459213e-ea39-4722-8468-18a9bd70014f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8ba2934c-e2e4-4996-b0c8-5ded63fbb86c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7e37061-a393-48d8-9642-5a54e8693e5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d57dce0e-a75d-44a8-89ea-e7385f821349</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>49b2c1f8-887e-4f2f-b0f0-393e81d60149</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3421ef65-b76b-48da-93eb-571ace7fd01a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>898ad6d0-c435-4472-bab0-563d8c462d7f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>11ea528d-aeb2-43a9-9380-92244d70257a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>aabfdfc2-24d5-4b0f-af8d-3f15086890fb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties><con:property><con:name>customerKey</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey</con:name><con:value>511708010</con:value></con:property><con:property><con:name>RUM</con:name><con:value>RRE4F5CB</con:value></con:property></con:properties><con:reportParameters/></con:testSuite><con:testSuite id="38a53116-1e80-424a-9d13-29d5fff3f30a" name="cronExpressionEnvoyerEmailConfirmationCommande"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="55edd89e-7e51-4f59-8a5a-90f3517a9a9f" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.01 Check sending email for command NOT be MVNO_No sending email" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Reset variables to null" id="8bafe1a2-513f-47ca-812a-05027d7963c0"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue("refCommand",null)
testRunner.testCase.setPropertyValue("refCommandLigne",null)
testRunner.testCase.getTestStepByName("1. Validate a command including reduction_avfw.essentiel").setPropertyValue("refCommandGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Validate a command including reduction_avfw.essentiel" id="94f10e5f-0f2d-446d-8147-62cb595ed3a7"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>2283b840-9412-47db-b2d9-96d1f4037970</con:targetTestCase><con:properties><con:property><con:name>NbPassed</con:name></con:property><con:property><con:name>refCommandGlobal</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>RUM1</con:name><con:value>R2C4V5CB</con:value></con:property><con:property><con:name>customerKey1</con:name><con:value>6002367491</con:value></con:property><con:property><con:name>handleKey1</con:name><con:value>00001006956</con:value></con:property></con:properties><con:returnProperties><con:entry>RUM1</con:entry><con:entry>refCommandGlobal</con:entry><con:entry>customerKey1</con:entry><con:entry>handleKey1</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="e09f7156-1c62-4a55-8599-3308c36d0a07"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Validate a command including reduction_avfw.essentiel</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="2. Check the commandLigne is created successfully" id="f1299e21-abb2-4790-bf31-16187a51a665"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commandeligne` where commandeId = (select id from commande where reference = '${#TestCase#refCommand}');</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Only one commandLigne is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="397c1681-3bd5-412b-a58a-61038d910f20" name="Reference Selection must be"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNE.REFERENCEOFFRE[1]</path><content>avfw.essentiel</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommandLigne" id="86778236-edd0-498b-acc0-b1aa02ce8ac8"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Check the commandLigne is created successfully</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNE.REFERENCE[1]</con:sourcePath><con:targetType>refCommandLigne</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="delay" name="Waiting sending email ..." id="ae9b797b-5fcc-4017-88b0-fb2f65578399"><con:settings/><con:config><delay>35000</delay></con:config></con:testStep><con:testStep type="jdbc" name="3. Select from communication table to check new record" id="227a89d2-1af7-4c1f-ba5f-8d1f991829dd"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from communication where referenceCommande = '${#TestCase#refCommand}';</con:query><con:assertion type="Simple Contains" id="4c9e4a68-b8b5-4ae6-9ffa-8028cd821d72" name="Contains no record"><con:configuration><token>&lt;ResultSet fetchSize="0"/>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="request" name="netCom_sendEmail" id="494875f0-7b07-4574-bdd9-90ac487db8a9" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>NetCommMailWSImplServiceSoapBinding</con:interface><con:operation>sendMail</con:operation><con:request name="netCom_sendEmail" id="c652e860-1f46-49e4-bb5a-40d4812c5bfe" defaultOutgoingWss="" defaultIncomingWss=""><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.119.11:8080/net-comm-ws-1.0.x/services/netCommMail</con:endpoint><con:request><![CDATA[<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sch="http://www.nordnet.com/netcommmail/schemas">
   <soapenv:Header/>
   <soapenv:Body>
      <sch:sendMail><templateName>Confirmation_commande_MVNO_CONSO</templateName></sch:sendMail>
   </soapenv:Body>
</soapenv:Envelope>]]></con:request><con:assertion type="SOAP Response" id="9c9a6997-2146-4d6c-b4ce-9b0ecde7c727"/><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties><con:property><con:name>refCommand</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refCommandLigne</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property></con:properties><con:reportParameters/></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="ce037b93-224a-4fe9-9296-f65b26554abc" name="cronExpressionSynchronizerDocument"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="ce17037c-8308-4236-9397-708bf7e8981a" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01. Check cron job with offer mvno_conso_Document status in FALSE_customLabel of User FALSE" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="e9ee7163-ac72-4683-83dc-0093bf0ee12f">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="Properties" id="876d78c8-c180-43b9-85d8-cf7b75cd0b5f"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00002897</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00002910</con:value></con:property><con:property><con:name>refDraftLigneDetail1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refDraftLigneDetail2</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommand</con:name><con:value>027320000</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="01681119-c47d-46a4-9a6f-21ee1cb0f42a"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refDraftLigneDetail1",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refDraftLigneDetail2",null)
testRunner.testCase.setPropertyValue("refDraftGlobal",null)
testRunner.testCase.setPropertyValue("refDraftLigneGlobal",null)</script></con:config></con:testStep><con:testStep type="restrequest" name="Update document status of UTILISATEUR to FALSE" id="78fb5c58-32d5-434c-920f-23831fc2430a"><con:settings/><con:config service="BaseClient" resourcePath="/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Update document status of UTILISATEUR to FALSE" id="ab52b71c-646d-4c0b-8a2e-5cb09269b6b9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="dcf22b9e-414e-4376-9ff3-90380c236cec"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionCNI is true" id="6aef62e5-b869-4cd3-b1c3-45f622bd9a42"><con:configuration><token>"flagReceptionCNI":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionJD is true" id="8d127532-90a5-437c-a947-3107599b67d4"><con:configuration><token>"flagReceptionJD":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="ea49f38e-fd7d-4f1e-ae54-4d9e07679df9" name="flag ReceptionFormulairePorta is false"><con:configuration><token>"flagReceptionFormulairePorta":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="updateReceptionDocRequest" value="{&quot;handleKey&quot;:&quot;102008617&quot;, &quot;flagReceptionCNI&quot;:&quot;true&quot;, &quot;flagReceptionJD&quot;:&quot;true&quot;, &quot;flagReceptionFormulairePorta&quot;:false}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Update document status of TITULAIRE to TRUE" id="51cbe099-96b2-41ca-8454-f374075c8cf0"><con:settings/><con:config service="BaseClient" resourcePath="/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Update document status of TITULAIRE to TRUE" id="ab52b71c-646d-4c0b-8a2e-5cb09269b6b9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="dcf22b9e-414e-4376-9ff3-90380c236cec"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionCNI is true" id="6aef62e5-b869-4cd3-b1c3-45f622bd9a42"><con:configuration><token>"flagReceptionCNI":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionJD is true" id="8d127532-90a5-437c-a947-3107599b67d4"><con:configuration><token>"flagReceptionJD":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="ea49f38e-fd7d-4f1e-ae54-4d9e07679df9" name="flag ReceptionFormulairePorta is true"><con:configuration><token>"flagReceptionFormulairePorta":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="updateReceptionDocRequest" value="{&quot;handleKey&quot;:&quot;511708010&quot;, &quot;flagReceptionCNI&quot;:&quot;true&quot;, &quot;flagReceptionJD&quot;:&quot;true&quot;, &quot;flagReceptionFormulairePorta&quot;:true}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvnoConso and Bien" id="797fe710-89d7-4352-8400-4032739c11d0"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvnoConso and Bien" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "Welcome",
    "ip": {
      "ip": "10.190.29.140",
      "ts": 1456370857000
    }
  },
  "lignes": [
    {
      "auteur": {
        "qui": "hientran",
        "canal": "Welcome",
        "ip": {
          "ip": "10.190.29.150",
          "ts": 1456370857000
        }
      },
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
        
      "details": [
         {
            "referenceSelection": "MVNO-SERVICE",
            "referenceChoix": "mvno_conso",
            "referenceTarif": "83"
          },
         		  {
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }
      ]
    }
  }
  ],
  "souscripteur": {
    "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "livraison": {
     "clientId": "192112",
    "adresseId": "102008617",
    "tva": "01"
  },
  "facturation": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1e955254-7b0e-4dd5-a613-90a9b07b21ba" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refDraft" id="fc5ddd83-5da3-472a-ad04-81c18756c62e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvnoConso and Bien</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>Properties</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvnoConso and Bien</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvnoConso and Bien</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:lignes[1]/ns1:e[1]/ns1:referenceLigne[1]</con:sourcePath><con:targetType>refDraftLigne</con:targetType><con:targetStep>Properties</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvnoConso and Bien</con:sourceStep><con:sourcePath>//*:referenceLigne</con:sourcePath><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with params" id="14a015a5-12b1-4476-a1ef-9c481309db9f"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with params" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
      "ip":{"ip":"10.190.29.140"}
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"102008617",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="31bab8b5-267a-4c3d-bd93-c8cbc300cbe5" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${Properties#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="381ea987-2ac5-4672-81cd-7d9e56424b66"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommande</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with params</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="62ffe6e4-1c17-402c-acc8-6a2e4e560689">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait cronExpressionSynchronizerDocument" id="56d432b9-5ea6-41ee-b3d0-e0b3659904a9"><con:settings/><con:config><delay>5000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="80394017-1ea8-4bb1-8ff8-e7f17fa2c717"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${Properties#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for synchronization of documents" id="0b2a7325-78ad-4683-8850-169419eefb79"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()="0"
and 
${#TestCase#NbPassed} &lt; 2</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="3. Synchronize doc status" id="9bcb1ae7-5201-4565-b4c6-3b7ce8e42498"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/synchronizeDocument" methodName="synchronizerCommandeDocument" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Synchronize doc status" id="e141dcab-7f31-49fb-a4cc-9ef3729638c9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "qui": "hientran",
  "canal": "SOAPUI",
  "ip": {
    "ip": "10.190.29.140",
    "ts": "1458274922"
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/DRA-00002534/synchronizeDocument</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b19cab1a-50a9-49f9-b909-2185eb57b5e5" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11e06dd4-00e1-47ad-92f7-a404d48d598a" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4. Get document association to check status after synchronization_'documente' must be FALSE" id="8cfe2a9e-317c-443d-aefa-944fd0836f59"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/{refCommande}/documentAssociation" methodName="findCommandeDocumentAssociations" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Get document association to check status after synchronization_'documente' must be FALSE" id="216480eb-f429-433e-8752-fd248db0ba7f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale.finder.ws-1.2.x/Commande/abc/documentAssociation</con:originalUri><con:assertion type="JsonPath Count" id="9433f223-6330-4720-bebb-f90c05128404" name="Two documents are returned" disabled="true"><con:configuration><path>$.documentAssociations[*]</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e22dabb0-bbad-44fa-b352-00ce82127757" name="clientId must be 192112"><con:configuration><token>"clientId":"192112"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8f364de6-f2ae-45cb-a2c0-c6aaf26113aa" name="adressId must be 511708010"><con:configuration><token>"adresseId":"511708010"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="dc9648e1-188a-4b8f-8914-bd62fb8a61c8" name="Reference of command ligne detail must be" disabled="true"><con:configuration><token>"referenceCommandeLigneDetail":"${Properties#refCommandLigneDetail}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="0a955ae4-7fef-4896-89b1-3070ca8c62c5" name="documentDemande must be true"><con:configuration><token>"documentDemande":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="bfe8181e-b3a2-4d2c-854b-0d31c3a44d73" name="documente must be false"><con:configuration><token>"documente":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="540df192-da2a-43c8-b520-a5fe0c32b99d" name="forceValide must be false"><con:configuration><token>"forceValide":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="canal must be Synchornize with BaseClient" id="5c5239a9-b238-4068-96e6-b5b0550a070e" disabled="true"><con:configuration><token>"canal":"Synchornize with BaseClient"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="qui must be Opale-api" id="99ee2f60-4a46-4398-860e-7cded3e33f5b" disabled="true"><con:configuration><token>"qui":"Opale-api"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="5. Select the command to check dateDocumentInitialisation_It must be NOT NULL" id="03ca4e83-686b-4792-9944-08e95b6ecedb"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commande` where reference = "${Properties#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89a2ee38-25f4-49f8-bbbc-094283c67f34" name="DateDocumentInitialization must be NOT NULL"><con:configuration><token>&lt;COMMANDE.DATEDOCUMENTINITIALIZATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002897</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00002910</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>2</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>78fb5c58-32d5-434c-920f-23831fc2430a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>381ea987-2ac5-4672-81cd-7d9e56424b66</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>56d432b9-5ea6-41ee-b3d0-e0b3659904a9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e9ee7163-ac72-4683-83dc-0093bf0ee12f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>62ffe6e4-1c17-402c-acc8-6a2e4e560689</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>80394017-1ea8-4bb1-8ff8-e7f17fa2c717</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0b2a7325-78ad-4683-8850-169419eefb79</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>03ca4e83-686b-4792-9944-08e95b6ecedb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>18cad141-fb90-45f0-8a97-547f47d8be18</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7de50d4-8b9d-4dec-88cf-578307012f80</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ca147402-88a7-4f43-9769-f03050090d9d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="2a5e70e3-764a-4f67-819d-5cdefbea6d3b" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02. Check cron job with offer mvno_conso_Document status in TRUE_customLabel of User TRUE" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="9f4b70c4-188d-43be-ae8f-3849b9c4b9f6">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="Properties" id="385676c2-25dd-4921-b842-17b272de70da"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00002902</con:value></con:property><con:property><con:name>refDraftLigneDetail1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refDraftLigneDetail2</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommand</con:name><con:value>202002700</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="e8699a66-8bea-4db5-83c7-614549b9e5bc"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refDraftLigneDetail1",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refDraftLigneDetail2",null)
testRunner.testCase.setPropertyValue("refDraftGlobal",null)
testRunner.testCase.setPropertyValue("refDraftLigneGlobal",null)</script></con:config></con:testStep><con:testStep type="restrequest" name="Update document status of UTILISATEUR to TRUE" id="fbcc70f7-68a6-401b-b41a-d1d53ab305c4"><con:settings/><con:config service="BaseClient" resourcePath="/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Update document status of UTILISATEUR to TRUE" id="ab52b71c-646d-4c0b-8a2e-5cb09269b6b9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="c0d2e59f-076b-4bc2-b918-ec96fc13814d"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionCNI is true" id="78efdf77-5b5e-4a40-a3cd-e5ff382e9d68"><con:configuration><token>"flagReceptionCNI":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionJD is true" id="45830ed8-8d1b-4e2a-9ea2-73918bede086"><con:configuration><token>"flagReceptionJD":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionFormulairePorta is true" id="3be6d5d5-33e9-4377-9927-da769eeee296"><con:configuration><token>"flagReceptionFormulairePorta":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="updateReceptionDocRequest" value="{&quot;handleKey&quot;:&quot;102008617&quot;, &quot;flagReceptionCNI&quot;:&quot;true&quot;, &quot;flagReceptionJD&quot;:&quot;true&quot;, &quot;flagReceptionFormulairePorta&quot;:true}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Update document status of TITULAIRE to FALSE" id="e7665ebc-f643-46de-80de-630772d7918e"><con:settings/><con:config service="BaseClient" resourcePath="/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Update document status of TITULAIRE to FALSE" id="ab52b71c-646d-4c0b-8a2e-5cb09269b6b9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="c0d2e59f-076b-4bc2-b918-ec96fc13814d"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionCNI is true" id="78efdf77-5b5e-4a40-a3cd-e5ff382e9d68"><con:configuration><token>"flagReceptionCNI":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionJD is true" id="45830ed8-8d1b-4e2a-9ea2-73918bede086"><con:configuration><token>"flagReceptionJD":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionFormulairePorta is false" id="3be6d5d5-33e9-4377-9927-da769eeee296"><con:configuration><token>"flagReceptionFormulairePorta":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="updateReceptionDocRequest" value="{&quot;handleKey&quot;:&quot;511708010&quot;, &quot;flagReceptionCNI&quot;:&quot;true&quot;, &quot;flagReceptionJD&quot;:&quot;true&quot;, &quot;flagReceptionFormulairePorta&quot;:false}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvnoConso and Bien" id="e13b8d87-5003-4ddb-98ca-abe8d08e9bb8"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvnoConso and Bien" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "Welcome",
    "ip": {
      "ip": "10.190.29.140",
      "ts": 1456370857000
    }
  },
  "lignes": [
    {
      "auteur": {
        "qui": "hientran",
        "canal": "Welcome",
        "ip": {
          "ip": "10.190.29.150",
          "ts": 1456370857000
        }
      },
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
        
      "details": [
         {
            "referenceSelection": "MVNO-SERVICE",
            "referenceChoix": "mvno_conso",
            "referenceTarif": "83"
          },
         		  {
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }
      ]
    }
  }
  ],
  "souscripteur": {
    "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "livraison": {
     "clientId": "192112",
    "adresseId": "102008617",
    "tva": "01"
  },
  "facturation": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1e955254-7b0e-4dd5-a613-90a9b07b21ba" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refDraft" id="f9956b6f-b4c5-4954-9a5e-646dd3e6db51"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvnoConso and Bien</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>Properties</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvnoConso and Bien</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with params" id="7f613232-b29d-4137-9010-fb4ad3d624f3"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with params" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
      "ip": {"ip":"10.190.29.140"}
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"102008617",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="31bab8b5-267a-4c3d-bd93-c8cbc300cbe5" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${Properties#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="7f0aa07a-f4a9-46b2-8c08-68c27bc9921e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with params</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommandGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with params</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommandGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="067e73b9-aa0c-4e28-baa0-64b0de241f95">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait cronExpressionSynchronizerDocument" id="b7ffb2f4-45e9-4b94-a754-e2009f682535"><con:settings/><con:config><delay>5000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="a811127e-2e24-4c72-b944-e1802157b409"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${Properties#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for synchronization of documents" id="c5df0043-e770-422a-b94e-8da40b67d886" disabled="true"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()="0"
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="3. Synchronize doc status" id="210a4e5a-7270-402a-a3ab-85a7909c00cf"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/synchronizeDocument" methodName="synchronizerCommandeDocument" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Synchronize doc status" id="e141dcab-7f31-49fb-a4cc-9ef3729638c9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "qui": "hientran",
  "canal": "SOAPUI",
  "ip": {
    "ip": "10.190.29.140",
    "ts": "1458274922"
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/DRA-00002534/synchronizeDocument</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b19cab1a-50a9-49f9-b909-2185eb57b5e5" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11e06dd4-00e1-47ad-92f7-a404d48d598a" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4. Get document association to check status_'documente' must be TRUE" id="5ed2f21e-59bb-4daf-aeca-34e3f5ddd261"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/{refCommande}/documentAssociation" methodName="findCommandeDocumentAssociations" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Get document association to check status_'documente' must be TRUE" id="216480eb-f429-433e-8752-fd248db0ba7f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale.finder.ws-1.2.x/Commande/abc/documentAssociation</con:originalUri><con:assertion type="JsonPath Count" id="9433f223-6330-4720-bebb-f90c05128404" name="Two documents are returned"><con:configuration><path>$.documentAssociations[*]</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e22dabb0-bbad-44fa-b352-00ce82127757" name="clientId must be"><con:configuration><token>"clientId":"192112"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8f364de6-f2ae-45cb-a2c0-c6aaf26113aa" name="adressId must be"><con:configuration><token>"adresseId":"511708010"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="dc9648e1-188a-4b8f-8914-bd62fb8a61c8" name="Reference of command ligne detail must be" disabled="true"><con:configuration><token>"referenceCommandeLigneDetail":"${commandInfo#refCommandLigneDetail}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="0a955ae4-7fef-4896-89b1-3070ca8c62c5" name="documentDemande must be true"><con:configuration><token>"documentDemande":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="bfe8181e-b3a2-4d2c-854b-0d31c3a44d73" name="documente must be TRUE"><con:configuration><token>"documente":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="540df192-da2a-43c8-b520-a5fe0c32b99d" name="forceValide must be false"><con:configuration><token>"forceValide":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="aed0b4ad-8b1a-41c2-9a23-54a29776c0b6" name="canal must be Synchornize with BaseClient" disabled="true"><con:configuration><token>"canal":"Synchornize with BaseClient"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f242fdf6-c3e5-4acc-bf6f-d12832557fd2" name="qui must be Opale-api" disabled="true"><con:configuration><token>"qui":"Opale-api"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="5. Select the command to check dateDocumentInitialisation_It must be NOT NULL" id="8affb0fd-7309-4e6e-ade7-a47c272477ce"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commande` where reference = "${Properties#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89a2ee38-25f4-49f8-bbbc-094283c67f34" name="DateDocumentInitialization must be NOT NULL"><con:configuration><token>&lt;COMMANDE.DATEDOCUMENTINITIALIZATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002902</con:value></con:property><con:property><con:name>refCommandGlobal</con:name><con:value>202002700</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>fbcc70f7-68a6-401b-b41a-d1d53ab305c4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b7ffb2f4-45e9-4b94-a754-e2009f682535</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9f4b70c4-188d-43be-ae8f-3849b9c4b9f6</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>067e73b9-aa0c-4e28-baa0-64b0de241f95</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a811127e-2e24-4c72-b944-e1802157b409</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c5df0043-e770-422a-b94e-8da40b67d886</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>210a4e5a-7270-402a-a3ab-85a7909c00cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e8ef5e2a-f7ea-43c6-9f5d-0c1d175f30c4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="a16c096c-ff1c-4fe8-85a6-3179176aeb2b" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03. Check cron job with offer mvno_pack_Document status in FALSE_customLabel of User FALSE" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="e1e4241b-651d-4f02-967f-78cf291694f2">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="Properties" id="c8369187-8308-42a7-a46e-e88e86ebe2da"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00002541</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00002553</con:value></con:property><con:property><con:name>refDraftLigneDetail1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refDraftLigneDetail2</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommand</con:name><con:value>702001506</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="6a903094-a066-443b-a9ba-87692099cd3c"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refDraftLigneDetail1",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refDraftLigneDetail2",null)
testRunner.testCase.setPropertyValue("refDraftGlobal",null)
testRunner.testCase.setPropertyValue("refDraftLigneGlobal",null)</script></con:config></con:testStep><con:testStep type="restrequest" name="0. Update document status of Customer to FALSE" id="912c5679-14e3-4323-b753-260f92eb80b1"><con:settings/><con:config service="BaseClient" resourcePath="/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="0. Update document status of Customer to FALSE" id="ab52b71c-646d-4c0b-8a2e-5cb09269b6b9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="dcf22b9e-414e-4376-9ff3-90380c236cec"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionCNI is false" id="6aef62e5-b869-4cd3-b1c3-45f622bd9a42"><con:configuration><token>"flagReceptionCNI":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionJD is false" id="8d127532-90a5-437c-a947-3107599b67d4"><con:configuration><token>"flagReceptionJD":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionFormulairePorta is true" id="1afc6e53-2968-46d8-a9cc-b76d24f5016f"><con:configuration><token>"flagReceptionFormulairePorta":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="updateReceptionDocRequest" value="{&quot;handleKey&quot;:&quot;511708010&quot;, &quot;flagReceptionCNI&quot;:&quot;false&quot;, &quot;flagReceptionJD&quot;:&quot;false&quot;, &quot;flagReceptionFormulairePorta&quot;:true}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvnoPack and Bien" id="f00626f1-8b0a-44b0-8744-6c8651bba41b"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvnoPack and Bien" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "canal": "SoapUIPRO",
    "qui": "hientran",
    "ip": {
      "ts": 1455615028000,
      "ip": "10.190.29.140"
    }
  },
  "lignes": [
    {
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
"details":[{
"referenceSelection": "MVNO-SERVICE" ,
"referenceChoix": "mvno_pack",
"referenceTarif": "77"
},
{
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }]
      }
    }
  ],
  "souscripteur": {
      "clientId": "192112",
      "adresseId": "511708010"
    },

    "facturation": {
      "clientId": "192112",
      "adresseId": "511708010"
    }
    ,

    "livraison": {
      "clientId": "192112",
      "adresseId": "511708010"
    },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1e955254-7b0e-4dd5-a613-90a9b07b21ba" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refDraft" id="da9ea73a-aa0e-4f2a-873b-466a93de0d38"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvnoPack and Bien</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>Properties</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvnoPack and Bien</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvnoPack and Bien</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:lignes[1]/ns1:e[1]/ns1:referenceLigne[1]</con:sourcePath><con:targetType>refDraftLigne</con:targetType><con:targetStep>Properties</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvnoPack and Bien</con:sourceStep><con:sourcePath>//*:referenceLigne</con:sourcePath><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with params" id="a40512e3-8a8f-4fa1-8f88-b130651eb198"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with params" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
      "ip":{"ip":"10.190.29.140"}
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_pack",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_pack",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="31bab8b5-267a-4c3d-bd93-c8cbc300cbe5" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${Properties#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="7999dc22-492e-413a-a473-e92870f93b13"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommande</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with params</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="45de0397-a3a2-47c3-a52a-d9707bf5eb19">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait cronExpressionSynchronizerDocument" id="329b5b4e-67b3-4e94-8bf6-44a15595e17a"><con:settings/><con:config><delay>5000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="9db5c5c4-2dab-4114-b50b-50640de5bd38"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${Properties#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for synchronization of documents" id="79bb3c46-a9b0-4da7-92cb-79328c0876fc"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()="0"
and 
${#TestCase#NbPassed} &lt; 2</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="3. Synchronize doc status" id="60321a2f-7d32-4072-b819-240ebfb94318"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/synchronizeDocument" methodName="synchronizerCommandeDocument" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Synchronize doc status" id="e141dcab-7f31-49fb-a4cc-9ef3729638c9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "qui": "hientran",
  "canal": "SOAPUI",
  "ip": {
    "ip": "10.190.29.140",
    "ts": "1458274922"
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/DRA-00002534/synchronizeDocument</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b19cab1a-50a9-49f9-b909-2185eb57b5e5" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11e06dd4-00e1-47ad-92f7-a404d48d598a" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4. Get document association to check status after synchronization_'documente' must be FALSE" id="e292988e-930e-40cb-8254-e70b256ad8ed"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/{refCommande}/documentAssociation" methodName="findCommandeDocumentAssociations" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Get document association to check status after synchronization_'documente' must be FALSE" id="216480eb-f429-433e-8752-fd248db0ba7f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale.finder.ws-1.2.x/Commande/abc/documentAssociation</con:originalUri><con:assertion type="JsonPath Count" id="9433f223-6330-4720-bebb-f90c05128404" name="Two documents are returned"><con:configuration><path>$.documentAssociations[*]</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e22dabb0-bbad-44fa-b352-00ce82127757" name="clientId must be 192112"><con:configuration><token>"clientId":"192112"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8f364de6-f2ae-45cb-a2c0-c6aaf26113aa" name="adressId must be 511708010"><con:configuration><token>"adresseId":"511708010"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="dc9648e1-188a-4b8f-8914-bd62fb8a61c8" name="Reference of command ligne detail must be" disabled="true"><con:configuration><token>"referenceCommandeLigneDetail":"${commandInfo#refCommandLigneDetail}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="0a955ae4-7fef-4896-89b1-3070ca8c62c5" name="documentDemande must be true"><con:configuration><token>"documentDemande":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="bfe8181e-b3a2-4d2c-854b-0d31c3a44d73" name="documente must be false"><con:configuration><token>"documente":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="540df192-da2a-43c8-b520-a5fe0c32b99d" name="forceValide must be false"><con:configuration><token>"forceValide":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="canal must be Synchornize with BaseClient" id="5c5239a9-b238-4068-96e6-b5b0550a070e" disabled="true"><con:configuration><token>"canal":"Synchornize with BaseClient"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="qui must be Opale-api" id="99ee2f60-4a46-4398-860e-7cded3e33f5b" disabled="true"><con:configuration><token>"qui":"Opale-api"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="5. Select the command to check dateDocumentInitialisation_It must be NOT NULL" id="f80aad4d-58e7-4737-b7e1-f5037c0f3a01"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commande` where reference = "${Properties#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89a2ee38-25f4-49f8-bbbc-094283c67f34" name="DateDocumentInitialization must be NOT NULL"><con:configuration><token>&lt;COMMANDE.DATEDOCUMENTINITIALIZATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002541</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00002553</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>2</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>78fb5c58-32d5-434c-920f-23831fc2430a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>381ea987-2ac5-4672-81cd-7d9e56424b66</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>31cdfd1a-25c2-4d48-b635-f772d64177f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>46c357ce-7e68-4eea-bb0b-02ea0e9e8761</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>56d432b9-5ea6-41ee-b3d0-e0b3659904a9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>912c5679-14e3-4323-b753-260f92eb80b1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e1e4241b-651d-4f02-967f-78cf291694f2</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>45de0397-a3a2-47c3-a52a-d9707bf5eb19</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>9db5c5c4-2dab-4114-b50b-50640de5bd38</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>79bb3c46-a9b0-4da7-92cb-79328c0876fc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4e8c3620-09cd-495e-a06b-f21330f15774</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="3caa564e-6ea9-41b5-8143-94e2b1b776bf" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="04. Check cron job with offer mvno_pack_Document status in TRUE_customLabel of User TRUE" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="c2560000-3356-441e-adb6-eb2fb7fc5e5e">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="Properties" id="c1b5863f-129b-4b78-b5d3-638f901f8714"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00002542</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00002554</con:value></con:property><con:property><con:name>refDraftLigneDetail1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refDraftLigneDetail2</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommand</con:name><con:value>006006617</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="74b2eec6-7d93-4583-bfbe-dc52b797910d"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refDraftLigneDetail1",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refDraftLigneDetail2",null)
testRunner.testCase.setPropertyValue("refDraftGlobal",null)
testRunner.testCase.setPropertyValue("refDraftLigneGlobal",null)</script></con:config></con:testStep><con:testStep type="restrequest" name="0. Update document status of Customer to TRUE" id="bb4e4959-22cf-48c4-b297-8a752f2d151c"><con:settings/><con:config service="BaseClient" resourcePath="/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="0. Update document status of Customer to TRUE" id="ab52b71c-646d-4c0b-8a2e-5cb09269b6b9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="dcf22b9e-414e-4376-9ff3-90380c236cec"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionCNI is true" id="6aef62e5-b869-4cd3-b1c3-45f622bd9a42"><con:configuration><token>"flagReceptionCNI":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionJD is true" id="8d127532-90a5-437c-a947-3107599b67d4"><con:configuration><token>"flagReceptionJD":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionFormulairePorta is true" id="51dde378-b5a6-432f-afc1-166610f508a8"><con:configuration><token>"flagReceptionFormulairePorta":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="updateReceptionDocRequest" value="{&quot;handleKey&quot;:&quot;511708010&quot;, &quot;flagReceptionCNI&quot;:&quot;true&quot;, &quot;flagReceptionJD&quot;:&quot;true&quot;, &quot;flagReceptionFormulairePorta&quot;:true}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvnoPack and Bien" id="7db14a45-48d6-4ef9-840a-5afe0309c0df"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvnoPack and Bien" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "canal": "SoapUIPRO",
    "qui": "hientran",
    "ip": {
      "ts": 1455615028000,
      "ip": "10.190.29.140"
    }
  },
  "lignes": [
    {
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
"details":[{
"referenceSelection": "MVNO-SERVICE" ,
"referenceChoix": "mvno_pack",
"referenceTarif": "77"
},
{
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }]
      }
    }
  ],
  "souscripteur": {
      "clientId": "62016431",
      "adresseId": "004701010"
    },

    "facturation": {
      "clientId": "62016431",
      "adresseId": "004701010"
    }
    ,

    "livraison": {
      "clientId": "62016431",
      "adresseId": "004701010"
    },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1e955254-7b0e-4dd5-a613-90a9b07b21ba" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refDraft" id="43ef06d0-cf18-459b-ab70-9938d9eda858"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvnoPack and Bien</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>Properties</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvnoPack and Bien</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvnoPack and Bien</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:lignes[1]/ns1:e[1]/ns1:referenceLigne[1]</con:sourcePath><con:targetType>refDraftLigne</con:targetType><con:targetStep>Properties</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvnoPack and Bien</con:sourceStep><con:sourcePath>//*:referenceLigne</con:sourcePath><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with params" id="02598eb3-6c4b-491c-a6cc-a7b69e7663f2"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with params" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
      "ip":{"ip":"10.190.29.140"}
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_pack",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_pack",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"62016431",
         "adresseId":"004701010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"62016431",
         "adresseId":"004701010",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"62016431",
         "adresseId":"004701010",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="31bab8b5-267a-4c3d-bd93-c8cbc300cbe5" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${Properties#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="d39a04f8-9e58-4290-ad6a-00850cebc2d9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommande</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with params</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="e4611ef2-ee03-48bc-973a-b2e049413e33">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait cronExpressionSynchronizerDocument" id="5db416c6-ac83-4fb9-a518-076a09f0b94d"><con:settings/><con:config><delay>5000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="925b8453-19de-4fcc-bc6b-79c141c4b957"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${Properties#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for synchronization of documents" id="d96986a4-f223-4c27-95f5-67cd1005b879"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()="0"
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="4. Synchronize doc status" id="c3bcc410-ed15-4cc4-8f25-082f6cf95c85"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/synchronizeDocument" methodName="synchronizerCommandeDocument" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Synchronize doc status" id="e141dcab-7f31-49fb-a4cc-9ef3729638c9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "qui": "hientran",
  "canal": "SOAPUI",
  "ip": {
    "ip": "10.190.29.140",
    "ts": "1458274922"
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/DRA-00002534/synchronizeDocument</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b19cab1a-50a9-49f9-b909-2185eb57b5e5" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11e06dd4-00e1-47ad-92f7-a404d48d598a" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="5. Get document association to check status after synchronization_'documente' must be TRUE" id="07713835-9366-4c21-8882-78737eaefcc1"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/{refCommande}/documentAssociation" methodName="findCommandeDocumentAssociations" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5. Get document association to check status after synchronization_'documente' must be TRUE" id="216480eb-f429-433e-8752-fd248db0ba7f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale.finder.ws-1.2.x/Commande/abc/documentAssociation</con:originalUri><con:assertion type="JsonPath Count" id="9433f223-6330-4720-bebb-f90c05128404" name="Two documents are returned"><con:configuration><path>$.documentAssociations[*]</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e22dabb0-bbad-44fa-b352-00ce82127757" name="clientId must be 62016431"><con:configuration><token>"clientId":"62016431"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8f364de6-f2ae-45cb-a2c0-c6aaf26113aa" name="adressId must be 004701010"><con:configuration><token>"adresseId":"004701010"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="dc9648e1-188a-4b8f-8914-bd62fb8a61c8" name="Reference of command ligne detail must be" disabled="true"><con:configuration><token>"referenceCommandeLigneDetail":"${commandInfo#refCommandLigneDetail}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="0a955ae4-7fef-4896-89b1-3070ca8c62c5" name="documentDemande must be true"><con:configuration><token>"documentDemande":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="bfe8181e-b3a2-4d2c-854b-0d31c3a44d73" name="documente must be true"><con:configuration><token>"documente":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="540df192-da2a-43c8-b520-a5fe0c32b99d" name="forceValide must be false"><con:configuration><token>"forceValide":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="canal must be Synchornize with BaseClient" id="5c5239a9-b238-4068-96e6-b5b0550a070e" disabled="true"><con:configuration><token>"canal":"Synchornize with BaseClient"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="qui must be Opale-api" id="99ee2f60-4a46-4398-860e-7cded3e33f5b" disabled="true"><con:configuration><token>"qui":"Opale-api"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="6. Select the command to check dateDocumentInitialisation_It must be NOT NULL" id="858425c9-9b5a-46f2-bf16-9ac75dc4c8aa"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commande` where reference = "${Properties#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89a2ee38-25f4-49f8-bbbc-094283c67f34" name="DateDocumentInitialization must be NOT NULL"><con:configuration><token>&lt;COMMANDE.DATEDOCUMENTINITIALIZATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002542</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00002554</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>0</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>78fb5c58-32d5-434c-920f-23831fc2430a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>381ea987-2ac5-4672-81cd-7d9e56424b66</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>31cdfd1a-25c2-4d48-b635-f772d64177f5</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>46c357ce-7e68-4eea-bb0b-02ea0e9e8761</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>56d432b9-5ea6-41ee-b3d0-e0b3659904a9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>bb4e4959-22cf-48c4-b297-8a752f2d151c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c2560000-3356-441e-adb6-eb2fb7fc5e5e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e4611ef2-ee03-48bc-973a-b2e049413e33</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>925b8453-19de-4fcc-bc6b-79c141c4b957</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d96986a4-f223-4c27-95f5-67cd1005b879</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c3bcc410-ed15-4cc4-8f25-082f6cf95c85</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="f20a9a7e-88b1-4ab1-83ee-ed5f9701e525" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="05. Check cron job with offer mvno_conso_Document status in FALSE_customLabel of User NULL" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="66200115-02eb-402f-bced-3dce678a16d7">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="Properties" id="827682b8-99a7-43f2-ab1c-3eb621d9265e"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003139</con:value></con:property><con:property><con:name>refDraftLigne</con:name><con:value>LID-00003158</con:value></con:property><con:property><con:name>refDraftLigneDetail1</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refDraftLigneDetail2</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refCommand</con:name><con:value>027320000</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="0460f9a3-81dc-4dba-b958-09f1495fb20d"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refDraftLigne",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refDraftLigneDetail1",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refDraftLigneDetail2",null)
testRunner.testCase.setPropertyValue("refDraftGlobal",null)
testRunner.testCase.setPropertyValue("refDraftLigneGlobal",null)</script></con:config></con:testStep><con:testStep type="restrequest" name="Update document status of UTILISATEUR to FALSE" id="e16aafb1-8a29-4ac6-96ce-59b01ff1ec0c"><con:settings/><con:config service="BaseClient" resourcePath="/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Update document status of UTILISATEUR to FALSE" id="ab52b71c-646d-4c0b-8a2e-5cb09269b6b9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="dcf22b9e-414e-4376-9ff3-90380c236cec"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionCNI is true" id="6aef62e5-b869-4cd3-b1c3-45f622bd9a42"><con:configuration><token>"flagReceptionCNI":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionJD is true" id="8d127532-90a5-437c-a947-3107599b67d4"><con:configuration><token>"flagReceptionJD":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="ea49f38e-fd7d-4f1e-ae54-4d9e07679df9" name="flag ReceptionFormulairePorta is false"><con:configuration><token>"flagReceptionFormulairePorta":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="updateReceptionDocRequest" value="{&quot;handleKey&quot;:&quot;211708010&quot;, &quot;flagReceptionCNI&quot;:&quot;true&quot;, &quot;flagReceptionJD&quot;:&quot;true&quot;, &quot;flagReceptionFormulairePorta&quot;:false}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Update document status of TITULAIRE to TRUE" id="dabed368-edcd-4903-b1fc-187efd8c33b5"><con:settings/><con:config service="BaseClient" resourcePath="/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Update document status of TITULAIRE to TRUE" id="ab52b71c-646d-4c0b-8a2e-5cb09269b6b9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="dcf22b9e-414e-4376-9ff3-90380c236cec"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionCNI is true" id="6aef62e5-b869-4cd3-b1c3-45f622bd9a42"><con:configuration><token>"flagReceptionCNI":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionJD is true" id="8d127532-90a5-437c-a947-3107599b67d4"><con:configuration><token>"flagReceptionJD":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="ea49f38e-fd7d-4f1e-ae54-4d9e07679df9" name="flag ReceptionFormulairePorta is true"><con:configuration><token>"flagReceptionFormulairePorta":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="updateReceptionDocRequest" value="{&quot;handleKey&quot;:&quot;511708010&quot;, &quot;flagReceptionCNI&quot;:&quot;true&quot;, &quot;flagReceptionJD&quot;:&quot;true&quot;, &quot;flagReceptionFormulairePorta&quot;:true}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvnoConso and Bien_User 211708010" id="8f0b3840-beaf-4841-9e10-bd26635d46bb"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvnoConso and Bien_User 211708010" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "Welcome",
    "ip": {
      "ip": "10.190.29.140",
      "ts": 1456370857000
    }
  },
  "lignes": [
    {
      "auteur": {
        "qui": "hientran",
        "canal": "Welcome",
        "ip": {
          "ip": "10.190.29.150",
          "ts": 1456370857000
        }
      },
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
        
      "details": [
         {
            "referenceSelection": "MVNO-SERVICE",
            "referenceChoix": "mvno_conso",
            "referenceTarif": "83"
          },
         		  {
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }
      ]
    }
  }
  ],
  "souscripteur": {
    "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "livraison": {
     "clientId": "192112",
    "adresseId": "211708010",
    "tva": "01"
  },
  "facturation": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="1e955254-7b0e-4dd5-a613-90a9b07b21ba" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refDraft" id="c6d9c2db-09dc-492b-813b-4a10b577fa59"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvnoConso and Bien_User 211708010</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>Properties</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvnoConso and Bien_User 211708010</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refDraftGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvnoConso and Bien_User 211708010</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/draft';
//ns1:Response[1]/ns1:lignes[1]/ns1:e[1]/ns1:referenceLigne[1]</con:sourcePath><con:targetType>refDraftLigne</con:targetType><con:targetStep>Properties</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refDraftLigneGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvnoConso and Bien_User 211708010</con:sourceStep><con:sourcePath>//*:referenceLigne</con:sourcePath><con:targetType>refDraftLigneGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with params_User 211708010" id="2e228d55-7ba5-451c-9c2f-7a1fac8c1b2f"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with params_User 211708010" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
      "ip":{"ip":"10.190.29.140"}
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0700112233"
       },
        {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "Rio",
          "valeur": "42ERRRRRRCCC"
       },
       {
          "referenceChoix" : "PACK-MVNO-POSTPAID-MOBILE",
          "cle": "MSISDN",
          "valeur": "0700112233"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"211708010",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="31bab8b5-267a-4c3d-bd93-c8cbc300cbe5" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${Properties#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="d5ad73f8-2e2b-4a3d-b5c7-e14bed68fbbb"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommande</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with params_User 211708010</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="38c99291-b23e-431f-8ff6-4af5fff44297">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait cronExpressionSynchronizerDocument" id="26cc5672-f1f8-45e1-b7fe-1512a183f9af"><con:settings/><con:config><delay>5000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="a68e262b-f7e6-41ff-b825-342bb4a82710"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${Properties#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for synchronization of documents" id="920ce731-e547-453b-899d-7dcd3443f33c"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()="0"
and 
${#TestCase#NbPassed} &lt; 2</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="3. Synchronize doc status" id="2c136c20-2d48-48c0-a4ab-a1909554555b"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/synchronizeDocument" methodName="synchronizerCommandeDocument" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Synchronize doc status" id="e141dcab-7f31-49fb-a4cc-9ef3729638c9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "qui": "hientran",
  "canal": "SOAPUI",
  "ip": {
    "ip": "10.190.29.140",
    "ts": "1458274922"
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/DRA-00002534/synchronizeDocument</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b19cab1a-50a9-49f9-b909-2185eb57b5e5" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11e06dd4-00e1-47ad-92f7-a404d48d598a" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4. Get document association to check status after synchronization_'documente' must be FALSE" id="f51d1788-80bb-43b0-9477-1cc5c0daea99"><con:settings/><con:config service="/default/finder" resourcePath="/opale-finder-1.2.x/Commande/{refCommande}/documentAssociation" methodName="findCommandeDocumentAssociations" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Get document association to check status after synchronization_'documente' must be FALSE" id="216480eb-f429-433e-8752-fd248db0ba7f" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale.finder.ws-1.2.x/Commande/abc/documentAssociation</con:originalUri><con:assertion type="JsonPath Count" id="9433f223-6330-4720-bebb-f90c05128404" name="Two documents are returned" disabled="true"><con:configuration><path>$.documentAssociations[*]</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e22dabb0-bbad-44fa-b352-00ce82127757" name="clientId must be 192112"><con:configuration><token>"clientId":"192112"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8f364de6-f2ae-45cb-a2c0-c6aaf26113aa" name="adressId must be 511708010"><con:configuration><token>"adresseId":"511708010"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="dc9648e1-188a-4b8f-8914-bd62fb8a61c8" name="Reference of command ligne detail must be" disabled="true"><con:configuration><token>"referenceCommandeLigneDetail":"${Properties#refCommandLigneDetail}"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="0a955ae4-7fef-4896-89b1-3070ca8c62c5" name="documentDemande must be true"><con:configuration><token>"documentDemande":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="bfe8181e-b3a2-4d2c-854b-0d31c3a44d73" name="documente must be false"><con:configuration><token>"documente":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="540df192-da2a-43c8-b520-a5fe0c32b99d" name="forceValide must be false"><con:configuration><token>"forceValide":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="canal must be Synchornize with BaseClient" id="5c5239a9-b238-4068-96e6-b5b0550a070e" disabled="true"><con:configuration><token>"canal":"Synchornize with BaseClient"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="qui must be Opale-api" id="99ee2f60-4a46-4398-860e-7cded3e33f5b" disabled="true"><con:configuration><token>"qui":"Opale-api"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="5. Select the command to check dateDocumentInitialisation_It must be NOT NULL" id="35045d0c-b793-4101-ae42-fd4bd9340a6a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commande` where reference = "${Properties#refCommand}";</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="One records is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="89a2ee38-25f4-49f8-bbbc-094283c67f34" name="DateDocumentInitialization must be NOT NULL"><con:configuration><token>&lt;COMMANDE.DATEDOCUMENTINITIALIZATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00003139</con:value></con:property><con:property><con:name>refDraftLigneGlobal</con:name><con:value>LID-00003158</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>0</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>78fb5c58-32d5-434c-920f-23831fc2430a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>381ea987-2ac5-4672-81cd-7d9e56424b66</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>56d432b9-5ea6-41ee-b3d0-e0b3659904a9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e9ee7163-ac72-4683-83dc-0093bf0ee12f</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>62ffe6e4-1c17-402c-acc8-6a2e4e560689</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>80394017-1ea8-4bb1-8ff8-e7f17fa2c717</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0b2a7325-78ad-4683-8850-169419eefb79</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>03ca4e83-686b-4792-9944-08e95b6ecedb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>18cad141-fb90-45f0-8a97-547f47d8be18</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c7de50d4-8b9d-4dec-88cf-578307012f80</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ca147402-88a7-4f43-9769-f03050090d9d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="97e0bb7f-6516-46b4-8c65-6672219073b4" name="cronExpressionSynchronizerReductionEligible"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="32a18223-0962-4414-a019-b3598ce80071" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01. Synchronize successfully_Command with only reductions auto_mvnoConso" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Reset variables to null" id="69d1bf1e-20da-4dcb-8eee-ad010a1ce13d"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue("refCommand",null)
testRunner.testCase.setPropertyValue("Promo1",null)
testRunner.testCase.getTestStepByName("1. Transform a command with only reductions auto_mvnoConso").setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("1. Transform a command with only reductions auto_mvnoConso").setPropertyValue("Promo1",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform a command with only reductions auto_mvnoConso" id="6c9e8b13-5ad6-42e2-9225-28af1bf2464e"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>b93b868a-13f5-479a-9046-5beb3a9f7314</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>602001608</con:value></con:property><con:property><con:name>customerKey3</con:name></con:property><con:property><con:name>handleKey3</con:name></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>refCommandLigneGlobal</con:name></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>Promo1</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to commandInfo" id="15b303c6-dd0f-4270-811f-a319723ad70f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform a command with only reductions auto_mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo1</con:name><con:sourceType>Promo1</con:sourceType><con:sourceStep>1. Transform a command with only reductions auto_mvnoConso</con:sourceStep><con:targetType>Promo1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Check the validation of codeCatalogueReduction_Return FALSE" id="b8fecc02-53f9-4cb3-b12d-46b59ec35889"><con:settings/><con:config service="/default/qualifier" resourcePath="/discount.qualifier.ws-1.0.x/discount/{codeReduction}/isValid/commande/{referenceCommande}" methodName="validateForOrder" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Check the validation of codeCatalogueReduction_Return FALSE" id="b39454ff-2919-4389-93bc-45260f810e7c" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/discount.qualifier.ws-1.0.x/discount/REM_MVNO_ISP/isValid/commande098006101</con:originalUri><con:assertion type="Simple Contains" id="3aa13703-10e7-4271-9119-4c0de5fa8517" name="Contains"><con:configuration><token>"isValid":false</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="codeReduction" value="${#TestCase#Promo1}"/>
  <con:entry key="referenceCommande" value="${#TestCase#refCommand}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="3. Update Eligible to be different with current value from Promo_TRUE" id="54cf77a3-e602-4e9c-a1cf-0402db42be23"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Update reduction set eligible = true where referenceDraft = "${#TestCase#refCommand}" and codeCatalogueReduction = '${#TestCase#Promo1}';</con:query><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Make sure that the eligible is updated" id="dd64fcb8-4276-4a54-b6a5-e75114090e7d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Select * from reduction where referenceDraft = "${#TestCase#refCommand}" and codeCatalogueReduction = '${#TestCase#Promo1}';</con:query><con:assertion type="Simple Contains" id="c98a404a-8507-4ceb-aefd-68751976aa96" name="Contains"><con:configuration><token> &lt;REDUCTION.ELIGIBLE>1&lt;/REDUCTION.ELIGIBLE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="delay" name="Waiting for synchronization of reduction status" id="084e502c-a88f-405c-84a4-86ac1ff2159b" disabled="true"><con:settings/><con:config><delay>35000</delay></con:config></con:testStep><con:testStep type="restrequest" name="4. Synchronize reduction status manually_Return 200" id="6d666d0b-4cc8-4efc-93dc-a2c3c4f20263"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/synchroniserReductionEligible" methodName="synchronizerReductionEligible" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Synchronize reduction status manually_Return 200" id="fca7486b-8232-4d1a-beb1-d754e1d63142" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//synchroniserReductionEligible</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e7dcdb34-92e9-4836-bf6e-d5d4d210e693" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="5. Select from DB to make sure that eligble is synchronized" id="48fe6846-34a4-4d8e-8426-7dd31d8bff53"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>Select * from reduction where referenceDraft = "${#TestCase#refCommand}" and codeCatalogueReduction = '${#TestCase#Promo1}';</con:query><con:assertion type="Simple Contains" id="71b3f4b1-1da0-4c62-8e24-e6ceb99f1baa" name="Contains"><con:configuration><token> &lt;REDUCTION.ELIGIBLE>0&lt;/REDUCTION.ELIGIBLE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refCommandGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redDraft</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redDraftLigne</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>Promo2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refCommand</con:name><con:value>602001608</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>6a0f9810-4cdc-43e3-8830-055660ecf27a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>83d810dc-886d-48e7-b22c-cdf0956a3302</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6ab700f0-d9eb-45c7-9b91-97430effa672</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>887ec4cb-60d6-436c-9f81-85e0f1c0b23c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dba158a5-cf3c-4b93-8c4a-f70db4a840d1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="aa82b9c0-b404-444e-a5f8-03af0ef06762" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02. Synchronize successfully_Command has no reductions" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Reset variables to null" id="67dfd59c-79ae-452d-9288-87076fda6dee"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue( "customerKey3",'192112')
testRunner.testCase.setPropertyValue( "handleKey3",'511708010')
testRunner.testCase.setPropertyValue("refCommand",null)
testRunner.testCase.setPropertyValue("redDraft",null)
testRunner.testCase.setPropertyValue("redDraftLigne",null)
testRunner.testCase.setPropertyValue("redDraftLigneDetail",null)
testRunner.testCase.setPropertyValue("redTarifDraftLigne",null)
testRunner.testCase.setPropertyValue("Promo1",null)
testRunner.testCase.setPropertyValue("Promo2",null)
testRunner.testCase.getTestStepByName("1. Transform a validated command with many reductions manual and auto_mvnoConso").setPropertyValue("refCommandGlobal",null)
testRunner.testCase.getTestStepByName("1. Transform a validated command with many reductions manual and auto_mvnoConso").setPropertyValue("redDraft",null)
testRunner.testCase.getTestStepByName("1. Transform a validated command with many reductions manual and auto_mvnoConso").setPropertyValue("redDraftLigne",null)
testRunner.testCase.getTestStepByName("1. Transform a validated command with many reductions manual and auto_mvnoConso").setPropertyValue("redDraftLigneDetail",null)
testRunner.testCase.getTestStepByName("1. Transform a validated command with many reductions manual and auto_mvnoConso").setPropertyValue("redTarifDraftLigne",null)
testRunner.testCase.getTestStepByName("1. Transform a validated command with many reductions manual and auto_mvnoConso").setPropertyValue("Promo1",null)
testRunner.testCase.getTestStepByName("1. Transform a validated command with many reductions manual and auto_mvnoConso").setPropertyValue("Promo2",null)</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform a validated command with many reductions manual and auto_mvnoConso" id="ff8ebf08-d466-488e-b775-13cd8e92198b"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>0d51eb30-0a61-410c-9f6d-3c60240f37ae</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>402001207</con:value></con:property><con:property><con:name>customerKey1</con:name></con:property><con:property><con:name>handleKey1</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to commandInfo" id="3f3b8552-2f39-403d-b0d0-f4937f9da362"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform a validated command with many reductions manual and auto_mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Synchronize reduction status manually_Return 200" id="a94ad42a-7b55-4931-9cd6-1744d228473a"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/synchroniserReductionEligible" methodName="synchronizerReductionEligible" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Synchronize reduction status manually_Return 200" id="fca7486b-8232-4d1a-beb1-d754e1d63142" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//synchroniserReductionEligible</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f48b0b80-df21-4e22-ace8-1081d34d890b" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refCommandGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redDraft</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redDraftLigne</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Promo1</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Promo2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refCommand</con:name><con:value>402001207</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>6a0f9810-4cdc-43e3-8830-055660ecf27a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>83d810dc-886d-48e7-b22c-cdf0956a3302</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dba158a5-cf3c-4b93-8c4a-f70db4a840d1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="c5fa8357-2da2-408f-8b2a-ad3603f94bf5" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03. Synchronize failed_Command not existed" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="restrequest" name="1. Synchronize failed_Command not existed" id="e209c4fb-4c79-4a81-be51-78747ce76e65"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/synchroniserReductionEligible" methodName="synchronizerReductionEligible" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Synchronize failed_Command not existed" id="fca7486b-8232-4d1a-beb1-d754e1d63142" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//synchroniserReductionEligible</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f48b0b80-df21-4e22-ace8-1081d34d890b" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="dcebce92-6da1-4ed5-bb84-a76d57633a9a" name="errorCode must be"><con:configuration><token>"errorCode":"2.1.2"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="ff7ca453-6a41-417e-a6f2-3f63480a05fe" name="errorMessage must be"><con:configuration><token>"errorMessage":"la commande de reference abc nexiste pas."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="abc" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refCommandGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redDraft</con:name><con:value>0112345</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>Promo2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refCommand</con:name><con:value>027910070</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>6a0f9810-4cdc-43e3-8830-055660ecf27a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>83d810dc-886d-48e7-b22c-cdf0956a3302</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dba158a5-cf3c-4b93-8c4a-f70db4a840d1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="e54094b1-0c47-4ae6-bc9d-b82c81d62442" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="04. Synchronize failed_Command is already cancelled_mvnoPack" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Reset variables to null" id="25a67d99-396d-4851-8346-6c930f4ef412"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("1. Transform a command_mvnoPack").setPropertyValue("refCommandGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform a command_mvnoPack" id="25e05943-94b0-4ab6-aa45-bb45465b75b1"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>b93b868a-13f5-479a-9046-5beb3a9f7314</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>341701000</con:value></con:property><con:property><con:name>customerKey3</con:name></con:property><con:property><con:name>handleKey3</con:name></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>Promo2</con:name></con:property><con:property><con:name>refCommandLigneGlobal</con:name></con:property><con:property><con:name>Promo3</con:name></con:property><con:property><con:name>Promo4</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>Promo1</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to commandInfo" id="d7e5e217-2be6-4fd5-994c-fee8cb3ab65b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform a command_mvnoPack</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo1</con:name><con:sourceType>Promo1</con:sourceType><con:sourceStep>1. Transform a command_mvnoPack</con:sourceStep><con:targetType>Promo1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="2. Update dateAnnulation of command" id="89fa2b30-dba5-4e8f-bdae-523c5e50a218"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>update commande set dateAnnulation = '2016-02-14' where reference = '${#TestCase#refCommand}';</con:query><con:assertion type="Simple Contains" id="4a060535-ddc3-482b-8cda-41f0a99eeae5" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="3. Synchronize reduction status manually_Return exception" id="b3773881-21a5-48ac-a3a1-ab3aaafdd2f8"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/synchroniserReductionEligible" methodName="synchronizerReductionEligible" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Synchronize reduction status manually_Return exception" id="fca7486b-8232-4d1a-beb1-d754e1d63142" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//synchroniserReductionEligible</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e7dcdb34-92e9-4836-bf6e-d5d4d210e693" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="38bb3a72-da1f-4f2e-9ff0-39d1b61daead" name="errorCode must be"><con:configuration><token>"errorCode":"2.1.3"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a84551be-ae8b-4c08-a2b6-283fc0496095" name="errorMessage must be"><con:configuration><token>"errorMessage":"la commande de reference ${#TestCase#refCommand} est annul."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refCommandGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redDraft</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redDraftLigne</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>Promo2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refCommand</con:name><con:value>341701000</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>6a0f9810-4cdc-43e3-8830-055660ecf27a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>83d810dc-886d-48e7-b22c-cdf0956a3302</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6ab700f0-d9eb-45c7-9b91-97430effa672</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>887ec4cb-60d6-436c-9f81-85e0f1c0b23c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dba158a5-cf3c-4b93-8c4a-f70db4a840d1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>89fa2b30-dba5-4e8f-bdae-523c5e50a218</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="ce8eb536-6af2-4f3c-b492-a7e573371e67" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="05. Synchronize failed_Command including some reductions not existed" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Reset variables to null" id="6a0f9810-4cdc-43e3-8830-055660ecf27a"><con:settings/><con:config><script>
testRunner.testCase.setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("1. Transform a validated command with reductions not existed_mvnoConso").setPropertyValue("refCommandGlobal",null)
</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform a validated command with reductions not existed_mvnoConso" id="569b61ef-b249-4672-be0b-35498a25c61a"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>5758cc92-e1dd-406c-8f70-00188ee392f8</con:targetTestCase><con:properties><con:property><con:name>refCommandGlobal</con:name><con:value>047410070</con:value></con:property><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>redDraft</con:name><con:value>0112345</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value>0212345</con:value></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value>0312345</con:value></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value>0412345</con:value></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>Promo2</con:name><con:value>REM_MVNO_SIM</con:value></con:property><con:property><con:name>refDraftGlobal</con:name><con:value>DRA-00002596</con:value></con:property><con:property><con:name>redFraiseDraftLigne</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>redFraiseDraftLigneDetail</con:name><con:value xsi:nil="true"/></con:property></con:properties><con:returnProperties><con:entry>refCommandGlobal</con:entry><con:entry>redDraft</con:entry><con:entry>redDraftLigne</con:entry><con:entry>redDraftLigneDetail</con:entry><con:entry>redTarifDraftLigne</con:entry><con:entry>customerKey3</con:entry><con:entry>handleKey3</con:entry><con:entry>Promo1</con:entry><con:entry>Promo2</con:entry><con:entry>refDraftGlobal</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to commandInfo" id="83d810dc-886d-48e7-b22c-cdf0956a3302"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommandGlobal</con:sourceType><con:sourceStep>1. Transform a validated command with reductions not existed_mvnoConso</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>redDraft</con:name><con:sourceType>redDraft</con:sourceType><con:sourceStep>1. Transform a validated command with reductions not existed_mvnoConso</con:sourceStep><con:targetType>redDraft</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Promo1</con:name><con:sourceType>Promo1</con:sourceType><con:sourceStep>1. Transform a validated command with reductions not existed_mvnoConso</con:sourceStep><con:targetType>Promo1</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Synchronize failed_Return exception" id="112dd81f-4fc1-4440-b9cd-8f6b040f4a8c"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/synchroniserReductionEligible" methodName="synchronizerReductionEligible" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Synchronize failed_Return exception" id="fca7486b-8232-4d1a-beb1-d754e1d63142" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//synchroniserReductionEligible</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f48b0b80-df21-4e22-ace8-1081d34d890b" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="dcebce92-6da1-4ed5-bb84-a76d57633a9a" name="errorCode must be"><con:configuration><token>"errorCode":"0.14"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="ff7ca453-6a41-417e-a6f2-3f63480a05fe" name="errorMessage must be"><con:configuration><token>"errorMessage":"Erreur lors de l'appel vers la Discount-Qualifier."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refCommandGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redDraft</con:name><con:value>0112345</con:value></con:property><con:property><con:name>redDraftLigne</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>Promo2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refCommand</con:name><con:value>047410070</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>6a0f9810-4cdc-43e3-8830-055660ecf27a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>83d810dc-886d-48e7-b22c-cdf0956a3302</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dba158a5-cf3c-4b93-8c4a-f70db4a840d1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="0066754a-a4ac-4e69-be50-4cb675f44a48" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="06. Synchronize failed_Command is already transform to contract_mvnoPack" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Reset variables to null" id="c7226dbe-69f4-4888-b579-0d28a4074b4d"><con:settings/><con:config><script>testRunner.testCase.setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("1. Transform a command to contract_mvnoPack").setPropertyValue("refCommand",null)

</script></con:config></con:testStep><con:testStep type="calltestcase" name="1. Transform a command to contract_mvnoPack" id="5db265fe-c8d5-4ccd-bba3-60fdbdf40ebd"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>aa81606a-9c35-46f8-9035-6b685cb3c83a</con:targetTestCase><con:properties><con:property><con:name>refCommand</con:name><con:value>004400175</con:value></con:property><con:property><con:name>refContract</con:name></con:property></con:properties><con:returnProperties><con:entry>refCommand</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer to commandInfo" id="4835e15f-1a57-4565-b334-3c27dd64f32a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>refCommand</con:sourceType><con:sourceStep>1. Transform a command to contract_mvnoPack</con:sourceStep><con:sourcePath/><con:targetType>refCommand</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Synchronize reduction status manually_Return exception" id="e60df1f6-8c06-448a-947a-048118c1a84b"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/synchroniserReductionEligible" methodName="synchronizerReductionEligible" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Synchronize reduction status manually_Return exception" id="fca7486b-8232-4d1a-beb1-d754e1d63142" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//synchroniserReductionEligible</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="e7dcdb34-92e9-4836-bf6e-d5d4d210e693" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9b41ab6b-a6c0-4c2f-838b-344a876922c7" name="errorCode must be"><con:configuration><token>"errorCode":"2.1.8"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cee66ea2-dd5f-4e86-afa1-a3a75462e398" name="errorMessage must be"><con:configuration><token>"errorMessage":"La commande ${#TestCase#refCommand} est deja transformee."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${#TestCase#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>customerKey3</con:name><con:value>192112</con:value></con:property><con:property><con:name>handleKey3</con:name><con:value>511708010</con:value></con:property><con:property><con:name>refCommandGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redDraft</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redDraftLigne</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redDraftLigneDetail</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>redTarifDraftLigne</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>Promo1</con:name><con:value>REM_MVNO_ISP</con:value></con:property><con:property><con:name>Promo2</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>refCommand</con:name><con:value>004400175</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>6a0f9810-4cdc-43e3-8830-055660ecf27a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>83d810dc-886d-48e7-b22c-cdf0956a3302</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>6ab700f0-d9eb-45c7-9b91-97430effa672</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>887ec4cb-60d6-436c-9f81-85e0f1c0b23c</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dba158a5-cf3c-4b93-8c4a-f70db4a840d1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="f8746829-6db1-44f4-8944-4cd91e87b9dd" name="FullProcess"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="ad0fcd63-5a4c-4777-b7b8-83763bcf8693" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.01 Process Vente With Params_Pay MONTANT" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="Properties" id="34eacd4f-0b72-481e-8bff-0a9ab57fe2f2"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003475</con:value></con:property><con:property><con:name>refLigne</con:name><con:value>LID-00003496</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>003002235</con:value></con:property><con:property><con:name>refSignature</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refContract</con:name><con:value>00104383</con:value></con:property><con:property><con:name>codeRio</con:name><con:value>42E429690939</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Set Nb Passes = 0" id="5c39b0e5-6dc7-4054-a8d3-bb4c7b3700ec">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Reset variables to null" id="ea09b065-1543-4832-8a89-1d54503f9e6c"><con:settings/><con:config><script>int a = 9
nr = ""
for(i = 0; i &lt; a; i++)
{
 random = new Random()
 randomInteger= random.nextInt(10)
 nr = nr + randomInteger
}
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("codeRio","42E" + nr)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refLigne",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refSignature",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refContract",null)
testRunner.testCase.setPropertyValue("refContractGlobal",null)

</script></con:config></con:testStep><con:testStep type="restrequest" name="0. Update document status of customer to TRUE" id="99600784-b0af-42ba-b7b5-61d2f2dd0e6d"><con:settings/><con:config service="BaseClient" resourcePath="/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="0. Update document status of customer to TRUE" id="ab52b71c-646d-4c0b-8a2e-5cb09269b6b9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="c0d2e59f-076b-4bc2-b918-ec96fc13814d"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionCNI is true" id="78efdf77-5b5e-4a40-a3cd-e5ff382e9d68"><con:configuration><token>"flagReceptionCNI":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionJD is true" id="45830ed8-8d1b-4e2a-9ea2-73918bede086"><con:configuration><token>"flagReceptionJD":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="updateReceptionDocRequest" value="{&quot;handleKey&quot;:&quot;511708010&quot;, &quot;flagReceptionCNI&quot;:&quot;true&quot;, &quot;flagReceptionJD&quot;:&quot;true&quot;,&quot;flagReceptionFormulairePorta&quot;:true}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvno_conso and Bien" id="70c3a314-2d53-4c6d-adee-b69e377d4b85"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvno_conso and Bien" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "Welcome",
    "ip": {
      "ip": "10.190.29.140",
      "ts": 1456370857000
    }
  },
  "lignes": [
    {
      "auteur": {
        "qui": "hientran",
        "canal": "Welcome",
        "ip": {
          "ip": "10.190.29.150",
          "ts": 1456370857000
        }
      },
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
        
      "details": [
         {
            "referenceSelection": "MVNO-SERVICE",
            "referenceChoix": "mvno_conso",
            "referenceTarif": "83"
          },
         		  {
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }
      ]
    }
  }
  ],
  "souscripteur": {
    "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "livraison": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "facturation": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="da1dfb98-7034-4b49-bf89-c21af7e210e1" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refDraft" id="559338aa-47c3-4092-993c-4dcbf1e0d761"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_conso and Bien</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>Properties</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_conso and Bien</con:sourceStep><con:sourcePath>//*:referenceLigne</con:sourcePath><con:targetType>refLigne</con:targetType><con:targetStep>Properties</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Vefrify the draft is created" id="448109c9-ff9b-49b6-855b-a450bbd360f1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from draft where reference = "${Properties#refDraft}";</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="reference must be refDraft"><con:configuration><token>&lt;DRAFT.REFERENCE>${Properties#refDraft}&lt;/DRAFT.REFERENCE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Verify the ligne is created" id="70dc13e9-6de4-48ab-8bb5-32786b796675"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM draftligne where draftId = (SELECT id FROM draft where reference = "${Properties#refDraft}");</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="refLigne1 must be"><con:configuration><token> &lt;DRAFTLIGNE.REFERENCE>${Properties#refLigne}&lt;/DRAFTLIGNE.REFERENCE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="6a185df1-bc6e-4c7e-b553-54da26d87e0c" name="Offer must be MVNO"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/DRAFTLIGNE.REFERENCEOFFRE[1]</path><content>MVNO</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Verify the ligne detail is created" id="09c38231-a593-4160-a432-014a96a079d0"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `draftlignedetail` where draftLigneId = (SELECT id FROM draftligne where draftId = (SELECT id FROM draft where reference = "${Properties#refDraft}"));</con:query><con:assertion type="XPath Match" id="9c1083fd-9544-4654-838b-b6f2697fda22" name="Option must be MVNO_CONSO"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/DRAFTLIGNEDETAIL.REFERENCECHOIX[1]</path><content>mvno_conso</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with params" id="aba67093-fa69-4fbd-b9dd-def3c4208cdb"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with params" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
      "ip":{"ip":"10.190.29.140"}
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "modeFacturation":"DATE_ANNIVERSAIRE",
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":29.158333,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "modeFacturation":"DATE_ANNIVERSAIRE",
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"DATE_ANNIVERSAIRE",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "${Properties#codeRio}"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0612345678"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="73ea765c-8e2d-4e14-b54c-9e4ae1bcbde9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refDraft" value="${Properties#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="3b2b310c-5d28-4a02-8f5c-053d919b108c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with params</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>Properties</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Check the draft is transferred to commande_Transfer successfully" id="a6ca3a25-58de-4cf0-aed4-f443827343e3"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from commande where reference = "${Properties#refCommand}";</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="reference of Commande must be1"><con:configuration><token>&lt;COMMANDE.REFERENCE>${Properties#refCommand}&lt;/COMMANDE.REFERENCE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="2dd6df19-6a11-44ac-9ddd-094a84bf5348" name="reference of Draft transferred to Commande must be"><con:configuration><token>&lt;COMMANDE.REFERENCEDRAFT>${Properties#refDraft}&lt;/COMMANDE.REFERENCEDRAFT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Check the commandLigne is created successfully" id="571cde65-f051-4ccd-9644-001fac6ceb65"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commandeligne` where commandeId = (select id from commande where reference = "${Properties#refCommand}");</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Only one commandLigne is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="397c1681-3bd5-412b-a58a-61038d910f20" name="Reference Selection must be"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNE.REFERENCEOFFRE[1]</path><content>MVNO</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Check the commandLigneDetail is created successfully" id="76dd5636-51f9-4dcb-85be-6cd53c4699d3"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commandelignedetail` where commandeLigneId = (SELECT id FROM `commandeligne` where commandeId = (select id from commande where reference = "${Properties#refCommand}"));</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Only one commandLigneDetail is created"><con:configuration><path>count(//Row)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4ee6e65a-6fbc-447d-8185-c4362807905c" name="Reference Choice must be"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNEDETAIL.REFERENCECHOIX[1]</path><content>mvno_conso</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="Pay COMPTANT for the created command" id="203cbebc-87cf-40a5-b0d6-90df07701fa8"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "100",
  "referenceModePaiement": "123456789",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="741ea649-6317-42e5-83cb-afd29acf4b08" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c89010c5-1f78-4836-a685-93fbf8be299b" name="Contains"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3. Pay RECURRENT for the created command" id="62a71d38-2842-498d-bbeb-29b7f6d50bda" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "0",
  "rum": "RRE4F5CB",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="424537d6-7796-420c-b390-113cb3b65481" name="Contains"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="45a00fcb-0159-4594-91f2-eee3c7a0eb9f">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait for initiation and synchronization of documents" id="df165b13-3ffd-4352-8811-3b28f2de86d4"><con:settings/><con:config><delay>5000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="e119c609-f8e0-4c51-8a1b-46b9c53e28d4"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${Properties#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="ca2f9b1e-c9e4-4fa1-91b8-e058bf0c5789"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="4. Synchronize document status manually" id="3acba0e2-9f9a-4df1-8c97-7699f13c2269"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/synchronizeDocument" methodName="synchronizerCommandeDocument" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Synchronize document status manually" id="e141dcab-7f31-49fb-a4cc-9ef3729638c9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "qui": "hientran",
  "canal": "SOAPUI",
  "ip": {
    "ip": "10.190.29.140",
    "ts": "1458274922"
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/605000013/synchronizeDocument</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Get the document status in documentassociation" id="cdbe52a9-f978-4a8c-b316-6a2014902408"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${Properties#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto step synchronization of documents" id="df1e532d-37cb-4a73-822b-70b127c55d97"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()="0"</con:expression><con:targetStep>4. Synchronize document status manually</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="5. Init signature successfully" id="cccbbd5e-8113-4a1c-bbdd-3b9a7a08237d" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5. Init signature successfully" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInitAfterSignature",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="6. Sign the created command_Successfully" id="cff005f8-45dc-45eb-95b4-c48a5700af43"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="6. Sign the created command_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="7. Validate the completed command" id="d109f770-e680-497c-a21f-41a4e61ef3b0"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="7. Validate the completed command" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="df33dddf-d215-4fdd-83f0-7357cb86410b" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="5dd82b82-ac09-4500-8e6c-592b4e331161" name="Contains"><con:configuration><token>"valide":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Delete all reductions of commande" id="2fff8c75-6e03-40f9-802a-8699d98d4f52"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>DELETE FROM `reduction` where referenceDraft = "${Properties#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="8. Transform the created command to contract" id="4d31c020-a04a-46e6-9c03-f82d22406eb1"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/transformerEnContrat" methodName="transformeEnContrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="8. Transform the created command to contract" id="38cfe906-f82c-4482-b7cd-eb621557d7f2" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request> {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ts": "1456817611",
      "ip": "10.190.29.140"
    }
  }</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//transformerEnContrat</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="16c5976e-4572-497a-9b28-28bc443317b9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="0c80b772-99b6-485b-b064-3a7e16006cf1" name="Response is not null"><con:configuration><token>"referencesContrats"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Extract refContract from DB" id="ccaeac4b-a711-4ebe-9278-d97fb45f5700"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select reference from contrat as c
left join elementcontractuel as ec on
ec.contratparent = c.id where 
ec.numeroCommande = "${Properties#refCommand}";
</con:query><con:assertion type="XQuery Match" name="exist refContrat" id="b78c8feb-fa25-464a-85d3-5bb06cf240ed"><con:configuration><path>exists(//*:CONTRAT.REFERENCE/text())</path><content>&lt;xml-fragment>true&lt;/xml-fragment></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer refContract" id="ff2d9922-c44a-4174-9ee3-8fce9d9d779e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refContract</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Extract refContract from DB</con:sourceStep><con:sourcePath>//*:Row/*:CONTRAT.REFERENCE/text()</con:sourcePath><con:targetType>refContract</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refContractGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Extract refContract from DB</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/CONTRAT.REFERENCE[1]</con:sourcePath><con:targetType>refContractGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Get command to check info after transformation" id="17be4b4f-efa8-4543-9e64-090f6a21a6d1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commandeligne` where commandeId = (select id from commande where reference = "${Properties#refCommand}");</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Only one commandLigne is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="397c1681-3bd5-412b-a58a-61038d910f20" name="Reference Selection must be MVNO"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNE.REFERENCEOFFRE[1]</path><content>MVNO</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="2981d5b6-2242-422b-a759-e4a0d80547e3" name="This new command must be associated to the old contract"><con:configuration><token>&lt;COMMANDELIGNE.REFERENCECONTRAT>${Properties#refContract}&lt;/COMMANDELIGNE.REFERENCECONTRAT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="Get the created contract to check infos" id="4683fae5-5327-42c3-9c10-96ff2a7d44d8"><con:settings/><con:config service="/default/contrat" resourcePath="/contrat-core-1.2.x/contrat/{referenceContrat}" methodName="getContratByReference" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get the created contract to check infos" id="eaf5b1b1-0abc-4297-8b4a-881ce6c43290" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/contrat-core-1.1.x/contrat/54881a48-6d6d-4649-9800-aee05fcafb5e</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4f9711f9-cbb4-4cb4-b088-9290b69d59c1" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="XPath Match" id="60b410ca-1523-4989-95b8-c9f5a1ae5e12" name="There are three sub contracts"><con:configuration><path>count(//*:sousContrats/*:e)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8a60a8a0-504f-4928-bc9e-e2848e89a19b" name="Sub main contract is MVNO"><con:configuration><token>"titre":"MVNO"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8a60a8a0-504f-4928-bc9e-e2848e89a19b" name="Sub contract 1 is mvno_conso"><con:configuration><token>"titre":"mvno_conso"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8a60a8a0-504f-4928-bc9e-e2848e89a19b" name="Sub contract 2 is PACK-MVNO-POSTPAID_MOBILE"><con:configuration><token>"titre":"PACK-MVNO-POSTPAID_MOBILE"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="referenceContrat" value="${Properties#refContract}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Get the params of contract via referenceElementLivraison" id="e0590e74-e897-407f-8bb1-b19a7b76bcfd"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from parametre where referenceElementLivraison like '${Properties#refContract}%';</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Two commandLigne is created"><con:configuration><path>count(//Row)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="9. Marquer livre" id="c3c202de-3940-4497-8654-05d17212156f"><con:settings/><con:config service="/default/livraison" resourcePath="/livraison-core-1.1.x/livraison/{referenceBPGlobal}/marquerLivre" methodName="marquerLivre" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="9. Marquer livre" id="8b36ed31-096d-4cf1-9332-879f6a3a4956" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/livraison-core-1.1.x/livraison/00104130/marquerLivre</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="0a49e77e-439f-4fd4-a89c-9b0a7718a1fe" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="referenceBPGlobal" value="${Properties#refContract}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Verify Element Livraison 1&amp;2" id="c41c5514-c1a7-49b4-9010-ccf1ff674970"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from elementlivraison  
where bonPreparationParent=(select id from 
bonpreparation where 
reference="${Properties#refContract}")</con:query><con:assertion type="Simple Contains" name="ELEMENTLIVRAISON.TYPEBONPREPARATION=LIVRAISON" id="943f514d-b5f2-4b83-9d5f-23dbcf10644b"><con:configuration><token>&lt;ELEMENTLIVRAISON.TYPEBONPREPARATION>LIVRAISON&lt;/ELEMENTLIVRAISON.TYPEBONPREPARATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Livraison 2=PACK-MVNO-POSTPAID-MOBILE" id="f27c70e7-b01a-4554-a739-f68ef919e8bd"><con:configuration><token>&lt;ELEMENTLIVRAISON.REFERENCEPRODUIT>PACK-MVNO-POSTPAID-MOBILE&lt;/ELEMENTLIVRAISON.REFERENCEPRODUIT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Livraison 1=MVNO_CONSO" id="f27c70e7-b01a-4554-a739-f68ef919e8bd"><con:configuration><token>&lt;ELEMENTLIVRAISON.REFERENCEPRODUIT>mvno_conso&lt;/ELEMENTLIVRAISON.REFERENCEPRODUIT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="5824765f-c363-45af-99ff-618f43241ab2" name="XPath Match - 2 EL"><con:configuration><path>count(//Results/ResultSet/Row)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="verifyLivraisonBP" id="8c93e726-c75c-4b73-a0e7-694d16b62591"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from bonpreparation  
where reference="${Properties#refContract}"</con:query><con:assertion type="XPath Match" name="BONPREPARATION.DATEDEBUTPREPARATION is not null" id="7d281680-e994-44d2-a58f-a525ee4f20c8"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATEDEBUTPREPARATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" name="BONPREPARATION.TYPEBONPREPARATION=LIVRAISON" id="afe34ace-a376-49bd-bc60-353c3be4fba2"><con:configuration><token>&lt;BONPREPARATION.TYPEBONPREPARATION>LIVRAISON&lt;/BONPREPARATION.TYPEBONPREPARATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" name="BONPREPARATION.DATEINITIATION not null" id="fcb43f55-d071-4bde-9763-1d1dc1fb5987"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATEINITIATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="BONPREPARATION.DATEPREPARATION not null" id="0b5ff72b-bfd8-44f8-a4e5-b34f44e6ab94"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATEPREPARATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="BONPREPARATION.DATELIVRAISONTERMINE not null" id="78c3a558-4473-42c7-869a-acf71bd00303"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATELIVRAISONTERMINE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="groovy" name="Set Nb Passes = 0 again" id="b2e61067-a495-4307-be85-9fc03605b56b">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Nb Passes +1" id="407ee6b3-2c22-4943-9fd8-aa08e35e3134">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait facturation" id="867ba3ba-ebb0-4bd1-a9b9-23ca6815a063"><con:settings/><con:config><delay>5000</delay></con:config></con:testStep><con:testStep type="jdbc" name="test date fin duree" id="4d39bdd1-c2ee-4e74-9a3f-aeb185a2cf4d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from elementcontractuel where 
contratParent =(select id from contrat where 
reference ="${Properties#refContract}")
</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="got to wait facturation" id="76da1c19-3642-4112-9f9d-b2cd7f22ac64"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>wait livraison</con:name><con:type>XPATH</con:type><con:expression>not(exists(//Results/ResultSet/Row/ELEMENTCONTRACTUEL.DATEFINDUREE/text())) 
and 
${#TestCase#NbPasses} &lt; 13</con:expression><con:targetStep>Nb Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="Verify the end date billing in sub contract" id="0588a6bf-f9ad-4097-b8a4-52917b5ff486"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from elementcontractuel where 
contratParent =(select id from contrat where 
reference ="${Properties#refContract}") and numeroCommande = '${Properties#refCommand}';
</con:query><con:assertion type="XPath Match" name="date debut facturation" id="6c9a603f-f78d-4ca5-9b66-a3ead7a31d75"><con:configuration><path>exists(//ResultSet/Row/ELEMENTCONTRACTUEL.DATEDEBUTFACTURATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="End date of facture 1 is not null" id="6b275a1c-52ba-4be3-b482-72b7df3d795e"><con:configuration><path>exists(//ResultSet/Row/ELEMENTCONTRACTUEL.DATEDERNIEREFACTURE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="testMovementAvantRenouvellement" id="bf02d80e-e77b-4b86-bd68-e6a54283c679"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.105.41.:3306/test_saphir?user=test&amp;password=test</con:connectionString><con:query>select * from movement 
where
billinggroup = "${Properties#refCommand}"</con:query><con:assertion type="XPath Match" name="XPath Match" id="9ddf2a66-9c11-4445-8db1-bf0cd230ed6f"><con:configuration><path>exists(//ResultSet/Row/MOVEMENT.ID/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refContractGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">00104383</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0ae0bd34-216a-44b4-a977-dc2a5b57d9bb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>346dbce2-5f32-4b4d-8035-cf4db0a9a404</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dbaeab91-6a1e-4e92-847c-83a3a16bb084</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b8cfd541-b18d-4b31-84d0-43235b91bf76</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>736c79a6-461c-42a5-ad56-c997bee99ebe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0aea24c2-0ea2-4536-b140-87ca45a7ef31</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5831b52d-089f-4a00-a9a1-701ecdc104b8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>31d87cc9-8597-4d6d-ad12-a8e20d49c437</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>19e833d1-dbac-4836-89cc-b16031d0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1b21ac6e-2a8a-42ca-ab60-47d0e5f41bb1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8fc489d2-1de7-4485-880d-8d284e8c235e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>115c48c3-450c-41fc-81de-a02f0b4d70ff</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>296f002a-ddd7-4d9f-9b7a-f1a11d2ea325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e61cc35a-8b64-4724-982b-4a7b08c9f1e9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>82641e23-4fc1-4bfc-807f-e31d08cd4ad8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fc1ed937-0f3f-4383-b50f-456704a7fe46</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaea4faf-803a-4f00-a6ac-74d3370fd30b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="65b62cc3-19b3-4807-b295-53b3b60441a1" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="01.02 Process Vente With Params_Pay RECURRENT mvno_conso" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="Properties" id="afa03282-dde5-4a68-a231-1abb15ab4d78"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003440</con:value></con:property><con:property><con:name>refLigne</con:name><con:value>LID-00003461</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>028004209</con:value></con:property><con:property><con:name>refSignature</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refContract</con:name><con:value>00104336</con:value></con:property><con:property><con:name>codeRio</con:name><con:value>42E102364784</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Set Nb Passes = 0" id="8fc489d2-1de7-4485-880d-8d284e8c235e">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Reset variables to null" id="75d759a2-5d8b-43ee-ab04-3606ccd49a75"><con:settings/><con:config><script>int a = 9
nr = ""
for(i = 0; i &lt; a; i++)
{
 random = new Random()
 randomInteger= random.nextInt(10)
 nr = nr + randomInteger
}
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("codeRio","42E" + nr)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refLigne",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refSignature",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refContract",null)
testRunner.testCase.setPropertyValue("refContractGlobal",null)

</script></con:config></con:testStep><con:testStep type="restrequest" name="0. Update document status of customer to TRUE" id="19e833d1-dbac-4836-89cc-b16031d0896a"><con:settings/><con:config service="BaseClient" resourcePath="/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="0. Update document status of customer to TRUE" id="ab52b71c-646d-4c0b-8a2e-5cb09269b6b9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="c0d2e59f-076b-4bc2-b918-ec96fc13814d"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionCNI is true" id="78efdf77-5b5e-4a40-a3cd-e5ff382e9d68"><con:configuration><token>"flagReceptionCNI":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionJD is true" id="45830ed8-8d1b-4e2a-9ea2-73918bede086"><con:configuration><token>"flagReceptionJD":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="updateReceptionDocRequest" value="{&quot;handleKey&quot;:&quot;511708010&quot;, &quot;flagReceptionCNI&quot;:&quot;true&quot;, &quot;flagReceptionJD&quot;:&quot;true&quot;,&quot;flagReceptionFormulairePorta&quot;:true}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvno_conso and Bien" id="e8d1eb97-d094-4b83-bea3-21e9655f0af5"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvno_conso and Bien" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "Welcome",
    "ip": {
      "ip": "10.190.29.140",
      "ts": 1456370857000
    }
  },
  "lignes": [
    {
      "auteur": {
        "qui": "hientran",
        "canal": "Welcome",
        "ip": {
          "ip": "10.190.29.150",
          "ts": 1456370857000
        }
      },
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
        
      "details": [
         {
            "referenceSelection": "MVNO-SERVICE",
            "referenceChoix": "mvno_conso",
            "referenceTarif": "83"
          },
         		  {
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }
      ]
    }
  }
  ],
  "souscripteur": {
    "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "livraison": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "facturation": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="da1dfb98-7034-4b49-bf89-c21af7e210e1" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refDraft" id="5fe47d7c-0ab9-408d-b352-b665d8daab25"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_conso and Bien</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>Properties</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_conso and Bien</con:sourceStep><con:sourcePath>//*:referenceLigne</con:sourcePath><con:targetType>refLigne</con:targetType><con:targetStep>Properties</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Vefrify the draft is created" id="aedd5368-92fa-42e1-80f1-6d0e73ccd0f6"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from draft where reference = "${Properties#refDraft}";</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="reference must be refDraft"><con:configuration><token>&lt;DRAFT.REFERENCE>${Properties#refDraft}&lt;/DRAFT.REFERENCE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Verify the ligne is created" id="33151f16-1b70-4f4e-b8d0-1a0ebe40dad6"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM draftligne where draftId = (SELECT id FROM draft where reference = "${Properties#refDraft}");</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="refLigne1 must be"><con:configuration><token> &lt;DRAFTLIGNE.REFERENCE>${Properties#refLigne}&lt;/DRAFTLIGNE.REFERENCE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="6a185df1-bc6e-4c7e-b553-54da26d87e0c" name="Offer must be MVNO"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/DRAFTLIGNE.REFERENCEOFFRE[1]</path><content>MVNO</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Verify the ligne detail is created" id="af64bbdb-0f66-444c-9129-40b9c111dc4d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `draftlignedetail` where draftLigneId = (SELECT id FROM draftligne where draftId = (SELECT id FROM draft where reference = "${Properties#refDraft}"));</con:query><con:assertion type="XPath Match" id="9c1083fd-9544-4654-838b-b6f2697fda22" name="Option must be MVNO_CONSO"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/DRAFTLIGNEDETAIL.REFERENCECHOIX[1]</path><content>mvno_conso</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with params" id="ebcfbeb2-0bb6-4743-8617-c27e21ac7757"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with params" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
      "ip":{"ip":"10.190.29.140"}
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "modeFacturation":"DATE_ANNIVERSAIRE",
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":29.158333,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "modeFacturation":"DATE_ANNIVERSAIRE",
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"DATE_ANNIVERSAIRE",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "${Properties#codeRio}"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0612345678"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="73ea765c-8e2d-4e14-b54c-9e4ae1bcbde9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refDraft" value="${Properties#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="fca11f11-9447-4d5a-97de-d68c7df9b48f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with params</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>Properties</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Check the draft is transferred to commande_Transfer successfully" id="f53e7727-9460-46f7-ba0c-4a0842dba29b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from commande where reference = "${Properties#refCommand}";</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="reference of Commande must be1"><con:configuration><token>&lt;COMMANDE.REFERENCE>${Properties#refCommand}&lt;/COMMANDE.REFERENCE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="2dd6df19-6a11-44ac-9ddd-094a84bf5348" name="reference of Draft transferred to Commande must be"><con:configuration><token>&lt;COMMANDE.REFERENCEDRAFT>${Properties#refDraft}&lt;/COMMANDE.REFERENCEDRAFT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Check the commandLigne is created successfully" id="28e3b814-3a93-4d86-ba7f-debcdf69ddb3"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commandeligne` where commandeId = (select id from commande where reference = "${Properties#refCommand}");</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Only one commandLigne is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="397c1681-3bd5-412b-a58a-61038d910f20" name="Reference Selection must be"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNE.REFERENCEOFFRE[1]</path><content>MVNO</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Check the commandLigneDetail is created successfully" id="a39a7c55-603b-4489-a3f1-0737ecbee328"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commandelignedetail` where commandeLigneId = (SELECT id FROM `commandeligne` where commandeId = (select id from commande where reference = "${Properties#refCommand}"));</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Only one commandLigneDetail is created"><con:configuration><path>count(//Row)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4ee6e65a-6fbc-447d-8185-c4362807905c" name="Reference Choice must be"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNEDETAIL.REFERENCECHOIX[1]</path><content>mvno_conso</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="Pay COMPTANT for the created command" id="d371ae08-00c4-495b-9ec5-d2374ce8e183" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "100",
  "referenceModePaiement": "RRE4F5CB",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="741ea649-6317-42e5-83cb-afd29acf4b08" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c89010c5-1f78-4836-a685-93fbf8be299b" name="Contains"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3. Pay RECURRENT for the created command" id="3d37774e-5b8d-4929-9549-af33ce54183f"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "0",
  "rum": "RRE4F5CB",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="424537d6-7796-420c-b390-113cb3b65481" name="Contains"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="115c48c3-450c-41fc-81de-a02f0b4d70ff">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait for initiation and synchronization of documents" id="5831b52d-089f-4a00-a9a1-701ecdc104b8"><con:settings/><con:config><delay>5000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="1b21ac6e-2a8a-42ca-ab60-47d0e5f41bb1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${Properties#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="31d87cc9-8597-4d6d-ad12-a8e20d49c437"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="4. Synchronize document status manually" id="296f002a-ddd7-4d9f-9b7a-f1a11d2ea325"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/synchronizeDocument" methodName="synchronizerCommandeDocument" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Synchronize document status manually" id="e141dcab-7f31-49fb-a4cc-9ef3729638c9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "qui": "hientran",
  "canal": "SOAPUI",
  "ip": {
    "ip": "10.190.29.140",
    "ts": "1458274922"
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/605000013/synchronizeDocument</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Get the document status in documentassociation" id="e61cc35a-8b64-4724-982b-4a7b08c9f1e9"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${Properties#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto step synchronization of documents" id="82641e23-4fc1-4bfc-807f-e31d08cd4ad8"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()="0"</con:expression><con:targetStep>4. Synchronize document status manually</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="5. Init signature successfully" id="fc1ed937-0f3f-4383-b50f-456704a7fe46" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5. Init signature successfully" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInitAfterSignature",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="6. Sign the created command_Successfully" id="eaea4faf-803a-4f00-a6ac-74d3370fd30b"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="6. Sign the created command_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="7. Validate the completed command" id="d31f8b2b-f20f-4723-b6ba-14cfaf891e6b"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="7. Validate the completed command" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="df33dddf-d215-4fdd-83f0-7357cb86410b" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="5dd82b82-ac09-4500-8e6c-592b4e331161" name="Contains"><con:configuration><token>"valide":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Delete all reductions of commande" id="61371001-aa41-44ef-8c70-10aab5f40896"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>DELETE FROM `reduction` where referenceDraft = "${Properties#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="8. Transform the created command to contract" id="d72f3915-c1f6-460a-8aac-29e16500a65f"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/transformerEnContrat" methodName="transformeEnContrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="8. Transform the created command to contract" id="38cfe906-f82c-4482-b7cd-eb621557d7f2" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request> {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ts": "1456817611",
      "ip": "10.190.29.140"
    }
  }</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//transformerEnContrat</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="16c5976e-4572-497a-9b28-28bc443317b9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="0c80b772-99b6-485b-b064-3a7e16006cf1" name="Response is not null"><con:configuration><token>"referencesContrats"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Extract refContract from DB" id="b8cfd541-b18d-4b31-84d0-43235b91bf76"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select reference from contrat as c
left join elementcontractuel as ec on
ec.contratparent = c.id where 
ec.numeroCommande = "${Properties#refCommand}";
</con:query><con:assertion type="XQuery Match" name="exist refContrat" id="b78c8feb-fa25-464a-85d3-5bb06cf240ed"><con:configuration><path>exists(//*:CONTRAT.REFERENCE/text())</path><content>&lt;xml-fragment>true&lt;/xml-fragment></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer refContract" id="736c79a6-461c-42a5-ad56-c997bee99ebe"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refContract</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Extract refContract from DB</con:sourceStep><con:sourcePath>//*:Row/*:CONTRAT.REFERENCE/text()</con:sourcePath><con:targetType>refContract</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refContractGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Extract refContract from DB</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/CONTRAT.REFERENCE[1]</con:sourcePath><con:targetType>refContractGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Get command to check info after transformation" id="0aea24c2-0ea2-4536-b140-87ca45a7ef31"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commandeligne` where commandeId = (select id from commande where reference = "${Properties#refCommand}");</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Only one commandLigne is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="397c1681-3bd5-412b-a58a-61038d910f20" name="Reference Selection must be MVNO"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNE.REFERENCEOFFRE[1]</path><content>MVNO</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="2981d5b6-2242-422b-a759-e4a0d80547e3" name="This new command must be associated to the old contract"><con:configuration><token>&lt;COMMANDELIGNE.REFERENCECONTRAT>${Properties#refContract}&lt;/COMMANDELIGNE.REFERENCECONTRAT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="Get the created contract to check infos" id="d6e92d1f-0966-43b9-8501-c520602f33db"><con:settings/><con:config service="/default/contrat" resourcePath="/contrat-core-1.2.x/contrat/{referenceContrat}" methodName="getContratByReference" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get the created contract to check infos" id="eaf5b1b1-0abc-4297-8b4a-881ce6c43290" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/contrat-core-1.1.x/contrat/54881a48-6d6d-4649-9800-aee05fcafb5e</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4f9711f9-cbb4-4cb4-b088-9290b69d59c1" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="XPath Match" id="60b410ca-1523-4989-95b8-c9f5a1ae5e12" name="There are three sub contracts"><con:configuration><path>count(//*:sousContrats/*:e)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8a60a8a0-504f-4928-bc9e-e2848e89a19b" name="Sub main contract is MVNO"><con:configuration><token>"titre":"MVNO"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8a60a8a0-504f-4928-bc9e-e2848e89a19b" name="Sub contract 1 is mvno_conso"><con:configuration><token>"titre":"mvno_conso"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8a60a8a0-504f-4928-bc9e-e2848e89a19b" name="Sub contract 2 is PACK-MVNO-POSTPAID_MOBILE"><con:configuration><token>"titre":"PACK-MVNO-POSTPAID_MOBILE"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="referenceContrat" value="${Properties#refContract}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Get the params of contract via referenceElementLivraison" id="f45c8416-3fbf-4215-a8ed-2ce46276a166"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from parametre where referenceElementLivraison like '${Properties#refContract}%';</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Two commandLigne is created"><con:configuration><path>count(//Row)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="9. Marquer livre" id="530d536b-f6ad-4f16-8a67-cd3cfce0a7db"><con:settings/><con:config service="/default/livraison" resourcePath="/livraison-core-1.1.x/livraison/{referenceBPGlobal}/marquerLivre" methodName="marquerLivre" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="9. Marquer livre" id="8b36ed31-096d-4cf1-9332-879f6a3a4956" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/livraison-core-1.1.x/livraison/00104130/marquerLivre</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="0a49e77e-439f-4fd4-a89c-9b0a7718a1fe" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="referenceBPGlobal" value="${Properties#refContract}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Verify Element Livraison 1&amp;2" id="ab84865c-958c-40df-b5f3-850d40969e20"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from elementlivraison  
where bonPreparationParent=(select id from 
bonpreparation where 
reference="${Properties#refContract}")</con:query><con:assertion type="Simple Contains" name="ELEMENTLIVRAISON.TYPEBONPREPARATION=LIVRAISON" id="943f514d-b5f2-4b83-9d5f-23dbcf10644b"><con:configuration><token>&lt;ELEMENTLIVRAISON.TYPEBONPREPARATION>LIVRAISON&lt;/ELEMENTLIVRAISON.TYPEBONPREPARATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Livraison 2=PACK-MVNO-POSTPAID-MOBILE" id="f27c70e7-b01a-4554-a739-f68ef919e8bd"><con:configuration><token>&lt;ELEMENTLIVRAISON.REFERENCEPRODUIT>PACK-MVNO-POSTPAID-MOBILE&lt;/ELEMENTLIVRAISON.REFERENCEPRODUIT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Livraison 1=MVNO_CONSO" id="f27c70e7-b01a-4554-a739-f68ef919e8bd"><con:configuration><token>&lt;ELEMENTLIVRAISON.REFERENCEPRODUIT>mvno_conso&lt;/ELEMENTLIVRAISON.REFERENCEPRODUIT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="5824765f-c363-45af-99ff-618f43241ab2" name="XPath Match - 2 EL"><con:configuration><path>count(//Results/ResultSet/Row)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="verifyLivraisonBP" id="79371567-80f7-4189-bace-7718c63f986c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from bonpreparation  
where reference="${Properties#refContract}"</con:query><con:assertion type="XPath Match" name="BONPREPARATION.DATEDEBUTPREPARATION is not null" id="7d281680-e994-44d2-a58f-a525ee4f20c8"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATEDEBUTPREPARATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" name="BONPREPARATION.TYPEBONPREPARATION=LIVRAISON" id="afe34ace-a376-49bd-bc60-353c3be4fba2"><con:configuration><token>&lt;BONPREPARATION.TYPEBONPREPARATION>LIVRAISON&lt;/BONPREPARATION.TYPEBONPREPARATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" name="BONPREPARATION.DATEINITIATION not null" id="fcb43f55-d071-4bde-9763-1d1dc1fb5987"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATEINITIATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="BONPREPARATION.DATEPREPARATION not null" id="0b5ff72b-bfd8-44f8-a4e5-b34f44e6ab94"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATEPREPARATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="BONPREPARATION.DATELIVRAISONTERMINE not null" id="78c3a558-4473-42c7-869a-acf71bd00303"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATELIVRAISONTERMINE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="groovy" name="Set Nb Passes = 0 again" id="67ea6e69-f194-4411-9788-31f09c906492">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Nb Passes +1" id="37a1bed2-1e3c-4054-a738-f7944d1ae34a">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait facturation" id="271ec597-ddd6-4165-9179-14c3b957e3f6"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="jdbc" name="test date fin duree" id="a5af032c-8810-45a2-9621-dbb9fdcfc17a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from elementcontractuel where 
contratParent =(select id from contrat where 
reference ="${Properties#refContract}")
</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="got to wait facturation" id="0c3fbcfb-3cdd-470d-bbdf-b4b47ee54088"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>wait livraison</con:name><con:type>XPATH</con:type><con:expression>not(exists(//Results/ResultSet/Row/ELEMENTCONTRACTUEL.DATEFINDUREE/text())) 
and 
${#TestCase#NbPasses} &lt; 13</con:expression><con:targetStep>Nb Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="Verify the end date billing in sub contract" id="d0ea257d-10c5-47bc-a7fa-9e454bcbfc52"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from elementcontractuel where 
contratParent =(select id from contrat where 
reference ="${Properties#refContract}") and numeroCommande = '${Properties#refCommand}';
</con:query><con:assertion type="XPath Match" name="date debut facturation" id="6c9a603f-f78d-4ca5-9b66-a3ead7a31d75"><con:configuration><path>exists(//ResultSet/Row/ELEMENTCONTRACTUEL.DATEDEBUTFACTURATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="End date of facture 1 is not null" id="6b275a1c-52ba-4be3-b482-72b7df3d795e"><con:configuration><path>exists(//ResultSet/Row/ELEMENTCONTRACTUEL.DATEDERNIEREFACTURE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="testMovementAvantRenouvellement" id="1c4fb824-1833-4729-a363-4584f28db8eb"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.105.41.:3306/test_saphir?user=test&amp;password=test</con:connectionString><con:query>select * from movement 
where
billinggroup = "${Properties#refCommand}"</con:query><con:assertion type="XPath Match" name="XPath Match" id="9ddf2a66-9c11-4445-8db1-bf0cd230ed6f"><con:configuration><path>exists(//ResultSet/Row/MOVEMENT.ID/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refContractGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">00104336</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0ae0bd34-216a-44b4-a977-dc2a5b57d9bb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>346dbce2-5f32-4b4d-8035-cf4db0a9a404</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dbaeab91-6a1e-4e92-847c-83a3a16bb084</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b8cfd541-b18d-4b31-84d0-43235b91bf76</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>736c79a6-461c-42a5-ad56-c997bee99ebe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0aea24c2-0ea2-4536-b140-87ca45a7ef31</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5831b52d-089f-4a00-a9a1-701ecdc104b8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>31d87cc9-8597-4d6d-ad12-a8e20d49c437</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>19e833d1-dbac-4836-89cc-b16031d0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1b21ac6e-2a8a-42ca-ab60-47d0e5f41bb1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8fc489d2-1de7-4485-880d-8d284e8c235e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>115c48c3-450c-41fc-81de-a02f0b4d70ff</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>296f002a-ddd7-4d9f-9b7a-f1a11d2ea325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e61cc35a-8b64-4724-982b-4a7b08c9f1e9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>82641e23-4fc1-4bfc-807f-e31d08cd4ad8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fc1ed937-0f3f-4383-b50f-456704a7fe46</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaea4faf-803a-4f00-a6ac-74d3370fd30b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="f572765d-c691-4e7c-b853-114688fd1ead" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.01 Process Renouvellement With Params" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="3935307e-9178-465e-a125-b768147b790d">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="Properties" id="78e4197b-a877-45a5-a643-d89077359795"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003222</con:value></con:property><con:property><con:name>refLigne</con:name><con:value>LID-00003242</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>101302000</con:value></con:property><con:property><con:name>refContract</con:name><con:value>00103995</con:value></con:property><con:property><con:name>newRefDraft</con:name><con:value>DRA-00003223</con:value></con:property><con:property><con:name>newRefLigne</con:name><con:value>LID-00003244</con:value></con:property><con:property><con:name>newRefCommand</con:name><con:value>325000002</con:value></con:property><con:property><con:name>refSignature</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>newRefContract</con:name><con:value xsi:nil="true"/></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Reset variables to null" id="0ef956ae-d744-4dd7-8d0d-a209906634b9"><con:settings/><con:config><script>testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refLigne",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refSignature",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refContract",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("newRefDraft",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("newRefLigne",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("newRefContract",null)

</script></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvno_conso" id="8ac43fe2-5a3b-4448-9979-728892d03b0c"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvno_conso" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "Welcome",
    "ip": {
      "ip": "10.190.29.140",
      "ts": 1456370857000
    }
  },
  "lignes": [
    {
      "auteur": {
        "qui": "hientran",
        "canal": "Welcome",
        "ip": {
          "ip": "10.190.29.150",
          "ts": 1456370857000
        }
      },
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
           
      "details": [
         {
            "referenceSelection": "MVNO-SERVICE",
            "referenceChoix": "mvno_conso",
            "referenceTarif": "83"
          },
         		  {
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }
      ]
    }
  }
  ],
  "souscripteur": {
    "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "livraison": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "facturation": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="da1dfb98-7034-4b49-bf89-c21af7e210e1" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refDraft" id="e0d08485-079a-4838-b395-883f04405986"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_conso</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>Properties</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_conso</con:sourceStep><con:sourcePath>//*:referenceLigne</con:sourcePath><con:targetType>refLigne</con:targetType><con:targetStep>Properties</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with params" id="047ae159-a5c3-44f9-8f85-2690e23b84e6"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with params" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
     "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
      "ip":{"ip":"10.190.29.140"}
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO",
            "typeProduit":"SERVICE"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "42E123456789"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0612345678"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="73ea765c-8e2d-4e14-b54c-9e4ae1bcbde9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${Properties#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer refCommand" id="474000fe-3fb2-4d5a-9789-afa5d45f8254"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with params</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>Properties</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="3. Pay COMPTANT for the created command" id="c4247a6a-537f-4440-93f0-39a962aeff3d"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "15",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R0000000",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="741ea649-6317-42e5-83cb-afd29acf4b08" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c89010c5-1f78-4836-a685-93fbf8be299b" name="Contains"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="4. Transform the created command to contract" id="578945cb-acb4-4b64-b610-64a17bba57f5"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/transformerEnContrat" methodName="transformeEnContrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Transform the created command to contract" id="38cfe906-f82c-4482-b7cd-eb621557d7f2" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request> {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ts": "1456817611",
      "ip": "10.190.29.140"
    }
  }</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//transformerEnContrat</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="16c5976e-4572-497a-9b28-28bc443317b9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="0c80b772-99b6-485b-b064-3a7e16006cf1" name="Response is not null"><con:configuration><token>"referencesContrats"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Extract refContract from DB" id="83478ca1-a2c9-4f7e-8a25-a87d45513a15"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select reference from contrat as c
left join elementcontractuel as ec on
ec.contratparent = c.id where 
ec.numeroCommande = "${Properties#refCommand}";
</con:query><con:assertion type="XQuery Match" name="exist refContrat" id="b78c8feb-fa25-464a-85d3-5bb06cf240ed"><con:configuration><path>exists(//*:CONTRAT.REFERENCE/text())</path><content>&lt;xml-fragment>true&lt;/xml-fragment></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer refContract" id="6098180b-6a1c-46b9-b6dc-96437f48364b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refContract</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Extract refContract from DB</con:sourceStep><con:sourcePath>//*:Row/*:CONTRAT.REFERENCE/text()</con:sourcePath><con:targetType>refContract</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="d4a5a619-9cee-4fd4-8f94-39d7bb9d4eb9">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait for initiation of documents" id="c1059ab5-f281-4d59-9d83-fcac4c3e4145"><con:settings/><con:config><delay>3000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="c0482fff-405c-4c2c-b4dc-90e2fc7e6313"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${Properties#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="b2b4ed27-209c-4730-ba94-c0bdb8776cd9"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="5. Synchronize document status manually" id="07d76720-5057-4179-8c8a-cac161e3c65d"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/synchronizeDocument" methodName="synchronizerCommandeDocument" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5. Synchronize document status manually" id="e141dcab-7f31-49fb-a4cc-9ef3729638c9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "qui": "hientran",
  "canal": "SOAPUI",
  "ip": {
    "ip": "10.190.29.140",
    "ts": "1458274922"
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/605000013/synchronizeDocument</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Get the document status in documentassociation" id="654f1829-e652-42b3-b796-47491aa926c3"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${Properties#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto step synchronization of documents" id="2c49b514-06c0-474a-a76d-1a47769d2803"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()="0"</con:expression><con:targetStep>5. Synchronize document status manually</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="6. Init signature successfully" id="c0cf3614-3b0a-48ec-aff5-bf21f9699ff3" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="6. Init signature successfully" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInitAfterSignature",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="7. Sign the created command_Successfully" id="3f96e82e-d531-4acd-8b8a-438f67705d61"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="7. Sign the created command_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="8. Renew the contract to draft" id="d406f9e0-c525-46b5-8c5d-dc1841888106"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/creerDraftPourRenouvellement" methodName="creerDraftPourRenouvellement" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="8. Renew the contract to draft" id="193788a1-24f4-4771-9c9b-16e4cbf47625" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "referencesContrat": [
    "${Properties#refContract}"
  ],
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ts": "1455615028000",
      "ip": "10.190.29.140"
    }
  },
  "trameCatalogue": {
    "offres": [  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO",
            "typeProduit":"SERVICE"
         }
      ]
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/creerDraftPourRenouvellement</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="247a34c4-760f-4ba1-9fcf-45701dd774b1" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer newRefDraft" id="defefaf9-9dd4-4654-a49e-043d0925f149"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>newRefDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>8. Renew the contract to draft</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>newRefDraft</con:targetType><con:targetStep>Properties</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>newRefLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>8. Renew the contract to draft</con:sourceStep><con:sourcePath>//*:referenceLigne</con:sourcePath><con:targetType>newRefLigne</con:targetType><con:targetStep>Properties</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="9. Transform the new draft to command with params" id="550bde12-0b82-48b2-9ffc-49085ac6236d"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="9. Transform the new draft to command with params" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
  "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
      "ip":{"ip":"10.190.29.140"}
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO",
            "typeProduit":"SERVICE"
         }
      ]
   },
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"6002367491",
         "adresseId":"00001006956",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"6002367491",
         "adresseId":"00001006956",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"6002367491",
         "adresseId":"00001006956",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="73ea765c-8e2d-4e14-b54c-9e4ae1bcbde9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="5e1e167b-5b5f-45f5-b3c8-aa78f492e456" name="Contains"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refDraft" value="${Properties#newRefDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer newRefCommand" id="ddaf583a-a92e-4034-83e4-6b8947fc18dc"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>newRefCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>9. Transform the new draft to command with params</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>newRefCommand</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="9. Pay COMPTANT for the new command" id="53de5940-d5cd-4cb1-a3dc-f390a7e9ebaf"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="9. Pay COMPTANT for the new command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "15",
  "timestampPaiement": "1456737183",
  "referenceModePaiement": "R0000000",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="741ea649-6317-42e5-83cb-afd29acf4b08" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c89010c5-1f78-4836-a685-93fbf8be299b" name="Contains"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#newRefCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="10. Transform the created command to contract" id="40a527d5-481d-45e3-a38c-961f6cbfad57"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/transformerEnContrat" methodName="transformeEnContrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="10. Transform the created command to contract" id="38cfe906-f82c-4482-b7cd-eb621557d7f2" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request> {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ts": "1456817611",
      "ip": "10.190.29.140"
    }
  }</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//transformerEnContrat</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f17de882-a958-4dea-916e-ed7f2c72d8af" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cdca5a8c-ee90-4327-9275-11ca603050ba" name="newRefContract must be the oldRefContract"><con:configuration><token>"referencesContrats" : [ "${Properties#refContract}" ]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#newRefCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="Get the new contract to check infos_Old contract is linked with new command" id="369d581b-207b-42bf-b692-e4c7d31470fe"><con:settings/><con:config service="/default/contrat" resourcePath="/contrat-core-1.2.x/contrat/{referenceContrat}" methodName="getContratByReference" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get the new contract to check infos_Old contract is linked with new command" id="eaf5b1b1-0abc-4297-8b4a-881ce6c43290" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/contrat-core-1.1.x/contrat/54881a48-6d6d-4649-9800-aee05fcafb5e</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4f9711f9-cbb4-4cb4-b088-9290b69d59c1" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="XPath Match" id="60b410ca-1523-4989-95b8-c9f5a1ae5e12" name="There are three sub contracts"><con:configuration><path>count(//*:sousContrats/*:e)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8a60a8a0-504f-4928-bc9e-e2848e89a19b" name="Sub main contract is MVNO"><con:configuration><token>"titre":"MVNO"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8a60a8a0-504f-4928-bc9e-e2848e89a19b" name="Sub contract 1 is mvno_conso"><con:configuration><token>"titre":"mvno_conso"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8a60a8a0-504f-4928-bc9e-e2848e89a19b" name="Sub contract 2 is PACK-MVNO-POSTPAID_MOBILE"><con:configuration><token>"titre":"PACK-MVNO-POSTPAID_MOBILE"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="referenceContrat" value="${Properties#refContract}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Get params of contract_Old params are kept" id="267a5fb9-6929-4f5f-b264-b38adaf9d9fe"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from parametre where referenceElementLivraison like '${Properties#refContract}%';</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Two commandLigne is created"><con:configuration><path>count(//Row)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Get new command to check info" id="08ef9811-939d-45a0-ae06-bbfe950e2950"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commandeligne` where commandeId = (select id from commande where reference = "${Properties#newRefCommand}");</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Only one commandLigne is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="397c1681-3bd5-412b-a58a-61038d910f20" name="Reference Selection must be MVNO"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNE.REFERENCEOFFRE[1]</path><content>MVNO</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="2981d5b6-2242-422b-a759-e4a0d80547e3" name="This new command must be associated to the old contract"><con:configuration><token>&lt;COMMANDELIGNE.REFERENCECONTRAT>${Properties#refContract}&lt;/COMMANDELIGNE.REFERENCECONTRAT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="3096c463-2a5f-4fbc-86c3-d18ba8f0a482" name="Geste must be Renouvellement"><con:configuration><token> &lt;COMMANDELIGNE.GESTE>RENOUVELLEMENT&lt;/COMMANDELIGNE.GESTE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refContractGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0ae0bd34-216a-44b4-a977-dc2a5b57d9bb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>346dbce2-5f32-4b4d-8035-cf4db0a9a404</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dbaeab91-6a1e-4e92-847c-83a3a16bb084</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>550bde12-0b82-48b2-9ffc-49085ac6236d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>defefaf9-9dd4-4654-a49e-043d0925f149</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>83478ca1-a2c9-4f7e-8a25-a87d45513a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ddaf583a-a92e-4034-83e4-6b8947fc18dc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>53de5940-d5cd-4cb1-a3dc-f390a7e9ebaf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>08ef9811-939d-45a0-ae06-bbfe950e2950</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>267a5fb9-6929-4f5f-b264-b38adaf9d9fe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3935307e-9178-465e-a125-b768147b790d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4a5a619-9cee-4fd4-8f94-39d7bb9d4eb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c1059ab5-f281-4d59-9d83-fcac4c3e4145</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b2b4ed27-209c-4730-ba94-c0bdb8776cd9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>07d76720-5057-4179-8c8a-cac161e3c65d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>654f1829-e652-42b3-b796-47491aa926c3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c49b514-06c0-474a-a76d-1a47769d2803</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d406f9e0-c525-46b5-8c5d-dc1841888106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c0482fff-405c-4c2c-b4dc-90e2fc7e6313</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c0cf3614-3b0a-48ec-aff5-bf21f9699ff3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3f96e82e-d531-4acd-8b8a-438f67705d61</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="bb12f527-e27f-46f9-be0f-0023ab8f4d62" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="02.02 Process Renouvellement Auto" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="groovy" name="Set Nb Passes = 0" id="d601b838-7f20-45cb-9bf4-98653d5b870f">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="properties" name="Properties" id="75c2d6ec-ca3e-4dfe-ac2b-ba1623f2f711"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refContract</con:name><con:value>00103927</con:value></con:property><con:property><con:name>newRefDraft</con:name><con:value>DRA-00001298</con:value></con:property><con:property><con:name>newRefLigne</con:name><con:value>LID-00001303</con:value></con:property><con:property><con:name>newRefCommand</con:name><con:value>671600000</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="calltestcase" name="1. Run full process vente COMPTANT" id="672cf50c-7d61-4670-a639-af11c973a8c8"><con:settings/><con:config xsi:type="con:RunTestCaseStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:targetTestCase>65b62cc3-19b3-4807-b295-53b3b60441a1</con:targetTestCase><con:properties><con:property><con:name>refContractGlobal</con:name><con:value>00103927</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property></con:properties><con:returnProperties><con:entry>refContractGlobal</con:entry><con:entry>NbPassed</con:entry></con:returnProperties><con:runMode>SINGLETON_AND_WAIT</con:runMode></con:config></con:testStep><con:testStep type="transfer" name="Transfer refContract" id="41b22722-e93a-4373-baac-c025707c10f8"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refContract</con:name><con:sourceType>refContractGlobal</con:sourceType><con:sourceStep>1. Run full process vente COMPTANT</con:sourceStep><con:sourcePath/><con:targetType>refContract</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="2. Renew the contract to draft" id="9ca78cc5-aabf-4584-9178-ca1e3976d6cb"><con:settings/><con:config service="/default/draft" resourcePath="/opale-api-1.2.x/draft/creerDraftPourRenouvellement" methodName="creerDraftPourRenouvellement" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Renew the contract to draft" id="193788a1-24f4-4771-9c9b-16e4cbf47625" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "referencesContrat": [
    "${Properties#refContract}"
  ],
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ts": "1455615028000",
      "ip": "10.190.29.140"
    }
  },
  "trameCatalogue": {
    "offres": [  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":27.92,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"PREMIER_MOIS",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/creerDraftPourRenouvellement</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="247a34c4-760f-4ba1-9fcf-45701dd774b1" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" name="Code 400" id="f9f26fd0-0993-4f6d-ab3d-ea7aa05a0cab"><con:settings/><con:configuration><codes>400</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="errorCode must be" id="a905d1ed-afcb-4466-a849-a141b81015d3"><con:configuration><token>"errorCode":"1.1.121"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="error description must be" id="25c7d006-71ea-421c-8df3-06debcca10ea"><con:configuration><token>"errorMessage":"Impossible de renouveler un contrat en auto-renouvellement."</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refContractGlobal</con:name><con:value xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:property><con:property><con:name>NbPassed</con:name><con:value>0</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0ae0bd34-216a-44b4-a977-dc2a5b57d9bb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>346dbce2-5f32-4b4d-8035-cf4db0a9a404</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dbaeab91-6a1e-4e92-847c-83a3a16bb084</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>550bde12-0b82-48b2-9ffc-49085ac6236d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>defefaf9-9dd4-4654-a49e-043d0925f149</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>83478ca1-a2c9-4f7e-8a25-a87d45513a15</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>ddaf583a-a92e-4034-83e4-6b8947fc18dc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>53de5940-d5cd-4cb1-a3dc-f390a7e9ebaf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>08ef9811-939d-45a0-ae06-bbfe950e2950</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>267a5fb9-6929-4f5f-b264-b38adaf9d9fe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>3935307e-9178-465e-a125-b768147b790d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d4a5a619-9cee-4fd4-8f94-39d7bb9d4eb9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c1059ab5-f281-4d59-9d83-fcac4c3e4145</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b2b4ed27-209c-4730-ba94-c0bdb8776cd9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>07d76720-5057-4179-8c8a-cac161e3c65d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>654f1829-e652-42b3-b796-47491aa926c3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2c49b514-06c0-474a-a76d-1a47769d2803</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>d406f9e0-c525-46b5-8c5d-dc1841888106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c0482fff-405c-4c2c-b4dc-90e2fc7e6313</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>672cf50c-7d61-4670-a639-af11c973a8c8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>41b22722-e93a-4373-baac-c025707c10f8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:testCase id="5729d6a1-6caa-4974-b110-1aab96243658" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="03.01 Process Resiliation Automatique" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="properties" name="Properties" id="108e10b4-4707-47ea-81dc-09ef78038cb6"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003416</con:value></con:property><con:property><con:name>refLigne</con:name><con:value>LID-00003437</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>425000069</con:value></con:property><con:property><con:name>refSignature</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refContract</con:name><con:value>00104245</con:value></con:property><con:property><con:name>codeRio</con:name><con:value>42E855659828</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Set Nb Passes = 0" id="ab10747e-e8a2-4903-abf0-895224130b37">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Reset variables to null" id="bbe4b03a-5cc0-4462-9a75-0bd533bec9d0"><con:settings/><con:config><script>int a = 9
nr = ""
for(i = 0; i &lt; a; i++)
{
 random = new Random()
 randomInteger= random.nextInt(10)
 nr = nr + randomInteger
}
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("codeRio","42E" + nr)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refLigne",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refSignature",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refContract",null)
testRunner.testCase.setPropertyValue("refContractGlobal",null)

</script></con:config></con:testStep><con:testStep type="restrequest" name="0. Update document status of customer to TRUE" id="2eafe7bf-435f-40f4-95b3-0752f2074285"><con:settings/><con:config service="BaseClient" resourcePath="/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="0. Update document status of customer to TRUE" id="ab52b71c-646d-4c0b-8a2e-5cb09269b6b9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="c0d2e59f-076b-4bc2-b918-ec96fc13814d"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionCNI is true" id="78efdf77-5b5e-4a40-a3cd-e5ff382e9d68"><con:configuration><token>"flagReceptionCNI":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionJD is true" id="45830ed8-8d1b-4e2a-9ea2-73918bede086"><con:configuration><token>"flagReceptionJD":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="updateReceptionDocRequest" value="{&quot;handleKey&quot;:&quot;511708010&quot;, &quot;flagReceptionCNI&quot;:&quot;true&quot;, &quot;flagReceptionJD&quot;:&quot;true&quot;,&quot;flagReceptionFormulairePorta&quot;:true}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvno_conso and Bien" id="f56d3428-8f94-4c43-9e65-c4a424a59f7d"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvno_conso and Bien" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "Welcome",
    "ip": {
      "ip": "10.190.29.140",
      "ts": 1456370857000
    }
  },
  "lignes": [
    {
      "auteur": {
        "qui": "hientran",
        "canal": "Welcome",
        "ip": {
          "ip": "10.190.29.150",
          "ts": 1456370857000
        }
      },
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
        
      "details": [
         {
            "referenceSelection": "MVNO-SERVICE",
            "referenceChoix": "mvno_conso",
            "referenceTarif": "83"
          },
         		  {
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }
      ]
    }
  }
  ],
  "souscripteur": {
    "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "livraison": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "facturation": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="da1dfb98-7034-4b49-bf89-c21af7e210e1" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refDraft" id="bbbcccf5-26ce-48f3-9edf-bab7f900a3e3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_conso and Bien</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>Properties</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_conso and Bien</con:sourceStep><con:sourcePath>//*:referenceLigne</con:sourcePath><con:targetType>refLigne</con:targetType><con:targetStep>Properties</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Vefrify the draft is created" id="030c4c71-7f15-4bee-8094-fe4d2a485489"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from draft where reference = "${Properties#refDraft}";</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="reference must be refDraft"><con:configuration><token>&lt;DRAFT.REFERENCE>${Properties#refDraft}&lt;/DRAFT.REFERENCE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Verify the ligne is created" id="96741b8b-aba9-479b-905b-69463c3256e9"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM draftligne where draftId = (SELECT id FROM draft where reference = "${Properties#refDraft}");</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="refLigne1 must be"><con:configuration><token> &lt;DRAFTLIGNE.REFERENCE>${Properties#refLigne}&lt;/DRAFTLIGNE.REFERENCE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="6a185df1-bc6e-4c7e-b553-54da26d87e0c" name="Offer must be MVNO"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/DRAFTLIGNE.REFERENCEOFFRE[1]</path><content>MVNO</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Verify the ligne detail is created" id="264a2e66-4fdc-4046-ac10-e0485d35396b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `draftlignedetail` where draftLigneId = (SELECT id FROM draftligne where draftId = (SELECT id FROM draft where reference = "${Properties#refDraft}"));</con:query><con:assertion type="XPath Match" id="9c1083fd-9544-4654-838b-b6f2697fda22" name="Option must be MVNO_CONSO"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/DRAFTLIGNEDETAIL.REFERENCECHOIX[1]</path><content>mvno_conso</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with params" id="a3ce95ff-6969-4381-b485-95f7bb644269"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with params" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
      "ip":{"ip":"10.190.29.140"}
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "modeFacturation":"DATE_ANNIVERSAIRE",
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":29.158333,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "modeFacturation":"DATE_ANNIVERSAIRE",
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"DATE_ANNIVERSAIRE",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "${Properties#codeRio}"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0612345678"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="73ea765c-8e2d-4e14-b54c-9e4ae1bcbde9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refDraft" value="${Properties#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="bf083f2d-047f-4dc9-bdd4-bba1e0857238"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with params</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>Properties</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Check the draft is transferred to commande_Transfer successfully" id="bf419d84-c8c3-4b6e-a398-e589e4c60585"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from commande where reference = "${Properties#refCommand}";</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="reference of Commande must be1"><con:configuration><token>&lt;COMMANDE.REFERENCE>${Properties#refCommand}&lt;/COMMANDE.REFERENCE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="2dd6df19-6a11-44ac-9ddd-094a84bf5348" name="reference of Draft transferred to Commande must be"><con:configuration><token>&lt;COMMANDE.REFERENCEDRAFT>${Properties#refDraft}&lt;/COMMANDE.REFERENCEDRAFT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Check the commandLigne is created successfully" id="966e8396-3f0f-44f0-8780-9a3bc57f1fad"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commandeligne` where commandeId = (select id from commande where reference = "${Properties#refCommand}");</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Only one commandLigne is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="397c1681-3bd5-412b-a58a-61038d910f20" name="Reference Selection must be"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNE.REFERENCEOFFRE[1]</path><content>MVNO</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Check the commandLigneDetail is created successfully" id="f6df6c92-dd99-447c-88b2-7d2a0c829dd2"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commandelignedetail` where commandeLigneId = (SELECT id FROM `commandeligne` where commandeId = (select id from commande where reference = "${Properties#refCommand}"));</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Only one commandLigneDetail is created"><con:configuration><path>count(//Row)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4ee6e65a-6fbc-447d-8185-c4362807905c" name="Reference Choice must be"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNEDETAIL.REFERENCECHOIX[1]</path><content>mvno_conso</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="Pay COMPTANT for the created command" id="3ba4dd58-c96c-434b-946a-bd3085a0be7b"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CHEQUE",
  "montant": "100",
  "referenceModePaiement": "123456789",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="741ea649-6317-42e5-83cb-afd29acf4b08" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c89010c5-1f78-4836-a685-93fbf8be299b" name="Contains"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3. Pay RECURRENT for the created command" id="0a92ade4-b279-47cb-98a1-d780d1e6c933" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "0",
  "rum": "RRE4F5CB",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="424537d6-7796-420c-b390-113cb3b65481" name="Contains"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="97373637-4bf4-4355-a185-1f33ded35358">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait for initiation and synchronization of documents" id="19945273-aeb2-46b5-815d-0713c7f70d52"><con:settings/><con:config><delay>5000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="027fb2c7-b2d9-4131-a9fa-9f636dd67ef5"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${Properties#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="fadaa885-c573-40b8-bfcf-685d10ea077c"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="4. Synchronize document status manually" id="44f955fe-b285-4b87-ac12-aa07d2aa56c0"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/synchronizeDocument" methodName="synchronizerCommandeDocument" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Synchronize document status manually" id="e141dcab-7f31-49fb-a4cc-9ef3729638c9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "qui": "hientran",
  "canal": "SOAPUI",
  "ip": {
    "ip": "10.190.29.140",
    "ts": "1458274922"
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/605000013/synchronizeDocument</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Get the document status in documentassociation" id="bf24ac12-114b-4079-ba0a-516ed6b88686"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${Properties#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto step synchronization of documents" id="86e0c3ec-df61-404a-8510-6d5600e96c6f"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()="0"</con:expression><con:targetStep>4. Synchronize document status manually</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="5. Init signature successfully" id="98ae9b7c-df4b-4445-9c05-1c9c88ae6b5e" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5. Init signature successfully" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInitAfterSignature",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="b045c911-e24f-488e-8cae-e1990e79ebd2" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="6. Sign the created command_Successfully" id="df24367b-159b-4c9c-9379-c77637f6e25c"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="6. Sign the created command_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="7. Validate the completed command" id="83bd3ed9-0fd4-491e-85dc-d656a82739b8"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="7. Validate the completed command" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="df33dddf-d215-4fdd-83f0-7357cb86410b" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="5dd82b82-ac09-4500-8e6c-592b4e331161" name="Contains"><con:configuration><token>"valide":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Delete all reductions of commande" id="ed1ea456-4666-43c0-89b8-6d227f57717c"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>DELETE FROM `reduction` where referenceDraft = "${Properties#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="8. Transform the created command to contract" id="174f7979-db9e-45d2-be80-98bc3e259da4"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/transformerEnContrat" methodName="transformeEnContrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="8. Transform the created command to contract" id="38cfe906-f82c-4482-b7cd-eb621557d7f2" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request> {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ts": "1456817611",
      "ip": "10.190.29.140"
    }
  }</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//transformerEnContrat</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="16c5976e-4572-497a-9b28-28bc443317b9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="0c80b772-99b6-485b-b064-3a7e16006cf1" name="Response is not null"><con:configuration><token>"referencesContrats"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Extract refContract from DB" id="578fe877-2929-41aa-a1f2-af9627bf2f11"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select reference from contrat as c
left join elementcontractuel as ec on
ec.contratparent = c.id where 
ec.numeroCommande = "${Properties#refCommand}";
</con:query><con:assertion type="XQuery Match" name="exist refContrat" id="b78c8feb-fa25-464a-85d3-5bb06cf240ed"><con:configuration><path>exists(//*:CONTRAT.REFERENCE/text())</path><content>&lt;xml-fragment>true&lt;/xml-fragment></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer refContract" id="ee4b0664-47e3-42f4-a3c9-d067fdf6a224"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refContract</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Extract refContract from DB</con:sourceStep><con:sourcePath>//*:Row/*:CONTRAT.REFERENCE/text()</con:sourcePath><con:targetType>refContract</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refContractGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Extract refContract from DB</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/CONTRAT.REFERENCE[1]</con:sourcePath><con:targetType>refContractGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Get command to check info after transformation" id="9cc1ecf2-a94d-4eba-b10f-387f10f0d47f"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commandeligne` where commandeId = (select id from commande where reference = "${Properties#refCommand}");</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Only one commandLigne is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="397c1681-3bd5-412b-a58a-61038d910f20" name="Reference Selection must be MVNO"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNE.REFERENCEOFFRE[1]</path><content>MVNO</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="2981d5b6-2242-422b-a759-e4a0d80547e3" name="This new command must be associated to the old contract"><con:configuration><token>&lt;COMMANDELIGNE.REFERENCECONTRAT>${Properties#refContract}&lt;/COMMANDELIGNE.REFERENCECONTRAT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="Get the created contract to check infos" id="01e5f3e2-7d6c-49c9-a6b5-5bf14ade80a8"><con:settings/><con:config service="/default/contrat" resourcePath="/contrat-core-1.2.x/contrat/{referenceContrat}" methodName="getContratByReference" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get the created contract to check infos" id="eaf5b1b1-0abc-4297-8b4a-881ce6c43290" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/contrat-core-1.1.x/contrat/54881a48-6d6d-4649-9800-aee05fcafb5e</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4f9711f9-cbb4-4cb4-b088-9290b69d59c1" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="XPath Match" id="60b410ca-1523-4989-95b8-c9f5a1ae5e12" name="There are three sub contracts"><con:configuration><path>count(//*:sousContrats/*:e)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8a60a8a0-504f-4928-bc9e-e2848e89a19b" name="Sub main contract is MVNO"><con:configuration><token>"titre":"MVNO"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8a60a8a0-504f-4928-bc9e-e2848e89a19b" name="Sub contract 1 is mvno_conso"><con:configuration><token>"titre":"mvno_conso"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8a60a8a0-504f-4928-bc9e-e2848e89a19b" name="Sub contract 2 is PACK-MVNO-POSTPAID_MOBILE"><con:configuration><token>"titre":"PACK-MVNO-POSTPAID_MOBILE"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="referenceContrat" value="${Properties#refContract}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Get the params of contract via referenceElementLivraison" id="950df872-9da7-41e7-b9aa-ee7e734bb4ce"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from parametre where referenceElementLivraison like '${Properties#refContract}%';</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Two commandLigne is created"><con:configuration><path>count(//Row)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="9. Marquer livre" id="b5cf1ad7-baee-4c71-a3f2-1f224fffb739"><con:settings/><con:config service="/default/livraison" resourcePath="/livraison-core-1.1.x/livraison/{referenceBPGlobal}/marquerLivre" methodName="marquerLivre" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="9. Marquer livre" id="8b36ed31-096d-4cf1-9332-879f6a3a4956" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/livraison-core-1.1.x/livraison/00104130/marquerLivre</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="0a49e77e-439f-4fd4-a89c-9b0a7718a1fe" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="referenceBPGlobal" value="${Properties#refContract}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Verify Element Livraison 1&amp;2" id="d7473b30-5deb-41f1-ad09-d0536bee7757"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from elementlivraison  
where bonPreparationParent=(select id from 
bonpreparation where 
reference="${Properties#refContract}")</con:query><con:assertion type="Simple Contains" name="ELEMENTLIVRAISON.TYPEBONPREPARATION=LIVRAISON" id="943f514d-b5f2-4b83-9d5f-23dbcf10644b"><con:configuration><token>&lt;ELEMENTLIVRAISON.TYPEBONPREPARATION>LIVRAISON&lt;/ELEMENTLIVRAISON.TYPEBONPREPARATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Livraison 2=PACK-MVNO-POSTPAID-MOBILE" id="f27c70e7-b01a-4554-a739-f68ef919e8bd"><con:configuration><token>&lt;ELEMENTLIVRAISON.REFERENCEPRODUIT>PACK-MVNO-POSTPAID-MOBILE&lt;/ELEMENTLIVRAISON.REFERENCEPRODUIT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Livraison 1=MVNO_CONSO" id="f27c70e7-b01a-4554-a739-f68ef919e8bd"><con:configuration><token>&lt;ELEMENTLIVRAISON.REFERENCEPRODUIT>mvno_conso&lt;/ELEMENTLIVRAISON.REFERENCEPRODUIT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="5824765f-c363-45af-99ff-618f43241ab2" name="XPath Match - 2 EL"><con:configuration><path>count(//Results/ResultSet/Row)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="verifyLivraisonBP" id="362374b4-1607-4d8f-91b2-98a950d92538"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from bonpreparation  
where reference="${Properties#refContract}"</con:query><con:assertion type="XPath Match" name="BONPREPARATION.DATEDEBUTPREPARATION is not null" id="7d281680-e994-44d2-a58f-a525ee4f20c8"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATEDEBUTPREPARATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" name="BONPREPARATION.TYPEBONPREPARATION=LIVRAISON" id="afe34ace-a376-49bd-bc60-353c3be4fba2"><con:configuration><token>&lt;BONPREPARATION.TYPEBONPREPARATION>LIVRAISON&lt;/BONPREPARATION.TYPEBONPREPARATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" name="BONPREPARATION.DATEINITIATION not null" id="fcb43f55-d071-4bde-9763-1d1dc1fb5987"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATEINITIATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="BONPREPARATION.DATEPREPARATION not null" id="0b5ff72b-bfd8-44f8-a4e5-b34f44e6ab94"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATEPREPARATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="BONPREPARATION.DATELIVRAISONTERMINE not null" id="78c3a558-4473-42c7-869a-acf71bd00303"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATELIVRAISONTERMINE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="groovy" name="Set Nb Passes = 0 again" id="6b812cff-8b90-499c-81e2-393c3f92a104">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Nb Passes +1" id="1cd1e339-d8cf-47f7-ab19-8b4b18e775db">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait facturation" id="4586d804-adbb-4fab-80cb-e9636dbec6c5"><con:settings/><con:config><delay>5000</delay></con:config></con:testStep><con:testStep type="jdbc" name="test date fin duree" id="170c6cd0-b5d6-4bbf-880e-f5f6e57e14f9"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from elementcontractuel where 
contratParent =(select id from contrat where 
reference ="${Properties#refContract}")
</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="got to wait facturation" id="f4eac65d-4dfc-4c31-9005-cabbe585c0c6"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>wait livraison</con:name><con:type>XPATH</con:type><con:expression>not(exists(//Results/ResultSet/Row/ELEMENTCONTRACTUEL.DATEFINDUREE/text())) 
and 
${#TestCase#NbPasses} &lt; 13</con:expression><con:targetStep>Nb Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="Verify the end date billing in sub contract" id="11e29c98-b140-4529-8e78-0cbcb5a038b0"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from elementcontractuel where 
contratParent =(select id from contrat where 
reference ="${Properties#refContract}") and numeroCommande = '${Properties#refCommand}';
</con:query><con:assertion type="XPath Match" name="date debut facturation" id="6c9a603f-f78d-4ca5-9b66-a3ead7a31d75"><con:configuration><path>exists(//ResultSet/Row/ELEMENTCONTRACTUEL.DATEDEBUTFACTURATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="End date of facture 1 is not null" id="6b275a1c-52ba-4be3-b482-72b7df3d795e"><con:configuration><path>exists(//ResultSet/Row/ELEMENTCONTRACTUEL.DATEDERNIEREFACTURE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="testMovementAvantRenouvellement" id="4c84838d-ab25-4cff-baea-8edaad31a748"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.105.41.:3306/test_saphir?user=test&amp;password=test</con:connectionString><con:query>select * from movement 
where
billinggroup = "${Properties#refCommand}"</con:query><con:assertion type="XPath Match" name="XPath Match" id="9ddf2a66-9c11-4445-8db1-bf0cd230ed6f"><con:configuration><path>exists(//ResultSet/Row/MOVEMENT.ID/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties><con:property><con:name>refContractGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">00104245</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0ae0bd34-216a-44b4-a977-dc2a5b57d9bb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>346dbce2-5f32-4b4d-8035-cf4db0a9a404</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dbaeab91-6a1e-4e92-847c-83a3a16bb084</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b8cfd541-b18d-4b31-84d0-43235b91bf76</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>736c79a6-461c-42a5-ad56-c997bee99ebe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0aea24c2-0ea2-4536-b140-87ca45a7ef31</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5831b52d-089f-4a00-a9a1-701ecdc104b8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>31d87cc9-8597-4d6d-ad12-a8e20d49c437</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>19e833d1-dbac-4836-89cc-b16031d0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1b21ac6e-2a8a-42ca-ab60-47d0e5f41bb1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8fc489d2-1de7-4485-880d-8d284e8c235e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>115c48c3-450c-41fc-81de-a02f0b4d70ff</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>296f002a-ddd7-4d9f-9b7a-f1a11d2ea325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e61cc35a-8b64-4724-982b-4a7b08c9f1e9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>82641e23-4fc1-4bfc-807f-e31d08cd4ad8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fc1ed937-0f3f-4383-b50f-456704a7fe46</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaea4faf-803a-4f00-a6ac-74d3370fd30b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/><con:reportParameters/></con:testSuite><con:testSuite id="6aa7c135-926c-4325-b179-138ecb93233f" name="Watches in OTS"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="4f780055-97e4-42e4-8632-01935ac16670" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Watches if ruleCode not found" searchProperties="true"><con:settings/><con:testStep type="restrequest" name=">>> RuleCode not found" id="b6278591-f02b-4e66-a425-47b8a905f202"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> RuleCode not found" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="3f27dd62-e521-4469-97f1-44b3d7748c41" name="Contains"><con:configuration><token>{"errorCode":"1001","errorMessage":"No rule with ruleCode rule_not_found found in database."}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="rule_not_found" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="2e865e82-e0cd-420f-b41f-4046f547f558" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Watches if ruleCode without resource" searchProperties="true"><con:settings/><con:testStep type="jdbc" name="Insert a rule_without_resource" id="9ce80710-d8fb-4d7e-89a5-691dcfed77a7"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.105.41:3306/appwatcher_qualif?user=test&amp;password=test</con:connectionString><con:query>INSERT INTO appwatcher_qualif.rule
(ruleName, ruleCode, description, messageTemplate, isActivated, createdDate, failureStatus) 
VALUES ('rule_without_resource', 'rule_without_resource', 'Rule without resource', 'rule_without_resource;{status};test', true, NOW(), 'CRITICAL');</con:query><con:assertion type="Simple Contains" id="7e8393da-dabe-4b3f-aee6-614a3eaf81db" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name=">>> RuleCode without resource" id="12db457a-d7d0-4f1b-a945-5ef8b244843c"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> RuleCode without resource" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="3f27dd62-e521-4469-97f1-44b3d7748c41" name="Contains"><con:configuration><token>{"errorCode":"1002","errorMessage":"No rule resource associated with a rule found by criteria ruleCode rule_without_resource."}</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="rule_without_resource" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Delete the rule_without_resource" id="de8ef468-b7b4-4d4d-b057-e8a915e39ac5"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.105.41:3306/appwatcher_qualif?user=test&amp;password=test</con:connectionString><con:query>delete from rule
where ruleCode = 'rule_without_resource';</con:query><con:assertion type="Simple Contains" id="7e8393da-dabe-4b3f-aee6-614a3eaf81db" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="957a4f37-7e1c-4472-a604-ccc6ac12f820" discardOkResults="true" failOnError="true" failTestCaseOnErrors="true" keepSession="false" name="Workflow VENTE in OTS" searchProperties="true" maxResults="0"><con:settings/><con:testStep type="transfer" name="-------------------------------- Step 0: Prepare data ---" id="807f8224-0079-4325-a073-3f35481f4c76"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:testStep><con:testStep type="properties" name="Properties" id="d0885c89-80af-4b5a-9422-31650b949af6"><con:settings/><con:config xsi:type="con:PropertiesStep" saveFirst="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:properties><con:property><con:name>refDraft</con:name><con:value>DRA-00003485</con:value></con:property><con:property><con:name>refLigne</con:name><con:value>LID-00003506</con:value></con:property><con:property><con:name>refCommand</con:name><con:value>003002335</con:value></con:property><con:property><con:name>refSignature</con:name><con:value xsi:nil="true"/></con:property><con:property><con:name>refContract</con:name><con:value>00104389</con:value></con:property><con:property><con:name>codeRio</con:name><con:value>42E724948835</con:value></con:property><con:property><con:name>referenceModePaiement</con:name><con:value>724948835</con:value></con:property></con:properties></con:config></con:testStep><con:testStep type="groovy" name="Set Nb Passes = 0" id="d2bee4f3-3f03-429f-bf6f-aab5775f8070">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Reset variables to null" id="dc524219-8bcb-4945-9d91-946ef03eea52"><con:settings/><con:config><script>int a = 9
nr = ""
for(i = 0; i &lt; a; i++)
{
 random = new Random()
 randomInteger= random.nextInt(10)
 nr = nr + randomInteger
}
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("codeRio","42E" + nr)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("referenceModePaiement", nr)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refDraft",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refLigne",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refCommand",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refSignature",null)
testRunner.testCase.getTestStepByName("Properties").setPropertyValue("refContract",null)
testRunner.testCase.setPropertyValue("refContractGlobal",null)

</script></con:config></con:testStep><con:testStep type="restrequest" name="@@@ Update document status of customer to TRUE" id="4c996afe-cd82-4efc-8d74-5a58ad28a532"><con:settings/><con:config service="BaseClient" resourcePath="/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc" methodName="" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="@@@ Update document status of customer to TRUE" id="ab52b71c-646d-4c0b-8a2e-5cb09269b6b9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.119.11:8080</con:endpoint><con:request/><con:originalUri>http://10.100.119.11/base-client-ws-1.0.x/services/BaseClientWS/updateReceptionDoc</con:originalUri><con:assertion type="Valid HTTP Status Codes" name="Valid HTTP Status Codes" id="c0d2e59f-076b-4bc2-b918-ec96fc13814d"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionCNI is true" id="78efdf77-5b5e-4a40-a3cd-e5ff382e9d68"><con:configuration><token>"flagReceptionCNI":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="flag ReceptionJD is true" id="45830ed8-8d1b-4e2a-9ea2-73918bede086"><con:configuration><token>"flagReceptionJD":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="updateReceptionDocRequest" value="{&quot;handleKey&quot;:&quot;511708010&quot;, &quot;flagReceptionCNI&quot;:&quot;true&quot;, &quot;flagReceptionJD&quot;:&quot;true&quot;,&quot;flagReceptionFormulairePorta&quot;:true}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="@@@ Update paiementTimestamp, dateCreation for all commandes to before 2 weeks" id="7c980f1f-5f51-4d97-9e0d-c512b0704969"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>update paiement 
SET 
timestampPaiement = (now() - interval 2 week),
dateCreation = (now() - interval 2 week)
where 
timestampPaiement > (now() - interval 1 week)
OR
dateCreation > (now() - interval 1 week);</con:query><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="@@@ Update datePreparation, dateValidation for all contracts to before 2 weeks" id="e797fd5d-a492-4b2c-90f6-11bdce1334ce"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>update contrat SET 
datePreparation = (now() - interval 2 week),
dateValidation = (now() - interval 2 week)
where 
datePreparation > (now() - interval 1 week)
OR 
dateValidation > (now() - interval 1 week);</con:query><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="-------------------------------- Step 1: Create a commande ---" id="95ca7359-e3ed-4026-9a57-41198ec26a09"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:testStep><con:testStep type="restrequest" name="1. Create a Draft with mvno_conso and Bien" id="5b76c5fc-f021-40c5-aff5-3d16c3191b83"><con:settings/><con:config service="/default/draft" methodName="creerDraft" resourcePath="/opale-api-1.2.x/draft/draft" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="1. Create a Draft with mvno_conso and Bien" id="54deea08-642b-4826-8024-26a2b0bbc7af" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientran",
    "canal": "Welcome",
    "ip": {
      "ip": "10.190.29.140",
      "ts": 1456370857000
    }
  },
  "lignes": [
    {
      "auteur": {
        "qui": "hientran",
        "canal": "Welcome",
        "ip": {
          "ip": "10.190.29.150",
          "ts": 1456370857000
        }
      },
      "geste": "VENTE",
      "offre": {
        "referenceOffre": "MVNO",
        "referenceTarif": "79",
        
      "details": [
         {
            "referenceSelection": "MVNO-SERVICE",
            "referenceChoix": "mvno_conso",
            "referenceTarif": "83"
          },
         		  {
            "referenceSelection": "MVNO-BIEN",
            "referenceChoix": "PACK-MVNO-POSTPAID-MOBILE",
            "referenceTarif": "81"
          }
      ]
    }
  }
  ],
  "souscripteur": {
    "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "livraison": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "facturation": {
     "clientId": "192112",
    "adresseId": "511708010",
    "tva": "01"
  },
  "codePartenaire": "NNCOM"
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/draft</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="da1dfb98-7034-4b49-bf89-c21af7e210e1" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refDraft" id="fa593ae8-0014-46f6-8921-67b49870aed9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refDraft</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_conso and Bien</con:sourceStep><con:sourcePath>//*:reference</con:sourcePath><con:targetType>refDraft</con:targetType><con:targetStep>Properties</con:targetStep><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refLigne</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>1. Create a Draft with mvno_conso and Bien</con:sourceStep><con:sourcePath>//*:referenceLigne</con:sourcePath><con:targetType>refLigne</con:targetType><con:targetStep>Properties</con:targetStep><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Vefrify the draft is created" id="320c6d53-a6a7-4aa9-9499-493dd46752d6" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from draft where reference = "${Properties#refDraft}";</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="reference must be refDraft"><con:configuration><token>&lt;DRAFT.REFERENCE>${Properties#refDraft}&lt;/DRAFT.REFERENCE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Verify the ligne is created" id="de7fc895-c20e-47b8-8c33-c4693aa4a02c" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM draftligne where draftId = (SELECT id FROM draft where reference = "${Properties#refDraft}");</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="refLigne1 must be"><con:configuration><token> &lt;DRAFTLIGNE.REFERENCE>${Properties#refLigne}&lt;/DRAFTLIGNE.REFERENCE></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="6a185df1-bc6e-4c7e-b553-54da26d87e0c" name="Offer must be MVNO"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/DRAFTLIGNE.REFERENCEOFFRE[1]</path><content>MVNO</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Verify the ligne detail is created" id="20297f88-1610-483c-8663-f6c8f92d4365" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `draftlignedetail` where draftLigneId = (SELECT id FROM draftligne where draftId = (SELECT id FROM draft where reference = "${Properties#refDraft}"));</con:query><con:assertion type="XPath Match" id="9c1083fd-9544-4654-838b-b6f2697fda22" name="Option must be MVNO_CONSO"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/DRAFTLIGNEDETAIL.REFERENCECHOIX[1]</path><content>mvno_conso</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="2. Transform a draft to commande with params" id="fd5ba7a4-38c9-4864-99d7-9d714d8ea778"><con:settings/><con:config service="/default/draft" methodName="transformerEnCommande" resourcePath="/opale-api-1.2.x/draft/{refDraft}/transformerEnCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="2. Transform a draft to commande with params" id="2e469960-4c54-4106-8dbf-66a83c132ea5" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{  
   "auteur":{  
      "qui":"hientran",
      "canal":"SOAPUI",
      "ip":{"ip":"10.190.29.140"}
   },
   "trameCatalogue":{  
      "offres":[  
         {  
            "tarifs":[  
               {  
                  "prix":1.67,
                  "idTarif":"79",
                  "tva":"S",
                  "frequence":1
               }
            ],
            "details":[  
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":0,
                              "idTarif":"83",
                              "duree":24,
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_conso",
                        "reference":"mvno_conso"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":5,
                              "idTarif":"77",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"mvno_pack",
                        "reference":"mvno_pack"
                     }
                  ],
                  "modeFacturation":"DATE_ANNIVERSAIRE",
                  "label":"MVNO-SERVICE",
                  "type":"SERVICE",
                  "required":true,
                  "referenceSelection":"MVNO-SERVICE"
               },
               {  
                  "selectionType":"ONLY_ONE",
                  "choices":[  
                     {  
                        "tarifs":[  
                           {  
                              "prix":29.158333,
                              "idTarif":"81",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID_MOBILE",
                        "reference":"PACK-MVNO-POSTPAID-MOBILE"
                     },
                     {  
                        "tarifs":[  
                           {  
                              "prix":4,
                              "idTarif":"75",
                              "tva":"S",
                              "frequence":1
                           }
                        ],
                        "label":"PACK-MVNO-POSTPAID",
                        "reference":"PACK-MVNO-POSTPAID"
                     }
                  ],
                  "modeFacturation":"DATE_ANNIVERSAIRE",
                  "label":"MVNO-BIEN",
                  "type":"BIEN",
                  "required":true,
                  "referenceSelection":"MVNO-BIEN"
               }
            ],
            "modeFacturation":"DATE_ANNIVERSAIRE",
            "label":"MVNO",
            "reference":"MVNO",
            "secteur":"MVNO",
            "gamme":"MVNO"
         }
      ]
   },
   "parametres": [ 
       {
          "referenceChoix" : "mvno_conso",
          "cle": "Rio",
          "valeur": "${Properties#codeRio}"
       },
       {
          "referenceChoix" : "mvno_conso",
          "cle": "MSISDN",
          "valeur": "0612345678"
       }
   ],
   "clientInfo":{  
      "souscripteur":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "livraison":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      },
      "facturation":{  
         "clientId":"192112",
         "adresseId":"511708010",
         "tva":"00"
      }
   }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="73ea765c-8e2d-4e14-b54c-9e4ae1bcbde9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refDraft" value="${Properties#refDraft}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="Transfer value to refCommand" id="5c0965e7-820b-4557-ab4e-e87c83ad2900"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" useXQuery="false" entitize="false" transferChildNodes="false"><con:name>refCommand</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>2. Transform a draft to commande with params</con:sourceStep><con:sourcePath>declare namespace ns1='http://10.100.109.4/opale-api-1.2.x/draft/DRA-00000705/transformerEnCommande';
//ns1:Response[1]/ns1:reference[1]</con:sourcePath><con:targetType>refCommand</con:targetType><con:targetStep>Properties</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Check the draft is transferred to commande_Transfer successfully" id="16c7598b-24ce-453d-8c20-fd2b33d72d0b" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from commande where reference = "${Properties#refCommand}";</con:query><con:assertion type="Simple Contains" id="e2b9b4b2-780e-4374-8baa-718e1b63f393" name="reference of Commande must be1"><con:configuration><token>&lt;COMMANDE.REFERENCE>${Properties#refCommand}&lt;/COMMANDE.REFERENCE>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="2dd6df19-6a11-44ac-9ddd-094a84bf5348" name="reference of Draft transferred to Commande must be"><con:configuration><token>&lt;COMMANDE.REFERENCEDRAFT>${Properties#refDraft}&lt;/COMMANDE.REFERENCEDRAFT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Check the commandLigne is created successfully" id="89c7d6e5-24fc-4fc5-8e5b-373549ddd734" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commandeligne` where commandeId = (select id from commande where reference = "${Properties#refCommand}");</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Only one commandLigne is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="397c1681-3bd5-412b-a58a-61038d910f20" name="Reference Selection must be"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNE.REFERENCEOFFRE[1]</path><content>MVNO</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="Check the commandLigneDetail is created successfully" id="41f844af-16d0-49b2-9d6d-9b5222fd14dd" disabled="true"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commandelignedetail` where commandeLigneId = (SELECT id FROM `commandeligne` where commandeId = (select id from commande where reference = "${Properties#refCommand}"));</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Only one commandLigneDetail is created"><con:configuration><path>count(//Row)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4ee6e65a-6fbc-447d-8185-c4362807905c" name="Reference Choice must be"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNEDETAIL.REFERENCECHOIX[1]</path><content>mvno_conso</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name=">>>>>>>>>>>>>>>>>>>> Watch 1: Watch after commande is created >>>" id="19374bb5-e5f3-4245-9331-7d7bf93d7f8d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:testStep><con:testStep type="restrequest" name=">>> Watch 1 >>> INPUT >>> APP_commande_paye ----> OK, 0 billed commande" id="0dc99b9f-a201-48c2-8327-314b6f277712"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 1 >>> INPUT >>> APP_commande_paye ----> OK, 0 billed commande" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_commande_paye;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 0 billed commande"><con:configuration><token>commande payee | number of commandes which are billed one week ago = 0.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_commande_paye" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 1 >>> INPUT >>> APP_contrat_lie_a_une_commande ----> OK, 0 prepared contract" id="36efc4b8-ea70-445e-b167-d1f86bb377f4"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 1 >>> INPUT >>> APP_contrat_lie_a_une_commande ----> OK, 0 prepared contract" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_contrat_lie_a_une_commande;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 0 prepared contract"><con:configuration><token>contrat liee a une commande | number of contracts which are prepared by a commande one week ago = 0.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_contrat_lie_a_une_commande" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 1 >>> INPUT >>> APP_contrat_valide ----> OK, 0 validated contract" id="7e4f8317-5768-47c0-8abb-db7d0adfec08"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 1 >>> INPUT >>> APP_contrat_valide ----> OK, 0 validated contract" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_contrat_valide;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 0 validated contract"><con:configuration><token>contrat valide | number of contracts which are validated one week ago = 0.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_contrat_valide" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 1 >>> INPUT >>> APP_paiement_comptant ----> OK, 0 comptant payment" id="9a1aef5f-b78f-4d04-8350-e04fbfc21bd4"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 1 >>> INPUT >>> APP_paiement_comptant ----> OK, 0 comptant payment" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_paiement_comptant;OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 0 comptant payment"><con:configuration><token>paiement comptant | number of movements sent to Saphir one week ago = 0.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_paiement_comptant" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 1 >>> APP_commande_transforme_en_contrat ----> OK, 0 transformed contract over 0 billed commande" id="5ef5d3eb-09a3-46f0-b638-e600c81e1055"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 1 >>> APP_commande_transforme_en_contrat ----> OK, 0 transformed contract over 0 billed commande" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_commande_transforme_en_contrat;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 0 transformed commande over 0 billed commande"><con:configuration><token>commande transforme en contrat | number of transformed commandes is = 0 over the number of commandes which are billed one week ago = 0.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_commande_transforme_en_contrat" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 1 >>> APP_contrat_lie_a_une_commande_mais_sans_commande ----> OK, 0 transformed commande over 0 prepared contract" id="f20256d0-af28-418d-9e38-22d713774db4"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 1 >>> APP_contrat_lie_a_une_commande_mais_sans_commande ----> OK, 0 transformed commande over 0 prepared contract" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_contrat_lie_a_une_commande_mais_sans_commande;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 0 transformed commande over 0 prepared contract"><con:configuration><token>contrat liee a une commande mais sans commande | number of commandes transformed to contract = 0 over the number of prepared contracts from one week ago = 0.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_contrat_lie_a_une_commande_mais_sans_commande" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 1 >>> APP_contrat_livre ----> OK, 0 delivered contract over 0 validated contract" id="0b0d4a9b-18da-4eb7-9df6-a7380498886c"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 1 >>> APP_contrat_livre ----> OK, 0 delivered contract over 0 validated contract" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_contrat_livre;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 0 delivered contract over 0 validated contract"><con:configuration><token>contrat livre | number of delivered contract = 0 over the number of validated contracts from one week ago = 0.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_contrat_livre" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 1 >>> APP_contrat_facture ----> OK, 0 factured contract over 0 transformed contract" id="57aa28ea-7c11-4221-993d-d7c9ffe3525c"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 1 >>> APP_contrat_facture ----> OK, 0 factured contract over 0 transformed contract" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_contrat_facture;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 0 movement over 0 transformed contract"><con:configuration><token>contrat facture | number of movements is = 0 over the number of new contracts which are transformed one week ago = 0.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_contrat_facture" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 1 >>> APP_downpayment ----> OK, 0 sent movement over 0 comptant payment" id="b050cfbb-10a1-4b4e-9c7f-a60b87c440f7"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 1 >>> APP_downpayment ----> OK, 0 sent movement over 0 comptant payment" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_downpayment;OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 0 movements over 0 comptant payment"><con:configuration><token>downpayment | number of downpayment = 0 over the number movement from one week ago = 0.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_downpayment" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="-------------------------------- Step 2: Validate a commande ---" id="da149f9e-ab30-4728-aa37-6620b3a4b8ce"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:testStep><con:testStep type="restrequest" name="3. Pay COMPTANT for the created command" id="6ce3a570-e236-468b-ac43-0a3f82069fb4"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/comptant" methodName="paiementDirect" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Pay COMPTANT for the created command" id="ddd00455-7ff6-4a38-a8c8-37b4fe8ead16" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "100",
  "referenceModePaiement": "${Properties#referenceModePaiement}",
  "auteur": {
    "qui": "hientran",
    "canal": "SOPAUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/3b635d2f-62b5-4bc6-b46f-2db4f4abb636/paiement/comptant</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="741ea649-6317-42e5-83cb-afd29acf4b08" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c89010c5-1f78-4836-a685-93fbf8be299b" name="Contains"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="3. Pay RECURRENT for the created command" id="b4544a15-4a74-4b0c-9f85-e10ab3fc16f1" disabled="true"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/paiement/recurrent" methodName="paiementRecurrent" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="3. Pay RECURRENT for the created command" id="545e74d6-0556-4ef5-9f0a-6dec48e7831c" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "modePaiement": "CB",
  "montant": "0",
  "rum": "RRE4F5CB",
  "auteur": {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140"
    }
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/0dc51047-b21d-4527-931e-38718ad943f5/paiement/recurrent</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4acc6091-8c7b-46ce-9e88-7580c0be5815" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="424537d6-7796-420c-b390-113cb3b65481" name="Contains"><con:configuration><token>"reference":</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="groovy" name="Nbr Passes +1" id="c800e02e-0146-46f0-a23a-0cf9dd153c67">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait for initiation and synchronization of documents" id="b1bfd814-eda7-4b05-9468-b0e6b3d4e7ef"><con:settings/><con:config><delay>5000</delay></con:config></con:testStep><con:testStep type="jdbc" name="Get the document association to check" id="bc1dadad-4a20-49a2-bfd5-857f67997af7"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${Properties#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto wait for initiation of documents" id="f7ec2018-cfc4-4ccd-9fc1-3ead739308a3"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>(not(exists(//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()))
and 
${#TestCase#NbPassed} &lt; 5</con:expression><con:targetStep>Nbr Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="4. Synchronize document status manually" id="843d4bb3-46a6-454c-855c-9ba580d9ba0d"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/synchronizeDocument" methodName="synchronizerCommandeDocument" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="4. Synchronize document status manually" id="e141dcab-7f31-49fb-a4cc-9ef3729638c9" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "qui": "hientran",
  "canal": "SOAPUI",
  "ip": {
    "ip": "10.190.29.140",
    "ts": "1458274922"
  }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/605000013/synchronizeDocument</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Get the document status in documentassociation" id="4c17b196-a464-48f7-be87-eb3ce9d6eda1"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `documentassociation` where referenceCommande = "${Properties#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="Goto step synchronization of documents" id="bdd05bd5-2cbf-4152-83a9-60e2d3bb6ac4"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>Condition 1</con:name><con:type>XPATH</con:type><con:expression>//Results[1]/ResultSet[1]/Row[1]/DOCUMENTASSOCIATION.DOCUMENTE/text()="0"</con:expression><con:targetStep>4. Synchronize document status manually</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="restrequest" name="5. Init signature successfully" id="efac03aa-59e4-4249-9c92-2e864e26064e"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/initSignature" methodName="initCommandeSignature" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="5. Init signature successfully" id="0be774ee-de25-44ef-9f2d-36ec91c36057" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
    "qui": "hientranInitAfterSignature",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455411661000"
    }
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600060/initSignature</con:originalUri><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="6. Sign the created command_Successfully" id="c47132a8-a71b-4290-9b1d-a7cce4ab30e6"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/signer" methodName="signer" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="6. Sign the created command_Successfully" id="0e38ea65-ce34-4e5c-947e-41fd33afaf9a" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request>{
  "auteur": {
    "qui": "hientranSigned",
    "canal": "SOAPUI",
    "ip": {
      "ip": "10.190.29.140",
      "ts": "1455498061000"
    }
  },
  "mode": "OPEN_TRUST",
  "codeFolio": "9CBEBAWGE2"  
}</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/057600070/signer</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="724bc76c-aa0b-429e-a9a5-231a5b6df21c" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="11ee28a4-70fa-4278-a74f-6e45ce067298" name="Contains"><con:configuration><token>true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>refCommande</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="7. Validate the completed command" id="11ab8dc4-0ec3-4b6e-a724-aa644320a179"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/valider" methodName="validerCommande" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="7. Validate the completed command" id="fd3df4ae-ed4d-4d99-8166-d8ddb766ca04" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande/2d4ac7dc-458a-40e2-8693-204809c09c7b/valider</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="df33dddf-d215-4fdd-83f0-7357cb86410b" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="5dd82b82-ac09-4500-8e6c-592b4e331161" name="Contains"><con:configuration><token>"valide":true</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name=">>>>>>>>>>>>>>>>>>>> Watch 2: Watch after commande is validated (paid) >>>" id="c852cf2f-6c76-4190-ba45-8b44da1d21cb"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:testStep><con:testStep type="restrequest" name=">>> Watch 2 >>> INPUT >>> APP_commande_paye ----> OK, 1 billed commande" id="214f3f79-e5d5-497e-bdb5-c8c33d855cff"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 2 >>> INPUT >>> APP_commande_paye ----> OK, 1 billed commande" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_commande_paye;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 1 billed commande"><con:configuration><token>commande payee | number of commandes which are billed one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_commande_paye" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 2 >>> INPUT >>> APP_contrat_lie_a_une_commande ----> OK, 0 prepared contract" id="af83f382-07ed-4fb5-ac47-4a2b5c5e62cb"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 2 >>> INPUT >>> APP_contrat_lie_a_une_commande ----> OK, 0 prepared contract" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_contrat_lie_a_une_commande;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 0 prepared contract"><con:configuration><token>contrat liee a une commande | number of contracts which are prepared by a commande one week ago = 0.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_contrat_lie_a_une_commande" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 2 >>> INPUT >>> APP_contrat_valide ----> OK, 0 validated contract" id="8230f724-5c14-40a8-95d6-408ea75231f5"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 2 >>> INPUT >>> APP_contrat_valide ----> OK, 0 validated contract" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_contrat_valide;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 0 validated contract"><con:configuration><token>contrat valide | number of contracts which are validated one week ago = 0.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_contrat_valide" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 2 >>> INPUT >>> APP_paiement_comptant ----> OK, 1 comptant payment" id="c12b1f99-b3c4-4590-ad5f-a5c70183196f"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 2 >>> INPUT >>> APP_paiement_comptant ----> OK, 1 comptant payment" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_paiement_comptant;OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 1 comptant payment"><con:configuration><token>paiement comptant | number of movements sent to Saphir one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_paiement_comptant" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 2 >>> APP_commande_transforme_en_contrat ----> CRITICAL, 0 transformed contract over 1 billed commande" id="82d557c4-7d7f-4b91-9b92-ada80be0f2a4"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 2 >>> APP_commande_transforme_en_contrat ----> CRITICAL, 0 transformed contract over 1 billed commande" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is CRITICAL"><con:configuration><token>APP_commande_transforme_en_contrat;CRITICAL;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 0 transformed commande over 1 billed commande"><con:configuration><token>commande transforme en contrat | number of transformed commandes is = 0 over the number of commandes which are billed one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Details contain reference commande"><con:configuration><token>Details: [(${Properties#refCommand})]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_commande_transforme_en_contrat" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 2 >>> APP_contrat_lie_a_une_commande_mais_sans_commande ----> OK, 0 transformed commande over 0 prepared contract" id="dd702c00-faec-4f63-997b-b237a45acb1a"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 2 >>> APP_contrat_lie_a_une_commande_mais_sans_commande ----> OK, 0 transformed commande over 0 prepared contract" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_contrat_lie_a_une_commande_mais_sans_commande;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 0 transformed commande over 0 prepared contract"><con:configuration><token>contrat liee a une commande mais sans commande | number of commandes transformed to contract = 0 over the number of prepared contracts from one week ago = 0.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_contrat_lie_a_une_commande_mais_sans_commande" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 2 >>> APP_contrat_livre ----> OK, 0 delivered contract over 0 validated contract" id="e0cc0dfc-7921-4119-a5b4-c231fd757282"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 2 >>> APP_contrat_livre ----> OK, 0 delivered contract over 0 validated contract" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_contrat_livre;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 0 delivered contract over 0 validated contract"><con:configuration><token>contrat livre | number of delivered contract = 0 over the number of validated contracts from one week ago = 0.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_contrat_livre" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 2 >>> APP_contrat_facture ----> OK, 0 movement over 0 transformed contract" id="b5312480-a832-44b3-aa7c-f3fc756b8b07"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 2 >>> APP_contrat_facture ----> OK, 0 movement over 0 transformed contract" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_contrat_facture;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 0 movement over 0 transformed contract"><con:configuration><token>contrat facture | number of movements is = 0 over the number of new contracts which are transformed one week ago = 0.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_contrat_facture" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 2 >>> APP_downpayment ----> OK, 1 sent down payment over 1 comptant payment" id="e38e7fb8-667c-4937-8d88-9521faec3838"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 2 >>> APP_downpayment ----> OK, 1 sent down payment over 1 comptant payment" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is CRITICAL"><con:configuration><token>APP_downpayment;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 0 movements over 1 comptant payment"><con:configuration><token>downpayment | number of downpayment = 1 over the number movement from one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f6b52a35-c280-4840-8545-8768720604f7" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_downpayment" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="-------------------------------- Step 3: Transform to contract ---" id="b8281214-1d9b-453a-9fb7-1b06704a68ab"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:testStep><con:testStep type="jdbc" name="@@@ Delete all reductions of commande" id="4c40a3ab-d59a-45dc-aa22-68429699436d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>DELETE FROM `reduction` where referenceDraft = "${Properties#refCommand}";</con:query><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="8. Transform the created command to contract" id="5f165977-ec9e-4994-afee-a128df101bd3"><con:settings/><con:config service="/default/commande" resourcePath="/opale-api-1.2.x/commande/{refCommande}/transformerEnContrat" methodName="transformeEnContrat" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="8. Transform the created command to contract" id="38cfe906-f82c-4482-b7cd-eb621557d7f2" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.4:8080</con:endpoint><con:request> {
    "qui": "hientran",
    "canal": "SOAPUI",
    "ip": {
      "ts": "1456817611",
      "ip": "10.190.29.140"
    }
  }</con:request><con:originalUri>http://10.100.109.4/opale-api-1.2.x/commande//transformerEnContrat</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="16c5976e-4572-497a-9b28-28bc443317b9" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="Simple Contains" id="0c80b772-99b6-485b-b064-3a7e16006cf1" name="Response is not null"><con:configuration><token>"referencesContrats"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="refCommande" value="${Properties#refCommand}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Extract refContract from DB" id="8ab7877a-1c27-44a6-9477-2c472251cc7b"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select reference from contrat as c
left join elementcontractuel as ec on
ec.contratparent = c.id where 
ec.numeroCommande = "${Properties#refCommand}";
</con:query><con:assertion type="XQuery Match" name="exist refContrat" id="b78c8feb-fa25-464a-85d3-5bb06cf240ed"><con:configuration><path>exists(//*:CONTRAT.REFERENCE/text())</path><content>&lt;xml-fragment>true&lt;/xml-fragment></content><allowWildcards>false</allowWildcards></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name="Transfer refContract" id="458b6470-b2e0-47e7-84ae-03bc2fc4c2c9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refContract</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Extract refContract from DB</con:sourceStep><con:sourcePath>//*:Row/*:CONTRAT.REFERENCE/text()</con:sourcePath><con:targetType>refContract</con:targetType><con:targetStep>Properties</con:targetStep><con:targetPath/><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>refContractGlobal</con:name><con:sourceType>ResponseAsXml</con:sourceType><con:sourceStep>Extract refContract from DB</con:sourceStep><con:sourcePath>//Results[1]/ResultSet[1]/Row[1]/CONTRAT.REFERENCE[1]</con:sourcePath><con:targetType>refContractGlobal</con:targetType><con:targetStep>#TestCase#</con:targetStep><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="jdbc" name="Get command to check info after transformation" id="1c50613d-27bc-4768-8b9a-98ff610553cf"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>SELECT * FROM `commandeligne` where commandeId = (select id from commande where reference = "${Properties#refCommand}");</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Only one commandLigne is created"><con:configuration><path>count(//Row)</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="397c1681-3bd5-412b-a58a-61038d910f20" name="Reference Selection must be MVNO"><con:configuration><path>//Results[1]/ResultSet[1]/Row[1]/COMMANDELIGNE.REFERENCEOFFRE[1]</path><content>MVNO</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="2981d5b6-2242-422b-a759-e4a0d80547e3" name="This new command must be associated to the old contract"><con:configuration><token>&lt;COMMANDELIGNE.REFERENCECONTRAT>${Properties#refContract}&lt;/COMMANDELIGNE.REFERENCECONTRAT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name="Get the created contract to check infos" id="36127ee5-9d5f-4637-b857-5635a7e2f4ac"><con:settings/><con:config service="/default/contrat" resourcePath="/contrat-core-1.2.x/contrat/{referenceContrat}" methodName="getContratByReference" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Get the created contract to check infos" id="eaf5b1b1-0abc-4297-8b4a-881ce6c43290" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.4/contrat-core-1.1.x/contrat/54881a48-6d6d-4649-9800-aee05fcafb5e</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="4f9711f9-cbb4-4cb4-b088-9290b69d59c1" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:assertion type="XPath Match" id="60b410ca-1523-4989-95b8-c9f5a1ae5e12" name="There are three sub contracts"><con:configuration><path>count(//*:sousContrats/*:e)</path><content>3</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8a60a8a0-504f-4928-bc9e-e2848e89a19b" name="Sub main contract is MVNO"><con:configuration><token>"titre":"MVNO"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8a60a8a0-504f-4928-bc9e-e2848e89a19b" name="Sub contract 1 is mvno_conso"><con:configuration><token>"titre":"mvno_conso"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8a60a8a0-504f-4928-bc9e-e2848e89a19b" name="Sub contract 2 is PACK-MVNO-POSTPAID_MOBILE"><con:configuration><token>"titre":"PACK-MVNO-POSTPAID_MOBILE"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="referenceContrat" value="${Properties#refContract}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Get the params of contract via referenceElementLivraison" id="a9c70e6c-c90f-4b2a-bd6f-945a97167c4a"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from parametre where referenceElementLivraison like '${Properties#refContract}%';</con:query><con:assertion type="XPath Match" id="24978ed2-03fc-40b8-99a0-0c2fdb0c24c5" name="Two commandLigne is created"><con:configuration><path>count(//Row)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name=">>>>>>>>>>>>>>>>>>>> Watch 3: Watch after commande is transformed >>>" id="3cb671a0-87b3-46f1-935a-ee48b7ec45da"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:testStep><con:testStep type="restrequest" name=">>> Watch 3 >>> INPUT >>> APP_commande_paye ----> OK, 1 billed commande" id="9d935e72-44d1-4cb2-9031-dd8f9283ae2d"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 3 >>> INPUT >>> APP_commande_paye ----> OK, 1 billed commande" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_commande_paye;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 1 billed commande"><con:configuration><token>commande payee | number of commandes which are billed one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_commande_paye" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 3 >>> INPUT >>> APP_contrat_lie_a_une_commande ----> OK, 1 prepared contract" id="e3de1d68-6731-47d9-81e9-b79d5fd017e1"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 3 >>> INPUT >>> APP_contrat_lie_a_une_commande ----> OK, 1 prepared contract" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_contrat_lie_a_une_commande;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 1 prepared contract"><con:configuration><token>contrat liee a une commande | number of contracts which are prepared by a commande one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_contrat_lie_a_une_commande" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 3 >>> INPUT >>> APP_contrat_valide ----> OK, 1 validated contract" id="292d371f-8786-4d71-b579-d1f60c00982e"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 3 >>> INPUT >>> APP_contrat_valide ----> OK, 1 validated contract" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_contrat_valide;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 1 validated contract"><con:configuration><token>contrat valide | number of contracts which are validated one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_contrat_valide" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 3 >>> INPUT >>> APP_paiement_comptant ----> OK, 1 comptant payment" id="bfcf65f7-fd1a-4ce2-92ae-fbaef9e4fa4f"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 3 >>> INPUT >>> APP_paiement_comptant ----> OK, 1 comptant payment" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_paiement_comptant;OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 1 comptant payment"><con:configuration><token>paiement comptant | number of movements sent to Saphir one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_paiement_comptant" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 3 >>> APP_commande_transforme_en_contrat ----> OK, 1 transformed contract over 1 billed commande" id="4c93ee7a-fc95-4188-8c37-f6f125c813f5"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 3 >>> APP_commande_transforme_en_contrat ----> OK, 1 transformed contract over 1 billed commande" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_commande_transforme_en_contrat;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 1 transformed commande over 1 billed commande"><con:configuration><token>commande transforme en contrat | number of transformed commandes is = 1 over the number of commandes which are billed one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_commande_transforme_en_contrat" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 3 >>> APP_contrat_lie_a_une_commande_mais_sans_commande ----> OK, 1 transformed commande over 1 prepared contract" id="d7e768ff-6deb-4595-b175-ffa3d5cf6755"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 3 >>> APP_contrat_lie_a_une_commande_mais_sans_commande ----> OK, 1 transformed commande over 1 prepared contract" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_contrat_lie_a_une_commande_mais_sans_commande;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 1 transformed commande over 1 prepared contract"><con:configuration><token>contrat liee a une commande mais sans commande | number of commandes transformed to contract = 1 over the number of prepared contracts from one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_contrat_lie_a_une_commande_mais_sans_commande" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 3 >>> APP_contrat_livre ----> CRITICAL, 0 delivered contract over 1 validated contract" id="7f0fc9f6-b04f-4deb-b1c5-a350031ec1dd"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 3 >>> APP_contrat_livre ----> CRITICAL, 0 delivered contract over 1 validated contract" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is CRITICAL"><con:configuration><token>APP_contrat_livre;CRITICAL;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 0 delivered contract over 1 validated contract"><con:configuration><token>contrat livre | number of delivered contract = 0 over the number of validated contracts from one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Details contain referenceContract"><con:configuration><token>Details: [(${Properties#refContract})]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_contrat_livre" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 3 >>> APP_contrat_facture ----> CRITICAL, 0 movement over 1 transformed contract'" id="4ada8f75-2f75-475f-a430-8dd725ff36d3"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 3 >>> APP_contrat_facture ----> CRITICAL, 0 movement over 1 transformed contract'" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is CRITICAL"><con:configuration><token>APP_contrat_facture;CRITICAL;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 0 movements over 1 transformed contract"><con:configuration><token>contrat facture | number of movements is = 0 over the number of new contracts which are transformed one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Details contains referenceCommande"><con:configuration><token>Details: [(${Properties#refContract})]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_contrat_facture" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 3 >>> APP_downpayment ----> OK, 1 sent down payment over 1 comptant payment" id="0af0c572-ac1f-4e07-b54c-160ddcdcd80d"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 3 >>> APP_downpayment ----> OK, 1 sent down payment over 1 comptant payment" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is CRITICAL"><con:configuration><token>APP_downpayment;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 0 movements over 1 comptant payment"><con:configuration><token>downpayment | number of downpayment = 1 over the number movement from one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f6b52a35-c280-4840-8545-8768720604f7" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_downpayment" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="-------------------------------- Step 4: Delivery bonpreparation ---" id="b9fed89a-2c78-4257-81dd-8aac658c3fc9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:testStep><con:testStep type="restrequest" name="9. Marquer livre" id="3ddac53f-3f61-48a0-9282-7d9b17579e67"><con:settings/><con:config service="/default/livraison" resourcePath="/livraison-core-1.1.x/livraison/{referenceBPGlobal}/marquerLivre" methodName="marquerLivre" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="9. Marquer livre" id="8b36ed31-096d-4cf1-9332-879f6a3a4956" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.109.6:8080</con:endpoint><con:request/><con:originalUri>http://10.100.109.6/livraison-core-1.1.x/livraison/00104130/marquerLivre</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="0a49e77e-439f-4fd4-a89c-9b0a7718a1fe" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="referenceBPGlobal" value="${Properties#refContract}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="jdbc" name="Verify Element Livraison 1&amp;2" id="0f4083e3-6c40-42cc-89f2-d8377efd427d"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from elementlivraison  
where bonPreparationParent=(select id from 
bonpreparation where 
reference="${Properties#refContract}")</con:query><con:assertion type="Simple Contains" name="ELEMENTLIVRAISON.TYPEBONPREPARATION=LIVRAISON" id="943f514d-b5f2-4b83-9d5f-23dbcf10644b"><con:configuration><token>&lt;ELEMENTLIVRAISON.TYPEBONPREPARATION>LIVRAISON&lt;/ELEMENTLIVRAISON.TYPEBONPREPARATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Livraison 2=PACK-MVNO-POSTPAID-MOBILE" id="f27c70e7-b01a-4554-a739-f68ef919e8bd"><con:configuration><token>&lt;ELEMENTLIVRAISON.REFERENCEPRODUIT>PACK-MVNO-POSTPAID-MOBILE&lt;/ELEMENTLIVRAISON.REFERENCEPRODUIT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" name="Livraison 1=MVNO_CONSO" id="f27c70e7-b01a-4554-a739-f68ef919e8bd"><con:configuration><token>&lt;ELEMENTLIVRAISON.REFERENCEPRODUIT>mvno_conso&lt;/ELEMENTLIVRAISON.REFERENCEPRODUIT></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="5824765f-c363-45af-99ff-618f43241ab2" name="XPath Match - 2 EL"><con:configuration><path>count(//Results/ResultSet/Row)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="verifyLivraisonBP" id="2be19640-68ff-444c-a261-8112b72e1f53"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from bonpreparation  
where reference="${Properties#refContract}"</con:query><con:assertion type="XPath Match" name="BONPREPARATION.DATEDEBUTPREPARATION is not null" id="7d281680-e994-44d2-a58f-a525ee4f20c8"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATEDEBUTPREPARATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" name="BONPREPARATION.TYPEBONPREPARATION=LIVRAISON" id="afe34ace-a376-49bd-bc60-353c3be4fba2"><con:configuration><token>&lt;BONPREPARATION.TYPEBONPREPARATION>LIVRAISON&lt;/BONPREPARATION.TYPEBONPREPARATION></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" name="BONPREPARATION.DATEINITIATION not null" id="fcb43f55-d071-4bde-9763-1d1dc1fb5987"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATEINITIATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="BONPREPARATION.DATEPREPARATION not null" id="0b5ff72b-bfd8-44f8-a4e5-b34f44e6ab94"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATEPREPARATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="BONPREPARATION.DATELIVRAISONTERMINE not null" id="78c3a558-4473-42c7-869a-acf71bd00303"><con:configuration><path>exists(//ResultSet/Row/BONPREPARATION.DATELIVRAISONTERMINE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="groovy" name="Set Nb Passes = 0 again" id="d8e11351-14b6-40b5-9827-b5541e404009">
        <con:settings/>
        <con:config><script>int passe = 0 
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="groovy" name="Nb Passes +1" id="d228016b-3d41-4d8d-a5dc-80e753d8fd2a">
        <con:settings/>
        <con:config><script>int passe = testRunner.testCase.getPropertyValue("NbPassed").toInteger() 
passe = passe + 1
testRunner.testCase.setPropertyValue("NbPassed", passe.toString())</script></con:config>
      </con:testStep><con:testStep type="delay" name="Wait facturation" id="263502a5-0137-4323-b115-fec9fff5f26d"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="jdbc" name="test date fin duree" id="5c764de5-a713-4516-addf-33ab5f2020a7"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from elementcontractuel where 
contratParent =(select id from contrat where 
reference ="${Properties#refContract}")
</con:query><con:properties/></con:config></con:testStep><con:testStep type="goto" name="got to wait facturation" id="8f7be6ee-0d39-4d77-a3ba-c0e2ec2a07a3"><con:settings/><con:config xsi:type="con:GotoStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:condition><con:name>wait livraison</con:name><con:type>XPATH</con:type><con:expression>not(exists(//Results/ResultSet/Row/ELEMENTCONTRACTUEL.DATEFINDUREE/text())) 
and 
${#TestCase#NbPassed} &lt; 13</con:expression><con:targetStep>Nb Passes +1</con:targetStep></con:condition></con:config></con:testStep><con:testStep type="jdbc" name="Verify the end date billing in sub contract" id="520a3c77-a464-424e-afb5-3a942e208500"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/topaze_qualif?user=test&amp;password=test</con:connectionString><con:query>select * from elementcontractuel where 
contratParent =(select id from contrat where 
reference ="${Properties#refContract}") and numeroCommande = '${Properties#refCommand}';
</con:query><con:assertion type="XPath Match" name="date debut facturation" id="6c9a603f-f78d-4ca5-9b66-a3ead7a31d75"><con:configuration><path>exists(//ResultSet/Row/ELEMENTCONTRACTUEL.DATEDEBUTFACTURATION/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" name="End date of facture 1 is not null" id="6b275a1c-52ba-4be3-b482-72b7df3d795e"><con:configuration><path>exists(//ResultSet/Row/ELEMENTCONTRACTUEL.DATEDERNIEREFACTURE/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="jdbc" name="testMovementAvantRenouvellement" id="e29c1e4a-d746-4e1c-9331-e453e7ded007"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.105.41.:3306/test_saphir?user=test&amp;password=test</con:connectionString><con:query>select * from movement 
where
billinggroup = "${Properties#refCommand}"</con:query><con:assertion type="XPath Match" name="XPath Match" id="9ddf2a66-9c11-4445-8db1-bf0cd230ed6f"><con:configuration><path>exists(//ResultSet/Row/MOVEMENT.ID/text())</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name=">>>>>>>>>>>>>>>>>>>> Watch 4: Watch after contract is factured >>>" id="189cff59-0a9b-42cd-a418-95ca06a9472f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:testStep><con:testStep type="restrequest" name=">>> Watch 4 >>> INPUT >>> APP_commande_paye ----> OK, 1 billed commande" id="c3e33976-b96e-40ba-812c-076ac1d55b18"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 4 >>> INPUT >>> APP_commande_paye ----> OK, 1 billed commande" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_commande_paye;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 1 billed commande"><con:configuration><token>commande payee | number of commandes which are billed one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_commande_paye" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 4 >>> INPUT >>> APP_contrat_lie_a_une_commande ----> OK, 1 prepared contract" id="284af83f-97aa-4873-9ca7-ff5f6a8e2b95"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 4 >>> INPUT >>> APP_contrat_lie_a_une_commande ----> OK, 1 prepared contract" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_contrat_lie_a_une_commande;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 1 prepared contract"><con:configuration><token>contrat liee a une commande | number of contracts which are prepared by a commande one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_contrat_lie_a_une_commande" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 4 >>> INPUT >>> APP_contrat_valide ----> OK, 1 validated contract" id="44884c9b-077a-499f-9a9e-b6d50e9ead10"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 4 >>> INPUT >>> APP_contrat_valide ----> OK, 1 validated contract" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_contrat_valide;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 1 validated contract"><con:configuration><token>contrat valide | number of contracts which are validated one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_contrat_valide" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 4 >>> INPUT >>> APP_paiement_comptant ----> OK, 1 comptant payment" id="de952391-1393-49d6-87af-e6e48e1d704a"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 4 >>> INPUT >>> APP_paiement_comptant ----> OK, 1 comptant payment" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_paiement_comptant;OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 1 comptant payment"><con:configuration><token>paiement comptant | number of movements sent to Saphir one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_paiement_comptant" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 4 >>> APP_commande_transforme_en_contrat ----> OK, 1 transformed contract over 1 billed commande" id="2c5ed105-2868-40f3-83dc-dce977dee6e5"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 4 >>> APP_commande_transforme_en_contrat ----> OK, 1 transformed contract over 1 billed commande" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_commande_transforme_en_contrat;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 1 transformed commande over 1 billed commande"><con:configuration><token>commande transforme en contrat | number of transformed commandes is = 1 over the number of commandes which are billed one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_commande_transforme_en_contrat" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 4 >>> APP_contrat_lie_a_une_commande_mais_sans_commande ----> OK, 1 transformed commande over 1 prepared contract" id="75840b5e-7342-40fe-b31c-03917ded49d9"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 4 >>> APP_contrat_lie_a_une_commande_mais_sans_commande ----> OK, 1 transformed commande over 1 prepared contract" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_contrat_lie_a_une_commande_mais_sans_commande;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 1 transformed commande over 1 prepared contract"><con:configuration><token>contrat liee a une commande mais sans commande | number of commandes transformed to contract = 1 over the number of prepared contracts from one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_contrat_lie_a_une_commande_mais_sans_commande" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 4 >>> APP_contrat_livre ----> OK, 1 delivered contract over 1 validated contract" id="9a79abf9-649c-4a14-8b03-b8aec0182f90"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 4 >>> APP_contrat_livre ----> OK, 1 delivered contract over 1 validated contract" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_contrat_livre;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 1 delivered contract over 1 validated contract"><con:configuration><token>contrat livre | number of delivered contract = 1 over the number of validated contracts from one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_contrat_livre" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 4 >>> APP_contrat_facture ----> OK, 3 movements over 1 transformed contract" id="fa947e71-7328-417e-86e9-42f615297a3e"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 4 >>> APP_contrat_facture ----> OK, 3 movements over 1 transformed contract" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_contrat_facture;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 3 movements over 1 transformed contract"><con:configuration><token>contrat facture | number of movements is = 3 over the number of new contracts which are transformed one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_contrat_facture" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 4 >>> APP_downpayment ----> OK, 1 sent movement over 1 comptant payment" id="09bbb6b3-d322-4d60-ba4b-54869509c09b"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 4 >>> APP_downpayment ----> OK, 1 sent movement over 1 comptant payment" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is CRITICAL"><con:configuration><token>APP_downpayment;OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 1 down payment over 1 comptant payment"><con:configuration><token>downpayment | number of downpayment = 1 over the number movement from one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Details contain the referencePaiemnt and modePaiement"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_downpayment" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="-------------------------------- Step 5: Update mockReferenceCommande in contract ---" id="e4def733-3c0f-434f-af94-f3334db984d3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:testStep><con:testStep type="jdbc" name="@@@ Update mockReferenceContract to commandeligne" id="96af7552-db69-473e-858a-6cd9ac66f4e4"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:connectionString><con:query>update commandeligne 
set referenceContrat = 'mockReferenceContract'
where referenceContrat = "${Properties#refContract}";</con:query><con:assertion type="Simple Contains" id="646002de-f07b-4bdc-938d-6f56e82dc1a9" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="transfer" name=">>>>>>>>>>>>>>>>>>>> Watch 5: Watch after update to mockReferenceCommande >>>" id="b39b9c4e-78ac-4adc-a876-602f8b1def60"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:testStep><con:testStep type="restrequest" name=">>> Watch 5 >>> INPUT >>> APP_contrat_lie_a_une_commande ----> OK, 1 prepared contract" id="269ff109-ee62-47c0-8af2-5bd4d3241eca"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 5 >>> INPUT >>> APP_contrat_lie_a_une_commande ----> OK, 1 prepared contract" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_contrat_lie_a_une_commande;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 1 prepared contract"><con:configuration><token>contrat liee a une commande | number of contracts which are prepared by a commande one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_contrat_lie_a_une_commande" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 5 >>> INPUT >>> APP_contrat_valide ----> OK, 1 validated contract" id="3c12ebd4-7ddf-4edf-b421-e61dc057b429"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 5 >>> INPUT >>> APP_contrat_valide ----> OK, 1 validated contract" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_contrat_valide;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 1 validated contract"><con:configuration><token>contrat valide | number of contracts which are validated one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_contrat_valide" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 5 >>> APP_commande_transforme_en_contrat ----> OK, 1 transformed contract over 1 billed commande" id="f0b8a179-24f2-46c7-8060-f7e4bb2a6381"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 5 >>> APP_commande_transforme_en_contrat ----> OK, 1 transformed contract over 1 billed commande" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_commande_transforme_en_contrat;OK;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 1 transformed commande over 1 billed commande"><con:configuration><token>commande transforme en contrat | number of transformed commandes is = 1 over the number of commandes which are billed one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_commande_transforme_en_contrat" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 5 >>> APP_contrat_lie_a_une_commande_mais_sans_commande ----> CRITICAL, 0 transformed commande over 1 prepared contract" id="1104cf34-6e1e-4551-a6e4-5da2d5d77d3e"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 5 >>> APP_contrat_lie_a_une_commande_mais_sans_commande ----> CRITICAL, 0 transformed commande over 1 prepared contract" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is WARNING"><con:configuration><token>APP_contrat_lie_a_une_commande_mais_sans_commande;WARNING;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 0 transformed commande over 1 prepared contract"><con:configuration><token>contrat liee a une commande mais sans commande | number of commandes transformed to contract = 0 over the number of prepared contracts from one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Details contain referenceContract"><con:configuration><token>Details: [(${Properties#refContract})]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_contrat_lie_a_une_commande_mais_sans_commande" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="-------------------------------- Step 6: Update mockReferencePaiement in down payment ---" id="83729c3a-d72a-4052-b761-f54dd686e6ea"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/></con:testStep><con:testStep type="jdbc" name="@@@ Update mockReferencePaiement in down payment" id="9a2dfcce-88cd-46f7-b687-eac271acb669"><con:settings/><con:config xsi:type="con:JdbcRequestTestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dbConnectionName xsi:nil="true"/><con:driver>com.mysql.jdbc.Driver</con:driver><con:connectionString>jdbc:mysql://10.100.105.41.:3306/test_saphir?user=test&amp;password=test</con:connectionString><con:query>update down_payment 
set paymentId = 'mockReferencePaiment'
where paymentId = "${Properties#referenceModePaiement}";</con:query><con:assertion type="Simple Contains" id="646002de-f07b-4bdc-938d-6f56e82dc1a9" name="Contains"><con:configuration><token>&lt;UpdateCount>1&lt;/UpdateCount></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:properties/></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 6 >>> INPUT >>> APP_paiement_comptant ----> OK, 1 comptant payment" id="83b0626b-338b-4e55-a01a-70416b89933b"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 6 >>> INPUT >>> APP_paiement_comptant ----> OK, 1 comptant payment" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is OK"><con:configuration><token>APP_paiement_comptant;OK</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 1 comptant payment"><con:configuration><token>paiement comptant | number of movements sent to Saphir one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Nothing in details"><con:configuration><token>Details: []</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_paiement_comptant" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name=">>> Watch 6 >>> APP_downpayment ----> CRITICAL, 0 sent movement over 1 comptant payment" id="c3efede0-49a9-4f2e-a957-47ce0f8ba417"><con:settings/><con:config service="Application watcher" resourcePath="/appwatch-ws-1.0.x/process/watchRule/{ruleCode}" methodName="com.nordnet.aw.controller.RuleExecutionController.executeRuleByCode - executeRuleByCode" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name=">>> Watch 6 >>> APP_downpayment ----> CRITICAL, 0 sent movement over 1 comptant payment" id="0dde29a8-1e36-4176-825d-b74fce3da805" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://10.100.105.41:8080</con:endpoint><con:request/><con:originalUri>http://10.190.29.131/appwatch-ws-1.0.x/process/watchRule/test</con:originalUri><con:assertion type="Simple Contains" id="652ae0c5-23fb-423a-b446-e8c5fe65fc53" name="Status is CRITICAL"><con:configuration><token>APP_downpayment;CRITICAL;</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c8cbb94c-6eee-48eb-9c21-c77e937944b7" name="Description with 0 down payment over 1 comptant payment"><con:configuration><token>downpayment | number of downpayment = 0 over the number movement from one week ago = 1.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7b102293-37a7-4e49-918c-e4a6f268947c" name="Details contain the referencePaiemnt and modePaiement"><con:configuration><token>Details: [(${Properties#referenceModePaiement},CB)]</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="ruleCode" value="APP_downpayment" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>ruleCode</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties><con:property><con:name>refContractGlobal</con:name><con:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">00104389</con:value></con:property><con:property><con:name>NbPassed</con:name><con:value>1</con:value></con:property></con:properties><con:reportParameters/><con:breakPoints><con:testStepId>d8610e6c-678a-47ae-9539-b1d9f17fcdfc</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>78ec16b0-f36c-4e65-ae99-0c5d68b919cf</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8664857e-9e24-4222-bb38-e9014aa46106</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>60bc0bb1-7f78-4a8e-ac13-90c6e64a83ba</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>f9e00c01-e159-40fb-bf57-b278ba2b8552</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0ae0bd34-216a-44b4-a977-dc2a5b57d9bb</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>346dbce2-5f32-4b4d-8035-cf4db0a9a404</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>dbaeab91-6a1e-4e92-847c-83a3a16bb084</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b8cfd541-b18d-4b31-84d0-43235b91bf76</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>736c79a6-461c-42a5-ad56-c997bee99ebe</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>0aea24c2-0ea2-4536-b140-87ca45a7ef31</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>5831b52d-089f-4a00-a9a1-701ecdc104b8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>31d87cc9-8597-4d6d-ad12-a8e20d49c437</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>19e833d1-dbac-4836-89cc-b16031d0896a</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>1b21ac6e-2a8a-42ca-ab60-47d0e5f41bb1</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8fc489d2-1de7-4485-880d-8d284e8c235e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>115c48c3-450c-41fc-81de-a02f0b4d70ff</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>296f002a-ddd7-4d9f-9b7a-f1a11d2ea325</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>e61cc35a-8b64-4724-982b-4a7b08c9f1e9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>82641e23-4fc1-4bfc-807f-e31d08cd4ad8</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>fc1ed937-0f3f-4383-b50f-456704a7fe46</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>eaea4faf-803a-4f00-a6ac-74d3370fd30b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints></con:testCase><con:properties/></con:testSuite><con:endpointStrategy xsi:type="con:DefaultEndpointStrategy" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:endpoint mode="COMPLEMENT" username="pentalog_vietnam" password="fa49891b783d3fc022009da14f74bd64" wssType="PasswordText">http://10.100.112.11:8080/mandatelibrary-ws-1.0.x/services/MandateLibraryWS</con:endpoint><con:endpoint mode="COMPLEMENT" username="topaze" password="1e2cec460349e1218f534ce337042895" wssType="PasswordText">http://10.100.119.11:8080/promos-management-ws-1.0.x/services/promo</con:endpoint><con:endpoint mode="COMPLEMENT" username="BO_ORANGE_NET_COMM" password="2cf8714a34ded6cd13c4a8b2b25e01d5" wssType="PasswordText">http://10.100.119.11:8080/net-comm-ws-1.0.x/services/netCommMail</con:endpoint></con:endpointStrategy><con:requirements/><con:properties><con:property><con:name>mysqlConnection_topaze_qualif</con:name><con:value>jdbc:mysql://10.100.109.35:3306/opale_qualif?user=test&amp;password=test</con:value></con:property></con:properties><con:wssContainer/><con:databaseConnectionContainer/><con:oAuth2ProfileContainer/><con:reporting><con:xmlTemplates/><con:parameters/></con:reporting><con:sensitiveInformation/><con:authRepository/><con:tags/></con:soapui-project>